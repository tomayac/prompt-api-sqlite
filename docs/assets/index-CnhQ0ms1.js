var Sr=Object.defineProperty;var Yt=x=>{throw TypeError(x)};var xr=(x,L,G)=>L in x?Sr(x,L,{enumerable:!0,configurable:!0,writable:!0,value:G}):x[L]=G;var Zt=(x,L,G)=>xr(x,typeof L!="symbol"?L+"":L,G),kt=(x,L,G)=>L.has(x)||Yt("Cannot "+G);var re=(x,L,G)=>(kt(x,L,"read from private field"),G?G.call(x):L.get(x)),Re=(x,L,G)=>L.has(x)?Yt("Cannot add the same private member more than once"):L instanceof WeakSet?L.add(x):L.set(x,G),je=(x,L,G,i)=>(kt(x,L,"write to private field"),i?i.call(x,G):L.set(x,G),G),mt=(x,L,G)=>(kt(x,L,"access private method"),G);(function(){const L=document.createElement("link").relList;if(L&&L.supports&&L.supports("modulepreload"))return;for(const te of document.querySelectorAll('link[rel="modulepreload"]'))i(te);new MutationObserver(te=>{for(const se of te)if(se.type==="childList")for(const me of se.addedNodes)me.tagName==="LINK"&&me.rel==="modulepreload"&&i(me)}).observe(document,{childList:!0,subtree:!0});function G(te){const se={};return te.integrity&&(se.integrity=te.integrity),te.referrerPolicy&&(se.referrerPolicy=te.referrerPolicy),te.crossOrigin==="use-credentials"?se.credentials="include":te.crossOrigin==="anonymous"?se.credentials="omit":se.credentials="same-origin",se}function i(te){if(te.ep)return;te.ep=!0;const se=G(te);fetch(te.href,se)}})();var en=(()=>{var x=import.meta.url;return function(L={}){var G,i=L,te,se,me=new Promise((e,t)=>{te=e,se=t}),ve=typeof window=="object",ge=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";const fe=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,fe.debugModule("globalThis.location =",globalThis.location);var Ie=Object.assign({},i),X="./this.program",_e="";function xe(e){return i.locateFile?i.locateFile(e,_e):_e+e}var ke,Oe;(ve||ge)&&(ge?_e=self.location.href:typeof document<"u"&&document.currentScript&&(_e=document.currentScript.src),x&&(_e=x),_e.startsWith("blob:")?_e="":_e=_e.substr(0,_e.replace(/[?#].*/,"").lastIndexOf("/")+1),ge&&(Oe=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),ke=e=>fetch(e,{credentials:"same-origin"}).then(t=>t.ok?t.arrayBuffer():Promise.reject(new Error(t.status+" : "+t.url))));var De=i.print||console.log.bind(console),Te=i.printErr||console.error.bind(console);Object.assign(i,Ie),Ie=null,i.arguments&&i.arguments,i.thisProgram&&(X=i.thisProgram);var _t=i.wasmBinary,Ge,Lt=!1,Ce,Xe,nt,qe,Fe,ze;function Ct(){var e=Ge.buffer;i.HEAP8=Ce=new Int8Array(e),i.HEAP16=nt=new Int16Array(e),i.HEAPU8=Xe=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAP32=qe=new Int32Array(e),i.HEAPU32=Fe=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=new Float64Array(e),i.HEAP64=ze=new BigInt64Array(e),i.HEAPU64=new BigUint64Array(e)}if(i.wasmMemory)Ge=i.wasmMemory;else{var sn=i.INITIAL_MEMORY||16777216;Ge=new WebAssembly.Memory({initial:sn/65536,maximum:32768})}Ct();var Rt=[],Dt=[],Nt=[];function on(){var e=i.preRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(cn)),Et(Rt)}function an(){!i.noFSInit&&!l.initialized&&l.init(),l.ignorePermissions=!1,Et(Dt)}function ln(){var e=i.postRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(un)),Et(Nt)}function cn(e){Rt.unshift(e)}function _n(e){Dt.unshift(e)}function un(e){Nt.unshift(e)}var Ke=0,rt=null;function Zr(e){return e}function qt(e){var t;Ke++,(t=i.monitorRunDependencies)==null||t.call(i,Ke)}function ut(e){var n;if(Ke--,(n=i.monitorRunDependencies)==null||n.call(i,Ke),Ke==0&&rt){var t=rt;rt=null,t()}}function bt(e){var n;(n=i.onAbort)==null||n.call(i,e),e="Aborted("+e+")",Te(e),Lt=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw se(t),t}var fn="data:application/octet-stream;base64,",Mt=e=>e.startsWith(fn);function dn(){if(i.locateFile){var e="sqlite3.wasm";return Mt(e)?e:xe(e)}return new URL("/prompt-api-sqlite/assets/sqlite3-cHTLJfQJ.wasm",import.meta.url).href}var wt;function jt(e){if(e==wt&&_t)return new Uint8Array(_t);if(Oe)return Oe(e);throw"both async and sync fetching of the wasm failed"}function pn(e){return _t?Promise.resolve().then(()=>jt(e)):ke(e).then(t=>new Uint8Array(t),()=>jt(e))}function Ut(e,t,n){return pn(e).then(r=>WebAssembly.instantiate(r,t)).then(n,r=>{Te(`failed to asynchronously prepare wasm: ${r}`),bt(r)})}function mn(e,t,n,r){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!Mt(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(s=>{var o=WebAssembly.instantiateStreaming(s,n);return o.then(r,function(d){return Te(`wasm streaming compile failed: ${d}`),Te("falling back to ArrayBuffer instantiation"),Ut(t,n,r)})}):Ut(t,n,r)}function hn(){return{env:$t,wasi_snapshot_preview1:$t}}function gn(){var e=hn();function t(r,s){return m=r.exports,_n(m.__wasm_call_ctors),ut(),m}qt();function n(r){t(r.instance)}if(i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(r){Te(`Module.instantiateWasm callback failed with error: ${r}`),se(r)}return wt??(wt=dn()),mn(_t,wt,e,n).catch(se),{}}var Et=e=>{e.forEach(t=>t(i))};i.noExitRuntime;var Se={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:(e,t)=>{for(var n=0,r=e.length-1;r>=0;r--){var s=e[r];s==="."?e.splice(r,1):s===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:e=>{var t=Se.isAbs(e),n=e.substr(-1)==="/";return e=Se.normalizeArray(e.split("/").filter(r=>!!r),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=Se.splitPath(e),n=t[0],r=t[1];return!n&&!r?".":(r&&(r=r.substr(0,r.length-1)),n+r)},basename:e=>{if(e==="/")return"/";e=Se.normalize(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},join:(...e)=>Se.normalize(e.join("/")),join2:(e,t)=>Se.normalize(e+"/"+t)},yn=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);bt("initRandomDevice")},Bt=e=>(Bt=yn())(e),Qe={resolve:(...e)=>{for(var t="",n=!1,r=e.length-1;r>=-1&&!n;r--){var s=r>=0?e[r]:l.cwd();if(typeof s!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!s)return"";t=s+"/"+t,n=Se.isAbs(s)}return t=Se.normalizeArray(t.split("/").filter(o=>!!o),!n).join("/"),(n?"/":"")+t||"."},relative:(e,t)=>{e=Qe.resolve(e).substr(1),t=Qe.resolve(t).substr(1);function n(D){for(var V=0;V<D.length&&D[V]==="";V++);for(var K=D.length-1;K>=0&&D[K]==="";K--);return V>K?[]:D.slice(V,K-V+1)}for(var r=n(e.split("/")),s=n(t.split("/")),o=Math.min(r.length,s.length),d=o,y=0;y<o;y++)if(r[y]!==s[y]){d=y;break}for(var R=[],y=d;y<r.length;y++)R.push("..");return R=R.concat(s.slice(d)),R.join("/")}},Wt=typeof TextDecoder<"u"?new TextDecoder:void 0,Ye=(e,t=0,n=NaN)=>{for(var r=t+n,s=t;e[s]&&!(s>=r);)++s;if(s-t>16&&e.buffer&&Wt)return Wt.decode(e.subarray(t,s));for(var o="";t<s;){var d=e[t++];if(!(d&128)){o+=String.fromCharCode(d);continue}var y=e[t++]&63;if((d&224)==192){o+=String.fromCharCode((d&31)<<6|y);continue}var R=e[t++]&63;if((d&240)==224?d=(d&15)<<12|y<<6|R:d=(d&7)<<18|y<<12|R<<6|e[t++]&63,d<65536)o+=String.fromCharCode(d);else{var D=d-65536;o+=String.fromCharCode(55296|D>>10,56320|D&1023)}}return o},vt=[],ft=e=>{for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3}return t},St=(e,t,n,r)=>{if(!(r>0))return 0;for(var s=n,o=n+r-1,d=0;d<e.length;++d){var y=e.charCodeAt(d);if(y>=55296&&y<=57343){var R=e.charCodeAt(++d);y=65536+((y&1023)<<10)|R&1023}if(y<=127){if(n>=o)break;t[n++]=y}else if(y<=2047){if(n+1>=o)break;t[n++]=192|y>>6,t[n++]=128|y&63}else if(y<=65535){if(n+2>=o)break;t[n++]=224|y>>12,t[n++]=128|y>>6&63,t[n++]=128|y&63}else{if(n+3>=o)break;t[n++]=240|y>>18,t[n++]=128|y>>12&63,t[n++]=128|y>>6&63,t[n++]=128|y&63}}return t[n]=0,n-s};function zt(e,t,n){var r=ft(e)+1,s=new Array(r),o=St(e,s,0,s.length);return s.length=o,s}var qn=()=>{if(!vt.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`)),!e)return null;vt=zt(e)}return vt.shift()},Je={ttys:[],init(){},shutdown(){},register(e,t){Je.ttys[e]={input:[],output:[],ops:t},l.registerDevice(e,Je.stream_ops)},stream_ops:{open(e){var t=Je.ttys[e.node.rdev];if(!t)throw new l.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,n,r,s){if(!e.tty||!e.tty.ops.get_char)throw new l.ErrnoError(60);for(var o=0,d=0;d<r;d++){var y;try{y=e.tty.ops.get_char(e.tty)}catch{throw new l.ErrnoError(29)}if(y===void 0&&o===0)throw new l.ErrnoError(6);if(y==null)break;o++,t[n+d]=y}return o&&(e.node.timestamp=Date.now()),o},write(e,t,n,r,s){if(!e.tty||!e.tty.ops.put_char)throw new l.ErrnoError(60);try{for(var o=0;o<r;o++)e.tty.ops.put_char(e.tty,t[n+o])}catch{throw new l.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char(e){return qn()},put_char(e,t){t===null||t===10?(De(Ye(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(De(Ye(e.output)),e.output=[])},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,t,n){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,t){t===null||t===10?(Te(Ye(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(Te(Ye(e.output)),e.output=[])}}},bn=(e,t)=>{Xe.fill(0,e,e+t)},Qt=(e,t)=>Math.ceil(e/t)*t,Ht=e=>{e=Qt(e,65536);var t=Gt(65536,e);return t&&bn(t,e),t},ue={ops_table:null,mount(e){return ue.createNode(null,"/",16895,0)},createNode(e,t,n,r){if(l.isBlkdev(n)||l.isFIFO(n))throw new l.ErrnoError(63);ue.ops_table||(ue.ops_table={dir:{node:{getattr:ue.node_ops.getattr,setattr:ue.node_ops.setattr,lookup:ue.node_ops.lookup,mknod:ue.node_ops.mknod,rename:ue.node_ops.rename,unlink:ue.node_ops.unlink,rmdir:ue.node_ops.rmdir,readdir:ue.node_ops.readdir,symlink:ue.node_ops.symlink},stream:{llseek:ue.stream_ops.llseek}},file:{node:{getattr:ue.node_ops.getattr,setattr:ue.node_ops.setattr},stream:{llseek:ue.stream_ops.llseek,read:ue.stream_ops.read,write:ue.stream_ops.write,allocate:ue.stream_ops.allocate,mmap:ue.stream_ops.mmap,msync:ue.stream_ops.msync}},link:{node:{getattr:ue.node_ops.getattr,setattr:ue.node_ops.setattr,readlink:ue.node_ops.readlink},stream:{}},chrdev:{node:{getattr:ue.node_ops.getattr,setattr:ue.node_ops.setattr},stream:l.chrdev_stream_ops}});var s=l.createNode(e,t,n,r);return l.isDir(s.mode)?(s.node_ops=ue.ops_table.dir.node,s.stream_ops=ue.ops_table.dir.stream,s.contents={}):l.isFile(s.mode)?(s.node_ops=ue.ops_table.file.node,s.stream_ops=ue.ops_table.file.stream,s.usedBytes=0,s.contents=null):l.isLink(s.mode)?(s.node_ops=ue.ops_table.link.node,s.stream_ops=ue.ops_table.link.stream):l.isChrdev(s.mode)&&(s.node_ops=ue.ops_table.chrdev.node,s.stream_ops=ue.ops_table.chrdev.stream),s.timestamp=Date.now(),e&&(e.contents[t]=s,e.timestamp=s.timestamp),s},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){var r=1024*1024;t=Math.max(t,n*(n<r?2:1.125)>>>0),n!=0&&(t=Math.max(t,256));var s=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(s.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(t==0)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=l.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,l.isDir(e.mode)?t.size=4096:l.isFile(e.mode)?t.size=e.usedBytes:l.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&ue.resizeFileStorage(e,t.size)},lookup(e,t){throw l.genericErrors[44]},mknod(e,t,n,r){return ue.createNode(e,t,n,r)},rename(e,t,n){if(l.isDir(e.mode)){var r;try{r=l.lookupNode(t,n)}catch{}if(r)for(var s in r.contents)throw new l.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp},unlink(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir(e,t){var n=l.lookupNode(e,t);for(var r in n.contents)throw new l.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir(e){var t=[".",".."];for(var n of Object.keys(e.contents))t.push(n);return t},symlink(e,t,n){var r=ue.createNode(e,t,41471,0);return r.link=n,r},readlink(e){if(!l.isLink(e.mode))throw new l.ErrnoError(28);return e.link}},stream_ops:{read(e,t,n,r,s){var o=e.node.contents;if(s>=e.node.usedBytes)return 0;var d=Math.min(e.node.usedBytes-s,r);if(d>8&&o.subarray)t.set(o.subarray(s,s+d),n);else for(var y=0;y<d;y++)t[n+y]=o[s+y];return d},write(e,t,n,r,s,o){if(t.buffer===Ce.buffer&&(o=!1),!r)return 0;var d=e.node;if(d.timestamp=Date.now(),t.subarray&&(!d.contents||d.contents.subarray)){if(o)return d.contents=t.subarray(n,n+r),d.usedBytes=r,r;if(d.usedBytes===0&&s===0)return d.contents=t.slice(n,n+r),d.usedBytes=r,r;if(s+r<=d.usedBytes)return d.contents.set(t.subarray(n,n+r),s),r}if(ue.expandFileStorage(d,s+r),d.contents.subarray&&t.subarray)d.contents.set(t.subarray(n,n+r),s);else for(var y=0;y<r;y++)d.contents[s+y]=t[n+y];return d.usedBytes=Math.max(d.usedBytes,s+r),r},llseek(e,t,n){var r=t;if(n===1?r+=e.position:n===2&&l.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new l.ErrnoError(28);return r},allocate(e,t,n){ue.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap(e,t,n,r,s){if(!l.isFile(e.node.mode))throw new l.ErrnoError(43);var o,d,y=e.node.contents;if(!(s&2)&&y&&y.buffer===Ce.buffer)d=!1,o=y.byteOffset;else{if(d=!0,o=Ht(t),!o)throw new l.ErrnoError(48);y&&((n>0||n+t<y.length)&&(y.subarray?y=y.subarray(n,n+t):y=Array.prototype.slice.call(y,n,n+t)),Ce.set(y,o))}return{ptr:o,allocated:d}},msync(e,t,n,r,s){return ue.stream_ops.write(e,t,0,r,n,!1),0}}},wn=(e,t,n,r)=>{var s=`al ${e}`;ke(e).then(o=>{t(new Uint8Array(o)),s&&ut()},o=>{if(n)n();else throw`Loading data file "${e}" failed.`}),s&&qt()},En=(e,t,n,r,s,o)=>{l.createDataFile(e,t,n,r,s,o)},vn=i.preloadPlugins||[],Sn=(e,t,n,r)=>{typeof Browser<"u"&&Browser.init();var s=!1;return vn.forEach(o=>{s||o.canHandle(t)&&(o.handle(e,t,n,r),s=!0)}),s},xn=(e,t,n,r,s,o,d,y,R,D)=>{var V=t?Qe.resolve(Se.join2(e,t)):e;function K(C){function k(j){D==null||D(),y||En(e,t,j,r,s,R),o==null||o(),ut()}Sn(C,V,k,()=>{d==null||d(),ut()})||k(C)}qt(),typeof n=="string"?wn(n,K,d):K(n)},An=e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},n=t[e];if(typeof n>"u")throw new Error(`Unknown file open mode: ${e}`);return n},xt=(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},l={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(e){this.name="ErrnoError",this.errno=e}},genericErrors:{},filesystems:null,syncFSRequests:0,readFiles:{},FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(e){this.node=e}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{constructor(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=l.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return l.isDir(this.mode)}get isDevice(){return l.isChrdev(this.mode)}},lookupPath(e,t={}){if(e=Qe.resolve(e),!e)return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};if(t=Object.assign(n,t),t.recurse_count>8)throw new l.ErrnoError(32);for(var r=e.split("/").filter(K=>!!K),s=l.root,o="/",d=0;d<r.length;d++){var y=d===r.length-1;if(y&&t.parent)break;if(s=l.lookupNode(s,r[d]),o=Se.join2(o,r[d]),l.isMountpoint(s)&&(!y||y&&t.follow_mount)&&(s=s.mounted.root),!y||t.follow)for(var R=0;l.isLink(s.mode);){var D=l.readlink(o);o=Qe.resolve(Se.dirname(o),D);var V=l.lookupPath(o,{recurse_count:t.recurse_count+1});if(s=V.node,R++>40)throw new l.ErrnoError(32)}}return{path:o,node:s}},getPath(e){for(var t;;){if(l.isRoot(e)){var n=e.mount.mountpoint;return t?n[n.length-1]!=="/"?`${n}/${t}`:n+t:n}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%l.nameTable.length},hashAddNode(e){var t=l.hashName(e.parent.id,e.name);e.name_next=l.nameTable[t],l.nameTable[t]=e},hashRemoveNode(e){var t=l.hashName(e.parent.id,e.name);if(l.nameTable[t]===e)l.nameTable[t]=e.name_next;else for(var n=l.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode(e,t){var n=l.mayLookup(e);if(n)throw new l.ErrnoError(n);for(var r=l.hashName(e.id,t),s=l.nameTable[r];s;s=s.name_next){var o=s.name;if(s.parent.id===e.id&&o===t)return s}return l.lookup(e,t)},createNode(e,t,n,r){var s=new l.FSNode(e,t,n,r);return l.hashAddNode(s),s},destroyNode(e){l.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions(e,t){return l.ignorePermissions?0:t.includes("r")&&!(e.mode&292)||t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){if(!l.isDir(e.mode))return 54;var t=l.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate(e,t){try{var n=l.lookupNode(e,t);return 20}catch{}return l.nodePermissions(e,"wx")},mayDelete(e,t,n){var r;try{r=l.lookupNode(e,t)}catch(o){return o.errno}var s=l.nodePermissions(e,"wx");if(s)return s;if(n){if(!l.isDir(r.mode))return 54;if(l.isRoot(r)||l.getPath(r)===l.cwd())return 10}else if(l.isDir(r.mode))return 31;return 0},mayOpen(e,t){return e?l.isLink(e.mode)?32:l.isDir(e.mode)&&(l.flagsToPermissionString(t)!=="r"||t&512)?31:l.nodePermissions(e,l.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=l.MAX_OPEN_FDS;e++)if(!l.streams[e])return e;throw new l.ErrnoError(33)},getStreamChecked(e){var t=l.getStream(e);if(!t)throw new l.ErrnoError(8);return t},getStream:e=>l.streams[e],createStream(e,t=-1){return e=Object.assign(new l.FSStream,e),t==-1&&(t=l.nextfd()),e.fd=t,l.streams[t]=e,e},closeStream(e){l.streams[e]=null},dupStream(e,t=-1){var r,s;var n=l.createStream(e,t);return(s=(r=n.stream_ops)==null?void 0:r.dup)==null||s.call(r,n),n},chrdev_stream_ops:{open(e){var n,r;var t=l.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,(r=(n=e.stream_ops).open)==null||r.call(n,e)},llseek(){throw new l.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice(e,t){l.devices[e]={stream_ops:t}},getDevice:e=>l.devices[e],getMounts(e){for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push(...r.mounts)}return t},syncfs(e,t){typeof e=="function"&&(t=e,e=!1),l.syncFSRequests++,l.syncFSRequests>1&&Te(`warning: ${l.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var n=l.getMounts(l.root.mount),r=0;function s(d){return l.syncFSRequests--,t(d)}function o(d){if(d)return o.errored?void 0:(o.errored=!0,s(d));++r>=n.length&&s(null)}n.forEach(d=>{if(!d.type.syncfs)return o(null);d.type.syncfs(d,e,o)})},mount(e,t,n){var r=n==="/",s=!n,o;if(r&&l.root)throw new l.ErrnoError(10);if(!r&&!s){var d=l.lookupPath(n,{follow_mount:!1});if(n=d.path,o=d.node,l.isMountpoint(o))throw new l.ErrnoError(10);if(!l.isDir(o.mode))throw new l.ErrnoError(54)}var y={type:e,opts:t,mountpoint:n,mounts:[]},R=e.mount(y);return R.mount=y,y.root=R,r?l.root=R:o&&(o.mounted=y,o.mount&&o.mount.mounts.push(y)),R},unmount(e){var t=l.lookupPath(e,{follow_mount:!1});if(!l.isMountpoint(t.node))throw new l.ErrnoError(28);var n=t.node,r=n.mounted,s=l.getMounts(r);Object.keys(l.nameTable).forEach(d=>{for(var y=l.nameTable[d];y;){var R=y.name_next;s.includes(y.mount)&&l.destroyNode(y),y=R}}),n.mounted=null;var o=n.mount.mounts.indexOf(r);n.mount.mounts.splice(o,1)},lookup(e,t){return e.node_ops.lookup(e,t)},mknod(e,t,n){var r=l.lookupPath(e,{parent:!0}),s=r.node,o=Se.basename(e);if(!o||o==="."||o==="..")throw new l.ErrnoError(28);var d=l.mayCreate(s,o);if(d)throw new l.ErrnoError(d);if(!s.node_ops.mknod)throw new l.ErrnoError(63);return s.node_ops.mknod(s,o,t,n)},create(e,t){return t=t!==void 0?t:438,t&=4095,t|=32768,l.mknod(e,t,0)},mkdir(e,t){return t=t!==void 0?t:511,t&=1023,t|=16384,l.mknod(e,t,0)},mkdirTree(e,t){for(var n=e.split("/"),r="",s=0;s<n.length;++s)if(n[s]){r+="/"+n[s];try{l.mkdir(r,t)}catch(o){if(o.errno!=20)throw o}}},mkdev(e,t,n){return typeof n>"u"&&(n=t,t=438),t|=8192,l.mknod(e,t,n)},symlink(e,t){if(!Qe.resolve(e))throw new l.ErrnoError(44);var n=l.lookupPath(t,{parent:!0}),r=n.node;if(!r)throw new l.ErrnoError(44);var s=Se.basename(t),o=l.mayCreate(r,s);if(o)throw new l.ErrnoError(o);if(!r.node_ops.symlink)throw new l.ErrnoError(63);return r.node_ops.symlink(r,s,e)},rename(e,t){var n=Se.dirname(e),r=Se.dirname(t),s=Se.basename(e),o=Se.basename(t),d,y,R;if(d=l.lookupPath(e,{parent:!0}),y=d.node,d=l.lookupPath(t,{parent:!0}),R=d.node,!y||!R)throw new l.ErrnoError(44);if(y.mount!==R.mount)throw new l.ErrnoError(75);var D=l.lookupNode(y,s),V=Qe.relative(e,r);if(V.charAt(0)!==".")throw new l.ErrnoError(28);if(V=Qe.relative(t,n),V.charAt(0)!==".")throw new l.ErrnoError(55);var K;try{K=l.lookupNode(R,o)}catch{}if(D!==K){var C=l.isDir(D.mode),k=l.mayDelete(y,s,C);if(k)throw new l.ErrnoError(k);if(k=K?l.mayDelete(R,o,C):l.mayCreate(R,o),k)throw new l.ErrnoError(k);if(!y.node_ops.rename)throw new l.ErrnoError(63);if(l.isMountpoint(D)||K&&l.isMountpoint(K))throw new l.ErrnoError(10);if(R!==y&&(k=l.nodePermissions(y,"w"),k))throw new l.ErrnoError(k);l.hashRemoveNode(D);try{y.node_ops.rename(D,R,o),D.parent=R}catch(j){throw j}finally{l.hashAddNode(D)}}},rmdir(e){var t=l.lookupPath(e,{parent:!0}),n=t.node,r=Se.basename(e),s=l.lookupNode(n,r),o=l.mayDelete(n,r,!0);if(o)throw new l.ErrnoError(o);if(!n.node_ops.rmdir)throw new l.ErrnoError(63);if(l.isMountpoint(s))throw new l.ErrnoError(10);n.node_ops.rmdir(n,r),l.destroyNode(s)},readdir(e){var t=l.lookupPath(e,{follow:!0}),n=t.node;if(!n.node_ops.readdir)throw new l.ErrnoError(54);return n.node_ops.readdir(n)},unlink(e){var t=l.lookupPath(e,{parent:!0}),n=t.node;if(!n)throw new l.ErrnoError(44);var r=Se.basename(e),s=l.lookupNode(n,r),o=l.mayDelete(n,r,!1);if(o)throw new l.ErrnoError(o);if(!n.node_ops.unlink)throw new l.ErrnoError(63);if(l.isMountpoint(s))throw new l.ErrnoError(10);n.node_ops.unlink(n,r),l.destroyNode(s)},readlink(e){var t=l.lookupPath(e),n=t.node;if(!n)throw new l.ErrnoError(44);if(!n.node_ops.readlink)throw new l.ErrnoError(28);return Qe.resolve(l.getPath(n.parent),n.node_ops.readlink(n))},stat(e,t){var n=l.lookupPath(e,{follow:!t}),r=n.node;if(!r)throw new l.ErrnoError(44);if(!r.node_ops.getattr)throw new l.ErrnoError(63);return r.node_ops.getattr(r)},lstat(e){return l.stat(e,!0)},chmod(e,t,n){var r;if(typeof e=="string"){var s=l.lookupPath(e,{follow:!n});r=s.node}else r=e;if(!r.node_ops.setattr)throw new l.ErrnoError(63);r.node_ops.setattr(r,{mode:t&4095|r.mode&-4096,timestamp:Date.now()})},lchmod(e,t){l.chmod(e,t,!0)},fchmod(e,t){var n=l.getStreamChecked(e);l.chmod(n.node,t)},chown(e,t,n,r){var s;if(typeof e=="string"){var o=l.lookupPath(e,{follow:!r});s=o.node}else s=e;if(!s.node_ops.setattr)throw new l.ErrnoError(63);s.node_ops.setattr(s,{timestamp:Date.now()})},lchown(e,t,n){l.chown(e,t,n,!0)},fchown(e,t,n){var r=l.getStreamChecked(e);l.chown(r.node,t,n)},truncate(e,t){if(t<0)throw new l.ErrnoError(28);var n;if(typeof e=="string"){var r=l.lookupPath(e,{follow:!0});n=r.node}else n=e;if(!n.node_ops.setattr)throw new l.ErrnoError(63);if(l.isDir(n.mode))throw new l.ErrnoError(31);if(!l.isFile(n.mode))throw new l.ErrnoError(28);var s=l.nodePermissions(n,"w");if(s)throw new l.ErrnoError(s);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate(e,t){var n=l.getStreamChecked(e);if((n.flags&2097155)===0)throw new l.ErrnoError(28);l.truncate(n.node,t)},utime(e,t,n){var r=l.lookupPath(e,{follow:!0}),s=r.node;s.node_ops.setattr(s,{timestamp:Math.max(t,n)})},open(e,t,n){if(e==="")throw new l.ErrnoError(44);t=typeof t=="string"?An(t):t,t&64?(n=typeof n>"u"?438:n,n=n&4095|32768):n=0;var r;if(typeof e=="object")r=e;else{e=Se.normalize(e);try{var s=l.lookupPath(e,{follow:!(t&131072)});r=s.node}catch{}}var o=!1;if(t&64)if(r){if(t&128)throw new l.ErrnoError(20)}else r=l.mknod(e,n,0),o=!0;if(!r)throw new l.ErrnoError(44);if(l.isChrdev(r.mode)&&(t&=-513),t&65536&&!l.isDir(r.mode))throw new l.ErrnoError(54);if(!o){var d=l.mayOpen(r,t);if(d)throw new l.ErrnoError(d)}t&512&&!o&&l.truncate(r,0),t&=-131713;var y=l.createStream({node:r,path:l.getPath(r),flags:t,seekable:!0,position:0,stream_ops:r.stream_ops,ungotten:[],error:!1});return y.stream_ops.open&&y.stream_ops.open(y),i.logReadFiles&&!(t&1)&&(e in l.readFiles||(l.readFiles[e]=1)),y},close(e){if(l.isClosed(e))throw new l.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{l.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,t,n){if(l.isClosed(e))throw new l.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new l.ErrnoError(70);if(n!=0&&n!=1&&n!=2)throw new l.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read(e,t,n,r,s){if(r<0||s<0)throw new l.ErrnoError(28);if(l.isClosed(e))throw new l.ErrnoError(8);if((e.flags&2097155)===1)throw new l.ErrnoError(8);if(l.isDir(e.node.mode))throw new l.ErrnoError(31);if(!e.stream_ops.read)throw new l.ErrnoError(28);var o=typeof s<"u";if(!o)s=e.position;else if(!e.seekable)throw new l.ErrnoError(70);var d=e.stream_ops.read(e,t,n,r,s);return o||(e.position+=d),d},write(e,t,n,r,s,o){if(r<0||s<0)throw new l.ErrnoError(28);if(l.isClosed(e))throw new l.ErrnoError(8);if((e.flags&2097155)===0)throw new l.ErrnoError(8);if(l.isDir(e.node.mode))throw new l.ErrnoError(31);if(!e.stream_ops.write)throw new l.ErrnoError(28);e.seekable&&e.flags&1024&&l.llseek(e,0,2);var d=typeof s<"u";if(!d)s=e.position;else if(!e.seekable)throw new l.ErrnoError(70);var y=e.stream_ops.write(e,t,n,r,s,o);return d||(e.position+=y),y},allocate(e,t,n){if(l.isClosed(e))throw new l.ErrnoError(8);if(t<0||n<=0)throw new l.ErrnoError(28);if((e.flags&2097155)===0)throw new l.ErrnoError(8);if(!l.isFile(e.node.mode)&&!l.isDir(e.node.mode))throw new l.ErrnoError(43);if(!e.stream_ops.allocate)throw new l.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap(e,t,n,r,s){if((r&2)!==0&&(s&2)===0&&(e.flags&2097155)!==2)throw new l.ErrnoError(2);if((e.flags&2097155)===1)throw new l.ErrnoError(2);if(!e.stream_ops.mmap)throw new l.ErrnoError(43);if(!t)throw new l.ErrnoError(28);return e.stream_ops.mmap(e,t,n,r,s)},msync(e,t,n,r,s){return e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,s):0},ioctl(e,t,n){if(!e.stream_ops.ioctl)throw new l.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile(e,t={}){if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error(`Invalid encoding type "${t.encoding}"`);var n,r=l.open(e,t.flags),s=l.stat(e),o=s.size,d=new Uint8Array(o);return l.read(r,d,0,o,0),t.encoding==="utf8"?n=Ye(d):t.encoding==="binary"&&(n=d),l.close(r),n},writeFile(e,t,n={}){n.flags=n.flags||577;var r=l.open(e,n.flags,n.mode);if(typeof t=="string"){var s=new Uint8Array(ft(t)+1),o=St(t,s,0,s.length);l.write(r,s,0,o,void 0,n.canOwn)}else if(ArrayBuffer.isView(t))l.write(r,t,0,t.byteLength,void 0,n.canOwn);else throw new Error("Unsupported data type");l.close(r)},cwd:()=>l.currentPath,chdir(e){var t=l.lookupPath(e,{follow:!0});if(t.node===null)throw new l.ErrnoError(44);if(!l.isDir(t.node.mode))throw new l.ErrnoError(54);var n=l.nodePermissions(t.node,"x");if(n)throw new l.ErrnoError(n);l.currentPath=t.path},createDefaultDirectories(){l.mkdir("/tmp"),l.mkdir("/home"),l.mkdir("/home/web_user")},createDefaultDevices(){l.mkdir("/dev"),l.registerDevice(l.makedev(1,3),{read:()=>0,write:(r,s,o,d,y)=>d}),l.mkdev("/dev/null",l.makedev(1,3)),Je.register(l.makedev(5,0),Je.default_tty_ops),Je.register(l.makedev(6,0),Je.default_tty1_ops),l.mkdev("/dev/tty",l.makedev(5,0)),l.mkdev("/dev/tty1",l.makedev(6,0));var e=new Uint8Array(1024),t=0,n=()=>(t===0&&(t=Bt(e).byteLength),e[--t]);l.createDevice("/dev","random",n),l.createDevice("/dev","urandom",n),l.mkdir("/dev/shm"),l.mkdir("/dev/shm/tmp")},createSpecialDirectories(){l.mkdir("/proc");var e=l.mkdir("/proc/self");l.mkdir("/proc/self/fd"),l.mount({mount(){var t=l.createNode(e,"fd",16895,73);return t.node_ops={lookup(n,r){var s=+r,o=l.getStreamChecked(s),d={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>o.path}};return d.parent=d,d}},t}},{},"/proc/self/fd")},createStandardStreams(e,t,n){e?l.createDevice("/dev","stdin",e):l.symlink("/dev/tty","/dev/stdin"),t?l.createDevice("/dev","stdout",null,t):l.symlink("/dev/tty","/dev/stdout"),n?l.createDevice("/dev","stderr",null,n):l.symlink("/dev/tty1","/dev/stderr"),l.open("/dev/stdin",0),l.open("/dev/stdout",1),l.open("/dev/stderr",1)},staticInit(){[44].forEach(e=>{l.genericErrors[e]=new l.ErrnoError(e),l.genericErrors[e].stack="<generic error, no stack>"}),l.nameTable=new Array(4096),l.mount(ue,{},"/"),l.createDefaultDirectories(),l.createDefaultDevices(),l.createSpecialDirectories(),l.filesystems={MEMFS:ue}},init(e,t,n){l.initialized=!0,e??(e=i.stdin),t??(t=i.stdout),n??(n=i.stderr),l.createStandardStreams(e,t,n)},quit(){l.initialized=!1;for(var e=0;e<l.streams.length;e++){var t=l.streams[e];t&&l.close(t)}},findObject(e,t){var n=l.analyzePath(e,t);return n.exists?n.object:null},analyzePath(e,t){try{var n=l.lookupPath(e,{follow:!t});e=n.path}catch{}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=l.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=n.path,r.parentObject=n.node,r.name=Se.basename(e),n=l.lookupPath(e,{follow:!t}),r.exists=!0,r.path=n.path,r.object=n.node,r.name=n.node.name,r.isRoot=n.path==="/"}catch(s){r.error=s.errno}return r},createPath(e,t,n,r){e=typeof e=="string"?e:l.getPath(e);for(var s=t.split("/").reverse();s.length;){var o=s.pop();if(o){var d=Se.join2(e,o);try{l.mkdir(d)}catch{}e=d}}return d},createFile(e,t,n,r,s){var o=Se.join2(typeof e=="string"?e:l.getPath(e),t),d=xt(r,s);return l.create(o,d)},createDataFile(e,t,n,r,s,o){var d=t;e&&(e=typeof e=="string"?e:l.getPath(e),d=t?Se.join2(e,t):e);var y=xt(r,s),R=l.create(d,y);if(n){if(typeof n=="string"){for(var D=new Array(n.length),V=0,K=n.length;V<K;++V)D[V]=n.charCodeAt(V);n=D}l.chmod(R,y|146);var C=l.open(R,577);l.write(C,n,0,n.length,0,o),l.close(C),l.chmod(R,y)}},createDevice(e,t,n,r){var y;var s=Se.join2(typeof e=="string"?e:l.getPath(e),t),o=xt(!!n,!!r);(y=l.createDevice).major??(y.major=64);var d=l.makedev(l.createDevice.major++,0);return l.registerDevice(d,{open(R){R.seekable=!1},close(R){var D;(D=r==null?void 0:r.buffer)!=null&&D.length&&r(10)},read(R,D,V,K,C){for(var k=0,j=0;j<K;j++){var w;try{w=n()}catch{throw new l.ErrnoError(29)}if(w===void 0&&k===0)throw new l.ErrnoError(6);if(w==null)break;k++,D[V+j]=w}return k&&(R.node.timestamp=Date.now()),k},write(R,D,V,K,C){for(var k=0;k<K;k++)try{r(D[V+k])}catch{throw new l.ErrnoError(29)}return K&&(R.node.timestamp=Date.now()),k}}),l.mkdev(s,o,d)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=Oe(e.url),e.usedBytes=e.contents.length}catch{throw new l.ErrnoError(29)}},createLazyFile(e,t,n,r,s){class o{constructor(){this.lengthKnown=!1,this.chunks=[]}get(k){if(!(k>this.length-1||k<0)){var j=k%this.chunkSize,w=k/this.chunkSize|0;return this.getter(w)[j]}}setDataGetter(k){this.getter=k}cacheLength(){var k=new XMLHttpRequest;if(k.open("HEAD",n,!1),k.send(null),!(k.status>=200&&k.status<300||k.status===304))throw new Error("Couldn't load "+n+". Status: "+k.status);var j=Number(k.getResponseHeader("Content-length")),w,S=(w=k.getResponseHeader("Accept-Ranges"))&&w==="bytes",O=(w=k.getResponseHeader("Content-Encoding"))&&w==="gzip",F=1024*1024;S||(F=j);var N=(U,$)=>{if(U>$)throw new Error("invalid range ("+U+", "+$+") or no bytes requested!");if($>j-1)throw new Error("only "+j+" bytes available! programmer error!");var c=new XMLHttpRequest;if(c.open("GET",n,!1),j!==F&&c.setRequestHeader("Range","bytes="+U+"-"+$),c.responseType="arraybuffer",c.overrideMimeType&&c.overrideMimeType("text/plain; charset=x-user-defined"),c.send(null),!(c.status>=200&&c.status<300||c.status===304))throw new Error("Couldn't load "+n+". Status: "+c.status);return c.response!==void 0?new Uint8Array(c.response||[]):zt(c.responseText||"")},I=this;I.setDataGetter(U=>{var $=U*F,c=(U+1)*F-1;if(c=Math.min(c,j-1),typeof I.chunks[U]>"u"&&(I.chunks[U]=N($,c)),typeof I.chunks[U]>"u")throw new Error("doXHR failed!");return I.chunks[U]}),(O||!j)&&(F=j=1,j=this.getter(0).length,F=j,De("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=j,this._chunkSize=F,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!ge)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var d=new o,y={isDevice:!1,contents:d}}else var y={isDevice:!1,url:n};var R=l.createFile(e,t,y,r,s);y.contents?R.contents=y.contents:y.url&&(R.contents=null,R.url=y.url),Object.defineProperties(R,{usedBytes:{get:function(){return this.contents.length}}});var D={},V=Object.keys(R.stream_ops);V.forEach(C=>{var k=R.stream_ops[C];D[C]=(...j)=>(l.forceLoadFile(R),k(...j))});function K(C,k,j,w,S){var O=C.node.contents;if(S>=O.length)return 0;var F=Math.min(O.length-S,w);if(O.slice)for(var N=0;N<F;N++)k[j+N]=O[S+N];else for(var N=0;N<F;N++)k[j+N]=O.get(S+N);return F}return D.read=(C,k,j,w,S)=>(l.forceLoadFile(R),K(C,k,j,w,S)),D.mmap=(C,k,j,w,S)=>{l.forceLoadFile(R);var O=Ht(k);if(!O)throw new l.ErrnoError(48);return K(C,Ce,O,k,j),{ptr:O,allocated:!0}},R.stream_ops=D,R}},In=(e,t)=>e?Ye(Xe,e,t):"",he={DEFAULT_POLLMASK:5,calculateAt(e,t,n){if(Se.isAbs(t))return t;var r;if(e===-100)r=l.cwd();else{var s=he.getStreamFromFD(e);r=s.path}if(t.length==0){if(!n)throw new l.ErrnoError(44);return r}return Se.join2(r,t)},doStat(e,t,n){var r=e(t);qe[n>>2]=r.dev,qe[n+4>>2]=r.mode,Fe[n+8>>2]=r.nlink,qe[n+12>>2]=r.uid,qe[n+16>>2]=r.gid,qe[n+20>>2]=r.rdev,ze[n+24>>3]=BigInt(r.size),qe[n+32>>2]=4096,qe[n+36>>2]=r.blocks;var s=r.atime.getTime(),o=r.mtime.getTime(),d=r.ctime.getTime();return ze[n+40>>3]=BigInt(Math.floor(s/1e3)),Fe[n+48>>2]=s%1e3*1e3*1e3,ze[n+56>>3]=BigInt(Math.floor(o/1e3)),Fe[n+64>>2]=o%1e3*1e3*1e3,ze[n+72>>3]=BigInt(Math.floor(d/1e3)),Fe[n+80>>2]=d%1e3*1e3*1e3,ze[n+88>>3]=BigInt(r.ino),0},doMsync(e,t,n,r,s){if(!l.isFile(t.node.mode))throw new l.ErrnoError(43);if(r&2)return 0;var o=Xe.slice(e,e+n);l.msync(t,o,s,n,r)},getStreamFromFD(e){var t=l.getStreamChecked(e);return t},varargs:void 0,getStr(e){var t=In(e);return t}};function kn(e,t){try{return e=he.getStr(e),l.chmod(e,t),0}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Tn(e,t,n,r){try{if(t=he.getStr(t),t=he.calculateAt(e,t),n&-8)return-28;var s=l.lookupPath(t,{follow:!0}),o=s.node;if(!o)return-44;var d="";return n&4&&(d+="r"),n&2&&(d+="w"),n&1&&(d+="x"),d&&l.nodePermissions(o,d)?-2:0}catch(y){if(typeof l>"u"||y.name!=="ErrnoError")throw y;return-y.errno}}function On(e,t){try{return l.fchmod(e,t),0}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Fn(e,t,n){try{return l.fchown(e,t,n),0}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function dt(){var e=qe[+he.varargs>>2];return he.varargs+=4,e}var Ze=dt;function Pn(e,t,n){he.varargs=n;try{var r=he.getStreamFromFD(e);switch(t){case 0:{var s=dt();if(s<0)return-28;for(;l.streams[s];)s++;var o;return o=l.dupStream(r,s),o.fd}case 1:case 2:return 0;case 3:return r.flags;case 4:{var s=dt();return r.flags|=s,0}case 12:{var s=Ze(),d=0;return nt[s+d>>1]=2,0}case 13:case 14:return 0}return-28}catch(y){if(typeof l>"u"||y.name!=="ErrnoError")throw y;return-y.errno}}function Ln(e,t){try{var n=he.getStreamFromFD(e);return he.doStat(l.stat,n.path,t)}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}var Cn=9007199254740992,Rn=-9007199254740992,st=e=>e<Rn||e>Cn?NaN:Number(e);function Dn(e,t){t=st(t);try{return isNaN(t)?61:(l.ftruncate(e,t),0)}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}var et=(e,t,n)=>St(e,Xe,t,n);function Nn(e,t){try{if(t===0)return-28;var n=l.cwd(),r=ft(n)+1;return t<r?-68:(et(n,e,t),r)}catch(s){if(typeof l>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}function Mn(e,t,n){he.varargs=n;try{var r=he.getStreamFromFD(e);switch(t){case 21509:return r.tty?0:-59;case 21505:{if(!r.tty)return-59;if(r.tty.ops.ioctl_tcgets){var s=r.tty.ops.ioctl_tcgets(r),o=Ze();qe[o>>2]=s.c_iflag||0,qe[o+4>>2]=s.c_oflag||0,qe[o+8>>2]=s.c_cflag||0,qe[o+12>>2]=s.c_lflag||0;for(var d=0;d<32;d++)Ce[o+d+17]=s.c_cc[d]||0;return 0}return 0}case 21510:case 21511:case 21512:return r.tty?0:-59;case 21506:case 21507:case 21508:{if(!r.tty)return-59;if(r.tty.ops.ioctl_tcsets){for(var o=Ze(),y=qe[o>>2],R=qe[o+4>>2],D=qe[o+8>>2],V=qe[o+12>>2],K=[],d=0;d<32;d++)K.push(Ce[o+d+17]);return r.tty.ops.ioctl_tcsets(r.tty,t,{c_iflag:y,c_oflag:R,c_cflag:D,c_lflag:V,c_cc:K})}return 0}case 21519:{if(!r.tty)return-59;var o=Ze();return qe[o>>2]=0,0}case 21520:return r.tty?-28:-59;case 21531:{var o=Ze();return l.ioctl(r,t,o)}case 21523:{if(!r.tty)return-59;if(r.tty.ops.ioctl_tiocgwinsz){var C=r.tty.ops.ioctl_tiocgwinsz(r.tty),o=Ze();nt[o>>1]=C[0],nt[o+2>>1]=C[1]}return 0}case 21524:return r.tty?0:-59;case 21515:return r.tty?0:-59;default:return-28}}catch(k){if(typeof l>"u"||k.name!=="ErrnoError")throw k;return-k.errno}}function jn(e,t){try{return e=he.getStr(e),he.doStat(l.lstat,e,t)}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Un(e,t,n){try{return t=he.getStr(t),t=he.calculateAt(e,t),t=Se.normalize(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),l.mkdir(t,n,0),0}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function Bn(e,t,n,r){try{t=he.getStr(t);var s=r&256,o=r&4096;return r=r&-6401,t=he.calculateAt(e,t,o),he.doStat(s?l.lstat:l.stat,t,n)}catch(d){if(typeof l>"u"||d.name!=="ErrnoError")throw d;return-d.errno}}function Wn(e,t,n,r){he.varargs=r;try{t=he.getStr(t),t=he.calculateAt(e,t);var s=r?dt():0;return l.open(t,n,s).fd}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function zn(e,t,n,r){try{if(t=he.getStr(t),t=he.calculateAt(e,t),r<=0)return-28;var s=l.readlink(t),o=Math.min(r,ft(s)),d=Ce[n+o];return et(s,n,r+1),Ce[n+o]=d,o}catch(y){if(typeof l>"u"||y.name!=="ErrnoError")throw y;return-y.errno}}function Qn(e){try{return e=he.getStr(e),l.rmdir(e),0}catch(t){if(typeof l>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function Hn(e,t){try{return e=he.getStr(e),he.doStat(l.stat,e,t)}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Vn(e,t,n){try{return t=he.getStr(t),t=he.calculateAt(e,t),n===0?l.unlink(t):n===512?l.rmdir(t):bt("Invalid flags passed to unlinkat"),0}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}var Vt=e=>Fe[e>>2]+qe[e+4>>2]*4294967296;function $n(e,t,n,r){try{t=he.getStr(t),t=he.calculateAt(e,t,!0);var s=Date.now(),o,d;if(!n)o=s,d=s;else{var y=Vt(n),R=qe[n+8>>2];R==1073741823?o=s:R==1073741822?o=-1:o=y*1e3+R/(1e3*1e3),n+=16,y=Vt(n),R=qe[n+8>>2],R==1073741823?d=s:R==1073741822?d=-1:d=y*1e3+R/(1e3*1e3)}return(d!=-1||o!=-1)&&l.utime(t,o,d),0}catch(D){if(typeof l>"u"||D.name!=="ErrnoError")throw D;return-D.errno}}var Gn=1,Kn=()=>Gn,Jn=e=>e%4===0&&(e%100!==0||e%400===0),Xn=[0,31,60,91,121,152,182,213,244,274,305,335],Yn=[0,31,59,90,120,151,181,212,243,273,304,334],Zn=e=>{var t=Jn(e.getFullYear()),n=t?Xn:Yn,r=n[e.getMonth()]+e.getDate()-1;return r};function er(e,t){e=st(e);var n=new Date(e*1e3);qe[t>>2]=n.getSeconds(),qe[t+4>>2]=n.getMinutes(),qe[t+8>>2]=n.getHours(),qe[t+12>>2]=n.getDate(),qe[t+16>>2]=n.getMonth(),qe[t+20>>2]=n.getFullYear()-1900,qe[t+24>>2]=n.getDay();var r=Zn(n)|0;qe[t+28>>2]=r,qe[t+36>>2]=-(n.getTimezoneOffset()*60);var s=new Date(n.getFullYear(),0,1),o=new Date(n.getFullYear(),6,1).getTimezoneOffset(),d=s.getTimezoneOffset(),y=(o!=d&&n.getTimezoneOffset()==Math.min(d,o))|0;qe[t+32>>2]=y}function tr(e,t,n,r,s,o,d){s=st(s);try{if(isNaN(s))return 61;var y=he.getStreamFromFD(r),R=l.mmap(y,e,s,t,n),D=R.ptr;return qe[o>>2]=R.allocated,Fe[d>>2]=D,0}catch(V){if(typeof l>"u"||V.name!=="ErrnoError")throw V;return-V.errno}}function nr(e,t,n,r,s,o){o=st(o);try{var d=he.getStreamFromFD(s);n&2&&he.doMsync(e,d,t,r,o)}catch(y){if(typeof l>"u"||y.name!=="ErrnoError")throw y;return-y.errno}}var rr=(e,t,n,r)=>{var s=new Date().getFullYear(),o=new Date(s,0,1),d=new Date(s,6,1),y=o.getTimezoneOffset(),R=d.getTimezoneOffset(),D=Math.max(y,R);Fe[e>>2]=D*60,qe[t>>2]=+(y!=R);var V=k=>{var j=k>=0?"-":"+",w=Math.abs(k),S=String(Math.floor(w/60)).padStart(2,"0"),O=String(w%60).padStart(2,"0");return`UTC${j}${S}${O}`},K=V(y),C=V(R);R<y?(et(K,n,17),et(C,r,17)):(et(K,r,17),et(C,n,17))},sr=()=>Date.now(),ir=()=>performance.now(),or=()=>2147483648,ar=e=>{var t=Ge.buffer,n=(e-t.byteLength+65535)/65536|0;try{return Ge.grow(n),Ct(),1}catch{}},lr=e=>{var t=Xe.length;e>>>=0;var n=or();if(e>n)return!1;for(var r=1;r<=4;r*=2){var s=t*(1+.2/r);s=Math.min(s,e+100663296);var o=Math.min(n,Qt(Math.max(e,s),65536)),d=ar(o);if(d)return!0}return!1},At={},cr=()=>X||"./this.program",it=()=>{if(!it.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:cr()};for(var n in At)At[n]===void 0?delete t[n]:t[n]=At[n];var r=[];for(var n in t)r.push(`${n}=${t[n]}`);it.strings=r}return it.strings},_r=(e,t)=>{for(var n=0;n<e.length;++n)Ce[t++]=e.charCodeAt(n);Ce[t]=0},ur=(e,t)=>{var n=0;return it().forEach((r,s)=>{var o=t+n;Fe[e+s*4>>2]=o,_r(r,o),n+=r.length+1}),0},fr=(e,t)=>{var n=it();Fe[e>>2]=n.length;var r=0;return n.forEach(s=>r+=s.length+1),Fe[t>>2]=r,0};function dr(e){try{var t=he.getStreamFromFD(e);return l.close(t),0}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return n.errno}}function pr(e,t){try{var n=0,r=0,s=0,o=he.getStreamFromFD(e),d=o.tty?2:l.isDir(o.mode)?3:l.isLink(o.mode)?7:4;return Ce[t]=d,nt[t+2>>1]=s,ze[t+8>>3]=BigInt(n),ze[t+16>>3]=BigInt(r),0}catch(y){if(typeof l>"u"||y.name!=="ErrnoError")throw y;return y.errno}}var mr=(e,t,n,r)=>{for(var s=0,o=0;o<n;o++){var d=Fe[t>>2],y=Fe[t+4>>2];t+=8;var R=l.read(e,Ce,d,y,r);if(R<0)return-1;if(s+=R,R<y)break}return s};function hr(e,t,n,r){try{var s=he.getStreamFromFD(e),o=mr(s,t,n);return Fe[r>>2]=o,0}catch(d){if(typeof l>"u"||d.name!=="ErrnoError")throw d;return d.errno}}function gr(e,t,n,r){t=st(t);try{if(isNaN(t))return 61;var s=he.getStreamFromFD(e);return l.llseek(s,t,n),ze[r>>3]=BigInt(s.position),s.getdents&&t===0&&n===0&&(s.getdents=null),0}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return o.errno}}function yr(e){var n;try{var t=he.getStreamFromFD(e);return(n=t.stream_ops)!=null&&n.fsync?t.stream_ops.fsync(t):0}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return r.errno}}var qr=(e,t,n,r)=>{for(var s=0,o=0;o<n;o++){var d=Fe[t>>2],y=Fe[t+4>>2];t+=8;var R=l.write(e,Ce,d,y,r);if(R<0)return-1;if(s+=R,R<y)break}return s};function br(e,t,n,r){try{var s=he.getStreamFromFD(e),o=qr(s,t,n);return Fe[r>>2]=o,0}catch(d){if(typeof l>"u"||d.name!=="ErrnoError")throw d;return d.errno}}l.createPreloadedFile=xn,l.staticInit();var $t={__syscall_chmod:kn,__syscall_faccessat:Tn,__syscall_fchmod:On,__syscall_fchown32:Fn,__syscall_fcntl64:Pn,__syscall_fstat64:Ln,__syscall_ftruncate64:Dn,__syscall_getcwd:Nn,__syscall_ioctl:Mn,__syscall_lstat64:jn,__syscall_mkdirat:Un,__syscall_newfstatat:Bn,__syscall_openat:Wn,__syscall_readlinkat:zn,__syscall_rmdir:Qn,__syscall_stat64:Hn,__syscall_unlinkat:Vn,__syscall_utimensat:$n,_emscripten_get_now_is_monotonic:Kn,_localtime_js:er,_mmap_js:tr,_munmap_js:nr,_tzset_js:rr,emscripten_date_now:sr,emscripten_get_now:ir,emscripten_resize_heap:lr,environ_get:ur,environ_sizes_get:fr,fd_close:dr,fd_fdstat_get:pr,fd_read:hr,fd_seek:gr,fd_sync:yr,fd_write:br,memory:Ge},m=gn();i._sqlite3_status64=(e,t,n,r)=>(i._sqlite3_status64=m.sqlite3_status64)(e,t,n,r),i._sqlite3_status=(e,t,n,r)=>(i._sqlite3_status=m.sqlite3_status)(e,t,n,r),i._sqlite3_db_status=(e,t,n,r,s)=>(i._sqlite3_db_status=m.sqlite3_db_status)(e,t,n,r,s),i._sqlite3_msize=e=>(i._sqlite3_msize=m.sqlite3_msize)(e),i._sqlite3_vfs_find=e=>(i._sqlite3_vfs_find=m.sqlite3_vfs_find)(e),i._sqlite3_initialize=()=>(i._sqlite3_initialize=m.sqlite3_initialize)(),i._sqlite3_malloc=e=>(i._sqlite3_malloc=m.sqlite3_malloc)(e),i._sqlite3_free=e=>(i._sqlite3_free=m.sqlite3_free)(e),i._sqlite3_vfs_register=(e,t)=>(i._sqlite3_vfs_register=m.sqlite3_vfs_register)(e,t),i._sqlite3_vfs_unregister=e=>(i._sqlite3_vfs_unregister=m.sqlite3_vfs_unregister)(e),i._sqlite3_malloc64=e=>(i._sqlite3_malloc64=m.sqlite3_malloc64)(e),i._sqlite3_realloc=(e,t)=>(i._sqlite3_realloc=m.sqlite3_realloc)(e,t),i._sqlite3_realloc64=(e,t)=>(i._sqlite3_realloc64=m.sqlite3_realloc64)(e,t),i._sqlite3_value_text=e=>(i._sqlite3_value_text=m.sqlite3_value_text)(e),i._sqlite3_randomness=(e,t)=>(i._sqlite3_randomness=m.sqlite3_randomness)(e,t),i._sqlite3_stricmp=(e,t)=>(i._sqlite3_stricmp=m.sqlite3_stricmp)(e,t),i._sqlite3_strnicmp=(e,t,n)=>(i._sqlite3_strnicmp=m.sqlite3_strnicmp)(e,t,n),i._sqlite3_uri_parameter=(e,t)=>(i._sqlite3_uri_parameter=m.sqlite3_uri_parameter)(e,t),i._sqlite3_uri_boolean=(e,t,n)=>(i._sqlite3_uri_boolean=m.sqlite3_uri_boolean)(e,t,n),i._sqlite3_serialize=(e,t,n,r)=>(i._sqlite3_serialize=m.sqlite3_serialize)(e,t,n,r),i._sqlite3_prepare_v2=(e,t,n,r,s)=>(i._sqlite3_prepare_v2=m.sqlite3_prepare_v2)(e,t,n,r,s),i._sqlite3_step=e=>(i._sqlite3_step=m.sqlite3_step)(e),i._sqlite3_column_int64=(e,t)=>(i._sqlite3_column_int64=m.sqlite3_column_int64)(e,t),i._sqlite3_reset=e=>(i._sqlite3_reset=m.sqlite3_reset)(e),i._sqlite3_exec=(e,t,n,r,s)=>(i._sqlite3_exec=m.sqlite3_exec)(e,t,n,r,s),i._sqlite3_column_int=(e,t)=>(i._sqlite3_column_int=m.sqlite3_column_int)(e,t),i._sqlite3_finalize=e=>(i._sqlite3_finalize=m.sqlite3_finalize)(e),i._sqlite3_file_control=(e,t,n,r)=>(i._sqlite3_file_control=m.sqlite3_file_control)(e,t,n,r),i._sqlite3_column_name=(e,t)=>(i._sqlite3_column_name=m.sqlite3_column_name)(e,t),i._sqlite3_column_text=(e,t)=>(i._sqlite3_column_text=m.sqlite3_column_text)(e,t),i._sqlite3_column_type=(e,t)=>(i._sqlite3_column_type=m.sqlite3_column_type)(e,t),i._sqlite3_errmsg=e=>(i._sqlite3_errmsg=m.sqlite3_errmsg)(e),i._sqlite3_deserialize=(e,t,n,r,s,o)=>(i._sqlite3_deserialize=m.sqlite3_deserialize)(e,t,n,r,s,o),i._sqlite3_clear_bindings=e=>(i._sqlite3_clear_bindings=m.sqlite3_clear_bindings)(e),i._sqlite3_value_blob=e=>(i._sqlite3_value_blob=m.sqlite3_value_blob)(e),i._sqlite3_value_bytes=e=>(i._sqlite3_value_bytes=m.sqlite3_value_bytes)(e),i._sqlite3_value_double=e=>(i._sqlite3_value_double=m.sqlite3_value_double)(e),i._sqlite3_value_int=e=>(i._sqlite3_value_int=m.sqlite3_value_int)(e),i._sqlite3_value_int64=e=>(i._sqlite3_value_int64=m.sqlite3_value_int64)(e),i._sqlite3_value_subtype=e=>(i._sqlite3_value_subtype=m.sqlite3_value_subtype)(e),i._sqlite3_value_pointer=(e,t)=>(i._sqlite3_value_pointer=m.sqlite3_value_pointer)(e,t),i._sqlite3_value_type=e=>(i._sqlite3_value_type=m.sqlite3_value_type)(e),i._sqlite3_value_nochange=e=>(i._sqlite3_value_nochange=m.sqlite3_value_nochange)(e),i._sqlite3_value_frombind=e=>(i._sqlite3_value_frombind=m.sqlite3_value_frombind)(e),i._sqlite3_value_dup=e=>(i._sqlite3_value_dup=m.sqlite3_value_dup)(e),i._sqlite3_value_free=e=>(i._sqlite3_value_free=m.sqlite3_value_free)(e),i._sqlite3_result_blob=(e,t,n,r)=>(i._sqlite3_result_blob=m.sqlite3_result_blob)(e,t,n,r),i._sqlite3_result_error_toobig=e=>(i._sqlite3_result_error_toobig=m.sqlite3_result_error_toobig)(e),i._sqlite3_result_error_nomem=e=>(i._sqlite3_result_error_nomem=m.sqlite3_result_error_nomem)(e),i._sqlite3_result_double=(e,t)=>(i._sqlite3_result_double=m.sqlite3_result_double)(e,t),i._sqlite3_result_error=(e,t,n)=>(i._sqlite3_result_error=m.sqlite3_result_error)(e,t,n),i._sqlite3_result_int=(e,t)=>(i._sqlite3_result_int=m.sqlite3_result_int)(e,t),i._sqlite3_result_int64=(e,t)=>(i._sqlite3_result_int64=m.sqlite3_result_int64)(e,t),i._sqlite3_result_null=e=>(i._sqlite3_result_null=m.sqlite3_result_null)(e),i._sqlite3_result_pointer=(e,t,n,r)=>(i._sqlite3_result_pointer=m.sqlite3_result_pointer)(e,t,n,r),i._sqlite3_result_subtype=(e,t)=>(i._sqlite3_result_subtype=m.sqlite3_result_subtype)(e,t),i._sqlite3_result_text=(e,t,n,r)=>(i._sqlite3_result_text=m.sqlite3_result_text)(e,t,n,r),i._sqlite3_result_zeroblob=(e,t)=>(i._sqlite3_result_zeroblob=m.sqlite3_result_zeroblob)(e,t),i._sqlite3_result_zeroblob64=(e,t)=>(i._sqlite3_result_zeroblob64=m.sqlite3_result_zeroblob64)(e,t),i._sqlite3_result_error_code=(e,t)=>(i._sqlite3_result_error_code=m.sqlite3_result_error_code)(e,t),i._sqlite3_user_data=e=>(i._sqlite3_user_data=m.sqlite3_user_data)(e),i._sqlite3_context_db_handle=e=>(i._sqlite3_context_db_handle=m.sqlite3_context_db_handle)(e),i._sqlite3_vtab_nochange=e=>(i._sqlite3_vtab_nochange=m.sqlite3_vtab_nochange)(e),i._sqlite3_vtab_in_first=(e,t)=>(i._sqlite3_vtab_in_first=m.sqlite3_vtab_in_first)(e,t),i._sqlite3_vtab_in_next=(e,t)=>(i._sqlite3_vtab_in_next=m.sqlite3_vtab_in_next)(e,t),i._sqlite3_aggregate_context=(e,t)=>(i._sqlite3_aggregate_context=m.sqlite3_aggregate_context)(e,t),i._sqlite3_get_auxdata=(e,t)=>(i._sqlite3_get_auxdata=m.sqlite3_get_auxdata)(e,t),i._sqlite3_set_auxdata=(e,t,n,r)=>(i._sqlite3_set_auxdata=m.sqlite3_set_auxdata)(e,t,n,r),i._sqlite3_column_count=e=>(i._sqlite3_column_count=m.sqlite3_column_count)(e),i._sqlite3_data_count=e=>(i._sqlite3_data_count=m.sqlite3_data_count)(e),i._sqlite3_column_blob=(e,t)=>(i._sqlite3_column_blob=m.sqlite3_column_blob)(e,t),i._sqlite3_column_bytes=(e,t)=>(i._sqlite3_column_bytes=m.sqlite3_column_bytes)(e,t),i._sqlite3_column_double=(e,t)=>(i._sqlite3_column_double=m.sqlite3_column_double)(e,t),i._sqlite3_column_value=(e,t)=>(i._sqlite3_column_value=m.sqlite3_column_value)(e,t),i._sqlite3_column_decltype=(e,t)=>(i._sqlite3_column_decltype=m.sqlite3_column_decltype)(e,t),i._sqlite3_bind_blob=(e,t,n,r,s)=>(i._sqlite3_bind_blob=m.sqlite3_bind_blob)(e,t,n,r,s),i._sqlite3_bind_double=(e,t,n)=>(i._sqlite3_bind_double=m.sqlite3_bind_double)(e,t,n),i._sqlite3_bind_int=(e,t,n)=>(i._sqlite3_bind_int=m.sqlite3_bind_int)(e,t,n),i._sqlite3_bind_int64=(e,t,n)=>(i._sqlite3_bind_int64=m.sqlite3_bind_int64)(e,t,n),i._sqlite3_bind_null=(e,t)=>(i._sqlite3_bind_null=m.sqlite3_bind_null)(e,t),i._sqlite3_bind_pointer=(e,t,n,r,s)=>(i._sqlite3_bind_pointer=m.sqlite3_bind_pointer)(e,t,n,r,s),i._sqlite3_bind_text=(e,t,n,r,s)=>(i._sqlite3_bind_text=m.sqlite3_bind_text)(e,t,n,r,s),i._sqlite3_bind_parameter_count=e=>(i._sqlite3_bind_parameter_count=m.sqlite3_bind_parameter_count)(e),i._sqlite3_bind_parameter_name=(e,t)=>(i._sqlite3_bind_parameter_name=m.sqlite3_bind_parameter_name)(e,t),i._sqlite3_bind_parameter_index=(e,t)=>(i._sqlite3_bind_parameter_index=m.sqlite3_bind_parameter_index)(e,t),i._sqlite3_db_handle=e=>(i._sqlite3_db_handle=m.sqlite3_db_handle)(e),i._sqlite3_stmt_readonly=e=>(i._sqlite3_stmt_readonly=m.sqlite3_stmt_readonly)(e),i._sqlite3_stmt_isexplain=e=>(i._sqlite3_stmt_isexplain=m.sqlite3_stmt_isexplain)(e),i._sqlite3_stmt_explain=(e,t)=>(i._sqlite3_stmt_explain=m.sqlite3_stmt_explain)(e,t),i._sqlite3_stmt_busy=e=>(i._sqlite3_stmt_busy=m.sqlite3_stmt_busy)(e),i._sqlite3_stmt_status=(e,t,n)=>(i._sqlite3_stmt_status=m.sqlite3_stmt_status)(e,t,n),i._sqlite3_sql=e=>(i._sqlite3_sql=m.sqlite3_sql)(e),i._sqlite3_expanded_sql=e=>(i._sqlite3_expanded_sql=m.sqlite3_expanded_sql)(e),i._sqlite3_preupdate_old=(e,t,n)=>(i._sqlite3_preupdate_old=m.sqlite3_preupdate_old)(e,t,n),i._sqlite3_preupdate_count=e=>(i._sqlite3_preupdate_count=m.sqlite3_preupdate_count)(e),i._sqlite3_preupdate_depth=e=>(i._sqlite3_preupdate_depth=m.sqlite3_preupdate_depth)(e),i._sqlite3_preupdate_blobwrite=e=>(i._sqlite3_preupdate_blobwrite=m.sqlite3_preupdate_blobwrite)(e),i._sqlite3_preupdate_new=(e,t,n)=>(i._sqlite3_preupdate_new=m.sqlite3_preupdate_new)(e,t,n),i._sqlite3_value_numeric_type=e=>(i._sqlite3_value_numeric_type=m.sqlite3_value_numeric_type)(e),i._sqlite3_set_authorizer=(e,t,n)=>(i._sqlite3_set_authorizer=m.sqlite3_set_authorizer)(e,t,n),i._sqlite3_strglob=(e,t)=>(i._sqlite3_strglob=m.sqlite3_strglob)(e,t),i._sqlite3_strlike=(e,t,n)=>(i._sqlite3_strlike=m.sqlite3_strlike)(e,t,n),i._sqlite3_auto_extension=e=>(i._sqlite3_auto_extension=m.sqlite3_auto_extension)(e),i._sqlite3_cancel_auto_extension=e=>(i._sqlite3_cancel_auto_extension=m.sqlite3_cancel_auto_extension)(e),i._sqlite3_reset_auto_extension=()=>(i._sqlite3_reset_auto_extension=m.sqlite3_reset_auto_extension)(),i._sqlite3_prepare_v3=(e,t,n,r,s,o)=>(i._sqlite3_prepare_v3=m.sqlite3_prepare_v3)(e,t,n,r,s,o),i._sqlite3_create_module=(e,t,n,r)=>(i._sqlite3_create_module=m.sqlite3_create_module)(e,t,n,r),i._sqlite3_create_module_v2=(e,t,n,r,s)=>(i._sqlite3_create_module_v2=m.sqlite3_create_module_v2)(e,t,n,r,s),i._sqlite3_drop_modules=(e,t)=>(i._sqlite3_drop_modules=m.sqlite3_drop_modules)(e,t),i._sqlite3_declare_vtab=(e,t)=>(i._sqlite3_declare_vtab=m.sqlite3_declare_vtab)(e,t),i._sqlite3_vtab_on_conflict=e=>(i._sqlite3_vtab_on_conflict=m.sqlite3_vtab_on_conflict)(e),i._sqlite3_vtab_collation=(e,t)=>(i._sqlite3_vtab_collation=m.sqlite3_vtab_collation)(e,t),i._sqlite3_vtab_in=(e,t,n)=>(i._sqlite3_vtab_in=m.sqlite3_vtab_in)(e,t,n),i._sqlite3_vtab_rhs_value=(e,t,n)=>(i._sqlite3_vtab_rhs_value=m.sqlite3_vtab_rhs_value)(e,t,n),i._sqlite3_vtab_distinct=e=>(i._sqlite3_vtab_distinct=m.sqlite3_vtab_distinct)(e),i._sqlite3_keyword_name=(e,t,n)=>(i._sqlite3_keyword_name=m.sqlite3_keyword_name)(e,t,n),i._sqlite3_keyword_count=()=>(i._sqlite3_keyword_count=m.sqlite3_keyword_count)(),i._sqlite3_keyword_check=(e,t)=>(i._sqlite3_keyword_check=m.sqlite3_keyword_check)(e,t),i._sqlite3_complete=e=>(i._sqlite3_complete=m.sqlite3_complete)(e),i._sqlite3_libversion=()=>(i._sqlite3_libversion=m.sqlite3_libversion)(),i._sqlite3_libversion_number=()=>(i._sqlite3_libversion_number=m.sqlite3_libversion_number)(),i._sqlite3_shutdown=()=>(i._sqlite3_shutdown=m.sqlite3_shutdown)(),i._sqlite3_last_insert_rowid=e=>(i._sqlite3_last_insert_rowid=m.sqlite3_last_insert_rowid)(e),i._sqlite3_set_last_insert_rowid=(e,t)=>(i._sqlite3_set_last_insert_rowid=m.sqlite3_set_last_insert_rowid)(e,t),i._sqlite3_changes64=e=>(i._sqlite3_changes64=m.sqlite3_changes64)(e),i._sqlite3_changes=e=>(i._sqlite3_changes=m.sqlite3_changes)(e),i._sqlite3_total_changes64=e=>(i._sqlite3_total_changes64=m.sqlite3_total_changes64)(e),i._sqlite3_total_changes=e=>(i._sqlite3_total_changes=m.sqlite3_total_changes)(e),i._sqlite3_txn_state=(e,t)=>(i._sqlite3_txn_state=m.sqlite3_txn_state)(e,t),i._sqlite3_close_v2=e=>(i._sqlite3_close_v2=m.sqlite3_close_v2)(e),i._sqlite3_busy_handler=(e,t,n)=>(i._sqlite3_busy_handler=m.sqlite3_busy_handler)(e,t,n),i._sqlite3_progress_handler=(e,t,n,r)=>(i._sqlite3_progress_handler=m.sqlite3_progress_handler)(e,t,n,r),i._sqlite3_busy_timeout=(e,t)=>(i._sqlite3_busy_timeout=m.sqlite3_busy_timeout)(e,t),i._sqlite3_interrupt=e=>(i._sqlite3_interrupt=m.sqlite3_interrupt)(e),i._sqlite3_is_interrupted=e=>(i._sqlite3_is_interrupted=m.sqlite3_is_interrupted)(e),i._sqlite3_create_function=(e,t,n,r,s,o,d,y)=>(i._sqlite3_create_function=m.sqlite3_create_function)(e,t,n,r,s,o,d,y),i._sqlite3_create_function_v2=(e,t,n,r,s,o,d,y,R)=>(i._sqlite3_create_function_v2=m.sqlite3_create_function_v2)(e,t,n,r,s,o,d,y,R),i._sqlite3_create_window_function=(e,t,n,r,s,o,d,y,R,D)=>(i._sqlite3_create_window_function=m.sqlite3_create_window_function)(e,t,n,r,s,o,d,y,R,D),i._sqlite3_overload_function=(e,t,n)=>(i._sqlite3_overload_function=m.sqlite3_overload_function)(e,t,n),i._sqlite3_trace_v2=(e,t,n,r)=>(i._sqlite3_trace_v2=m.sqlite3_trace_v2)(e,t,n,r),i._sqlite3_commit_hook=(e,t,n)=>(i._sqlite3_commit_hook=m.sqlite3_commit_hook)(e,t,n),i._sqlite3_update_hook=(e,t,n)=>(i._sqlite3_update_hook=m.sqlite3_update_hook)(e,t,n),i._sqlite3_rollback_hook=(e,t,n)=>(i._sqlite3_rollback_hook=m.sqlite3_rollback_hook)(e,t,n),i._sqlite3_preupdate_hook=(e,t,n)=>(i._sqlite3_preupdate_hook=m.sqlite3_preupdate_hook)(e,t,n),i._sqlite3_error_offset=e=>(i._sqlite3_error_offset=m.sqlite3_error_offset)(e),i._sqlite3_errcode=e=>(i._sqlite3_errcode=m.sqlite3_errcode)(e),i._sqlite3_extended_errcode=e=>(i._sqlite3_extended_errcode=m.sqlite3_extended_errcode)(e),i._sqlite3_errstr=e=>(i._sqlite3_errstr=m.sqlite3_errstr)(e),i._sqlite3_limit=(e,t,n)=>(i._sqlite3_limit=m.sqlite3_limit)(e,t,n),i._sqlite3_open=(e,t)=>(i._sqlite3_open=m.sqlite3_open)(e,t),i._sqlite3_open_v2=(e,t,n,r)=>(i._sqlite3_open_v2=m.sqlite3_open_v2)(e,t,n,r),i._sqlite3_create_collation=(e,t,n,r,s)=>(i._sqlite3_create_collation=m.sqlite3_create_collation)(e,t,n,r,s),i._sqlite3_create_collation_v2=(e,t,n,r,s,o)=>(i._sqlite3_create_collation_v2=m.sqlite3_create_collation_v2)(e,t,n,r,s,o),i._sqlite3_collation_needed=(e,t,n)=>(i._sqlite3_collation_needed=m.sqlite3_collation_needed)(e,t,n),i._sqlite3_get_autocommit=e=>(i._sqlite3_get_autocommit=m.sqlite3_get_autocommit)(e),i._sqlite3_table_column_metadata=(e,t,n,r,s,o,d,y,R)=>(i._sqlite3_table_column_metadata=m.sqlite3_table_column_metadata)(e,t,n,r,s,o,d,y,R),i._sqlite3_extended_result_codes=(e,t)=>(i._sqlite3_extended_result_codes=m.sqlite3_extended_result_codes)(e,t),i._sqlite3_uri_key=(e,t)=>(i._sqlite3_uri_key=m.sqlite3_uri_key)(e,t),i._sqlite3_uri_int64=(e,t,n)=>(i._sqlite3_uri_int64=m.sqlite3_uri_int64)(e,t,n),i._sqlite3_db_name=(e,t)=>(i._sqlite3_db_name=m.sqlite3_db_name)(e,t),i._sqlite3_db_filename=(e,t)=>(i._sqlite3_db_filename=m.sqlite3_db_filename)(e,t),i._sqlite3_db_readonly=(e,t)=>(i._sqlite3_db_readonly=m.sqlite3_db_readonly)(e,t),i._sqlite3_compileoption_used=e=>(i._sqlite3_compileoption_used=m.sqlite3_compileoption_used)(e),i._sqlite3_compileoption_get=e=>(i._sqlite3_compileoption_get=m.sqlite3_compileoption_get)(e),i._sqlite3session_diff=(e,t,n,r)=>(i._sqlite3session_diff=m.sqlite3session_diff)(e,t,n,r),i._sqlite3session_attach=(e,t)=>(i._sqlite3session_attach=m.sqlite3session_attach)(e,t),i._sqlite3session_create=(e,t,n)=>(i._sqlite3session_create=m.sqlite3session_create)(e,t,n),i._sqlite3session_delete=e=>(i._sqlite3session_delete=m.sqlite3session_delete)(e),i._sqlite3session_table_filter=(e,t,n)=>(i._sqlite3session_table_filter=m.sqlite3session_table_filter)(e,t,n),i._sqlite3session_changeset=(e,t,n)=>(i._sqlite3session_changeset=m.sqlite3session_changeset)(e,t,n),i._sqlite3session_changeset_strm=(e,t,n)=>(i._sqlite3session_changeset_strm=m.sqlite3session_changeset_strm)(e,t,n),i._sqlite3session_patchset_strm=(e,t,n)=>(i._sqlite3session_patchset_strm=m.sqlite3session_patchset_strm)(e,t,n),i._sqlite3session_patchset=(e,t,n)=>(i._sqlite3session_patchset=m.sqlite3session_patchset)(e,t,n),i._sqlite3session_enable=(e,t)=>(i._sqlite3session_enable=m.sqlite3session_enable)(e,t),i._sqlite3session_indirect=(e,t)=>(i._sqlite3session_indirect=m.sqlite3session_indirect)(e,t),i._sqlite3session_isempty=e=>(i._sqlite3session_isempty=m.sqlite3session_isempty)(e),i._sqlite3session_memory_used=e=>(i._sqlite3session_memory_used=m.sqlite3session_memory_used)(e),i._sqlite3session_object_config=(e,t,n)=>(i._sqlite3session_object_config=m.sqlite3session_object_config)(e,t,n),i._sqlite3session_changeset_size=e=>(i._sqlite3session_changeset_size=m.sqlite3session_changeset_size)(e),i._sqlite3changeset_start=(e,t,n)=>(i._sqlite3changeset_start=m.sqlite3changeset_start)(e,t,n),i._sqlite3changeset_start_v2=(e,t,n,r)=>(i._sqlite3changeset_start_v2=m.sqlite3changeset_start_v2)(e,t,n,r),i._sqlite3changeset_start_strm=(e,t,n)=>(i._sqlite3changeset_start_strm=m.sqlite3changeset_start_strm)(e,t,n),i._sqlite3changeset_start_v2_strm=(e,t,n,r)=>(i._sqlite3changeset_start_v2_strm=m.sqlite3changeset_start_v2_strm)(e,t,n,r),i._sqlite3changeset_next=e=>(i._sqlite3changeset_next=m.sqlite3changeset_next)(e),i._sqlite3changeset_op=(e,t,n,r,s)=>(i._sqlite3changeset_op=m.sqlite3changeset_op)(e,t,n,r,s),i._sqlite3changeset_pk=(e,t,n)=>(i._sqlite3changeset_pk=m.sqlite3changeset_pk)(e,t,n),i._sqlite3changeset_old=(e,t,n)=>(i._sqlite3changeset_old=m.sqlite3changeset_old)(e,t,n),i._sqlite3changeset_new=(e,t,n)=>(i._sqlite3changeset_new=m.sqlite3changeset_new)(e,t,n),i._sqlite3changeset_conflict=(e,t,n)=>(i._sqlite3changeset_conflict=m.sqlite3changeset_conflict)(e,t,n),i._sqlite3changeset_fk_conflicts=(e,t)=>(i._sqlite3changeset_fk_conflicts=m.sqlite3changeset_fk_conflicts)(e,t),i._sqlite3changeset_finalize=e=>(i._sqlite3changeset_finalize=m.sqlite3changeset_finalize)(e),i._sqlite3changeset_invert=(e,t,n,r)=>(i._sqlite3changeset_invert=m.sqlite3changeset_invert)(e,t,n,r),i._sqlite3changeset_invert_strm=(e,t,n,r)=>(i._sqlite3changeset_invert_strm=m.sqlite3changeset_invert_strm)(e,t,n,r),i._sqlite3changeset_apply_v2=(e,t,n,r,s,o,d,y,R)=>(i._sqlite3changeset_apply_v2=m.sqlite3changeset_apply_v2)(e,t,n,r,s,o,d,y,R),i._sqlite3changeset_apply=(e,t,n,r,s,o)=>(i._sqlite3changeset_apply=m.sqlite3changeset_apply)(e,t,n,r,s,o),i._sqlite3changeset_apply_v2_strm=(e,t,n,r,s,o,d,y,R)=>(i._sqlite3changeset_apply_v2_strm=m.sqlite3changeset_apply_v2_strm)(e,t,n,r,s,o,d,y,R),i._sqlite3changeset_apply_strm=(e,t,n,r,s,o)=>(i._sqlite3changeset_apply_strm=m.sqlite3changeset_apply_strm)(e,t,n,r,s,o),i._sqlite3changegroup_new=e=>(i._sqlite3changegroup_new=m.sqlite3changegroup_new)(e),i._sqlite3changegroup_add=(e,t,n)=>(i._sqlite3changegroup_add=m.sqlite3changegroup_add)(e,t,n),i._sqlite3changegroup_output=(e,t,n)=>(i._sqlite3changegroup_output=m.sqlite3changegroup_output)(e,t,n),i._sqlite3changegroup_add_strm=(e,t,n)=>(i._sqlite3changegroup_add_strm=m.sqlite3changegroup_add_strm)(e,t,n),i._sqlite3changegroup_output_strm=(e,t,n)=>(i._sqlite3changegroup_output_strm=m.sqlite3changegroup_output_strm)(e,t,n),i._sqlite3changegroup_delete=e=>(i._sqlite3changegroup_delete=m.sqlite3changegroup_delete)(e),i._sqlite3changeset_concat=(e,t,n,r,s,o)=>(i._sqlite3changeset_concat=m.sqlite3changeset_concat)(e,t,n,r,s,o),i._sqlite3changeset_concat_strm=(e,t,n,r,s,o)=>(i._sqlite3changeset_concat_strm=m.sqlite3changeset_concat_strm)(e,t,n,r,s,o),i._sqlite3session_config=(e,t)=>(i._sqlite3session_config=m.sqlite3session_config)(e,t),i._sqlite3_sourceid=()=>(i._sqlite3_sourceid=m.sqlite3_sourceid)(),i._sqlite3__wasm_pstack_ptr=()=>(i._sqlite3__wasm_pstack_ptr=m.sqlite3__wasm_pstack_ptr)(),i._sqlite3__wasm_pstack_restore=e=>(i._sqlite3__wasm_pstack_restore=m.sqlite3__wasm_pstack_restore)(e),i._sqlite3__wasm_pstack_alloc=e=>(i._sqlite3__wasm_pstack_alloc=m.sqlite3__wasm_pstack_alloc)(e),i._sqlite3__wasm_pstack_remaining=()=>(i._sqlite3__wasm_pstack_remaining=m.sqlite3__wasm_pstack_remaining)(),i._sqlite3__wasm_pstack_quota=()=>(i._sqlite3__wasm_pstack_quota=m.sqlite3__wasm_pstack_quota)(),i._sqlite3__wasm_db_error=(e,t,n)=>(i._sqlite3__wasm_db_error=m.sqlite3__wasm_db_error)(e,t,n),i._sqlite3__wasm_test_struct=e=>(i._sqlite3__wasm_test_struct=m.sqlite3__wasm_test_struct)(e),i._sqlite3__wasm_enum_json=()=>(i._sqlite3__wasm_enum_json=m.sqlite3__wasm_enum_json)(),i._sqlite3__wasm_vfs_unlink=(e,t)=>(i._sqlite3__wasm_vfs_unlink=m.sqlite3__wasm_vfs_unlink)(e,t),i._sqlite3__wasm_db_vfs=(e,t)=>(i._sqlite3__wasm_db_vfs=m.sqlite3__wasm_db_vfs)(e,t),i._sqlite3__wasm_db_reset=e=>(i._sqlite3__wasm_db_reset=m.sqlite3__wasm_db_reset)(e),i._sqlite3__wasm_db_export_chunked=(e,t)=>(i._sqlite3__wasm_db_export_chunked=m.sqlite3__wasm_db_export_chunked)(e,t),i._sqlite3__wasm_db_serialize=(e,t,n,r,s)=>(i._sqlite3__wasm_db_serialize=m.sqlite3__wasm_db_serialize)(e,t,n,r,s),i._sqlite3__wasm_vfs_create_file=(e,t,n,r)=>(i._sqlite3__wasm_vfs_create_file=m.sqlite3__wasm_vfs_create_file)(e,t,n,r),i._sqlite3__wasm_posix_create_file=(e,t,n)=>(i._sqlite3__wasm_posix_create_file=m.sqlite3__wasm_posix_create_file)(e,t,n),i._sqlite3__wasm_kvvfsMakeKeyOnPstack=(e,t)=>(i._sqlite3__wasm_kvvfsMakeKeyOnPstack=m.sqlite3__wasm_kvvfsMakeKeyOnPstack)(e,t),i._sqlite3__wasm_kvvfs_methods=()=>(i._sqlite3__wasm_kvvfs_methods=m.sqlite3__wasm_kvvfs_methods)(),i._sqlite3__wasm_vtab_config=(e,t,n)=>(i._sqlite3__wasm_vtab_config=m.sqlite3__wasm_vtab_config)(e,t,n),i._sqlite3__wasm_db_config_ip=(e,t,n,r)=>(i._sqlite3__wasm_db_config_ip=m.sqlite3__wasm_db_config_ip)(e,t,n,r),i._sqlite3__wasm_db_config_pii=(e,t,n,r,s)=>(i._sqlite3__wasm_db_config_pii=m.sqlite3__wasm_db_config_pii)(e,t,n,r,s),i._sqlite3__wasm_db_config_s=(e,t,n)=>(i._sqlite3__wasm_db_config_s=m.sqlite3__wasm_db_config_s)(e,t,n),i._sqlite3__wasm_config_i=(e,t)=>(i._sqlite3__wasm_config_i=m.sqlite3__wasm_config_i)(e,t),i._sqlite3__wasm_config_ii=(e,t,n)=>(i._sqlite3__wasm_config_ii=m.sqlite3__wasm_config_ii)(e,t,n),i._sqlite3__wasm_config_j=(e,t)=>(i._sqlite3__wasm_config_j=m.sqlite3__wasm_config_j)(e,t),i._sqlite3__wasm_qfmt_token=(e,t)=>(i._sqlite3__wasm_qfmt_token=m.sqlite3__wasm_qfmt_token)(e,t),i._sqlite3__wasm_init_wasmfs=e=>(i._sqlite3__wasm_init_wasmfs=m.sqlite3__wasm_init_wasmfs)(e),i._sqlite3__wasm_test_intptr=e=>(i._sqlite3__wasm_test_intptr=m.sqlite3__wasm_test_intptr)(e),i._sqlite3__wasm_test_voidptr=e=>(i._sqlite3__wasm_test_voidptr=m.sqlite3__wasm_test_voidptr)(e),i._sqlite3__wasm_test_int64_max=()=>(i._sqlite3__wasm_test_int64_max=m.sqlite3__wasm_test_int64_max)(),i._sqlite3__wasm_test_int64_min=()=>(i._sqlite3__wasm_test_int64_min=m.sqlite3__wasm_test_int64_min)(),i._sqlite3__wasm_test_int64_times2=e=>(i._sqlite3__wasm_test_int64_times2=m.sqlite3__wasm_test_int64_times2)(e),i._sqlite3__wasm_test_int64_minmax=(e,t)=>(i._sqlite3__wasm_test_int64_minmax=m.sqlite3__wasm_test_int64_minmax)(e,t),i._sqlite3__wasm_test_int64ptr=e=>(i._sqlite3__wasm_test_int64ptr=m.sqlite3__wasm_test_int64ptr)(e),i._sqlite3__wasm_test_stack_overflow=e=>(i._sqlite3__wasm_test_stack_overflow=m.sqlite3__wasm_test_stack_overflow)(e),i._sqlite3__wasm_test_str_hello=e=>(i._sqlite3__wasm_test_str_hello=m.sqlite3__wasm_test_str_hello)(e),i._sqlite3__wasm_SQLTester_strglob=(e,t)=>(i._sqlite3__wasm_SQLTester_strglob=m.sqlite3__wasm_SQLTester_strglob)(e,t),i._malloc=e=>(i._malloc=m.malloc)(e),i._free=e=>(i._free=m.free)(e),i._realloc=(e,t)=>(i._realloc=m.realloc)(e,t);var Gt=(e,t)=>(Gt=m.emscripten_builtin_memalign)(e,t);i.wasmMemory=Ge;var pt,Kt;rt=function e(){pt||Jt(),pt||(rt=e)};function Jt(){if(Ke>0||!Kt&&(Kt=1,on(),Ke>0))return;function e(){var t;pt||(pt=1,i.calledRun=1,!Lt&&(an(),te(i),(t=i.onRuntimeInitialized)==null||t.call(i),ln()))}i.setStatus?(i.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>i.setStatus(""),1),e()},1)):e()}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return Jt(),i.runSQLite3PostLoadInit=function(e){if(globalThis.sqlite3ApiBootstrap=function t(n=globalThis.sqlite3ApiConfig||t.defaultConfig){if(t.sqlite3)return(t.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),t.sqlite3;const r=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof i<"u"&&i.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},n||{});Object.assign(r,{allocExportName:r.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:r.useStdAlloc?"free":"sqlite3_free",reallocExportName:r.useStdAlloc?"realloc":"sqlite3_realloc"},r),["exports","memory","wasmfsOpfsDir"].forEach(a=>{typeof r[a]=="function"&&(r[a]=r[a]())}),delete globalThis.sqlite3ApiConfig,delete t.defaultConfig;const s=Object.create(null),o=Object.create(null),d=a=>s.sqlite3_js_rc_str&&s.sqlite3_js_rc_str(a)||"Unknown result code #"+a,y=a=>typeof a=="number"&&a===(a|0);class R extends Error{constructor(..._){let q;if(_.length)if(y(_[0]))if(q=_[0],_.length===1)super(d(_[0]));else{const b=d(q);typeof _[1]=="object"?super(b,_[1]):(_[0]=b+":",super(_.join(" ")))}else _.length===2&&typeof _[1]=="object"?super(..._):super(_.join(" "));this.resultCode=q||s.SQLITE_ERROR,this.name="SQLite3Error"}}R.toss=(...a)=>{throw new R(...a)};const D=R.toss;r.wasmfsOpfsDir&&!/^\/[^/]+$/.test(r.wasmfsOpfsDir)&&D("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const V=a=>typeof a!="bigint"&&a===(a|0)&&a<=2147483647&&a>=-2147483648,K=function a(_){return a._max||(a._max=BigInt("0x7fffffffffffffff"),a._min=~a._max),_>=a._min&&_<=a._max},C=a=>a>=-0x7fffffffn-1n&&a<=0x7fffffffn,k=function a(_){return a._min||(a._min=Number.MIN_SAFE_INTEGER,a._max=Number.MAX_SAFE_INTEGER),_>=a._min&&_<=a._max},j=a=>a&&a.constructor&&V(a.constructor.BYTES_PER_ELEMENT)?a:!1,w=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,S=a=>a.buffer instanceof w,O=(a,_,q)=>S(a)?a.slice(_,q):a.subarray(_,q),F=a=>a&&(a instanceof Uint8Array||a instanceof Int8Array||a instanceof ArrayBuffer),N=a=>a&&(a instanceof Uint8Array||a instanceof Int8Array||a instanceof ArrayBuffer),I=a=>F(a)||D("Value is not of a supported TypedArray type."),U=new TextDecoder("utf-8"),$=function(a,_,q){return U.decode(O(a,_,q))},c=function(a){return N(a)?$(a instanceof ArrayBuffer?new Uint8Array(a):a):Array.isArray(a)?a.join(""):(o.isPtr(a)&&(a=o.cstrToJs(a)),a)};class g extends Error{constructor(..._){_.length===2&&typeof _[1]=="object"?super(..._):_.length?super(_.join(" ")):super("Allocation failed."),this.resultCode=s.SQLITE_NOMEM,this.name="WasmAllocError"}}g.toss=(...a)=>{throw new g(...a)},Object.assign(s,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(a,_,q,b,z,ee,oe,ce,ae)=>{},sqlite3_create_function:(a,_,q,b,z,ee,oe,ce)=>{},sqlite3_create_window_function:(a,_,q,b,z,ee,oe,ce,ae,le)=>{},sqlite3_prepare_v3:(a,_,q,b,z,ee)=>{},sqlite3_prepare_v2:(a,_,q,b,z)=>{},sqlite3_exec:(a,_,q,b,z)=>{},sqlite3_randomness:(a,_)=>{}});const E={affirmBindableTypedArray:I,flexibleString:c,bigIntFits32:C,bigIntFits64:K,bigIntFitsDouble:k,isBindableTypedArray:F,isInt32:V,isSQLableTypedArray:N,isTypedArray:j,typedArrayToString:$,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:S,toss:function(...a){throw new Error(a.join(" "))},toss3:D,typedArrayPart:O,affirmDbHeader:function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));const _="SQLite format 3";_.length>a.byteLength&&D("Input does not contain an SQLite3 database header.");for(let q=0;q<_.length;++q)_.charCodeAt(q)!==a[q]&&D("Input does not contain an SQLite3 database header.")},affirmIsDb:function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));const _=a.byteLength;(_<512||_%512!==0)&&D("Byte array size",_,"is invalid for an SQLite3 db."),E.affirmDbHeader(a)}};Object.assign(o,{ptrSizeof:r.wasmPtrSizeof||4,ptrIR:r.wasmPtrIR||"i32",bigIntEnabled:!!r.bigIntEnabled,exports:r.exports||D("Missing API config.exports (WASM module exports)."),memory:r.memory||r.exports.memory||D("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),o.allocFromTypedArray=function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a)),I(a);const _=o.alloc(a.byteLength||1);return o.heapForSize(a.constructor).set(a.byteLength?a:[0],_),_};{const a=r.allocExportName,_=r.deallocExportName,q=r.reallocExportName;for(const b of[a,_,q])o.exports[b]instanceof Function||D("Missing required exports[",b,"] function.");o.alloc=function b(z){return b.impl(z)||g.toss("Failed to allocate",z," bytes.")},o.alloc.impl=o.exports[a],o.realloc=function b(z,ee){const oe=b.impl(z,ee);return ee?oe||g.toss("Failed to reallocate",ee," bytes."):0},o.realloc.impl=o.exports[q],o.dealloc=o.exports[_]}o.compileOptionUsed=function a(_){if(arguments.length){if(Array.isArray(_)){const q={};return _.forEach(b=>{q[b]=s.sqlite3_compileoption_used(b)}),q}else if(typeof _=="object")return Object.keys(_).forEach(q=>{_[q]=s.sqlite3_compileoption_used(q)}),_}else{if(a._result)return a._result;a._opt||(a._rx=/^([^=]+)=(.+)/,a._rxInt=/^-?\d+$/,a._opt=function(oe,ce){const ae=a._rx.exec(oe);ce[0]=ae?ae[1]:oe,ce[1]=ae?a._rxInt.test(ae[2])?+ae[2]:ae[2]:!0});const q={},b=[0,0];let z=0,ee;for(;ee=s.sqlite3_compileoption_get(z++);)a._opt(ee,b),q[b[0]]=b[1];return a._result=q}return typeof _=="string"?!!s.sqlite3_compileoption_used(_):!1},o.pstack=Object.assign(Object.create(null),{restore:o.exports.sqlite3__wasm_pstack_restore,alloc:function(a){return typeof a=="string"&&!(a=o.sizeofIR(a))&&g.toss("Invalid value for pstack.alloc(",arguments[0],")"),o.exports.sqlite3__wasm_pstack_alloc(a)||g.toss("Could not allocate",a,"bytes from the pstack.")},allocChunks:function(a,_){typeof _=="string"&&!(_=o.sizeofIR(_))&&g.toss("Invalid size value for allocChunks(",arguments[1],")");const q=o.pstack.alloc(a*_),b=[];let z=0,ee=0;for(;z<a;++z,ee+=_)b.push(q+ee);return b},allocPtr:(a=1,_=!0)=>a===1?o.pstack.alloc(_?8:o.ptrSizeof):o.pstack.allocChunks(a,_?8:o.ptrSizeof),call:function(a){const _=o.pstack.pointer;try{return a(h)}finally{o.pstack.restore(_)}}}),Object.defineProperties(o.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:o.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:o.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:o.exports.sqlite3__wasm_pstack_remaining}}),s.sqlite3_randomness=(...a)=>{if(a.length===1&&E.isTypedArray(a[0])&&a[0].BYTES_PER_ELEMENT===1){const _=a[0];if(_.byteLength===0)return o.exports.sqlite3_randomness(0,0),_;const q=o.pstack.pointer;try{let b=_.byteLength,z=0;const ee=o.exports.sqlite3_randomness,oe=o.heap8u(),ce=b<512?b:512,ae=o.pstack.alloc(ce);do{const le=b>ce?ce:b;ee(le,ae),_.set(O(oe,ae,ae+le),z),b-=le,z+=le}while(b>0)}catch(b){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",b)}finally{o.pstack.restore(q)}return _}o.exports.sqlite3_randomness(...a)};let Q;if(s.sqlite3_wasmfs_opfs_dir=function(){if(Q!==void 0)return Q;const a=r.wasmfsOpfsDir;if(!a||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return Q="";try{return a&&o.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],a)===0?Q=a:Q=""}catch{return Q=""}},s.sqlite3_wasmfs_filename_is_persistent=function(a){const _=s.sqlite3_wasmfs_opfs_dir();return _&&a?a.startsWith(_+"/"):!1},s.sqlite3_js_db_uses_vfs=function(a,_,q=0){try{const b=s.sqlite3_vfs_find(_);return b?a?b===s.sqlite3_js_db_vfs(a,q)?b:!1:b===s.sqlite3_vfs_find(0)?b:!1:!1}catch{return!1}},s.sqlite3_js_vfs_list=function(){const a=[];let _=s.sqlite3_vfs_find(0);for(;_;){const q=new s.sqlite3_vfs(_);a.push(o.cstrToJs(q.$zName)),_=q.$pNext,q.dispose()}return a},s.sqlite3_js_db_export=function(a,_=0){a=o.xWrap.testConvertArg("sqlite3*",a),a||D("Invalid sqlite3* argument."),o.bigIntEnabled||D("BigInt64 support is not enabled.");const q=o.scopedAllocPush();let b;try{const z=o.scopedAlloc(8+o.ptrSizeof),ee=z+8,oe=_?o.isPtr(_)?_:o.scopedAllocCString(""+_):0;let ce=o.exports.sqlite3__wasm_db_serialize(a,oe,ee,z,0);ce&&D("Database serialization failed with code",h.capi.sqlite3_js_rc_str(ce)),b=o.peekPtr(ee);const ae=o.peek(z,"i64");return ce=ae?o.heap8u().slice(b,b+Number(ae)):new Uint8Array,ce}finally{b&&o.exports.sqlite3_free(b),o.scopedAllocPop(q)}},s.sqlite3_js_db_vfs=(a,_=0)=>E.sqlite3__wasm_db_vfs(a,_),s.sqlite3_js_aggregate_context=(a,_)=>s.sqlite3_aggregate_context(a,_)||(_?g.toss("Cannot allocate",_,"bytes for sqlite3_aggregate_context()"):0),s.sqlite3_js_posix_create_file=function(a,_,q){let b;_&&o.isPtr(_)?b=_:_ instanceof ArrayBuffer||_ instanceof Uint8Array?(b=o.allocFromTypedArray(_),(arguments.length<3||!E.isInt32(q)||q<0)&&(q=_.byteLength)):R.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!E.isInt32(q)||q<0)&&R.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const z=E.sqlite3__wasm_posix_create_file(a,b,q);z&&R.toss("Creation of file failed with sqlite3 result code",s.sqlite3_js_rc_str(z))}finally{o.dealloc(b)}},s.sqlite3_js_vfs_create_file=function(a,_,q,b){r.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let z;q?(o.isPtr(q)?z=q:q instanceof ArrayBuffer&&(q=new Uint8Array(q)),q instanceof Uint8Array?(z=o.allocFromTypedArray(q),(arguments.length<4||!E.isInt32(b)||b<0)&&(b=q.byteLength)):R.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):z=0,(!E.isInt32(b)||b<0)&&(o.dealloc(z),R.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const ee=E.sqlite3__wasm_vfs_create_file(a,_,z,b);ee&&R.toss("Creation of file failed with sqlite3 result code",s.sqlite3_js_rc_str(ee))}finally{o.dealloc(z)}},s.sqlite3_js_sql_to_string=a=>{if(typeof a=="string")return a;const _=c(v);return _===v?void 0:_},E.isUIThread()){const a=function(_){const q=Object.create(null);return q.prefix="kvvfs-"+_,q.stores=[],(_==="session"||_==="")&&q.stores.push(globalThis.sessionStorage),(_==="local"||_==="")&&q.stores.push(globalThis.localStorage),q};s.sqlite3_js_kvvfs_clear=function(_=""){let q=0;const b=a(_);return b.stores.forEach(z=>{const ee=[];let oe;for(oe=0;oe<z.length;++oe){const ce=z.key(oe);ce.startsWith(b.prefix)&&ee.push(ce)}ee.forEach(ce=>z.removeItem(ce)),q+=ee.length}),q},s.sqlite3_js_kvvfs_size=function(_=""){let q=0;const b=a(_);return b.stores.forEach(z=>{let ee;for(ee=0;ee<z.length;++ee){const oe=z.key(ee);oe.startsWith(b.prefix)&&(q+=oe.length,q+=z.getItem(oe).length)}}),q*2}}s.sqlite3_db_config=(function(a,_,...q){switch(_){case s.SQLITE_DBCONFIG_ENABLE_FKEY:case s.SQLITE_DBCONFIG_ENABLE_TRIGGER:case s.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case s.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case s.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case s.SQLITE_DBCONFIG_ENABLE_QPSG:case s.SQLITE_DBCONFIG_TRIGGER_EQP:case s.SQLITE_DBCONFIG_RESET_DATABASE:case s.SQLITE_DBCONFIG_DEFENSIVE:case s.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case s.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case s.SQLITE_DBCONFIG_DQS_DML:case s.SQLITE_DBCONFIG_DQS_DDL:case s.SQLITE_DBCONFIG_ENABLE_VIEW:case s.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case s.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case s.SQLITE_DBCONFIG_STMT_SCANSTATUS:case s.SQLITE_DBCONFIG_REVERSE_SCANORDER:case s.SQLITE_DBCONFIG_ENABLE_ATTACH_CREATE:case s.SQLITE_DBCONFIG_ENABLE_ATTACH_WRITE:case s.SQLITE_DBCONFIG_ENABLE_COMMENTS:return this.ip||(this.ip=o.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),this.ip(a,_,q[0],q[1]||0);case s.SQLITE_DBCONFIG_LOOKASIDE:return this.pii||(this.pii=o.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"])),this.pii(a,_,q[0],q[1],q[2]);case s.SQLITE_DBCONFIG_MAINDBNAME:return this.s||(this.s=o.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"])),this.s(a,_,q[0]);default:return s.SQLITE_MISUSE}}).bind(Object.create(null)),s.sqlite3_value_to_js=function(a,_=!0){let q;const b=s.sqlite3_value_type(a);switch(b){case s.SQLITE_INTEGER:o.bigIntEnabled?(q=s.sqlite3_value_int64(a),E.bigIntFitsDouble(q)&&(q=Number(q))):q=s.sqlite3_value_double(a);break;case s.SQLITE_FLOAT:q=s.sqlite3_value_double(a);break;case s.SQLITE_TEXT:q=s.sqlite3_value_text(a);break;case s.SQLITE_BLOB:{const z=s.sqlite3_value_bytes(a),ee=s.sqlite3_value_blob(a);z&&!ee&&h.WasmAllocError.toss("Cannot allocate memory for blob argument of",z,"byte(s)"),q=z?o.heap8u().slice(ee,ee+Number(z)):null;break}case s.SQLITE_NULL:q=null;break;default:_&&D(s.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",b),q=void 0}return q},s.sqlite3_values_to_js=function(a,_,q=!0){let b;const z=[];for(b=0;b<a;++b)z.push(s.sqlite3_value_to_js(o.peekPtr(_+o.ptrSizeof*b),q));return z},s.sqlite3_result_error_js=function(a,_){_ instanceof g?s.sqlite3_result_error_nomem(a):s.sqlite3_result_error(a,""+_,-1)},s.sqlite3_result_js=function(a,_){if(_ instanceof Error){s.sqlite3_result_error_js(a,_);return}try{switch(typeof _){case"undefined":break;case"boolean":s.sqlite3_result_int(a,_?1:0);break;case"bigint":E.bigIntFits32(_)?s.sqlite3_result_int(a,Number(_)):E.bigIntFitsDouble(_)?s.sqlite3_result_double(a,Number(_)):o.bigIntEnabled?E.bigIntFits64(_)?s.sqlite3_result_int64(a,_):D("BigInt value",_.toString(),"is too BigInt for int64."):D("BigInt value",_.toString(),"is too BigInt.");break;case"number":{let q;E.isInt32(_)?q=s.sqlite3_result_int:o.bigIntEnabled&&Number.isInteger(_)&&E.bigIntFits64(BigInt(_))?q=s.sqlite3_result_int64:q=s.sqlite3_result_double,q(a,_);break}case"string":{const[q,b]=o.allocCString(_,!0);s.sqlite3_result_text(a,q,b,s.SQLITE_WASM_DEALLOC);break}case"object":if(_===null){s.sqlite3_result_null(a);break}else if(E.isBindableTypedArray(_)){const q=o.allocFromTypedArray(_);s.sqlite3_result_blob(a,q,_.byteLength,s.SQLITE_WASM_DEALLOC);break}default:D("Don't not how to handle this UDF result value:",typeof _,_)}}catch(q){s.sqlite3_result_error_js(a,q)}},s.sqlite3_column_js=function(a,_,q=!0){const b=s.sqlite3_column_value(a,_);return b===0?void 0:s.sqlite3_value_to_js(b,q)};const u=(function(a,_,q){q=s[q],this.ptr?o.pokePtr(this.ptr,0):this.ptr=o.allocPtr();const b=q(a,_,this.ptr);if(b)return R.toss(b,arguments[2]+"() failed with code "+b);const z=o.peekPtr(this.ptr);return z?s.sqlite3_value_to_js(z,!0):void 0}).bind(Object.create(null));s.sqlite3_preupdate_new_js=(a,_)=>u(a,_,"sqlite3_preupdate_new"),s.sqlite3_preupdate_old_js=(a,_)=>u(a,_,"sqlite3_preupdate_old"),s.sqlite3changeset_new_js=(a,_)=>u(a,_,"sqlite3changeset_new"),s.sqlite3changeset_old_js=(a,_)=>u(a,_,"sqlite3changeset_old");const h={WasmAllocError:g,SQLite3Error:R,capi:s,util:E,wasm:o,config:r,version:Object.create(null),client:void 0,asyncPostInit:async function a(){if(a.isReady instanceof Promise)return a.isReady;let _=t.initializersAsync;delete t.initializersAsync;const q=async()=>(h.__isUnderTest||(delete h.util,delete h.StructBinder),h),b=ee=>{throw r.error("an async sqlite3 initializer failed:",ee),ee};if(!_||!_.length)return a.isReady=q().catch(b);_=_.map(ee=>ee instanceof Function?async oe=>ee(h):ee),_.push(q);let z=Promise.resolve(h);for(;_.length;)z=z.then(_.shift());return a.isReady=z.catch(b)},scriptInfo:void 0};try{t.initializers.forEach(a=>{a(h)})}catch(a){throw console.error("sqlite3 bootstrap initializer threw:",a),a}return delete t.initializers,t.sqlite3=h,h},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(t){t.bigIntEnabled===void 0&&(t.bigIntEnabled=!!globalThis.BigInt64Array);const n=(...c)=>{throw new Error(c.join(" "))};t.exports||Object.defineProperty(t,"exports",{enumerable:!0,configurable:!0,get:()=>t.instance&&t.instance.exports});const r=t.pointerIR||"i32",s=t.ptrSizeof=r==="i32"?4:r==="i64"?8:n("Unhandled ptrSizeof:",r),o=Object.create(null);o.heapSize=0,o.memory=null,o.freeFuncIndexes=[],o.scopedAlloc=[],o.utf8Decoder=new TextDecoder,o.utf8Encoder=new TextEncoder("utf-8"),t.sizeofIR=c=>{switch(c){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return s;default:return(""+c).endsWith("*")?s:void 0}};const d=function(){if(!o.memory)o.memory=t.memory instanceof WebAssembly.Memory?t.memory:t.exports.memory;else if(o.heapSize===o.memory.buffer.byteLength)return o;const c=o.memory.buffer;return o.HEAP8=new Int8Array(c),o.HEAP8U=new Uint8Array(c),o.HEAP16=new Int16Array(c),o.HEAP16U=new Uint16Array(c),o.HEAP32=new Int32Array(c),o.HEAP32U=new Uint32Array(c),t.bigIntEnabled&&(o.HEAP64=new BigInt64Array(c),o.HEAP64U=new BigUint64Array(c)),o.HEAP32F=new Float32Array(c),o.HEAP64F=new Float64Array(c),o.heapSize=c.byteLength,o};t.heap8=()=>d().HEAP8,t.heap8u=()=>d().HEAP8U,t.heap16=()=>d().HEAP16,t.heap16u=()=>d().HEAP16U,t.heap32=()=>d().HEAP32,t.heap32u=()=>d().HEAP32U,t.heapForSize=function(c,g=!0){const E=o.memory&&o.heapSize===o.memory.buffer.byteLength?o:d();switch(c){case Int8Array:return E.HEAP8;case Uint8Array:return E.HEAP8U;case Int16Array:return E.HEAP16;case Uint16Array:return E.HEAP16U;case Int32Array:return E.HEAP32;case Uint32Array:return E.HEAP32U;case 8:return g?E.HEAP8U:E.HEAP8;case 16:return g?E.HEAP16U:E.HEAP16;case 32:return g?E.HEAP32U:E.HEAP32;case 64:if(E.HEAP64)return g?E.HEAP64U:E.HEAP64;break;default:if(t.bigIntEnabled){if(c===globalThis.BigUint64Array)return E.HEAP64U;if(c===globalThis.BigInt64Array)return E.HEAP64;break}}n("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},t.functionTable=function(){return t.exports.__indirect_function_table},t.functionEntry=function(c){const g=t.functionTable();return c<g.length?g.get(c):void 0},t.jsFuncToWasm=function c(g,E){if(c._||(c._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(h,a,_){_<128?h[a](_):h[a](_%128|128,_>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(h){const a=c._.rxJSig.exec(h);return a?a[2]:h.substr(1)},letterType:h=>c._.sigTypes[h]||n("Invalid signature letter:",h),pushSigType:(h,a)=>h.push(c._.typeCodes[c._.letterType(a)])}),typeof g=="string"){const h=E;E=g,g=h}const Q=c._.sigParams(E),u=[1,96];c._.uleb128Encode(u,"push",Q.length);for(const h of Q)c._.pushSigType(u,h);return E[0]==="v"?u.push(0):(u.push(1),c._.pushSigType(u,E[0])),c._.uleb128Encode(u,"unshift",u.length),u.unshift(0,97,115,109,1,0,0,0,1),u.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(u)),{e:{f:g}}).exports.f};const y=function(g,E,Q){if(Q&&!o.scopedAlloc.length&&n("No scopedAllocPush() scope is active."),typeof g=="string"){const _=E;E=g,g=_}(typeof E!="string"||!(g instanceof Function))&&n("Invalid arguments: expecting (function,signature) or (signature,function).");const u=t.functionTable(),h=u.length;let a;for(;o.freeFuncIndexes.length&&(a=o.freeFuncIndexes.pop(),u.get(a));){a=null;continue}a||(a=h,u.grow(1));try{return u.set(a,g),Q&&o.scopedAlloc[o.scopedAlloc.length-1].push(a),a}catch(_){if(!(_ instanceof TypeError))throw a===h&&o.freeFuncIndexes.push(h),_}try{const _=t.jsFuncToWasm(g,E);u.set(a,_),Q&&o.scopedAlloc[o.scopedAlloc.length-1].push(a)}catch(_){throw a===h&&o.freeFuncIndexes.push(h),_}return a};t.installFunction=(c,g)=>y(c,g,!1),t.scopedInstallFunction=(c,g)=>y(c,g,!0),t.uninstallFunction=function(c){if(!c&&c!==0)return;const g=o.freeFuncIndexes,E=t.functionTable();g.push(c);const Q=E.get(c);return E.set(c,null),Q},t.peek=function(g,E="i8"){E.endsWith("*")&&(E=r);const Q=o.memory&&o.heapSize===o.memory.buffer.byteLength?o:d(),u=Array.isArray(g)?[]:void 0;let h;do{switch(u&&(g=arguments[0].shift()),E){case"i1":case"i8":h=Q.HEAP8[g>>0];break;case"i16":h=Q.HEAP16[g>>1];break;case"i32":h=Q.HEAP32[g>>2];break;case"float":case"f32":h=Q.HEAP32F[g>>2];break;case"double":case"f64":h=Number(Q.HEAP64F[g>>3]);break;case"i64":if(t.bigIntEnabled){h=BigInt(Q.HEAP64[g>>3]);break}default:n("Invalid type for peek():",E)}u&&u.push(h)}while(u&&arguments[0].length);return u||h},t.poke=function(c,g,E="i8"){E.endsWith("*")&&(E=r);const Q=o.memory&&o.heapSize===o.memory.buffer.byteLength?o:d();for(const u of Array.isArray(c)?c:[c])switch(E){case"i1":case"i8":Q.HEAP8[u>>0]=g;continue;case"i16":Q.HEAP16[u>>1]=g;continue;case"i32":Q.HEAP32[u>>2]=g;continue;case"float":case"f32":Q.HEAP32F[u>>2]=g;continue;case"double":case"f64":Q.HEAP64F[u>>3]=g;continue;case"i64":if(Q.HEAP64){Q.HEAP64[u>>3]=BigInt(g);continue}default:n("Invalid type for poke(): "+E)}return this},t.peekPtr=(...c)=>t.peek(c.length===1?c[0]:c,r),t.pokePtr=(c,g=0)=>t.poke(c,g,r),t.peek8=(...c)=>t.peek(c.length===1?c[0]:c,"i8"),t.poke8=(c,g)=>t.poke(c,g,"i8"),t.peek16=(...c)=>t.peek(c.length===1?c[0]:c,"i16"),t.poke16=(c,g)=>t.poke(c,g,"i16"),t.peek32=(...c)=>t.peek(c.length===1?c[0]:c,"i32"),t.poke32=(c,g)=>t.poke(c,g,"i32"),t.peek64=(...c)=>t.peek(c.length===1?c[0]:c,"i64"),t.poke64=(c,g)=>t.poke(c,g,"i64"),t.peek32f=(...c)=>t.peek(c.length===1?c[0]:c,"f32"),t.poke32f=(c,g)=>t.poke(c,g,"f32"),t.peek64f=(...c)=>t.peek(c.length===1?c[0]:c,"f64"),t.poke64f=(c,g)=>t.poke(c,g,"f64"),t.getMemValue=t.peek,t.getPtrValue=t.peekPtr,t.setMemValue=t.poke,t.setPtrValue=t.pokePtr,t.isPtr32=c=>typeof c=="number"&&c===(c|0)&&c>=0,t.isPtr=t.isPtr32,t.cstrlen=function(c){if(!c||!t.isPtr(c))return null;const g=d().HEAP8U;let E=c;for(;g[E]!==0;++E);return E-c};const R=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,D=function(c,g,E){return o.utf8Decoder.decode(c.buffer instanceof R?c.slice(g,E):c.subarray(g,E))};t.cstrToJs=function(c){const g=t.cstrlen(c);return g?D(d().HEAP8U,c,c+g):g===null?g:""},t.jstrlen=function(c){if(typeof c!="string")return null;const g=c.length;let E=0;for(let Q=0;Q<g;++Q){let u=c.charCodeAt(Q);u>=55296&&u<=57343&&(u=65536+((u&1023)<<10)|c.charCodeAt(++Q)&1023),u<=127?++E:u<=2047?E+=2:u<=65535?E+=3:E+=4}return E},t.jstrcpy=function(c,g,E=0,Q=-1,u=!0){if((!g||!(g instanceof Int8Array)&&!(g instanceof Uint8Array))&&n("jstrcpy() target must be an Int8Array or Uint8Array."),Q<0&&(Q=g.length-E),!(Q>0)||!(E>=0))return 0;let h=0,a=c.length;const _=E,q=E+Q-(u?1:0);for(;h<a&&E<q;++h){let b=c.charCodeAt(h);if(b>=55296&&b<=57343&&(b=65536+((b&1023)<<10)|c.charCodeAt(++h)&1023),b<=127){if(E>=q)break;g[E++]=b}else if(b<=2047){if(E+1>=q)break;g[E++]=192|b>>6,g[E++]=128|b&63}else if(b<=65535){if(E+2>=q)break;g[E++]=224|b>>12,g[E++]=128|b>>6&63,g[E++]=128|b&63}else{if(E+3>=q)break;g[E++]=240|b>>18,g[E++]=128|b>>12&63,g[E++]=128|b>>6&63,g[E++]=128|b&63}}return u&&(g[E++]=0),E-_},t.cstrncpy=function(c,g,E){if((!c||!g)&&n("cstrncpy() does not accept NULL strings."),E<0)E=t.cstrlen(strPtr)+1;else if(!(E>0))return 0;const Q=t.heap8u();let u=0,h;for(;u<E&&(h=Q[g+u]);++u)Q[c+u]=h;return u<E&&(Q[c+u++]=0),u},t.jstrToUintArray=(c,g=!1)=>o.utf8Encoder.encode(g?c+"\0":c);const V=(c,g)=>{(!(c.alloc instanceof Function)||!(c.dealloc instanceof Function))&&n("Object is missing alloc() and/or dealloc() function(s)","required by",g+"().")},K=function(c,g,E,Q){if(V(t,Q),typeof c!="string")return null;{const u=o.utf8Encoder.encode(c),h=E(u.length+1),a=d().HEAP8U;return a.set(u,h),a[h+u.length]=0,g?[h,u.length]:h}};t.allocCString=(c,g=!1)=>K(c,g,t.alloc,"allocCString()"),t.scopedAllocPush=function(){V(t,"scopedAllocPush");const c=[];return o.scopedAlloc.push(c),c},t.scopedAllocPop=function(c){V(t,"scopedAllocPop");const g=arguments.length?o.scopedAlloc.indexOf(c):o.scopedAlloc.length-1;g<0&&n("Invalid state object for scopedAllocPop()."),arguments.length===0&&(c=o.scopedAlloc[g]),o.scopedAlloc.splice(g,1);for(let E;E=c.pop();)t.functionEntry(E)?t.uninstallFunction(E):t.dealloc(E)},t.scopedAlloc=function(c){o.scopedAlloc.length||n("No scopedAllocPush() scope is active.");const g=t.alloc(c);return o.scopedAlloc[o.scopedAlloc.length-1].push(g),g},Object.defineProperty(t.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>o.scopedAlloc.length,set:()=>n("The 'active' property is read-only.")}),t.scopedAllocCString=(c,g=!1)=>K(c,g,t.scopedAlloc,"scopedAllocCString()");const C=function(c,g){const E=t[c?"scopedAlloc":"alloc"]((g.length+1)*t.ptrSizeof);let Q=0;return g.forEach(u=>{t.pokePtr(E+t.ptrSizeof*Q++,t[c?"scopedAllocCString":"allocCString"](""+u))}),t.pokePtr(E+t.ptrSizeof*Q,0),E};t.scopedAllocMainArgv=c=>C(!0,c),t.allocMainArgv=c=>C(!1,c),t.cArgvToJs=(c,g)=>{const E=[];for(let Q=0;Q<c;++Q){const u=t.peekPtr(g+t.ptrSizeof*Q);E.push(u?t.cstrToJs(u):null)}return E},t.scopedAllocCall=function(c){t.scopedAllocPush();try{return c()}finally{t.scopedAllocPop()}};const k=function(c,g,E){V(t,E);const Q=g?"i64":r;let u=t[E](c*(g?8:s));if(t.poke(u,0,Q),c===1)return u;const h=[u];for(let a=1;a<c;++a)u+=g?8:s,h[a]=u,t.poke(u,0,Q);return h};t.allocPtr=(c=1,g=!0)=>k(c,g,"alloc"),t.scopedAllocPtr=(c=1,g=!0)=>k(c,g,"scopedAlloc"),t.xGet=function(c){return t.exports[c]||n("Cannot find exported symbol:",c)};const j=(c,g)=>n(c+"() requires",g,"argument(s).");t.xCall=function(c,...g){const E=c instanceof Function?c:t.xGet(c);return E instanceof Function||n("Exported symbol",c,"is not a function."),E.length!==g.length&&j(E===c?E.name:c,E.length),arguments.length===2&&Array.isArray(arguments[1])?E.apply(null,arguments[1]):E.apply(null,g)},o.xWrap=Object.create(null),o.xWrap.convert=Object.create(null),o.xWrap.convert.arg=new Map,o.xWrap.convert.result=new Map;const w=o.xWrap.convert.arg,S=o.xWrap.convert.result;t.bigIntEnabled&&w.set("i64",c=>BigInt(c));const O=r==="i32"?c=>c|0:c=>BigInt(c)|BigInt(0);w.set("i32",O).set("i16",c=>(c|0)&65535).set("i8",c=>(c|0)&255).set("f32",c=>Number(c).valueOf()).set("float",w.get("f32")).set("f64",w.get("f32")).set("double",w.get("f64")).set("int",w.get("i32")).set("null",c=>c).set(null,w.get("null")).set("**",O).set("*",O),S.set("*",O).set("pointer",O).set("number",c=>Number(c)).set("void",c=>{}).set("null",c=>c).set(null,S.get("null"));{const c=["i8","i16","i32","int","f32","float","f64","double"];t.bigIntEnabled&&c.push("i64");const g=w.get(r);for(const E of c)w.set(E+"*",g),S.set(E+"*",g),S.set(E,w.get(E)||n("Missing arg converter:",E))}const F=function(c){return typeof c=="string"?t.scopedAllocCString(c):c?O(c):null};w.set("string",F).set("utf8",F).set("pointer",F),S.set("string",c=>t.cstrToJs(c)).set("utf8",S.get("string")).set("string:dealloc",c=>{try{return c?t.cstrToJs(c):null}finally{t.dealloc(c)}}).set("utf8:dealloc",S.get("string:dealloc")).set("json",c=>JSON.parse(t.cstrToJs(c))).set("json:dealloc",c=>{try{return c?JSON.parse(t.cstrToJs(c)):null}finally{t.dealloc(c)}});const N=class{constructor(c){this.name=c.name||"unnamed adapter"}convertArg(c,g,E){n("AbstractArgAdapter must be subclassed.")}};w.FuncPtrAdapter=class He extends N{constructor(g){super(g),w.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",g),this.name=g.name||"unnamed",this.signature=g.signature,g.contextKey instanceof Function&&(this.contextKey=g.contextKey,g.bindScope||(g.bindScope="context")),this.bindScope=g.bindScope||n("FuncPtrAdapter options requires a bindScope (explicit or implied)."),He.bindScopes.indexOf(g.bindScope)<0&&n("Invalid options.bindScope ("+g.bindMod+") for FuncPtrAdapter. Expecting one of: ("+He.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=g.callProxy instanceof Function?g.callProxy:void 0}contextKey(g,E){return this}contextMap(g){const E=this.__cmap||(this.__cmap=new Map);let Q=E.get(g);return Q===void 0&&E.set(g,Q=[]),Q}convertArg(g,E,Q){let u=this.singleton;if(!u&&this.isContext&&(u=this.contextMap(this.contextKey(E,Q))),u&&u[0]===g)return u[1];if(g instanceof Function){this.callProxy&&(g=this.callProxy(g));const h=y(g,this.signature,this.isTransient);if(He.debugFuncInstall&&He.debugOut("FuncPtrAdapter installed",this,this.contextKey(E,Q),"@"+h,g),u){if(u[1]){He.debugFuncInstall&&He.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(E,Q),"@"+u[1],g);try{o.scopedAlloc[o.scopedAlloc.length-1].push(u[1])}catch{}}u[0]=g,u[1]=h}return h}else if(t.isPtr(g)||g===null||g===void 0){if(u&&u[1]&&u[1]!==g){He.debugFuncInstall&&He.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(E,Q),"@"+u[1],g);try{o.scopedAlloc[o.scopedAlloc.length-1].push(u[1])}catch{}u[0]=u[1]=g|0}return g||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},w.FuncPtrAdapter.warnOnUse=!1,w.FuncPtrAdapter.debugFuncInstall=!1,w.FuncPtrAdapter.debugOut=console.debug.bind(console),w.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const I=c=>w.get(c)||n("Argument adapter not found:",c),U=c=>S.get(c)||n("Result adapter not found:",c);o.xWrap.convertArg=(c,...g)=>I(c)(...g),o.xWrap.convertArgNoCheck=(c,...g)=>w.get(c)(...g),o.xWrap.convertResult=(c,g)=>c===null?g:c?U(c)(g):void 0,o.xWrap.convertResultNoCheck=(c,g)=>c===null?g:c?S.get(c)(g):void 0,t.xWrap=function(c,g,...E){arguments.length===3&&Array.isArray(arguments[2])&&(E=arguments[2]),t.isPtr(c)&&(c=t.functionEntry(c)||n("Function pointer not found in WASM function table."));const Q=c instanceof Function,u=Q?c:t.xGet(c);if(Q&&(c=u.name||"unnamed function"),E.length!==u.length&&j(c,u.length),g===null&&u.length===0)return u;g!=null&&U(g);for(const a of E)a instanceof N?w.set(a,(..._)=>a.convertArg(..._)):I(a);const h=o.xWrap;return u.length===0?(...a)=>a.length?j(c,u.length):h.convertResult(g,u.call(null)):function(...a){a.length!==u.length&&j(c,u.length);const _=t.scopedAllocPush();try{let q=0;for(;q<a.length;++q)a[q]=h.convertArgNoCheck(E[q],a[q],a,q);return h.convertResultNoCheck(g,u.apply(null,a))}finally{t.scopedAllocPop(_)}}};const $=function(c,g,E,Q,u,h){if(typeof E=="string"){if(g===1)return h.get(E);if(g===2){if(Q)Q instanceof Function||n(u,"requires a function argument.");else return h.delete(E),c;return h.set(E,Q),c}}n("Invalid arguments to",u)};return t.xWrap.resultAdapter=function c(g,E){return $(c,arguments.length,g,E,"resultAdapter()",S)},t.xWrap.argAdapter=function c(g,E){return $(c,arguments.length,g,E,"argAdapter()",w)},t.xWrap.FuncPtrAdapter=w.FuncPtrAdapter,t.xCallWrapped=function(c,g,E,...Q){return Array.isArray(arguments[3])&&(Q=arguments[3]),t.xWrap(c,g,E||[]).apply(null,Q||[])},t.xWrap.testConvertArg=o.xWrap.convertArg,t.xWrap.testConvertResult=o.xWrap.convertResult,t},globalThis.WhWasmUtilInstaller.yawl=(function(t){const n=()=>fetch(t.uri,{credentials:"same-origin"}),r=this,s=function(d){if(t.wasmUtilTarget){const y=(...D)=>{throw new Error(D.join(" "))},R=t.wasmUtilTarget;if(R.module=d.module,R.instance=d.instance,R.instance.exports.memory||(R.memory=t.imports&&t.imports.env&&t.imports.env.memory||y("Missing 'memory' object!")),!R.alloc&&d.instance.exports.malloc){const D=d.instance.exports;R.alloc=function(V){return D.malloc(V)||y("Allocation of",V,"bytes failed.")},R.dealloc=function(V){D.free(V)}}r(R)}return t.onload&&t.onload(d,t),d};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(n(),t.imports||{}).then(s)}:function(){return n().then(y=>y.arrayBuffer()).then(y=>WebAssembly.instantiate(y,t.imports||{})).then(s)}}).bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function t(n){const r=(...f)=>{throw new Error(f.join(" "))};!(n.heap instanceof WebAssembly.Memory)&&!(n.heap instanceof Function)&&r("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(f){n[f]instanceof Function||r("Config option '"+f+"' must be a function.")});const s=t,o=n.heap instanceof Function?n.heap:()=>new Uint8Array(n.heap.buffer),d=n.alloc,y=n.dealloc,R=n.log||console.log.bind(console),D=n.memberPrefix||"",V=n.memberSuffix||"",K=n.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!n.bigIntEnabled,C=globalThis.BigInt,k=globalThis.BigInt64Array,j=n.ptrSizeof||4,w=n.ptrIR||"i32";s.debugFlags||(s.__makeDebugFlags=function(f=null){f&&f.__flags&&(f=f.__flags);const A=function T(M){return arguments.length===0?T.__flags:(M<0?(delete T.__flags.getter,delete T.__flags.setter,delete T.__flags.alloc,delete T.__flags.dealloc):(T.__flags.getter=(1&M)!==0,T.__flags.setter=(2&M)!==0,T.__flags.alloc=(4&M)!==0,T.__flags.dealloc=(8&M)!==0),T._flags)};return Object.defineProperty(A,"__flags",{iterable:!1,writable:!1,value:Object.create(f)}),f||A(0),A},s.debugFlags=s.__makeDebugFlags());const S=function(){const f=new ArrayBuffer(2);return new DataView(f).setInt16(0,256,!0),new Int16Array(f)[0]===256}(),O=f=>f[1]==="(",F=f=>f==="P",N=f=>O(f)?"p":f[0],I=function(f){switch(N(f)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return w;case"j":return"i64";case"f":return"float";case"d":return"double"}r("Unhandled signature IR:",f)},U=k?()=>!0:()=>r("BigInt64Array is not available."),$=function(f){switch(N(f)){case"p":case"P":case"s":{switch(j){case 4:return"getInt32";case 8:return U()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return U()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}r("Unhandled DataView getter for signature:",f)},c=function(f){switch(N(f)){case"p":case"P":case"s":{switch(j){case 4:return"setInt32";case 8:return U()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return U()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}r("Unhandled DataView setter for signature:",f)},g=function(f){switch(N(f)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return U()&&C;case"p":case"P":case"s":switch(j){case 4:return Number;case 8:return U()&&C}break}r("Unhandled DataView set wrapper for signature:",f)},E=(f,A)=>f+"::"+A,Q=function(f,A){return()=>r(E(f,A),"is read-only.")},u=new WeakMap,h="(pointer-is-external)",a=function(f,A,T){if(T||(T=u.get(A)),T){if(u.delete(A),Array.isArray(A.ondispose)){let M;for(;M=A.ondispose.shift();)try{M instanceof Function?M.call(A):M instanceof J?M.dispose():typeof M=="number"&&y(M)}catch(Y){console.warn("ondispose() for",f.structName,"@",T,"threw. NOT propagating it.",Y)}}else if(A.ondispose instanceof Function)try{A.ondispose()}catch(M){console.warn("ondispose() for",f.structName,"@",T,"threw. NOT propagating it.",M)}delete A.ondispose,f.debugFlags.__flags.dealloc&&R("debug.dealloc:",A[h]?"EXTERNAL":"",f.structName,"instance:",f.structInfo.sizeof,"bytes @"+T),A[h]||y(T)}},_=f=>({configurable:!1,writable:!1,iterable:!1,value:f}),q=function(f,A,T){let M=!T;T?Object.defineProperty(A,h,_(T)):(T=d(f.structInfo.sizeof),T||r("Allocation of",f.structName,"structure failed."));try{f.debugFlags.__flags.alloc&&R("debug.alloc:",M?"":"EXTERNAL",f.structName,"instance:",f.structInfo.sizeof,"bytes @"+T),M&&o().fill(0,T,T+f.structInfo.sizeof),u.set(A,T)}catch(Y){throw a(f,A,T),Y}},b=function(){const f=this.pointer;return f?new Uint8Array(o().slice(f,f+this.structInfo.sizeof)):null},ee=_(f=>D+f+V),oe=function(f,A,T=!0){let M=f.members[A];if(!M&&(D||V)){for(const Y of Object.values(f.members))if(Y.key===A){M=Y;break}!M&&T&&r(E(f.name,A),"is not a mapped struct member.")}return M},ce=function f(A,T,M=!1){f._||(f._=ie=>ie.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const Y=oe(A.structInfo,T,!0);return M?f._(Y.signature):Y.signature},ae={configurable:!1,enumerable:!1,get:function(){return u.get(this)},set:()=>r("Cannot assign the 'pointer' property of a struct.")},le=_(function(){const f=[];for(const A of Object.keys(this.structInfo.members))f.push(this.memberKey(A));return f}),de=new TextDecoder("utf-8"),ye=new TextEncoder,we=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Ee=function(f,A,T){return de.decode(f.buffer instanceof we?f.slice(A,T):f.subarray(A,T))},Pe=function(f,A,T=!1){const M=oe(f.structInfo,A,T);return M&&M.signature.length===1&&M.signature[0]==="s"?M:!1},Ae=function(f){f.signature!=="s"&&r("Invalid member type signature for C-string value:",JSON.stringify(f))},P=function(A,T){const M=oe(A.structInfo,T,!0);Ae(M);const Y=A[M.key];if(!Y)return null;let ie=Y;const pe=o();for(;pe[ie]!==0;++ie);return Y===ie?"":Ee(pe,Y,ie)},B=function(f,...A){f.ondispose?Array.isArray(f.ondispose)||(f.ondispose=[f.ondispose]):f.ondispose=[],f.ondispose.push(...A)},H=function(f){const A=ye.encode(f),T=d(A.length+1);T||r("Allocation error while duplicating string:",f);const M=o();return M.set(A,T),M[T+A.length]=0,T},Z=function(f,A,T){const M=oe(f.structInfo,A,!0);Ae(M);const Y=H(T);return f[M.key]=Y,B(f,Y),f},J=function(A,T){arguments[2]!==_&&r("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:_(A),structInfo:_(T)})};J.prototype=Object.create(null,{dispose:_(function(){a(this.constructor,this)}),lookupMember:_(function(f,A=!0){return oe(this.structInfo,f,A)}),memberToJsString:_(function(f){return P(this,f)}),memberIsString:_(function(f,A=!0){return Pe(this,f,A)}),memberKey:ee,memberKeys:le,memberSignature:_(function(f,A=!1){return ce(this,f,A)}),memoryDump:_(b),pointer:ae,setMemberCString:_(function(f,A){return Z(this,f,A)})}),Object.assign(J.prototype,{addOnDispose:function(...f){return B(this,...f),this}}),Object.defineProperties(J,{allocCString:_(H),isA:_(f=>f instanceof J),hasExternalPointer:_(f=>f instanceof J&&!!f[h]),memberKey:ee});const ne=f=>Number.isFinite(f)||f instanceof(C||Number),W=function f(A,T,M){if(!f._){f._={getters:{},setters:{},sw:{}};const Le=["i","c","C","p","P","s","f","d","v()"];K&&Le.push("j"),Le.forEach(function(We){f._.getters[We]=$(We),f._.setters[We]=c(We),f._.sw[We]=g(We)});const wr=/^[ipPsjfdcC]$/,Er=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;f.sigCheck=function(We,vr,Xt,It){Object.prototype.hasOwnProperty.call(We,Xt)&&r(We.structName,"already has a property named",Xt+"."),wr.test(It)||Er.test(It)||r("Malformed signature for",E(We.structName,vr)+":",It)}}const Y=A.memberKey(T);f.sigCheck(A.prototype,T,Y,M.signature),M.key=Y,M.name=T;const ie=N(M.signature),pe=E(A.prototype.structName,Y),be=A.prototype.debugFlags.__flags,Ne=Object.create(null);Ne.configurable=!1,Ne.enumerable=!1,Ne.get=function(){be.getter&&R("debug.getter:",f._.getters[ie],"for",I(ie),pe,"@",this.pointer,"+",M.offset,"sz",M.sizeof);let Le=new DataView(o().buffer,this.pointer+M.offset,M.sizeof)[f._.getters[ie]](0,S);return be.getter&&R("debug.getter:",pe,"result =",Le),Le},M.readOnly?Ne.set=Q(A.prototype.structName,Y):Ne.set=function(Le){if(be.setter&&R("debug.setter:",f._.setters[ie],"for",I(ie),pe,"@",this.pointer,"+",M.offset,"sz",M.sizeof,Le),this.pointer||r("Cannot set struct property on disposed instance."),Le===null)Le=0;else for(;!ne(Le);){if(F(M.signature)&&Le instanceof J){Le=Le.pointer||0,be.setter&&R("debug.setter:",pe,"resolved to",Le);break}r("Invalid value for pointer-type",pe+".")}new DataView(o().buffer,this.pointer+M.offset,M.sizeof)[f._.setters[ie]](0,f._.sw[ie](Le),S)},Object.defineProperty(A.prototype,Y,Ne)},p=function f(A,T){arguments.length===1?(T=A,A=T.name):T.name||(T.name=A),A||r("Struct name is required.");let M=!1;Object.keys(T.members).forEach(pe=>{const be=T.members[pe];be.sizeof?be.sizeof===1?be.signature==="c"||be.signature==="C"||r("Unexpected sizeof==1 member",E(T.name,pe),"with signature",be.signature):(be.sizeof%4!==0&&(console.warn("Invalid struct member description =",be,"from",T),r(A,"member",pe,"sizeof is not aligned. sizeof="+be.sizeof)),be.offset%4!==0&&(console.warn("Invalid struct member description =",be,"from",T),r(A,"member",pe,"offset is not aligned. offset="+be.offset))):r(A,"member",pe,"is missing sizeof."),(!M||M.offset<be.offset)&&(M=be)}),M?T.sizeof<M.offset+M.sizeof&&r("Invalid struct config:",A,"max member offset ("+M.offset+") ","extends past end of struct (sizeof="+T.sizeof+")."):r("No member property descriptions found.");const Y=_(s.__makeDebugFlags(f.debugFlags)),ie=function pe(be){this instanceof pe?arguments.length?((be!==(be|0)||be<=0)&&r("Invalid pointer value for",A,"constructor."),q(pe,this,be)):q(pe,this):r("The",A,"constructor may only be called via 'new'.")};return Object.defineProperties(ie,{debugFlags:Y,isA:_(pe=>pe instanceof ie),memberKey:ee,memberKeys:le,methodInfoForKey:_(function(pe){}),structInfo:_(T),structName:_(A)}),ie.prototype=new J(A,T,_),Object.defineProperties(ie.prototype,{debugFlags:Y,constructor:_(ie)}),Object.keys(T.members).forEach(pe=>W(ie,pe,T.members[pe])),ie};return p.StructType=J,p.config=n,p.allocCString=H,p.debugFlags||(p.debugFlags=s.__makeDebugFlags(s.debugFlags)),p},globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=(...w)=>{throw new Error(w.join(" "))};t.SQLite3Error.toss;const r=t.capi,s=t.wasm,o=t.util;if(globalThis.WhWasmUtilInstaller(s),delete globalThis.WhWasmUtilInstaller,s.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(w,S)=>w[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:w=>w[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new s.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:w=>{let S;return(O,F,N,I)=>{try{const U=s.cArgvToJs(F,N);return S||(S=s.cArgvToJs(F,I)),w(U,S)|0}catch(U){return U.resultCode||r.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:w=>w[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*","*"]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new s.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(w,S)=>w[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],s.exports.sqlite3_progress_handler&&s.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new s.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(w,S)=>w[0]}),"*"]]),s.exports.sqlite3_stmt_explain&&s.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),s.exports.sqlite3_set_authorizer&&s.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(w,S)=>w[0],callProxy:w=>(S,O,F,N,I,U)=>{try{return F=F&&s.cstrToJs(F),N=N&&s.cstrToJs(N),I=I&&s.cstrToJs(I),U=U&&s.cstrToJs(U),w(S,O,F,N,I,U)||0}catch($){return $.resultCode||r.SQLITE_ERROR}}}),"*"]]),s.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:w=>w[0],callProxy:w=>(S,O,F,N,I)=>{w(S,O,s.cstrToJs(F),s.cstrToJs(N),I)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],s.bigIntEnabled&&s.exports.sqlite3_declare_vtab&&s.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),s.bigIntEnabled&&s.exports.sqlite3_preupdate_hook&&s.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:w=>w[0],callProxy:w=>(S,O,F,N,I,U,$)=>{w(S,O,F,s.cstrToJs(N),s.cstrToJs(I),U,$)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),s.bigIntEnabled&&s.exports.sqlite3changegroup_add&&s.exports.sqlite3session_create&&s.exports.sqlite3_preupdate_hook){const w={signature:"i(ps)",callProxy:S=>(O,F)=>{try{return S(O,s.cstrToJs(F))|0}catch(N){return N.resultCode||r.SQLITE_ERROR}}};s.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...w}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...w}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...w}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...w}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new s.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new s.xWrap.FuncPtrAdapter({name:"xFilter",...w,contextKey:(S,O)=>S[0]}),"*"]])}s.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],t.StructBinder=globalThis.Jaccwabyt({heap:s.heap8u,alloc:s.alloc,dealloc:s.dealloc,bigIntEnabled:s.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const w=s.xWrap.argAdapter("string");s.xWrap.argAdapter("string:flexible",I=>w(o.flexibleString(I))),s.xWrap.argAdapter("string:static",(function(I){return s.isPtr(I)?I:(I=""+I,this[I]||(this[I]=s.allocCString(I)))}).bind(Object.create(null)));const S=s.xWrap.argAdapter("*"),O=function(){};s.xWrap.argAdapter("sqlite3_filename",S)("sqlite3_context*",S)("sqlite3_value*",S)("void*",S)("sqlite3_changegroup*",S)("sqlite3_changeset_iter*",S)("sqlite3_session*",S)("sqlite3_stmt*",I=>{var U;return S(I instanceof(((U=t==null?void 0:t.oo1)==null?void 0:U.Stmt)||O)?I.pointer:I)})("sqlite3*",I=>{var U;return S(I instanceof(((U=t==null?void 0:t.oo1)==null?void 0:U.DB)||O)?I.pointer:I)})("sqlite3_vfs*",I=>typeof I=="string"?r.sqlite3_vfs_find(I)||t.SQLite3Error.toss(r.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",I):S(I instanceof(r.sqlite3_vfs||O)?I.pointer:I)),s.exports.sqlite3_declare_vtab&&s.xWrap.argAdapter("sqlite3_index_info*",I=>S(I instanceof(r.sqlite3_index_info||O)?I.pointer:I))("sqlite3_module*",I=>S(I instanceof(r.sqlite3_module||O)?I.pointer:I));const F=s.xWrap.resultAdapter("*");s.xWrap.resultAdapter("sqlite3*",F)("sqlite3_context*",F)("sqlite3_stmt*",F)("sqlite3_value*",F)("sqlite3_vfs*",F)("void*",F),s.exports.sqlite3_step.length===0&&(s.xWrap.doArgcCheck=!1,t.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const I of s.bindingSignatures)r[I[0]]=s.xWrap.apply(null,I);for(const I of s.bindingSignatures.wasmInternal)o[I[0]]=s.xWrap.apply(null,I);const N=function(I){return()=>n(I+"() is unavailable due to lack","of BigInt support in this build.")};for(const I of s.bindingSignatures.int64)r[I[0]]=s.bigIntEnabled?s.xWrap.apply(null,I):N(I[0]);if(delete s.bindingSignatures,s.exports.sqlite3__wasm_db_error){const I=s.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");o.sqlite3__wasm_db_error=function(U,$,c){return $ instanceof t.WasmAllocError?($=r.SQLITE_NOMEM,c=0):$ instanceof Error&&(c=c||""+$,$=$.resultCode||r.SQLITE_ERROR),U?I(U,$,c):$}}else o.sqlite3__wasm_db_error=function(I,U,$){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),U}}{const w=s.xCall("sqlite3__wasm_enum_json");w||n("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),s.ctype=JSON.parse(s.cstrToJs(w));const S=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];s.bigIntEnabled&&S.push("serialize","session","vtab");for(const N of S)for(const I of Object.entries(s.ctype[N]))r[I[0]]=I[1];s.functionEntry(r.SQLITE_WASM_DEALLOC)||n("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+r.SQLITE_WASM_DEALLOC+").");const O=Object.create(null);for(const N of["resultCodes"])for(const I of Object.entries(s.ctype[N]))O[I[1]]=I[0];r.sqlite3_js_rc_str=N=>O[N];const F=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!o.isUIThread(),sqlite3_index_info:!s.bigIntEnabled,sqlite3_index_constraint:!s.bigIntEnabled,sqlite3_index_orderby:!s.bigIntEnabled,sqlite3_index_constraint_usage:!s.bigIntEnabled});for(const N of s.ctype.structs)F[N.name]||(r[N.name]=t.StructBinder(N));if(r.sqlite3_index_info){for(const N of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])r.sqlite3_index_info[N]=r[N],delete r[N];r.sqlite3_vtab_config=s.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const d=(w,S,O)=>o.sqlite3__wasm_db_error(w,r.SQLITE_MISUSE,S+"() requires "+O+" argument"+(O===1?"":"s")+"."),y=w=>o.sqlite3__wasm_db_error(w,r.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),R=w=>s.xWrap.argAdapter("sqlite3*")(w),D=w=>s.isPtr(w)?s.cstrToJs(w):w,V=(function(w,S){w=R(w);let O=this.dbMap.get(w);if(S)!O&&S>0&&this.dbMap.set(w,O=Object.create(null));else return this.dbMap.delete(w),O;return O}).bind(Object.assign(Object.create(null),{dbMap:new Map}));V.addCollation=function(w,S){const O=V(w,1);O.collation||(O.collation=new Set),O.collation.add(D(S).toLowerCase())},V._addUDF=function(w,S,O,F){S=D(S).toLowerCase();let N=F.get(S);N||F.set(S,N=new Set),N.add(O<0?-1:O)},V.addFunction=function(w,S,O){const F=V(w,1);F.udf||(F.udf=new Map),this._addUDF(w,S,O,F.udf)},s.exports.sqlite3_create_window_function&&(V.addWindowFunc=function(w,S,O){const F=V(w,1);F.wudf||(F.wudf=new Map),this._addUDF(w,S,O,F.wudf)}),V.cleanup=function(w){w=R(w);const S=[w];for(const N of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const I=s.exports[N];if(I){S.length=I.length;try{r[N](...S)}catch(U){t.config.warn("close-time call of",N+"(",S,") threw:",U)}}}const O=V(w,0);if(!O)return;if(O.collation){for(const N of O.collation)try{r.sqlite3_create_collation_v2(w,N,r.SQLITE_UTF8,0,0,0)}catch{}delete O.collation}let F;for(F=0;F<2;++F){const N=F?O.wudf:O.udf;if(!N)continue;const I=F?r.sqlite3_create_window_function:r.sqlite3_create_function_v2;for(const U of N){const $=U[0],c=U[1],g=[w,$,0,r.SQLITE_UTF8,0,0,0,0,0];F&&g.push(0);for(const E of c)try{g[2]=E,I.apply(null,g)}catch{}c.clear()}N.clear()}delete O.udf,delete O.wudf};{const w=s.xWrap("sqlite3_close_v2","int","sqlite3*");r.sqlite3_close_v2=function(S){if(arguments.length!==1)return d(S,"sqlite3_close_v2",1);if(S)try{V.cleanup(S)}catch{}return w(S)}}if(r.sqlite3session_create){const w=s.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);r.sqlite3session_delete=function(S){if(arguments.length!==1)return d(pDb,"sqlite3session_delete",1);S&&r.sqlite3session_table_filter(S,0,0),w(S)}}{const w=(O,F)=>"argv["+F+"]:"+O[0]+":"+s.cstrToJs(O[1]).toLowerCase(),S=s.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new s.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:w}),new s.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:w})]);r.sqlite3_create_collation_v2=function(O,F,N,I,U,$){if(arguments.length!==6)return d(O,"sqlite3_create_collation_v2",6);if((N&15)===0)N|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(N&15))return y(O);try{const c=S(O,F,N,I,U,$);return c===0&&U instanceof Function&&V.addCollation(O,F),c}catch(c){return o.sqlite3__wasm_db_error(O,c)}},r.sqlite3_create_collation=(O,F,N,I,U)=>arguments.length===5?r.sqlite3_create_collation_v2(O,F,N,I,U,0):d(O,"sqlite3_create_collation",5)}{const w=function(N,I){return N[0]+":"+(N[2]<0?-1:N[2])+":"+I+":"+s.cstrToJs(N[1]).toLowerCase()},S=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:w,callProxy:N=>(I,U,$)=>{try{N(I,...r.sqlite3_values_to_js(U,$))}catch(c){r.sqlite3_result_error_js(I,c)}}},xFinalAndValue:{signature:"v(p)",contextKey:w,callProxy:N=>I=>{try{r.sqlite3_result_js(I,N(I))}catch(U){r.sqlite3_result_error_js(I,U)}}},xFunc:{signature:"v(pip)",contextKey:w,callProxy:N=>(I,U,$)=>{try{r.sqlite3_result_js(I,N(I,...r.sqlite3_values_to_js(U,$)))}catch(c){r.sqlite3_result_error_js(I,c)}}},xDestroy:{signature:"v(p)",contextKey:w,callProxy:N=>I=>{try{N(I)}catch(U){console.error("UDF xDestroy method threw:",U)}}}}),O=s.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new s.xWrap.FuncPtrAdapter({name:"xFunc",...S.xFunc}),new s.xWrap.FuncPtrAdapter({name:"xStep",...S.xInverseAndStep}),new s.xWrap.FuncPtrAdapter({name:"xFinal",...S.xFinalAndValue}),new s.xWrap.FuncPtrAdapter({name:"xDestroy",...S.xDestroy})]),F=s.exports.sqlite3_create_window_function?s.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new s.xWrap.FuncPtrAdapter({name:"xStep",...S.xInverseAndStep}),new s.xWrap.FuncPtrAdapter({name:"xFinal",...S.xFinalAndValue}),new s.xWrap.FuncPtrAdapter({name:"xValue",...S.xFinalAndValue}),new s.xWrap.FuncPtrAdapter({name:"xInverse",...S.xInverseAndStep}),new s.xWrap.FuncPtrAdapter({name:"xDestroy",...S.xDestroy})]):void 0;r.sqlite3_create_function_v2=function N(I,U,$,c,g,E,Q,u,h){if(N.length!==arguments.length)return d(I,"sqlite3_create_function_v2",N.length);if((c&15)===0)c|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(c&15))return y(I);try{const a=O(I,U,$,c,g,E,Q,u,h);return a===0&&(E instanceof Function||Q instanceof Function||u instanceof Function||h instanceof Function)&&V.addFunction(I,U,$),a}catch(a){return console.error("sqlite3_create_function_v2() setup threw:",a),o.sqlite3__wasm_db_error(I,a,"Creation of UDF threw: "+a)}},r.sqlite3_create_function=function N(I,U,$,c,g,E,Q,u){return N.length===arguments.length?r.sqlite3_create_function_v2(I,U,$,c,g,E,Q,u,0):d(I,"sqlite3_create_function",N.length)},F?r.sqlite3_create_window_function=function N(I,U,$,c,g,E,Q,u,h,a){if(N.length!==arguments.length)return d(I,"sqlite3_create_window_function",N.length);if((c&15)===0)c|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(c&15))return y(I);try{const _=F(I,U,$,c,g,E,Q,u,h,a);return _===0&&(E instanceof Function||Q instanceof Function||u instanceof Function||h instanceof Function||a instanceof Function)&&V.addWindowFunc(I,U,$),_}catch(_){return console.error("sqlite3_create_window_function() setup threw:",_),o.sqlite3__wasm_db_error(I,_,"Creation of UDF threw: "+_)}}:delete r.sqlite3_create_window_function,r.sqlite3_create_function_v2.udfSetResult=r.sqlite3_create_function.udfSetResult=r.sqlite3_result_js,r.sqlite3_create_window_function&&(r.sqlite3_create_window_function.udfSetResult=r.sqlite3_result_js),r.sqlite3_create_function_v2.udfConvertArgs=r.sqlite3_create_function.udfConvertArgs=r.sqlite3_values_to_js,r.sqlite3_create_window_function&&(r.sqlite3_create_window_function.udfConvertArgs=r.sqlite3_values_to_js),r.sqlite3_create_function_v2.udfSetError=r.sqlite3_create_function.udfSetError=r.sqlite3_result_error_js,r.sqlite3_create_window_function&&(r.sqlite3_create_window_function.udfSetError=r.sqlite3_result_error_js)}{const w=(O,F)=>(typeof O=="string"?F=-1:o.isSQLableTypedArray(O)?(F=O.byteLength,O=o.typedArrayToString(O instanceof ArrayBuffer?new Uint8Array(O):O)):Array.isArray(O)&&(O=O.join(""),F=-1),[O,F]),S={basic:s.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:s.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};r.sqlite3_prepare_v3=function O(F,N,I,U,$,c){if(O.length!==arguments.length)return d(F,"sqlite3_prepare_v3",O.length);const[g,E]=w(N,I);switch(typeof g){case"string":return S.basic(F,g,E,U,$,null);case"number":return S.full(F,g,E,U,$,c);default:return o.sqlite3__wasm_db_error(F,r.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},r.sqlite3_prepare_v2=function O(F,N,I,U,$){return O.length===arguments.length?r.sqlite3_prepare_v3(F,N,I,0,U,$):d(F,"sqlite3_prepare_v2",O.length)}}{const w=s.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),S=s.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);r.sqlite3_bind_text=function O(F,N,I,U,$){if(O.length!==arguments.length)return d(r.sqlite3_db_handle(F),"sqlite3_bind_text",O.length);if(s.isPtr(I)||I===null)return w(F,N,I,U,$);I instanceof ArrayBuffer?I=new Uint8Array(I):Array.isArray(pMem)&&(I=pMem.join(""));let c,g;try{if(o.isSQLableTypedArray(I))c=s.allocFromTypedArray(I),g=I.byteLength;else if(typeof I=="string")[c,g]=s.allocCString(I);else return o.sqlite3__wasm_db_error(r.sqlite3_db_handle(F),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return w(F,N,c,g,r.SQLITE_WASM_DEALLOC)}catch(E){return s.dealloc(c),o.sqlite3__wasm_db_error(r.sqlite3_db_handle(F),E)}},r.sqlite3_bind_blob=function O(F,N,I,U,$){if(O.length!==arguments.length)return d(r.sqlite3_db_handle(F),"sqlite3_bind_blob",O.length);if(s.isPtr(I)||I===null)return S(F,N,I,U,$);I instanceof ArrayBuffer?I=new Uint8Array(I):Array.isArray(I)&&(I=I.join(""));let c,g;try{if(o.isBindableTypedArray(I))c=s.allocFromTypedArray(I),g=U>=0?U:I.byteLength;else if(typeof I=="string")[c,g]=s.allocCString(I);else return o.sqlite3__wasm_db_error(r.sqlite3_db_handle(F),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return S(F,N,c,g,r.SQLITE_WASM_DEALLOC)}catch(E){return s.dealloc(c),o.sqlite3__wasm_db_error(r.sqlite3_db_handle(F),E)}}}r.sqlite3_config=function(w,...S){if(arguments.length<2)return r.SQLITE_MISUSE;switch(w){case r.SQLITE_CONFIG_COVERING_INDEX_SCAN:case r.SQLITE_CONFIG_MEMSTATUS:case r.SQLITE_CONFIG_SMALL_MALLOC:case r.SQLITE_CONFIG_SORTERREF_SIZE:case r.SQLITE_CONFIG_STMTJRNL_SPILL:case r.SQLITE_CONFIG_URI:return s.exports.sqlite3__wasm_config_i(w,S[0]);case r.SQLITE_CONFIG_LOOKASIDE:return s.exports.sqlite3__wasm_config_ii(w,S[0],S[1]);case r.SQLITE_CONFIG_MEMDB_MAXSIZE:return s.exports.sqlite3__wasm_config_j(w,S[0]);case r.SQLITE_CONFIG_GETMALLOC:case r.SQLITE_CONFIG_GETMUTEX:case r.SQLITE_CONFIG_GETPCACHE2:case r.SQLITE_CONFIG_GETPCACHE:case r.SQLITE_CONFIG_HEAP:case r.SQLITE_CONFIG_LOG:case r.SQLITE_CONFIG_MALLOC:case r.SQLITE_CONFIG_MMAP_SIZE:case r.SQLITE_CONFIG_MULTITHREAD:case r.SQLITE_CONFIG_MUTEX:case r.SQLITE_CONFIG_PAGECACHE:case r.SQLITE_CONFIG_PCACHE2:case r.SQLITE_CONFIG_PCACHE:case r.SQLITE_CONFIG_PCACHE_HDRSZ:case r.SQLITE_CONFIG_PMASZ:case r.SQLITE_CONFIG_SERIALIZED:case r.SQLITE_CONFIG_SINGLETHREAD:case r.SQLITE_CONFIG_SQLLOG:case r.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return r.SQLITE_NOTFOUND}};{const w=new Set;r.sqlite3_auto_extension=function(S){if(S instanceof Function)S=s.installFunction("i(ppp)",S);else if(arguments.length!==1||!s.isPtr(S))return r.SQLITE_MISUSE;const O=s.exports.sqlite3_auto_extension(S);return S!==arguments[0]&&(O===0?w.add(S):s.uninstallFunction(S)),O},r.sqlite3_cancel_auto_extension=function(S){return!S||arguments.length!==1||!s.isPtr(S)?0:s.exports.sqlite3_cancel_auto_extension(S)},r.sqlite3_reset_auto_extension=function(){s.exports.sqlite3_reset_auto_extension();for(const S of w)s.uninstallFunction(S);w.clear()}}const K=r.sqlite3_vfs_find("kvvfs");if(K)if(o.isUIThread()){const w=new r.sqlite3_kvvfs_methods(s.exports.sqlite3__wasm_kvvfs_methods());delete r.sqlite3_kvvfs_methods;const S=s.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,O=s.pstack,F=I=>s.peek(I)===115?sessionStorage:localStorage,N={xRead:(I,U,$,c)=>{const g=O.pointer,E=s.scopedAllocPush();try{const Q=S(I,U);if(!Q)return-3;const u=s.cstrToJs(Q),h=F(I).getItem(u);if(!h)return-1;const a=h.length;if(c<=0)return a;if(c===1)return s.poke($,0),a;const _=s.scopedAllocCString(h);return c>a+1&&(c=a+1),s.heap8u().copyWithin($,_,_+c-1),s.poke($+c-1,0),c-1}catch(Q){return console.error("kvstorageRead()",Q),-2}finally{O.restore(g),s.scopedAllocPop(E)}},xWrite:(I,U,$)=>{const c=O.pointer;try{const g=S(I,U);if(!g)return 1;const E=s.cstrToJs(g);return F(I).setItem(E,s.cstrToJs($)),0}catch(g){return console.error("kvstorageWrite()",g),r.SQLITE_IOERR}finally{O.restore(c)}},xDelete:(I,U)=>{const $=O.pointer;try{const c=S(I,U);return c?(F(I).removeItem(s.cstrToJs(c)),0):1}catch(c){return console.error("kvstorageDelete()",c),r.SQLITE_IOERR}finally{O.restore($)}}};for(const I of Object.keys(N))w[w.memberKey(I)]=s.installFunction(w.memberSignature(I),N[I])}else r.sqlite3_vfs_unregister(K);s.xWrap.FuncPtrAdapter.warnOnUse=!0;const C=t.StructBinder,k=function w(S,O,F,N=w.installMethodArgcCheck){if(S instanceof C.StructType?!(F instanceof Function)&&!s.isPtr(F)&&n("Usage errror: expecting a Function or WASM pointer to one."):n("Usage error: target object is-not-a StructType."),arguments.length===1)return(c,g)=>w(S,c,g,N);w.argcProxy||(w.argcProxy=function(c,g,E,Q){return function(...u){return E.length!==arguments.length&&n("Argument mismatch for",c.structInfo.name+"::"+g+": Native signature is:",Q),E.apply(this,u)}},w.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((c,g)=>{if(typeof c=="number")try{s.uninstallFunction(c)}catch{}}),delete this.ondispose.__removeFuncList)});const I=S.memberSignature(O);I.length<2&&n("Member",O,"does not have a function pointer signature:",I);const U=S.memberKey(O),$=N&&!s.isPtr(F)?w.argcProxy(S,U,F,I):F;if(s.isPtr($))$&&!s.functionEntry($)&&n("Pointer",$,"is not a WASM function table entry."),S[U]=$;else{const c=s.installFunction($,S.memberSignature(O,!0));S[U]=c,(!S.ondispose||!S.ondispose.__removeFuncList)&&(S.addOnDispose("ondispose.__removeFuncList handler",w.removeFuncList),S.ondispose.__removeFuncList=[]),S.ondispose.__removeFuncList.push(U,c)}return(c,g)=>w(S,c,g,N)};k.installMethodArgcCheck=!1;const j=function(w,S,O=k.installMethodArgcCheck){const F=new Map;for(const N of Object.keys(S)){const I=S[N],U=F.get(I);if(U){const $=w.memberKey(N);w[$]=w[w.memberKey(U)]}else k(w,N,I,O),F.set(I,N)}return w};C.StructType.prototype.installMethod=function(S,O,F=k.installMethodArgcCheck){return arguments.length<3&&S&&typeof S=="object"?j(this,...arguments):k(this,...arguments)},C.StructType.prototype.installMethods=function(w,S=k.installMethodArgcCheck){return j(this,w,S)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){t.version={libVersion:"3.49.2",libVersionNumber:3049002,sourceId:"2025-05-07 10:39:52 17144570b0d96ae63cd6f3edca39e27ebd74925252bbaf6723bcb2f6b4861fb1",downloadVersion:3490200}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=(...u)=>{throw new t.SQLite3Error(...u)},r=t.capi,s=t.wasm,o=t.util,d=new WeakMap,y=new WeakMap,R=(u,h,a)=>{const _=Object.getOwnPropertyDescriptor(u,h);return _?_.value:a},D=function(u,h){return h&&(u instanceof k&&(u=u.pointer),n(h,"sqlite3 result code",h+":",u?r.sqlite3_errmsg(u):r.sqlite3_errstr(h))),arguments[0]},V=s.installFunction("i(ippp)",(function(u,h,a,_){r.SQLITE_TRACE_STMT===u&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+h+":",s.cstrToJs(_))}).bind({counter:0})),K=Object.create(null),C=function u(...h){if(!u._name2vfs){u._name2vfs=Object.create(null);const le=typeof importScripts=="function"?de=>n("The VFS for",de,"is only available in the main window thread."):!1;u._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:le||(()=>"local")},u._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:le||(()=>"session")}}const a=u.normalizeArgs(...h);let _=a.filename,q=a.vfs,b=a.flags;(typeof _!="string"&&typeof _!="number"||typeof b!="string"||q&&typeof q!="string"&&typeof q!="number")&&(t.config.error("Invalid DB ctor args",a,arguments),n("Invalid arguments for DB constructor."));let z=typeof _=="number"?s.cstrToJs(_):_;const ee=u._name2vfs[z];ee&&(q=ee.vfs,_=z=ee.filename(z));let oe,ce=0;b.indexOf("c")>=0&&(ce|=r.SQLITE_OPEN_CREATE|r.SQLITE_OPEN_READWRITE),b.indexOf("w")>=0&&(ce|=r.SQLITE_OPEN_READWRITE),ce===0&&(ce|=r.SQLITE_OPEN_READONLY),ce|=r.SQLITE_OPEN_EXRESCODE;const ae=s.pstack.pointer;try{const le=s.pstack.allocPtr();let de=r.sqlite3_open_v2(_,le,ce,q||0);oe=s.peekPtr(le),D(oe,de),r.sqlite3_extended_result_codes(oe,1),b.indexOf("t")>=0&&r.sqlite3_trace_v2(oe,r.SQLITE_TRACE_STMT,V,oe)}catch(le){throw oe&&r.sqlite3_close_v2(oe),le}finally{s.pstack.restore(ae)}this.filename=z,d.set(this,oe),y.set(this,Object.create(null));try{const le=r.sqlite3_js_db_vfs(oe)||n("Internal error: cannot get VFS for new db handle."),de=K[le];de&&(de instanceof Function?de(this,t):D(oe,r.sqlite3_exec(oe,de,0,0,0)))}catch(le){throw this.close(),le}};C.setVfsPostOpenCallback=function(u,h){h instanceof Function||n("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),K[u]=h},C.normalizeArgs=function(u=":memory:",h="c",a=null){const _={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(_,arguments[0]),_.flags===void 0&&(_.flags="c"),_.vfs===void 0&&(_.vfs=null),_.filename===void 0&&(_.filename=":memory:")):(_.filename=u,_.flags=h,_.vfs=a),_};const k=function(...u){C.apply(this,u)};k.dbCtorHelper=C;const j={null:1,number:2,string:3,boolean:4,blob:5};j.undefined==j.null,s.bigIntEnabled&&(j.bigint=j.number);const w=function(){j!==arguments[2]&&n(r.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],d.set(this,arguments[1]),this.parameterCount=r.sqlite3_bind_parameter_count(this.pointer)},S=function(u){return u.pointer||n("DB has been closed."),u},O=function(u,h){return(h!==(h|0)||h<0||h>=u.columnCount)&&n("Column index",h,"is out of range."),u},F=function(u,h){const a=Object.create(null);switch(a.opt=Object.create(null),h.length){case 1:typeof h[0]=="string"||o.isSQLableTypedArray(h[0])||Array.isArray(h[0])?a.sql=h[0]:h[0]&&typeof h[0]=="object"&&(a.opt=h[0],a.sql=a.opt.sql);break;case 2:a.sql=h[0],a.opt=h[1];break;default:n("Invalid argument count for exec().")}a.sql=o.flexibleString(a.sql),typeof a.sql!="string"&&n("Missing SQL argument or unsupported SQL value type.");const _=a.opt;switch(_.returnValue){case"resultRows":_.resultRows||(_.resultRows=[]),a.returnVal=()=>_.resultRows;break;case"saveSql":_.saveSql||(_.saveSql=[]),a.returnVal=()=>_.saveSql;break;case void 0:case"this":a.returnVal=()=>u;break;default:n("Invalid returnValue value:",_.returnValue)}if(!_.callback&&!_.returnValue&&_.rowMode!==void 0&&(_.resultRows||(_.resultRows=[]),a.returnVal=()=>_.resultRows),_.callback||_.resultRows)switch(_.rowMode===void 0?"array":_.rowMode){case"object":a.cbArg=(q,b)=>{b.columnNames||(b.columnNames=q.getColumnNames([]));const z=q.get([]),ee=Object.create(null);for(const oe in b.columnNames)ee[b.columnNames[oe]]=z[oe];return ee};break;case"array":a.cbArg=q=>q.get([]);break;case"stmt":Array.isArray(_.resultRows)&&n("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),a.cbArg=q=>q;break;default:if(o.isInt32(_.rowMode)){a.cbArg=q=>q.get(_.rowMode);break}else if(typeof _.rowMode=="string"&&_.rowMode.length>1&&_.rowMode[0]==="$"){const q=_.rowMode.substr(1);a.cbArg=b=>{const z=b.get(Object.create(null))[q];return z===void 0?n(r.SQLITE_NOTFOUND,"exec(): unknown result column:",q):z};break}n("Invalid rowMode:",_.rowMode)}return a},N=(u,h,a,..._)=>{const q=u.prepare(h);try{const b=q.bind(a).step()?q.get(..._):void 0;return q.reset(),b}finally{q.finalize()}},I=(u,h,a,_)=>u.exec({sql:h,bind:a,rowMode:_,returnValue:"resultRows"});k.checkRc=(u,h)=>D(u,h),k.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return S(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const u=this.pointer;if(Object.keys(y.get(this)).forEach((h,a)=>{if(a&&a.pointer)try{a.finalize()}catch{}}),d.delete(this),y.delete(this),r.sqlite3_close_v2(u),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(u=!1,h=!1){const a=S(this).pointer;return u?h?r.sqlite3_total_changes64(a):r.sqlite3_total_changes(a):h?r.sqlite3_changes64(a):r.sqlite3_changes(a)},dbFilename:function(u="main"){return r.sqlite3_db_filename(S(this).pointer,u)},dbName:function(u=0){return r.sqlite3_db_name(S(this).pointer,u)},dbVfsName:function(u=0){let h;const a=r.sqlite3_js_db_vfs(S(this).pointer,u);if(a){const _=new r.sqlite3_vfs(a);try{h=s.cstrToJs(_.$zName)}finally{_.dispose()}}return h},prepare:function(u){S(this);const h=s.pstack.pointer;let a,_;try{a=s.pstack.alloc(8),k.checkRc(this,r.sqlite3_prepare_v2(this.pointer,u,-1,a,null)),_=s.peekPtr(a)}finally{s.pstack.restore(h)}_||n("Cannot prepare empty SQL.");const q=new w(this,_,j);return y.get(this)[_]=q,q},exec:function(){S(this);const u=F(this,arguments);if(!u.sql)return n("exec() requires an SQL string.");const h=u.opt,a=h.callback,_=Array.isArray(h.resultRows)?h.resultRows:void 0;let q,b=h.bind,z=!!(u.cbArg||h.columnNames||_);const ee=s.scopedAllocPush(),oe=Array.isArray(h.saveSql)?h.saveSql:void 0;try{const ce=o.isSQLableTypedArray(u.sql);let ae=ce?u.sql.byteLength:s.jstrlen(u.sql);const le=s.scopedAlloc(2*s.ptrSizeof+(ae+1)),de=le+s.ptrSizeof;let ye=de+s.ptrSizeof;const we=ye+ae;for(ce?s.heap8().set(u.sql,ye):s.jstrcpy(u.sql,s.heap8(),ye,ae,!1),s.poke(ye+ae,0);ye&&s.peek(ye,"i8");){s.pokePtr([le,de],0),k.checkRc(this,r.sqlite3_prepare_v3(this.pointer,ye,ae,0,le,de));const Ee=s.peekPtr(le);if(ye=s.peekPtr(de),ae=we-ye,!!Ee){if(oe&&oe.push(r.sqlite3_sql(Ee).trim()),q=new w(this,Ee,j),b&&q.parameterCount&&(q.bind(b),b=null),z&&q.columnCount){let Pe=Array.isArray(h.columnNames)?0:1;if(z=!1,u.cbArg||_){const Ae=Object.create(null);for(;q.step();q._lockedByExec=!1){Pe++===0&&q.getColumnNames(Ae.columnNames=h.columnNames||[]),q._lockedByExec=!0;const P=u.cbArg(q,Ae);if(_&&_.push(P),a&&a.call(h,P,q)===!1)break}q._lockedByExec=!1}Pe===0&&q.getColumnNames(h.columnNames)}else q.step();q.reset().finalize(),q=null}}}finally{s.scopedAllocPop(ee),q&&(delete q._lockedByExec,q.finalize())}return u.returnVal()},createFunction:function(h,a,_){const q=Ae=>Ae instanceof Function;switch(arguments.length){case 1:_=h,h=_.name,a=_.xFunc||0;break;case 2:q(a)||(_=a,a=_.xFunc||0);break}_||(_={}),typeof h!="string"&&n("Invalid arguments: missing function name.");let b=_.xStep||0,z=_.xFinal||0;const ee=_.xValue||0,oe=_.xInverse||0;let ce;q(a)?(ce=!1,(q(b)||q(z))&&n("Ambiguous arguments: scalar or aggregate?"),b=z=null):q(b)?(q(z)||n("Missing xFinal() callback for aggregate or window UDF."),a=null):q(z)?n("Missing xStep() callback for aggregate or window UDF."):n("Missing function-type properties."),ce===!1?(q(ee)||q(oe))&&n("xValue and xInverse are not permitted for non-window UDFs."):q(ee)?(q(oe)||n("xInverse must be provided if xValue is."),ce=!0):q(oe)&&n("xValue must be provided if xInverse is.");const ae=_.pApp;ae!=null&&(typeof ae!="number"||!o.isInt32(ae))&&n("Invalid value for pApp property. Must be a legal WASM pointer value.");const le=_.xDestroy||0;le&&!q(le)&&n("xDestroy property must be a function.");let de=0;R(_,"deterministic")&&(de|=r.SQLITE_DETERMINISTIC),R(_,"directOnly")&&(de|=r.SQLITE_DIRECTONLY),R(_,"innocuous")&&(de|=r.SQLITE_INNOCUOUS),h=h.toLowerCase();const ye=a||b,we=R(_,"arity"),Ee=typeof we=="number"?we:ye.length?ye.length-1:0;let Pe;return ce?Pe=r.sqlite3_create_window_function(this.pointer,h,Ee,r.SQLITE_UTF8|de,ae||0,b,z,ee,oe,le):Pe=r.sqlite3_create_function_v2(this.pointer,h,Ee,r.SQLITE_UTF8|de,ae||0,a,b,z,le),k.checkRc(this,Pe),this},selectValue:function(u,h,a){return N(this,u,h,0,a)},selectValues:function(u,h,a){const _=this.prepare(u),q=[];try{for(_.bind(h);_.step();)q.push(_.get(0,a));_.reset()}finally{_.finalize()}return q},selectArray:function(u,h){return N(this,u,h,[])},selectObject:function(u,h){return N(this,u,h,{})},selectArrays:function(u,h){return I(this,u,h,"array")},selectObjects:function(u,h){return I(this,u,h,"object")},openStatementCount:function(){return this.pointer?Object.keys(y.get(this)).length:0},transaction:function(u){let h="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&n(r.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),h+=" "+arguments[0],u=arguments[1]),S(this).exec(h);try{const a=u(this);return this.exec("COMMIT"),a}catch(a){throw this.exec("ROLLBACK"),a}},savepoint:function(u){S(this).exec("SAVEPOINT oo1");try{const h=u(this);return this.exec("RELEASE oo1"),h}catch(h){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),h}},checkRc:function(u){return D(this,u)}};const U=function(u){return u.pointer||n("Stmt has been closed."),u},$=function(u){let h=j[u==null?"null":typeof u];switch(h){case j.boolean:case j.null:case j.number:case j.string:return h;case j.bigint:if(s.bigIntEnabled)return h;default:return o.isBindableTypedArray(u)?j.blob:void 0}},c=function(u){return $(u)||n("Unsupported bind() argument type:",typeof u)},g=function(u,h){const a=typeof h=="number"?h:r.sqlite3_bind_parameter_index(u.pointer,h);return a===0||!o.isInt32(a)?n("Invalid bind() parameter name: "+h):(a<1||a>u.parameterCount)&&n("Bind index",h,"is out of range."),a},E=function(u,h){return u._lockedByExec&&n("Operation is illegal when statement is locked:",h),u},Q=function u(h,a,_,q){E(U(h),"bind()"),u._||(u._tooBigInt=z=>n("BigInt value is too big to store without precision loss:",z),u._={string:function(z,ee,oe,ce){const[ae,le]=s.allocCString(oe,!0);return(ce?r.sqlite3_bind_blob:r.sqlite3_bind_text)(z.pointer,ee,ae,le,r.SQLITE_WASM_DEALLOC)}}),c(q),a=g(h,a);let b=0;switch(q==null?j.null:_){case j.null:b=r.sqlite3_bind_null(h.pointer,a);break;case j.string:b=u._.string(h,a,q,!1);break;case j.number:{let z;o.isInt32(q)?z=r.sqlite3_bind_int:typeof q=="bigint"?o.bigIntFits64(q)?s.bigIntEnabled?z=r.sqlite3_bind_int64:o.bigIntFitsDouble(q)?(q=Number(q),z=r.sqlite3_bind_double):u._tooBigInt(q):u._tooBigInt(q):(q=Number(q),s.bigIntEnabled&&Number.isInteger(q)?z=r.sqlite3_bind_int64:z=r.sqlite3_bind_double),b=z(h.pointer,a,q);break}case j.boolean:b=r.sqlite3_bind_int(h.pointer,a,q?1:0);break;case j.blob:{if(typeof q=="string"){b=u._.string(h,a,q,!0);break}else q instanceof ArrayBuffer?q=new Uint8Array(q):o.isBindableTypedArray(q)||n("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const z=s.alloc(q.byteLength||1);s.heap8().set(q.byteLength?q:[0],z),b=r.sqlite3_bind_blob(h.pointer,a,z,q.byteLength,r.SQLITE_WASM_DEALLOC);break}default:t.config.warn("Unsupported bind() argument type:",q),n("Unsupported bind() argument type: "+typeof q)}return b&&k.checkRc(h.db.pointer,b),h._mayGet=!1,h};w.prototype={finalize:function(){if(this.pointer){E(this,"finalize()");const u=r.sqlite3_finalize(this.pointer);return delete y.get(this.db)[this.pointer],d.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,u}},clearBindings:function(){return E(U(this),"clearBindings()"),r.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(u){E(this,"reset()"),u&&this.clearBindings();const h=r.sqlite3_reset(U(this).pointer);return this._mayGet=!1,D(this.db,h),this},bind:function(){U(this);let u,h;switch(arguments.length){case 1:u=1,h=arguments[0];break;case 2:u=arguments[0],h=arguments[1];break;default:n("Invalid bind() arguments.")}return h===void 0?this:(this.parameterCount||n("This statement has no bindable parameters."),this._mayGet=!1,h===null?Q(this,u,j.null,h):Array.isArray(h)?(arguments.length!==1&&n("When binding an array, an index argument is not permitted."),h.forEach((a,_)=>Q(this,_+1,c(a),a)),this):(h instanceof ArrayBuffer&&(h=new Uint8Array(h)),typeof h=="object"&&!o.isBindableTypedArray(h)?(arguments.length!==1&&n("When binding an object, an index argument is not permitted."),Object.keys(h).forEach(a=>Q(this,a,c(h[a]),h[a])),this):Q(this,u,c(h),h)))},bindAsBlob:function(u,h){U(this),arguments.length===1&&(h=u,u=1);const a=c(h);return j.string!==a&&j.blob!==a&&j.null!==a&&n("Invalid value type for bindAsBlob()"),Q(this,u,j.blob,h)},step:function(){E(this,"step()");const u=r.sqlite3_step(U(this).pointer);switch(u){case r.SQLITE_DONE:return this._mayGet=!1;case r.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,t.config.warn("sqlite3_step() rc=",u,r.sqlite3_js_rc_str(u),"SQL =",r.sqlite3_sql(this.pointer)),k.checkRc(this.db.pointer,u)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const u=this.step();return this.reset(),u}finally{try{this.finalize()}catch{}}},get:function(u,h){if(U(this)._mayGet||n("Stmt.step() has not (recently) returned true."),Array.isArray(u)){let a=0;const _=this.columnCount;for(;a<_;)u[a]=this.get(a++);return u}else if(u&&typeof u=="object"){let a=0;const _=this.columnCount;for(;a<_;)u[r.sqlite3_column_name(this.pointer,a)]=this.get(a++);return u}switch(O(this,u),h===void 0?r.sqlite3_column_type(this.pointer,u):h){case r.SQLITE_NULL:return null;case r.SQLITE_INTEGER:if(s.bigIntEnabled){const a=r.sqlite3_column_int64(this.pointer,u);return a>=Number.MIN_SAFE_INTEGER&&a<=Number.MAX_SAFE_INTEGER?Number(a).valueOf():a}else{const a=r.sqlite3_column_double(this.pointer,u);return(a>Number.MAX_SAFE_INTEGER||a<Number.MIN_SAFE_INTEGER)&&n("Integer is out of range for JS integer range: "+a),o.isInt32(a)?a|0:a}case r.SQLITE_FLOAT:return r.sqlite3_column_double(this.pointer,u);case r.SQLITE_TEXT:return r.sqlite3_column_text(this.pointer,u);case r.SQLITE_BLOB:{const a=r.sqlite3_column_bytes(this.pointer,u),_=r.sqlite3_column_blob(this.pointer,u),q=new Uint8Array(a);return a&&q.set(s.heap8u().slice(_,_+a),0),a&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(q.buffer),q}default:n("Don't know how to translate","type of result column #"+u+".")}n("Not reached.")},getInt:function(u){return this.get(u,r.SQLITE_INTEGER)},getFloat:function(u){return this.get(u,r.SQLITE_FLOAT)},getString:function(u){return this.get(u,r.SQLITE_TEXT)},getBlob:function(u){return this.get(u,r.SQLITE_BLOB)},getJSON:function(u){const h=this.get(u,r.SQLITE_STRING);return h===null?h:JSON.parse(h)},getColumnName:function(u){return r.sqlite3_column_name(O(U(this),u).pointer,u)},getColumnNames:function(u=[]){O(U(this),0);const h=this.columnCount;for(let a=0;a<h;++a)u.push(r.sqlite3_column_name(this.pointer,a));return u},getParamIndex:function(u){return U(this).parameterCount?r.sqlite3_bind_parameter_index(this.pointer,u):void 0},getParamName:function(u){return U(this).parameterCount?r.sqlite3_bind_parameter_name(this.pointer,u):void 0},isBusy:function(){return r.sqlite3_stmt_busy(U(this))!==0},isReadOnly:function(){return r.sqlite3_stmt_readonly(U(this))!==0}};{const u={enumerable:!0,get:function(){return d.get(this)},set:()=>n("The pointer property is read-only.")};Object.defineProperty(w.prototype,"pointer",u),Object.defineProperty(k.prototype,"pointer",u)}if(Object.defineProperty(w.prototype,"columnCount",{enumerable:!1,get:function(){return r.sqlite3_column_count(this.pointer)},set:()=>n("The columnCount property is read-only.")}),t.oo1={DB:k,Stmt:w},o.isUIThread()){t.oo1.JsStorageDb=function(h="session"){const a=C.normalizeArgs(...arguments);h=a.filename,h!=="session"&&h!=="local"&&n("JsStorageDb db name must be one of 'session' or 'local'."),a.vfs="kvvfs",C.call(this,a)};const u=t.oo1.JsStorageDb;u.prototype=Object.create(k.prototype),u.clearStorage=r.sqlite3_js_kvvfs_clear,u.prototype.clearStorage=function(){return u.clearStorage(S(this).filename)},u.storageSize=r.sqlite3_js_kvvfs_size,u.prototype.storageSize=function(){return u.storageSize(S(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=t.util;t.initWorker1API=(function(){const r=(...C)=>{throw new Error(C.join(" "))};globalThis.WorkerGlobalScope instanceof Function||r("initWorker1API() must be run from a Worker thread.");const s=this.sqlite3||r("Missing this.sqlite3 object."),o=s.oo1.DB,d=function(C){let k=y.idMap.get(C);return k||(k="db#"+ ++y.idSeq+"@"+C.pointer,y.idMap.set(C,k),k)},y={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(C){const k=new o(C);return this.dbs[d(k)]=k,this.dbList.indexOf(k)<0&&this.dbList.push(k),k},close:function(C,k){if(C){delete this.dbs[d(C)];const j=C.filename,w=n.sqlite3__wasm_db_vfs(C.pointer,0);C.close();const S=this.dbList.indexOf(C);S>=0&&this.dbList.splice(S,1),k&&j&&w&&n.sqlite3__wasm_vfs_unlink(w,j)}},post:function(C,k){k&&k.length?(globalThis.postMessage(C,Array.from(k)),k.length=0):globalThis.postMessage(C)},dbs:Object.create(null),getDb:function(C,k=!0){return this.dbs[C]||(k?r("Unknown (or closed) DB ID:",C):void 0)}},R=function(C=y.dbList[0]){return C&&C.pointer?C:r("DB is not opened.")},D=function(C,k=!0){const j=y.getDb(C.dbId,!1)||y.dbList[0];return k?R(j):j},V=function(){return y.dbList[0]&&d(y.dbList[0])},K={open:function(C){const k=Object.create(null),j=C.args||Object.create(null);j.simulateError&&r("Throwing because of simulateError flag.");const w=Object.create(null);k.vfs=j.vfs,k.filename=j.filename||"";const S=y.open(k);return w.filename=S.filename,w.persistent=!!s.capi.sqlite3_js_db_uses_vfs(S.pointer,"opfs"),w.dbId=d(S),w.vfs=S.dbVfsName(),w},close:function(C){const k=D(C,!1),j={filename:k&&k.filename};if(k){const w=C.args&&typeof C.args=="object"?!!C.args.unlink:!1;y.close(k,w)}return j},exec:function(C){const k=typeof C.args=="string"?{sql:C.args}:C.args||Object.create(null);k.rowMode==="stmt"?r("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):k.sql||r("'exec' requires input SQL.");const j=D(C);(k.callback||Array.isArray(k.resultRows))&&(j._blobXfer=y.xfer);const w=k.callback;let S=0;const O=!!k.columnNames;typeof w=="string"&&(O||(k.columnNames=[]),k.callback=function(F,N){y.post({type:w,columnNames:k.columnNames,rowNumber:++S,row:F},y.xfer)});try{const F=k.countChanges?j.changes(!0,k.countChanges===64):void 0;j.exec(k),F!==void 0&&(k.changeCount=j.changes(!0,k.countChanges===64)-F),k.callback instanceof Function&&(k.callback=w,y.post({type:w,columnNames:k.columnNames,rowNumber:null,row:void 0}))}finally{delete j._blobXfer,k.callback&&(k.callback=w)}return k},"config-get":function(){const C=Object.create(null),k=s.config;return["bigIntEnabled"].forEach(function(j){Object.getOwnPropertyDescriptor(k,j)&&(C[j]=k[j])}),C.version=s.version,C.vfsList=s.capi.sqlite3_js_vfs_list(),C},export:function(C){const k=D(C),j={byteArray:s.capi.sqlite3_js_db_export(k.pointer),filename:k.filename,mimetype:"application/x-sqlite3"};return y.xfer.push(j.byteArray.buffer),j},toss:function(C){r("Testing worker exception")}};globalThis.onmessage=async function(C){C=C.data;let k,j=C.dbId,w=C.type;const S=performance.now();try{K.hasOwnProperty(w)&&K[w]instanceof Function?k=await K[w](C):r("Unknown db worker message type:",C.type)}catch(O){w="error",k={operation:C.type,message:O.message,errorClass:O.name,input:C},O.stack&&(k.stack=typeof O.stack=="string"?O.stack.split(/\n\s*/):O.stack)}j||(j=k.dbId||V()),y.post({type:w,dbId:j,messageId:C.messageId,workerReceivedTime:S,workerRespondTime:performance.now(),departureTime:C.departureTime,result:k},y.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}).bind({sqlite3:t})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=t.wasm,r=t.capi,s=t.util.toss3,o=Object.create(null);t.vfs=o,r.sqlite3_vfs.prototype.registerVfs=function(d=!1){this instanceof t.capi.sqlite3_vfs||s("Expecting a sqlite3_vfs-type argument.");const y=r.sqlite3_vfs_register(this,d?1:0);return y&&s("sqlite3_vfs_register(",this,") failed with rc",y),this.pointer!==r.sqlite3_vfs_find(this.$zName)&&s("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},o.installVfs=function(d){let y=0;const R=["io","vfs"];for(const D of R){const V=d[D];V&&(++y,V.struct.installMethods(V.methods,!!V.applyArgcCheck),D==="vfs"&&(!V.struct.$zName&&typeof V.name=="string"&&V.struct.addOnDispose(V.struct.$zName=n.allocCString(V.name)),V.struct.registerVfs(!!V.asDefault)))}return y||s("Misuse: installVfs() options object requires at least","one of:",R),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){if(!t.wasm.exports.sqlite3_declare_vtab)return;const n=t.wasm,r=t.capi,s=t.util.toss3,o=Object.create(null);t.vtab=o;const d=r.sqlite3_index_info;d.prototype.nthConstraint=function(D,V=!1){if(D<0||D>=this.$nConstraint)return!1;const K=this.$aConstraint+d.sqlite3_index_constraint.structInfo.sizeof*D;return V?K:new d.sqlite3_index_constraint(K)},d.prototype.nthConstraintUsage=function(D,V=!1){if(D<0||D>=this.$nConstraint)return!1;const K=this.$aConstraintUsage+d.sqlite3_index_constraint_usage.structInfo.sizeof*D;return V?K:new d.sqlite3_index_constraint_usage(K)},d.prototype.nthOrderBy=function(D,V=!1){if(D<0||D>=this.$nOrderBy)return!1;const K=this.$aOrderBy+d.sqlite3_index_orderby.structInfo.sizeof*D;return V?K:new d.sqlite3_index_orderby(K)};const y=function(D,V){return(function(K,C=!1){if(arguments.length===0&&(K=new V),K instanceof V)return this.set(K.pointer,K),K;n.isPtr(K)||t.SQLite3Error.toss("Invalid argument to",D+"()");let k=this.get(K);return C&&this.delete(K),k}).bind(new Map)},R=function(D,V){const K=y(D,V);return Object.assign(Object.create(null),{StructType:V,create:C=>{const k=K();return n.pokePtr(C,k.pointer),k},get:C=>K(C),unget:C=>K(C,!0),dispose:C=>{const k=K(C,!0);k&&k.dispose()}})};o.xVtab=R("xVtab",r.sqlite3_vtab),o.xCursor=R("xCursor",r.sqlite3_vtab_cursor),o.xIndexInfo=D=>new r.sqlite3_index_info(D),o.xError=function D(V,K,C){if(D.errorReporter instanceof Function)try{D.errorReporter("sqlite3_module::"+V+"(): "+K.message)}catch{}let k;return K instanceof t.WasmAllocError?k=r.SQLITE_NOMEM:arguments.length>2?k=C:K instanceof t.SQLite3Error&&(k=K.resultCode),k||r.SQLITE_ERROR},o.xError.errorReporter=console.error.bind(console),o.xRowid=(D,V)=>n.poke(D,V,"i64"),o.setupModule=function(D){let V=!1;const K=this instanceof r.sqlite3_module?this:D.struct||(V=new r.sqlite3_module);try{const C=D.methods||s("Missing 'methods' object.");for(const k of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const j=k[0],w=k[1];C[j]===!0?C[j]=C[w]:C[w]===!0&&(C[w]=C[j])}if(D.catchExceptions){const k=function(S,O){return["xConnect","xCreate"].indexOf(S)>=0?function(F,N,I,U,$,c){try{return O(...arguments)||0}catch(g){return g instanceof t.WasmAllocError||(n.dealloc(n.peekPtr(c)),n.pokePtr(c,n.allocCString(g.message))),o.xError(S,g)}}:function(...F){try{return O(...F)||0}catch(N){return o.xError(S,N)}}},j=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],w=Object.create(null);for(const S of j){const O=C[S];if(O instanceof Function)S==="xConnect"&&C.xCreate===O?w[S]=C.xCreate:S==="xCreate"&&C.xConnect===O?w[S]=C.xConnect:w[S]=k(S,O);else continue}K.installMethods(w,!1)}else K.installMethods(C,!!D.applyArgcCheck);if(K.$iVersion===0){let k;typeof D.iVersion=="number"?k=D.iVersion:K.$xShadowName?k=3:K.$xSavePoint||K.$xRelease||K.$xRollbackTo?k=2:k=1,K.$iVersion=k}}catch(C){throw V&&V.dispose(),C}return K},r.sqlite3_module.prototype.setupModule=function(D){return o.setupModule.call(this,D)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=function r(s){var y;if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((y=navigator==null?void 0:navigator.storage)!=null&&y.getDirectory))return Promise.reject(new Error("Missing required OPFS APIs."));(!s||typeof s!="object")&&(s=Object.create(null));const o=new URL(globalThis.location.href).searchParams;return o.has("opfs-disable")?Promise.resolve(t):(s.verbose===void 0&&(s.verbose=o.has("opfs-verbose")?+o.get("opfs-verbose")||2:1),s.sanityChecks===void 0&&(s.sanityChecks=o.has("opfs-sanity-check")),s.proxyUri===void 0&&(s.proxyUri=r.defaultProxyUri),typeof s.proxyUri=="function"&&(s.proxyUri=s.proxyUri()),new Promise(function(R,D){const V=[t.config.error,t.config.warn,t.config.log],K=(P,...B)=>{s.verbose>P&&V[P]("OPFS syncer:",...B)},C=(...P)=>K(2,...P),k=(...P)=>K(1,...P),j=(...P)=>K(0,...P),w=t.util.toss,S=t.capi,O=t.util,F=t.wasm,N=S.sqlite3_vfs,I=S.sqlite3_file,U=S.sqlite3_io_methods,$=Object.create(null),c=()=>{var P;return globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&((P=navigator==null?void 0:navigator.storage)==null?void 0:P.getDirectory)};$.metrics={dump:function(){let P,B=0,H=0,Z=0;for(P in b.opIds){const J=z[P];B+=J.count,H+=J.time,Z+=J.wait,J.avgTime=J.count&&J.time?J.time/J.count:0,J.avgWait=J.count&&J.wait?J.wait/J.count:0}t.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",z,`
Total of`,B,"op(s) for",H,"ms (incl. "+Z+" ms of waiting on the async side)"),t.config.log("Serialization metrics:",z.s11n),a.postMessage({type:"opfs-async-metrics"})},reset:function(){let P;const B=Z=>Z.count=Z.time=Z.wait=0;for(P in b.opIds)B(z[P]=Object.create(null));let H=z.s11n=Object.create(null);H=H.serialize=Object.create(null),H.count=H.time=0,H=z.s11n.deserialize=Object.create(null),H.count=H.time=0}};const g=new U,E=new N().addOnDispose(()=>g.dispose());let Q;const u=P=>(Q=!0,E.dispose(),D(P)),h=()=>(Q=!1,R(t)),a=new Worker(new URL("/prompt-api-sqlite/assets/sqlite3-opfs-async-proxy-DZdsd1Kz.js",import.meta.url));setTimeout(()=>{Q===void 0&&u(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),a._originalOnError=a.onerror,a.onerror=function(P){j("Error initializing OPFS asyncer:",P),u(new Error("Loading OPFS async Worker failed for unknown reasons."))};const _=S.sqlite3_vfs_find(null),q=_?new N(_):null;g.$iVersion=1,E.$iVersion=2,E.$szOsFile=S.sqlite3_file.structInfo.sizeof,E.$mxPathname=1024,E.$zName=F.allocCString("opfs"),E.$xDlOpen=E.$xDlError=E.$xDlSym=E.$xDlClose=null,E.addOnDispose("$zName",E.$zName,"cleanup default VFS wrapper",()=>q?q.dispose():null);const b=Object.create(null);b.verbose=s.verbose,b.littleEndian=(()=>{const P=new ArrayBuffer(2);return new DataView(P).setInt16(0,256,!0),new Int16Array(P)[0]===256})(),b.asyncIdleWaitTime=150,b.asyncS11nExceptions=1,b.fileBufferSize=1024*64,b.sabS11nOffset=b.fileBufferSize,b.sabS11nSize=E.$mxPathname*2,b.sabIO=new SharedArrayBuffer(b.fileBufferSize+b.sabS11nSize),b.opIds=Object.create(null);const z=Object.create(null);{let P=0;b.opIds.whichOp=P++,b.opIds.rc=P++,b.opIds.xAccess=P++,b.opIds.xClose=P++,b.opIds.xDelete=P++,b.opIds.xDeleteNoWait=P++,b.opIds.xFileSize=P++,b.opIds.xLock=P++,b.opIds.xOpen=P++,b.opIds.xRead=P++,b.opIds.xSleep=P++,b.opIds.xSync=P++,b.opIds.xTruncate=P++,b.opIds.xUnlock=P++,b.opIds.xWrite=P++,b.opIds.mkdir=P++,b.opIds["opfs-async-metrics"]=P++,b.opIds["opfs-async-shutdown"]=P++,b.opIds.retry=P++,b.sabOP=new SharedArrayBuffer(P*4),$.metrics.reset()}b.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(P=>{(b.sq3Codes[P]=S[P])===void 0&&w("Maintenance required: not found:",P)}),b.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const ee=(P,...B)=>{const H=b.opIds[P]||w("Invalid op ID:",P);b.s11n.serialize(...B),Atomics.store(b.sabOPView,b.opIds.rc,-1),Atomics.store(b.sabOPView,b.opIds.whichOp,H),Atomics.notify(b.sabOPView,b.opIds.whichOp);const Z=performance.now();for(;Atomics.wait(b.sabOPView,b.opIds.rc,-1)!=="not-equal";);const J=Atomics.load(b.sabOPView,b.opIds.rc);if(z[P].wait+=performance.now()-Z,J&&b.asyncS11nExceptions){const ne=b.s11n.deserialize();ne&&j(P+"() async error:",...ne)}return J};$.debug={asyncShutdown:()=>{k("Shutting down OPFS async listener. The OPFS VFS will no longer work."),ee("opfs-async-shutdown")},asyncRestart:()=>{k("Attempting to restart OPFS VFS async listener. Might work, might not."),a.postMessage({type:"opfs-async-restart"})}};const oe=()=>{if(b.s11n)return b.s11n;const P=new TextDecoder,B=new TextEncoder("utf-8"),H=new Uint8Array(b.sabIO,b.sabS11nOffset,b.sabS11nSize),Z=new DataView(b.sabIO,b.sabS11nOffset,b.sabS11nSize);b.s11n=Object.create(null);const J=Object.create(null);J.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},J.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},J.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},J.string={id:4};const ne=p=>J[typeof p]||w("Maintenance required: this value type cannot be serialized.",p),W=p=>{switch(p){case J.number.id:return J.number;case J.bigint.id:return J.bigint;case J.boolean.id:return J.boolean;case J.string.id:return J.string;default:w("Invalid type ID:",p)}};return b.s11n.deserialize=function(p=!1){++z.s11n.deserialize.count;const f=performance.now(),A=H[0],T=A?[]:null;if(A){const M=[];let Y=1,ie,pe,be;for(ie=0;ie<A;++ie,++Y)M.push(W(H[Y]));for(ie=0;ie<A;++ie){const Ne=M[ie];Ne.getter?(be=Z[Ne.getter](Y,b.littleEndian),Y+=Ne.size):(pe=Z.getInt32(Y,b.littleEndian),Y+=4,be=P.decode(H.slice(Y,Y+pe)),Y+=pe),T.push(be)}}return p&&(H[0]=0),z.s11n.deserialize.time+=performance.now()-f,T},b.s11n.serialize=function(...p){const f=performance.now();if(++z.s11n.serialize.count,p.length){const A=[];let T=0,M=1;for(H[0]=p.length&255;T<p.length;++T,++M)A.push(ne(p[T])),H[M]=A[T].id;for(T=0;T<p.length;++T){const Y=A[T];if(Y.setter)Z[Y.setter](M,p[T],b.littleEndian),M+=Y.size;else{const ie=B.encode(p[T]);Z.setInt32(M,ie.byteLength,b.littleEndian),M+=4,H.set(ie,M),M+=ie.byteLength}}}else H[0]=0;z.s11n.serialize.time+=performance.now()-f},b.s11n},ce=function P(B=16){P._chars||(P._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",P._n=P._chars.length);const H=[];let Z=0;for(;Z<B;++Z){const J=Math.random()*(P._n*64)%P._n|0;H[Z]=P._chars[J]}return H.join("")},ae=Object.create(null),le=Object.create(null);le.op=void 0,le.start=void 0;const de=P=>{le.start=performance.now(),le.op=P,++z[P].count},ye=()=>z[le.op].time+=performance.now()-le.start,we={xCheckReservedLock:function(P,B){return F.poke(B,0,"i32"),0},xClose:function(P){de("xClose");let B=0;const H=ae[P];return H&&(delete ae[P],B=ee("xClose",P),H.sq3File&&H.sq3File.dispose()),ye(),B},xDeviceCharacteristics:function(P){return S.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(P,B,H){return S.SQLITE_NOTFOUND},xFileSize:function(P,B){de("xFileSize");let H=ee("xFileSize",P);if(H==0)try{const Z=b.s11n.deserialize()[0];F.poke(B,Z,"i64")}catch(Z){j("Unexpected error reading xFileSize() result:",Z),H=b.sq3Codes.SQLITE_IOERR}return ye(),H},xLock:function(P,B){de("xLock");const H=ae[P];let Z=0;return H.lockType?H.lockType=B:(Z=ee("xLock",P,B),Z===0&&(H.lockType=B)),ye(),Z},xRead:function(P,B,H,Z){de("xRead");const J=ae[P];let ne;try{ne=ee("xRead",P,H,Number(Z)),(ne===0||S.SQLITE_IOERR_SHORT_READ===ne)&&F.heap8u().set(J.sabView.subarray(0,H),B)}catch(W){j("xRead(",arguments,") failed:",W,J),ne=S.SQLITE_IOERR_READ}return ye(),ne},xSync:function(P,B){de("xSync"),++z.xSync.count;const H=ee("xSync",P,B);return ye(),H},xTruncate:function(P,B){de("xTruncate");const H=ee("xTruncate",P,Number(B));return ye(),H},xUnlock:function(P,B){de("xUnlock");const H=ae[P];let Z=0;return S.SQLITE_LOCK_NONE===B&&H.lockType&&(Z=ee("xUnlock",P,B)),Z===0&&(H.lockType=B),ye(),Z},xWrite:function(P,B,H,Z){de("xWrite");const J=ae[P];let ne;try{J.sabView.set(F.heap8u().subarray(B,B+H)),ne=ee("xWrite",P,H,Number(Z))}catch(W){j("xWrite(",arguments,") failed:",W,J),ne=S.SQLITE_IOERR_WRITE}return ye(),ne}},Ee={xAccess:function(P,B,H,Z){de("xAccess");const J=ee("xAccess",F.cstrToJs(B));return F.poke(Z,J?0:1,"i32"),ye(),0},xCurrentTime:function(P,B){return F.poke(B,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(P,B){return F.poke(B,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(P,B,H){de("xDelete");const Z=ee("xDelete",F.cstrToJs(B),H,!1);return ye(),Z},xFullPathname:function(P,B,H,Z){return F.cstrncpy(Z,B,H)<H?0:S.SQLITE_CANTOPEN},xGetLastError:function(P,B,H){return k("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(B,H,Z,J,ne){de("xOpen");let W=0;H===0?H=ce():F.isPtr(H)&&(S.sqlite3_uri_boolean(H,"opfs-unlock-asap",0)&&(W|=b.opfsFlags.OPFS_UNLOCK_ASAP),S.sqlite3_uri_boolean(H,"delete-before-open",0)&&(W|=b.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),H=F.cstrToJs(H));const p=Object.create(null);p.fid=Z,p.filename=H,p.sab=new SharedArrayBuffer(b.fileBufferSize),p.flags=J,p.readOnly=!(t.SQLITE_OPEN_CREATE&J)&&!!(J&S.SQLITE_OPEN_READONLY);const f=ee("xOpen",Z,H,J,W);return f||(p.readOnly&&F.poke(ne,S.SQLITE_OPEN_READONLY,"i32"),ae[Z]=p,p.sabView=b.sabFileBufView,p.sq3File=new I(Z),p.sq3File.$pMethods=g.pointer,p.lockType=S.SQLITE_LOCK_NONE),ye(),f}};q&&(E.$xRandomness=q.$xRandomness,E.$xSleep=q.$xSleep),E.$xRandomness||(Ee.xRandomness=function(P,B,H){const Z=F.heap8u();let J=0;for(;J<B;++J)Z[H+J]=Math.random()*255e3&255;return J}),E.$xSleep||(Ee.xSleep=function(P,B){return Atomics.wait(b.sabOPView,b.opIds.xSleep,0,B),0}),$.getResolvedPath=function(P,B){const H=new URL(P,"file://irrelevant").pathname;return B?H.split("/").filter(Z=>!!Z):H},$.getDirForFilename=async function(B,H=!1){const Z=$.getResolvedPath(B,!0),J=Z.pop();let ne=$.rootDirectory;for(const W of Z)W&&(ne=await ne.getDirectoryHandle(W,{create:!!H}));return[ne,J]},$.mkdir=async function(P){try{return await $.getDirForFilename(P+"/filepart",!0),!0}catch{return!1}},$.entryExists=async function(P){try{const[B,H]=await $.getDirForFilename(P);return await B.getFileHandle(H),!0}catch{return!1}},$.randomFilename=ce,$.treeList=async function(){const P=async function H(Z,J){J.name=Z.name,J.dirs=[],J.files=[];for await(const ne of Z.values())if(ne.kind==="directory"){const W=Object.create(null);J.dirs.push(W),await H(ne,W)}else J.files.push(ne.name)},B=Object.create(null);return await P($.rootDirectory,B),B},$.rmfr=async function(){const P=$.rootDirectory,B={recurse:!0};for await(const H of P.values())P.removeEntry(H.name,B)},$.unlink=async function(P,B=!1,H=!1){try{const[Z,J]=await $.getDirForFilename(P,!1);return await Z.removeEntry(J,{recursive:B}),!0}catch(Z){if(H)throw new Error("unlink(",arguments[0],") failed: "+Z.message,{cause:Z});return!1}},$.traverse=async function(P){const B={recursive:!0,directory:$.rootDirectory};typeof P=="function"&&(P={callback:P}),P=Object.assign(B,P||{}),async function Z(J,ne){for await(const W of J.values()){if(P.callback(W,J,ne)===!1)return!1;if(P.recursive&&W.kind==="directory"&&await Z(W,ne+1)===!1)break}}(P.directory,0)};const Pe=async function(P,B){const[H,Z]=await $.getDirForFilename(P,!0);let ne=await(await H.getFileHandle(Z,{create:!0})).createSyncAccessHandle(),W=0,p,f=!1;try{for(ne.truncate(0);(p=await B())!==void 0;)p instanceof ArrayBuffer&&(p=new Uint8Array(p)),W===0&&p.byteLength>=15&&(O.affirmDbHeader(p),f=!0),ne.write(p,{at:W}),W+=p.byteLength;if((W<512||W%512!==0)&&w("Input size",W,"is not correct for an SQLite database."),!f){const A=new Uint8Array(20);ne.read(A,{at:0}),O.affirmDbHeader(A)}return ne.write(new Uint8Array([1,1]),{at:18}),W}catch(A){throw await ne.close(),ne=void 0,await H.removeEntry(Z).catch(()=>{}),A}finally{ne&&await ne.close()}};if($.importDb=async function(P,B){if(B instanceof Function)return Pe(P,B);B instanceof ArrayBuffer&&(B=new Uint8Array(B)),O.affirmIsDb(B);const H=B.byteLength,[Z,J]=await $.getDirForFilename(P,!0);let ne,W=0;try{return ne=await(await Z.getFileHandle(J,{create:!0})).createSyncAccessHandle(),ne.truncate(0),W=ne.write(B,{at:0}),W!=H&&w("Expected to write "+H+" bytes but wrote "+W+"."),ne.write(new Uint8Array([1,1]),{at:18}),W}catch(p){throw ne&&(await ne.close(),ne=void 0),await Z.removeEntry(J).catch(()=>{}),p}finally{ne&&await ne.close()}},t.oo1){const P=function(...B){const H=t.oo1.DB.dbCtorHelper.normalizeArgs(...B);H.vfs=E.$zName,t.oo1.DB.dbCtorHelper.call(this,H)};P.prototype=Object.create(t.oo1.DB.prototype),t.oo1.OpfsDb=P,P.importDb=$.importDb,t.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(E.pointer,function(B,H){H.capi.sqlite3_busy_timeout(B,1e4)})}const Ae=function(){const P=F.scopedAllocPush(),B=new I;try{const H=B.pointer,Z=S.SQLITE_OPEN_CREATE|S.SQLITE_OPEN_READWRITE|S.SQLITE_OPEN_MAIN_DB,J=F.scopedAlloc(8),ne="/sanity/check/file"+ce(8),W=F.scopedAllocCString(ne);let p;if(b.s11n.serialize("This is  string."),p=b.s11n.deserialize(),C("deserialize() says:",p),p[0]!=="This is  string."&&w("String d13n error."),Ee.xAccess(E.pointer,W,0,J),p=F.peek(J,"i32"),C("xAccess(",ne,") exists ?=",p),p=Ee.xOpen(E.pointer,W,H,Z,J),C("open rc =",p,"state.sabOPView[xOpen] =",b.sabOPView[b.opIds.xOpen]),p!==0){j("open failed with code",p);return}Ee.xAccess(E.pointer,W,0,J),p=F.peek(J,"i32"),p||w("xAccess() failed to detect file."),p=we.xSync(B.pointer,0),p&&w("sync failed w/ rc",p),p=we.xTruncate(B.pointer,1024),p&&w("truncate failed w/ rc",p),F.poke(J,0,"i64"),p=we.xFileSize(B.pointer,J),p&&w("xFileSize failed w/ rc",p),C("xFileSize says:",F.peek(J,"i64")),p=we.xWrite(B.pointer,W,10,1),p&&w("xWrite() failed!");const f=F.scopedAlloc(16);p=we.xRead(B.pointer,f,6,2),F.poke(f+6,0);let A=F.cstrToJs(f);C("xRead() got:",A),A!=="sanity"&&w("Unexpected xRead() value."),Ee.xSleep&&(C("xSleep()ing before close()ing..."),Ee.xSleep(E.pointer,2e3),C("waking up from xSleep()")),p=we.xClose(H),C("xClose rc =",p,"sabOPView =",b.sabOPView),C("Deleting file:",ne),Ee.xDelete(E.pointer,W,4660),Ee.xAccess(E.pointer,W,0,J),p=F.peek(J,"i32"),p&&w("Expecting 0 from xAccess(",ne,") after xDelete()."),k("End of OPFS sanity checks.")}finally{B.dispose(),F.scopedAllocPop(P)}};a.onmessage=function({data:P}){switch(P.type){case"opfs-unavailable":u(new Error(P.payload.join(" ")));break;case"opfs-async-loaded":a.postMessage({type:"opfs-async-init",args:b});break;case"opfs-async-inited":{if(Q===!0)break;try{t.vfs.installVfs({io:{struct:g,methods:we},vfs:{struct:E,methods:Ee}}),b.sabOPView=new Int32Array(b.sabOP),b.sabFileBufView=new Uint8Array(b.sabIO,0,b.fileBufferSize),b.sabS11nView=new Uint8Array(b.sabIO,b.sabS11nOffset,b.sabS11nSize),oe(),s.sanityChecks&&(k("Running sanity checks because of opfs-sanity-check URL arg..."),Ae()),c()?navigator.storage.getDirectory().then(B=>{a.onerror=a._originalOnError,delete a._originalOnError,t.opfs=$,$.rootDirectory=B,C("End of OPFS sqlite3_vfs setup.",E),h()}).catch(u):h()}catch(B){j(B),u(B)}break}default:{const B="Unexpected message from the OPFS async worker: "+JSON.stringify(P);j(B),u(new Error(B));break}}}}))};n.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async r=>{try{let s=n.defaultProxyUri;return r.scriptInfo.sqlite3Dir&&(n.defaultProxyUri=r.scriptInfo.sqlite3Dir+s),n().catch(o=>{r.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",o.message)})}catch(s){return r.config.error("installOpfsVfs() exception:",s),Promise.reject(s)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){var ae,le,de,ye,we,Ee,Pe,Ae,P,B,H,Z,ht,ne;const n=t.util.toss,r=t.util.toss3,s=Object.create(null),o=t.capi,d=t.util,y=t.wasm,R=4096,D=512,V=4,K=8,C=D+V,k=D,j=C,w=R,S=o.SQLITE_OPEN_MAIN_DB|o.SQLITE_OPEN_MAIN_JOURNAL|o.SQLITE_OPEN_SUPER_JOURNAL|o.SQLITE_OPEN_WAL,O=".opaque",F=()=>Math.random().toString(36).slice(2),N=new TextDecoder,I=new TextEncoder,U=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),$=[t.config.error,t.config.warn,t.config.log];t.config.log;const c=t.config.warn;t.config.error;const g=new Map,E=W=>g.get(W),Q=(W,p)=>{p?g.set(W,p):g.delete(W)},u=new Map,h=W=>u.get(W),a=(W,p)=>{p?u.set(W,p):u.delete(W)},_={xCheckReservedLock:function(W,p){const f=h(W);return f.log("xCheckReservedLock"),f.storeErr(),y.poke32(p,1),0},xClose:function(W){const p=h(W);p.storeErr();const f=p.getOFileForS3File(W);if(f)try{p.log(`xClose ${f.path}`),p.mapS3FileToOFile(W,!1),f.sah.flush(),f.flags&o.SQLITE_OPEN_DELETEONCLOSE&&p.deletePath(f.path)}catch(A){return p.storeErr(A,o.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(W){return o.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(W,p,f){return o.SQLITE_NOTFOUND},xFileSize:function(W,p){const f=h(W);f.log("xFileSize");const T=f.getOFileForS3File(W).sah.getSize()-w;return y.poke64(p,BigInt(T)),0},xLock:function(W,p){const f=h(W);f.log(`xLock ${p}`),f.storeErr();const A=f.getOFileForS3File(W);return A.lockType=p,0},xRead:function(W,p,f,A){const T=h(W);T.storeErr();const M=T.getOFileForS3File(W);T.log(`xRead ${M.path} ${f} @ ${A}`);try{const Y=M.sah.read(y.heap8u().subarray(p,p+f),{at:w+Number(A)});return Y<f?(y.heap8u().fill(0,p+Y,p+f),o.SQLITE_IOERR_SHORT_READ):0}catch(Y){return T.storeErr(Y,o.SQLITE_IOERR)}},xSectorSize:function(W){return R},xSync:function(W,p){const f=h(W);f.log(`xSync ${p}`),f.storeErr();const A=f.getOFileForS3File(W);try{return A.sah.flush(),0}catch(T){return f.storeErr(T,o.SQLITE_IOERR)}},xTruncate:function(W,p){const f=h(W);f.log(`xTruncate ${p}`),f.storeErr();const A=f.getOFileForS3File(W);try{return A.sah.truncate(w+Number(p)),0}catch(T){return f.storeErr(T,o.SQLITE_IOERR)}},xUnlock:function(W,p){const f=h(W);f.log("xUnlock");const A=f.getOFileForS3File(W);return A.lockType=p,0},xWrite:function(W,p,f,A){const T=h(W);T.storeErr();const M=T.getOFileForS3File(W);T.log(`xWrite ${M.path} ${f} ${A}`);try{const Y=M.sah.write(y.heap8u().subarray(p,p+f),{at:w+Number(A)});return f===Y?0:n("Unknown write() failure.")}catch(Y){return T.storeErr(Y,o.SQLITE_IOERR)}}},q=new o.sqlite3_io_methods;q.$iVersion=1,t.vfs.installVfs({io:{struct:q,methods:_}});const b={xAccess:function(W,p,f,A){const T=E(W);T.storeErr();try{const M=T.getPath(p);y.poke32(A,T.hasFilename(M)?1:0)}catch{y.poke32(A,0)}return 0},xCurrentTime:function(W,p){return y.poke(p,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(W,p){return y.poke(p,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(W,p,f){const A=E(W);A.log(`xDelete ${y.cstrToJs(p)}`),A.storeErr();try{return A.deletePath(A.getPath(p)),0}catch(T){return A.storeErr(T),o.SQLITE_IOERR_DELETE}},xFullPathname:function(W,p,f,A){return y.cstrncpy(A,p,f)<f?0:o.SQLITE_CANTOPEN},xGetLastError:function(W,p,f){const A=E(W),T=A.popErr();if(A.log(`xGetLastError ${p} e =`,T),T){const M=y.scopedAllocPush();try{const[Y,ie]=y.scopedAllocCString(T.message,!0);y.cstrncpy(f,Y,p),ie>p&&y.poke8(f+p-1,0)}catch{return o.SQLITE_NOMEM}finally{y.scopedAllocPop(M)}}return T?T.sqlite3Rc||o.SQLITE_IOERR:0},xOpen:function(p,f,A,T,M){const Y=E(p);try{Y.log(`xOpen ${y.cstrToJs(f)} ${T}`);const ie=f&&y.peek8(f)?Y.getPath(f):F();let pe=Y.getSAHForPath(ie);!pe&&T&o.SQLITE_OPEN_CREATE&&(Y.getFileCount()<Y.getCapacity()?(pe=Y.nextAvailableSAH(),Y.setAssociatedPath(pe,ie,T)):n("SAH pool is full. Cannot create file",ie)),pe||n("file not found:",ie);const be={path:ie,flags:T,sah:pe};Y.mapS3FileToOFile(A,be),be.lockType=o.SQLITE_LOCK_NONE;const Ne=new o.sqlite3_file(A);return Ne.$pMethods=q.pointer,Ne.dispose(),y.poke32(M,T),0}catch(ie){return Y.storeErr(ie),o.SQLITE_CANTOPEN}}},z=function(W){t.capi.sqlite3_vfs_find(W)&&r("VFS name is already registered:",W);const p=new o.sqlite3_vfs,f=o.sqlite3_vfs_find(null),A=f?new o.sqlite3_vfs(f):null;return p.$iVersion=2,p.$szOsFile=o.sqlite3_file.structInfo.sizeof,p.$mxPathname=D,p.addOnDispose(p.$zName=y.allocCString(W),()=>Q(p.pointer,0)),A&&(p.$xRandomness=A.$xRandomness,p.$xSleep=A.$xSleep,A.dispose()),!p.$xRandomness&&!b.xRandomness&&(b.xRandomness=function(T,M,Y){const ie=y.heap8u();let pe=0;for(;pe<M;++pe)ie[Y+pe]=Math.random()*255e3&255;return pe}),!p.$xSleep&&!b.xSleep&&(b.xSleep=(T,M)=>0),t.vfs.installVfs({vfs:{struct:p,methods:b}}),p};class ee{constructor(p=Object.create(null)){Re(this,Z);Zt(this,"vfsDir");Re(this,ae);Re(this,le);Re(this,de);Re(this,ye,new Map);Re(this,we,new Map);Re(this,Ee,new Set);Re(this,Pe,new Map);Re(this,Ae,new Uint8Array(C));Re(this,P);Re(this,B);Re(this,H);je(this,H,p.verbosity??U.verbosity),this.vfsName=p.name||U.name,je(this,B,z(this.vfsName)),Q(re(this,B).pointer,this),this.vfsDir=p.directory||"."+this.vfsName,je(this,P,new DataView(re(this,Ae).buffer,re(this,Ae).byteOffset)),this.isReady=this.reset(!!(p.clearOnInit??U.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(p.initialCapacity||U.initialCapacity)})}log(...p){mt(this,Z,ht).call(this,2,...p)}warn(...p){mt(this,Z,ht).call(this,1,...p)}error(...p){mt(this,Z,ht).call(this,0,...p)}getVfs(){return re(this,B)}getCapacity(){return re(this,ye).size}getFileCount(){return re(this,we).size}getFileNames(){const p=[],f=re(this,we).keys();for(const A of f)p.push(A);return p}async addCapacity(p){for(let f=0;f<p;++f){const A=F(),M=await(await re(this,le).getFileHandle(A,{create:!0})).createSyncAccessHandle();re(this,ye).set(M,A),this.setAssociatedPath(M,"",0)}return this.getCapacity()}async reduceCapacity(p){let f=0;for(const A of Array.from(re(this,Ee))){if(f===p||this.getFileCount()===this.getCapacity())break;const T=re(this,ye).get(A);A.close(),await re(this,le).removeEntry(T),re(this,ye).delete(A),re(this,Ee).delete(A),++f}return f}releaseAccessHandles(){for(const p of re(this,ye).keys())p.close();re(this,ye).clear(),re(this,we).clear(),re(this,Ee).clear()}async acquireAccessHandles(p){const f=[];for await(const[A,T]of re(this,le))T.kind==="file"&&f.push([A,T]);return Promise.all(f.map(async([A,T])=>{try{const M=await T.createSyncAccessHandle();if(re(this,ye).set(M,A),p)M.truncate(w),this.setAssociatedPath(M,"",0);else{const Y=this.getAssociatedPath(M);Y?re(this,we).set(Y,M):re(this,Ee).add(M)}}catch(M){throw this.storeErr(M),this.releaseAccessHandles(),M}}))}getAssociatedPath(p){p.read(re(this,Ae),{at:0});const f=re(this,P).getUint32(k);if(re(this,Ae)[0]&&(f&o.SQLITE_OPEN_DELETEONCLOSE||(f&S)===0))return c(`Removing file with unexpected flags ${f.toString(16)}`,re(this,Ae)),this.setAssociatedPath(p,"",0),"";const A=new Uint32Array(K/4);p.read(A,{at:j});const T=this.computeDigest(re(this,Ae));if(A.every((M,Y)=>M===T[Y])){const M=re(this,Ae).findIndex(Y=>Y===0);return M===0&&p.truncate(w),M?N.decode(re(this,Ae).subarray(0,M)):""}else return c("Disassociating file with bad digest."),this.setAssociatedPath(p,"",0),""}setAssociatedPath(p,f,A){const T=I.encodeInto(f,re(this,Ae));D<=T.written+1&&n("Path too long:",f),re(this,Ae).fill(0,T.written,D),re(this,P).setUint32(k,A);const M=this.computeDigest(re(this,Ae));p.write(re(this,Ae),{at:0}),p.write(M,{at:j}),p.flush(),f?(re(this,we).set(f,p),re(this,Ee).delete(p)):(p.truncate(w),re(this,Ee).add(p))}computeDigest(p){let f=3735928559,A=1103547991;for(const T of p)f=31*f+T*307,A=31*A+T*307;return new Uint32Array([f>>>0,A>>>0])}async reset(p){await this.isReady;let f=await navigator.storage.getDirectory(),A;for(const T of this.vfsDir.split("/"))T&&(A=f,f=await f.getDirectoryHandle(T,{create:!0}));return je(this,ae,f),je(this,de,A),je(this,le,await re(this,ae).getDirectoryHandle(O,{create:!0})),this.releaseAccessHandles(),this.acquireAccessHandles(p)}getPath(p){return y.isPtr(p)&&(p=y.cstrToJs(p)),(p instanceof URL?p:new URL(p,"file://localhost/")).pathname}deletePath(p){const f=re(this,we).get(p);return f&&(re(this,we).delete(p),this.setAssociatedPath(f,"",0)),!!f}storeErr(p,f){return p&&(p.sqlite3Rc=f||o.SQLITE_IOERR,this.error(p)),this.$error=p,f}popErr(){const p=this.$error;return this.$error=void 0,p}nextAvailableSAH(){const[p]=re(this,Ee).keys();return p}getOFileForS3File(p){return re(this,Pe).get(p)}mapS3FileToOFile(p,f){f?(re(this,Pe).set(p,f),a(p,this)):(re(this,Pe).delete(p),a(p,!1))}hasFilename(p){return re(this,we).has(p)}getSAHForPath(p){return re(this,we).get(p)}async removeVfs(){if(!re(this,B).pointer||!re(this,le))return!1;o.sqlite3_vfs_unregister(re(this,B).pointer),re(this,B).dispose(),delete s[this.vfsName];try{this.releaseAccessHandles(),await re(this,ae).removeEntry(O,{recursive:!0}),je(this,le,void 0),await re(this,de).removeEntry(re(this,ae).name,{recursive:!0}),je(this,ae,je(this,de,void 0))}catch(p){t.config.error(this.vfsName,"removeVfs() failed:",p)}return!0}exportFile(p){const f=re(this,we).get(p)||n("File not found:",p),A=f.getSize()-w,T=new Uint8Array(A>0?A:0);if(A>0){const M=f.read(T,{at:w});M!=A&&n("Expected to read "+A+" bytes but read "+M+".")}return T}async importDbChunked(p,f){const A=re(this,we).get(p)||this.nextAvailableSAH()||n("No available handles to import to.");A.truncate(0);let T=0,M,Y=!1;try{for(;(M=await f())!==void 0;)M instanceof ArrayBuffer&&(M=new Uint8Array(M)),T===0&&M.byteLength>=15&&(d.affirmDbHeader(M),Y=!0),A.write(M,{at:w+T}),T+=M.byteLength;if((T<512||T%512!==0)&&n("Input size",T,"is not correct for an SQLite database."),!Y){const ie=new Uint8Array(20);A.read(ie,{at:0}),d.affirmDbHeader(ie)}A.write(new Uint8Array([1,1]),{at:w+18})}catch(ie){throw this.setAssociatedPath(A,"",0),ie}return this.setAssociatedPath(A,p,o.SQLITE_OPEN_MAIN_DB),T}importDb(p,f){if(f instanceof ArrayBuffer)f=new Uint8Array(f);else if(f instanceof Function)return this.importDbChunked(p,f);const A=re(this,we).get(p)||this.nextAvailableSAH()||n("No available handles to import to."),T=f.byteLength;(T<512||T%512!=0)&&n("Byte array size is invalid for an SQLite db.");const M="SQLite format 3";for(let ie=0;ie<M.length;++ie)M.charCodeAt(ie)!==f[ie]&&n("Input does not contain an SQLite database header.");const Y=A.write(f,{at:w});return Y!=T?(this.setAssociatedPath(A,"",0),n("Expected to write "+T+" bytes but wrote "+Y+".")):(A.write(new Uint8Array([1,1]),{at:w+18}),this.setAssociatedPath(A,p,o.SQLITE_OPEN_MAIN_DB)),Y}}ae=new WeakMap,le=new WeakMap,de=new WeakMap,ye=new WeakMap,we=new WeakMap,Ee=new WeakMap,Pe=new WeakMap,Ae=new WeakMap,P=new WeakMap,B=new WeakMap,H=new WeakMap,Z=new WeakSet,ht=function(p,...f){re(this,H)>p&&$[p](this.vfsName+":",...f)};class oe{constructor(p){Re(this,ne);je(this,ne,p),this.vfsName=p.vfsName}async addCapacity(p){return re(this,ne).addCapacity(p)}async reduceCapacity(p){return re(this,ne).reduceCapacity(p)}getCapacity(){return re(this,ne).getCapacity(re(this,ne))}getFileCount(){return re(this,ne).getFileCount()}getFileNames(){return re(this,ne).getFileNames()}async reserveMinimumCapacity(p){const f=re(this,ne).getCapacity();return f<p?re(this,ne).addCapacity(p-f):f}exportFile(p){return re(this,ne).exportFile(p)}importDb(p,f){return re(this,ne).importDb(p,f)}async wipeFiles(){return re(this,ne).reset(!0)}unlink(p){return re(this,ne).deletePath(p)}async removeVfs(){return re(this,ne).removeVfs()}}ne=new WeakMap;const ce=async()=>{const W=await navigator.storage.getDirectory(),p=".opfs-sahpool-sync-check-"+F(),T=(await(await W.getFileHandle(p,{create:!0})).createSyncAccessHandle()).close();return await T,await W.removeEntry(p),T!=null&&T.then&&n("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};t.installOpfsSAHPoolVfs=async function(W=Object.create(null)){var f;W=Object.assign(Object.create(null),U,W||{});const p=W.name;if(W.$testThrowPhase1)throw W.$testThrowPhase1;if(s[p])try{return await s[p]}catch(A){if(W.forceReinitIfPreviouslyFailed)delete s[p];else throw A}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((f=navigator==null?void 0:navigator.storage)!=null&&f.getDirectory)?s[p]=Promise.reject(new Error("Missing required OPFS APIs.")):s[p]=ce().then(async function(){if(W.$testThrowPhase2)throw W.$testThrowPhase2;const A=new ee(W);return A.isReady.then(async()=>{const T=new oe(A);if(t.oo1){const M=t.oo1,Y=A.getVfs(),ie=function(...pe){const be=M.DB.dbCtorHelper.normalizeArgs(...pe);be.vfs=Y.$zName,M.DB.dbCtorHelper.call(this,be)};ie.prototype=Object.create(M.DB.prototype),T.OpfsSAHPoolDb=ie}return A.log("VFS initialized."),T}).catch(async T=>{throw await A.removeVfs().catch(()=>{}),T})}).catch(A=>s[p]=Promise.reject(A))}}),typeof i<"u"){const t=Object.assign(Object.create(null),{exports:typeof m>"u"?i.asm:m,memory:i.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=t;let n;try{n=globalThis.sqlite3ApiBootstrap()}catch(r){throw console.error("sqlite3ApiBootstrap() error:",r),r}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}i.sqlite3=n}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")},G=me,G}})();const Ar=function(){var G,i;const x=en;if(!x)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const L=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:(G=globalThis==null?void 0:globalThis.document)==null?void 0:G.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:(i=globalThis==null?void 0:globalThis.location)!=null&&i.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(L.debugModule=L.urlParams.has("sqlite3.debugModule")?(...te)=>console.warn("sqlite3.debugModule:",...te):()=>{},L.urlParams.has("sqlite3.dir"))L.sqlite3Dir=L.urlParams.get("sqlite3.dir")+"/";else if(L.moduleScript){const te=L.moduleScript.src.split("/");te.pop(),L.sqlite3Dir=te.join("/")+"/"}if(globalThis.sqlite3InitModule=function te(...se){return x(...se).then(me=>{me.runSQLite3PostLoadInit(me);const ve=me.sqlite3;ve.scriptInfo=L,te.__isUnderTest&&(ve.__isUnderTest=!0);const ge=ve.asyncPostInit;return delete ve.asyncPostInit,ge()}).catch(me=>{throw console.error("Exception loading sqlite3 module:",me),me})},globalThis.sqlite3InitModule.ready=x.ready,globalThis.sqlite3InitModuleState.moduleScript){const te=globalThis.sqlite3InitModuleState;let se=te.moduleScript.src.split("/");se.pop(),te.scriptDir=se.join("/")+"/"}return L.debugModule("sqlite3InitModuleState =",L),globalThis.sqlite3InitModule}();en=Ar;globalThis.sqlite3Worker1Promiser=function x(L=x.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const X=L;L=Object.assign(Object.create(null),x.defaultConfig),L.onready=X}else L=Object.assign(Object.create(null),x.defaultConfig,L);const G=Object.create(null),i=function(){},te=L.onerror||i,se=L.debug||i,me=L.generateMessageId?void 0:Object.create(null),ve=L.generateMessageId||function(X){return X.type+"#"+(me[X.type]=(me[X.type]||0)+1)},ge=(...X)=>{throw new Error(X.join(" "))};L.worker||(L.worker=x.defaultConfig.worker),typeof L.worker=="function"&&(L.worker=L.worker());let fe,Ie;return L.worker.onmessage=function(X){X=X.data,se("worker1.onmessage",X);let _e=G[X.messageId];if(!_e){if(X&&X.type==="sqlite3-api"&&X.result==="worker1-ready"){L.onready&&L.onready(Ie);return}if(_e=G[X.type],_e&&_e.onrow){_e.onrow(X);return}L.onunhandled?L.onunhandled(arguments[0]):te("sqlite3Worker1Promiser() unhandled worker message:",X);return}switch(delete G[X.messageId],X.type){case"error":_e.reject(X);return;case"open":fe||(fe=X.dbId);break;case"close":X.dbId===fe&&(fe=void 0);break}try{_e.resolve(X)}catch(xe){_e.reject(xe)}},Ie=function(){let X;arguments.length===1?X=arguments[0]:arguments.length===2?(X=Object.create(null),X.type=arguments[0],X.args=arguments[1],X.dbId=X.args.dbId):ge("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!X.dbId&&X.type!=="open"&&(X.dbId=fe),X.messageId=ve(X),X.departureTime=performance.now();const _e=Object.create(null);_e.message=X;let xe;X.type==="exec"&&X.args&&(typeof X.args.callback=="function"?(xe=X.messageId+":row",_e.onrow=X.args.callback,X.args.callback=xe,G[xe]=_e):typeof X.args.callback=="string"&&ge("exec callback may not be a string when using the Promise interface."));let ke=new Promise(function(Oe,De){_e.resolve=Oe,_e.reject=De,G[X.messageId]=_e,se("Posting",X.type,"message to Worker dbId="+(fe||"default")+":",X),L.worker.postMessage(X)});return xe&&(ke=ke.finally(()=>delete G[xe])),ke}};globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("/prompt-api-sqlite/assets/sqlite3-worker1-bundler-friendly-D1I8Os66.js",import.meta.url),{type:"module"})},onerror:(...x)=>console.error("worker1 promiser error",...x)};sqlite3Worker1Promiser.v2=(function(x){let L;typeof x=="function"?(L=x,x={}):typeof(x==null?void 0:x.onready)=="function"&&(L=x.onready,delete x.onready);const G=Object.create(null);x=Object.assign(x||Object.create(null),{onready:async function(te){try{L&&await L(te),G.resolve(te)}catch(se){G.reject(se)}}});const i=new Promise(function(te,se){G.resolve=te,G.reject=se});try{this.original(x)}catch(te){G.reject(te)}return i}).bind({original:sqlite3Worker1Promiser});sqlite3Worker1Promiser.v2;const Ir=globalThis.sqlite3Worker1Promiser,Be=console.log,kr=console.error;let Me,$e;const Tr=async()=>{try{Me=await new Promise(G=>{const i=Ir({onready:()=>{G(i)}})});let x;x=await Me("config-get",{}),Be("Running SQLite3 version",x.result.version.libVersion),x=await Me("open",{filename:"file:worker-promiser.sqlite3?vfs=opfs"});const{dbId:L}=x;Be("OPFS is available, created persisted database at",x.result.filename.replace(/^file:(.*?)\?vfs=opfs/,"$1")),await Me("exec",{dbId:L,sql:`
      CREATE TABLE IF NOT EXISTS sessions (
        uuid TEXT PRIMARY KEY,
        conversation_summary TEXT
      );
    `}),Be("CREATE TABLE IF NOT EXISTS sessions (uuid TEXT PRIMARY KEY, conversation_summary TEXT);"),await Me("exec",{dbId:L,sql:`
      CREATE TABLE IF NOT EXISTS prompts (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        session_uuid TEXT,
        role TEXT CHECK(role IN ('user', 'assistant', 'system')),
        content TEXT,
        image BLOB,
        FOREIGN KEY (session_uuid) REFERENCES sessions(uuid)
      );`}),Be(`
      CREATE TABLE IF NOT EXISTS prompts (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        session_uuid TEXT,
        role TEXT CHECK(role IN ('user', 'assistant', 'system')),
        content TEXT,
        image BLOB,
        FOREIGN KEY (session_uuid) REFERENCES sessions(uuid)
      );
    `)}catch(x){x instanceof Error||(x=new Error(x.result.message)),kr(x.name,x.message)}},Or=async()=>{const x=[];return await Me("exec",{dbId:$e,sql:"SELECT uuid FROM sessions;",callback:L=>{L.row&&x.push(L.row[0])}}),Be("SELECT uuid FROM sessions;"),x},Fr=async x=>{let L;await Me("exec",{dbId:$e,sql:`SELECT conversation_summary FROM sessions WHERE uuid = '${x}';`,callback:i=>{i.row&&(L=i.row[0])}}),Be(`SELECT conversation_summary FROM sessions WHERE uuid = '${x}';`);const G=[];return await Me("exec",{dbId:$e,sql:`SELECT role, content, image FROM prompts WHERE session_uuid = '${x}' ORDER BY id;`,callback:i=>{if(i.row){if(i.row[2]){G.push({role:i.row[0],content:[{type:"image",value:new Blob([new Uint8Array(i.row[2])],{type:"image/*"})}]});return}G.push({role:i.row[0],content:[{type:"text",value:i.row[1]}]})}}}),Be(`SELECT role, content, image FROM prompts WHERE session_uuid = '${x}' ORDER BY id;`),{conversationSummary:L,initialPrompts:G}},tn=async(x,L)=>{await Me("exec",{dbId:$e,sql:`REPLACE INTO sessions (uuid, conversation_summary) VALUES ('${x}', '${L.conversationSummary.replace(/'/g,"''")}');`}),Be(`REPLACE INTO sessions (uuid, conversation_summary) VALUES ('${x}', '${L.conversationSummary.replace(/'/g,"''")}');`),await Me("exec",{dbId:$e,sql:`DELETE FROM prompts WHERE session_uuid = '${x}';`}),Be(`DELETE FROM prompts WHERE session_uuid = '${x}';`);for(const G of L.initialPrompts)for(const i of G.content)if(i.type==="image"){const te=await Lr(i.value);await Me("exec",{dbId:$e,sql:`INSERT INTO prompts (session_uuid, role, content, image)
                VALUES ($uuid, $role, $content, $image);`,bind:{$uuid:x,$role:G.role,$content:null,$image:te}}),Be("INSERT INTO prompts (session_uuid, role, content, image) VALUES ($uuid, $role, $content, $image);")}else await Me("exec",{dbId:$e,sql:`INSERT INTO prompts (session_uuid, role, content, image)
                    VALUES ('${x}', '${G.role}', '${i.value.replace(/'/g,"''")}', NULL);`}),Be(`INSERT INTO prompts (session_uuid, role, content, image) VALUES ('${x}', '${G.role}', '${i.value.replace(/'/g,"''")}', NULL);`)},Pr=async x=>{await Me("exec",{dbId:$e,sql:`DELETE FROM prompts WHERE session_uuid = '${x}';
DELETE FROM sessions WHERE uuid = '${x}';`}),console.log(`DELETE FROM prompts WHERE session_uuid = '${x}';
DELETE FROM sessions WHERE uuid = '${x}';`)},Lr=async x=>{const L=await x.arrayBuffer();return new Uint8Array(L)},Tt=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),Cr=Tt?Promise.resolve().then(function(){return Mr}):Promise.resolve().then(function(){return Qr});async function Rr(...x){return(await Cr).default(...x)}Tt?Promise.resolve().then(function(){return Ur}):Promise.resolve().then(function(){return Vr});Tt?Promise.resolve().then(function(){return Wr}):Promise.resolve().then(function(){return Gr});const Dr=async x=>{const L=await x.getFile();return L.handle=x,L};var Nr=async(x=[{}])=>{Array.isArray(x)||(x=[x]);const L=[];x.forEach((te,se)=>{L[se]={description:te.description||"Files",accept:{}},te.mimeTypes?te.mimeTypes.map(me=>{L[se].accept[me]=te.extensions||[]}):L[se].accept["*/*"]=te.extensions||[]});const G=await window.showOpenFilePicker({id:x[0].id,startIn:x[0].startIn,types:L,multiple:x[0].multiple||!1,excludeAcceptAllOption:x[0].excludeAcceptAllOption||!1}),i=await Promise.all(G.map(Dr));return x[0].multiple?i:i[0]},Mr={__proto__:null,default:Nr};function gt(x){function L(G){if(Object(G)!==G)return Promise.reject(new TypeError(G+" is not an object."));var i=G.done;return Promise.resolve(G.value).then(function(te){return{value:te,done:i}})}return gt=function(G){this.s=G,this.n=G.next},gt.prototype={s:null,n:null,next:function(){return L(this.n.apply(this.s,arguments))},return:function(G){var i=this.s.return;return i===void 0?Promise.resolve({value:G,done:!0}):L(i.apply(this.s,arguments))},throw:function(G){var i=this.s.return;return i===void 0?Promise.reject(G):L(i.apply(this.s,arguments))}},new gt(x)}const nn=async(x,L,G=x.name,i)=>{const te=[],se=[];var me,ve=!1,ge=!1;try{for(var fe,Ie=function(X){var _e,xe,ke,Oe=2;for(typeof Symbol<"u"&&(xe=Symbol.asyncIterator,ke=Symbol.iterator);Oe--;){if(xe&&(_e=X[xe])!=null)return _e.call(X);if(ke&&(_e=X[ke])!=null)return new gt(_e.call(X));xe="@@asyncIterator",ke="@@iterator"}throw new TypeError("Object is not async iterable")}(x.values());ve=!(fe=await Ie.next()).done;ve=!1){const X=fe.value,_e=`${G}/${X.name}`;X.kind==="file"?se.push(X.getFile().then(xe=>(xe.directoryHandle=x,xe.handle=X,Object.defineProperty(xe,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>_e})))):X.kind!=="directory"||!L||i&&i(X)||te.push(nn(X,L,_e,i))}}catch(X){ge=!0,me=X}finally{try{ve&&Ie.return!=null&&await Ie.return()}finally{if(ge)throw me}}return[...(await Promise.all(te)).flat(),...await Promise.all(se)]};var jr=async(x={})=>{x.recursive=x.recursive||!1,x.mode=x.mode||"read";const L=await window.showDirectoryPicker({id:x.id,startIn:x.startIn,mode:x.mode});return(await(await L.values()).next()).done?[L]:nn(L,x.recursive,void 0,x.skipDirectory)},Ur={__proto__:null,default:jr},Br=async(x,L=[{}],G=null,i=!1,te=null)=>{Array.isArray(L)||(L=[L]),L[0].fileName=L[0].fileName||"Untitled";const se=[];let me=null;if(x instanceof Blob&&x.type?me=x.type:x.headers&&x.headers.get("content-type")&&(me=x.headers.get("content-type")),L.forEach((fe,Ie)=>{se[Ie]={description:fe.description||"Files",accept:{}},fe.mimeTypes?(Ie===0&&me&&fe.mimeTypes.push(me),fe.mimeTypes.map(X=>{se[Ie].accept[X]=fe.extensions||[]})):me?se[Ie].accept[me]=fe.extensions||[]:se[Ie].accept["*/*"]=fe.extensions||[]}),G)try{await G.getFile()}catch(fe){if(G=null,i)throw fe}const ve=G||await window.showSaveFilePicker({suggestedName:L[0].fileName,id:L[0].id,startIn:L[0].startIn,types:se,excludeAcceptAllOption:L[0].excludeAcceptAllOption||!1});!G&&te&&te(ve);const ge=await ve.createWritable();return"stream"in x?(await x.stream().pipeTo(ge),ve):"body"in x?(await x.body.pipeTo(ge),ve):(await ge.write(await x),await ge.close(),ve)},Wr={__proto__:null,default:Br},zr=async(x=[{}])=>(Array.isArray(x)||(x=[x]),new Promise((L,G)=>{const i=document.createElement("input");i.type="file";const te=[...x.map(se=>se.mimeTypes||[]),...x.map(se=>se.extensions||[])].join();i.multiple=x[0].multiple||!1,i.accept=te||"",i.style.display="none",document.body.append(i),i.addEventListener("cancel",()=>{i.remove(),G(new DOMException("The user aborted a request.","AbortError"))}),i.addEventListener("change",()=>{i.remove(),L(i.multiple?Array.from(i.files):i.files[0])}),"showPicker"in HTMLInputElement.prototype?i.showPicker():i.click()})),Qr={__proto__:null,default:zr},Hr=async(x=[{}])=>(Array.isArray(x)||(x=[x]),x[0].recursive=x[0].recursive||!1,new Promise((L,G)=>{const i=document.createElement("input");i.type="file",i.webkitdirectory=!0,i.style.display="none",document.body.append(i),i.addEventListener("cancel",()=>{i.remove(),G(new DOMException("The user aborted a request.","AbortError"))}),i.addEventListener("change",()=>{i.remove();let te=Array.from(i.files);x[0].recursive?x[0].recursive&&x[0].skipDirectory&&(te=te.filter(se=>se.webkitRelativePath.split("/").every(me=>!x[0].skipDirectory({name:me,kind:"directory"})))):te=te.filter(se=>se.webkitRelativePath.split("/").length===2),L(te)}),"showPicker"in HTMLInputElement.prototype?i.showPicker():i.click()})),Vr={__proto__:null,default:Hr},$r=async(x,L={})=>{Array.isArray(L)&&(L=L[0]);const G=document.createElement("a");let i=x;"body"in x&&(i=await async function(me,ve){const ge=me.getReader(),fe=new ReadableStream({start:_e=>async function xe(){return ge.read().then(({done:ke,value:Oe})=>{if(!ke)return _e.enqueue(Oe),xe();_e.close()})}()}),Ie=new Response(fe),X=await Ie.blob();return ge.releaseLock(),new Blob([X],{type:ve})}(x.body,x.headers.get("content-type"))),G.download=L.fileName||"Untitled",G.href=URL.createObjectURL(await i);const te=()=>{typeof se=="function"&&se()},se=L.legacySetup&&L.legacySetup(te,()=>se(),G);return G.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(G.href),3e4),te()}),G.click(),null},Gr={__proto__:null,default:$r};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register(location.href+"/service-worker.js").then(x=>{console.log("Service Worker registered with scope:",x.scope)}).catch(x=>{console.error("Service Worker registration failed:",x)})});const rn=document.querySelector("#assistant"),ot=document.querySelector("#conversation"),Kr=document.querySelector(".new-assistant"),Jr=document.querySelector(".stop-button"),Xr=document.querySelector(".file-open-button"),Ve=document.querySelector(".image-preview"),yt=document.querySelector(".remove-image-button"),at=document.querySelector(".assistant-container"),Ot=document.querySelector(".prompt-form"),lt=document.querySelector(".active-assistant-form"),ct=document.querySelector(".prompt-input"),Ft={};let tt=null,Ue=null;Jr.addEventListener("click",()=>{tt==null||tt.abort()});const Pt=x=>{const L=x.naturalWidth/x.naturalHeight;x.width=x.naturalWidth,x.height=x.naturalHeight,L>1?(x.style.width="100px",x.style.height="auto"):(x.style.width="auto",x.style.height="100px")};yt.addEventListener("click",()=>{Ve.hidden=!0,Ve.src="",yt.hidden=!0,Ue=null});Xr.addEventListener("click",async()=>{Ue=await Rr({multiple:!1,mimeTypes:["image/*"],description:"Image files",startIn:"pictures",excludeAcceptAllOption:!0}),Ue&&(yt.hidden=!1,Ve.addEventListener("load",()=>{URL.revokeObjectURL(Ve.src),Pt(Ve),Ve.hidden=!1}),Ve.src=URL.createObjectURL(Ue))});(async function(){await Tr();const{defaultTopK:L,defaultTemperature:G}=await LanguageModel.params(),i=await Or();i.length&&(Ot.hidden=!1);let te=!0;for(const se of i){const me=await Fr(se),ve={initialPrompts:me.initialPrompts,topK:L,temperature:G,conversationSummary:me.conversationSummary,expectedInputs:[{type:"text"},{type:"image"}]},ge=await self.LanguageModel.create(ve),{inputQuota:fe,inputUsage:Ie}=ge;Ft[se]={assistant:ge,options:ve};const X=rn.content.cloneNode(!0);te&&(X.querySelector("details").open=!0,X.querySelector("input").checked=!0,te=!1),X.querySelector(".conversation-summary").textContent=ve.conversationSummary,X.querySelector("input").value=se;const _e=X.querySelector(".conversation-container");X.querySelector(".tokens-so-far").textContent=Ie,X.querySelector(".tokens-left").textContent=fe-ge.inputUsage,at.append(X);for(const xe of ve.initialPrompts){if(xe.role==="system")continue;const ke=ot.content.cloneNode(!0),Oe=ke.querySelector(".item");Oe.classList.add(xe.role);for(const De of xe.content){if(De.type==="image"){const Te=document.createElement("img");Te.addEventListener("load",()=>{URL.revokeObjectURL(Te.src),Pt(Te)}),Te.src=URL.createObjectURL(De.value),Oe.append(Te)}else De.type==="text"&&Oe.append(De.value);_e.append(ke)}}}})();lt.addEventListener("click",async x=>{const L=x.target.nodeName.toLowerCase();if(!(L!=="summary"&&L!=="button")){if(L==="summary")setTimeout(()=>{const G=lt.querySelector("details[open] input");G&&(G.checked=!0)},0);else if(x.target.classList.contains("delete-conversation")){const G=x.target.closest("details"),i=G.querySelector('[name="active-assistant"]').value;G.remove(),await Pr(i)}}});const Yr=async(x={})=>{const L=crypto.randomUUID();x.initialPrompts||(x.initialPrompts=[{role:"system",content:[{type:"text",value:"You are a helpful assistant."}]}]),x.conversationSummary||(x.conversationSummary="New conversation"),x.expectedInputs||(x.expectedInputs=[{type:"text"},{type:"image"}]);const G=await self.LanguageModel.create(x);return Ft[L]={assistant:G,options:x},await tn(L,x),L};Kr.addEventListener("click",async()=>{const x=await Yr(),L=rn.content.cloneNode(!0);L.querySelector(".conversation-summary").textContent="New conversation",L.querySelector("input").value=x,at.append(L),at.querySelectorAll("details").forEach(G=>G.open=!1),at.querySelector(`details:has([value="${x}"])`).open=!0,at.querySelector(`[value="${x}"]`).checked=!0,Ot.hidden=!1,ct.value="",ct.focus()});Ot.addEventListener("submit",async x=>{x.preventDefault();const L=ct.value.trim();if(!L)return;if(!lt.querySelector("details[open]")){alert("Select an active assistant first.");return}const i=new FormData(lt).get("active-assistant"),{assistant:te,options:se}=Ft[i],me=lt.querySelector(`input[value="${i}"] + .conversation-container`);let ve="",ge;if(Ue){ge=ot.content.cloneNode(!0),ge.querySelector(".item").classList.add("user"),ge.querySelector(".item").textContent=L,me.append(ge),ge=ot.content.cloneNode(!0),ge.querySelector(".item").classList.add("user");const fe=document.createElement("img");fe.addEventListener("load",()=>{URL.revokeObjectURL(fe.src),Pt(fe)}),fe.src=URL.createObjectURL(Ue),ge.querySelector(".item").append(fe),me.append(ge)}else ge=ot.content.cloneNode(!0),ge.querySelector(".item").classList.add("user"),ge.querySelector(".item").textContent=L,me.append(ge);try{tt=new AbortController;let fe;Ue?fe=te.promptStreaming([{role:"user",content:[{type:"text",value:L},{type:"image",value:Ue}]}],{signal:tt.signal}):fe=te.promptStreaming(L,{signal:tt.signal});const Ie=ot.content.cloneNode(!0),X=Ie.querySelector(".item");X.classList.add("assistant"),me.append(Ie);for await(const Te of fe)X.append(Te),ve+=Te;const _e=me.closest("details");_e.querySelector(".tokens-so-far").textContent=te.inputUsage,_e.querySelector(".tokens-left").textContent=te.inputQuota-te.inputUsage,Ue?se.initialPrompts.push({role:"user",content:[{type:"text",value:L}]},{role:"user",content:[{type:"image",value:Ue}]},{role:"assistant",content:[{type:"text",value:ve}]}):se.initialPrompts.push({role:"user",content:[{type:"text",value:L}]},{role:"assistant",content:[{type:"text",value:ve}]}),ct.value="",Ue=null,Ve.hidden=!0,Ve.src="",yt.hidden=!0,ct.focus();const xe=await self.LanguageModel.create(se),ke=xe.promptStreaming("Summarize the conversation as briefly as possible in one short sentence."),Oe=_e.querySelector("summary");let De=!0;for await(const Te of ke)De&&(Oe.textContent=""),Oe.append(Te),De=!1;xe.destroy(),se.conversationSummary=Oe.textContent,await tn(i,se)}catch(fe){fe.name!=="AbortError"&&console.error(fe.name,fe.message)}});
