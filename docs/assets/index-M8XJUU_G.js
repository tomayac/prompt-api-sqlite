var ui=Object.defineProperty;var cs=i=>{throw TypeError(i)};var fi=(i,E,y)=>E in i?ui(i,E,{enumerable:!0,configurable:!0,writable:!0,value:y}):i[E]=y;var _s=(i,E,y)=>fi(i,typeof E!="symbol"?E+"":E,y),Ir=(i,E,y)=>E.has(i)||cs("Cannot "+y);var oe=(i,E,y)=>(Ir(i,E,"read from private field"),y?y.call(i):E.get(i)),rt=(i,E,y)=>E.has(i)?cs("Cannot add the same private member more than once"):E instanceof WeakSet?E.add(i):E.set(i,y),Et=(i,E,y,s)=>(Ir(i,E,"write to private field"),s?s.call(i,y):E.set(i,y),y),nr=(i,E,y)=>(Ir(i,E,"access private method"),y);(function(){const E=document.createElement("link").relList;if(E&&E.supports&&E.supports("modulepreload"))return;for(const j of document.querySelectorAll('link[rel="modulepreload"]'))s(j);new MutationObserver(j=>{for(const H of j)if(H.type==="childList")for(const ae of H.addedNodes)ae.tagName==="LINK"&&ae.rel==="modulepreload"&&s(ae)}).observe(document,{childList:!0,subtree:!0});function y(j){const H={};return j.integrity&&(H.integrity=j.integrity),j.referrerPolicy&&(H.referrerPolicy=j.referrerPolicy),j.crossOrigin==="use-credentials"?H.credentials="include":j.crossOrigin==="anonymous"?H.credentials="omit":H.credentials="same-origin",H}function s(j){if(j.ep)return;j.ep=!0;const H=y(j);fetch(j.href,H)}})();var vs=(()=>{var i=import.meta.url;return function(E={}){var y,s=E,j,H,ae=new Promise((e,t)=>{j=e,H=t}),pe=typeof window=="object",we=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";const be=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,be.debugModule("globalThis.location =",globalThis.location);var De=Object.assign({},s),te="./this.program",he="";function xe(e){return s.locateFile?s.locateFile(e,he):he+e}var Ne,nt;(pe||we)&&(we?he=self.location.href:typeof document<"u"&&document.currentScript&&(he=document.currentScript.src),i&&(he=i),he.startsWith("blob:")?he="":he=he.substr(0,he.replace(/[?#].*/,"").lastIndexOf("/")+1),we&&(nt=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Ne=e=>fetch(e,{credentials:"same-origin"}).then(t=>t.ok?t.arrayBuffer():Promise.reject(new Error(t.status+" : "+t.url))));var dt=s.print||console.log.bind(console),it=s.printErr||console.error.bind(console);Object.assign(s,De),De=null,s.arguments&&s.arguments,s.thisProgram&&(te=s.thisProgram);var pt=s.wasmBinary,ct,Qe=!1,je,St,Kt,Ae,He,mt;function Ve(){var e=ct.buffer;s.HEAP8=je=new Int8Array(e),s.HEAP16=Kt=new Int16Array(e),s.HEAPU8=St=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAP32=Ae=new Int32Array(e),s.HEAPU32=He=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=new Float64Array(e),s.HEAP64=mt=new BigInt64Array(e),s.HEAPU64=new BigUint64Array(e)}if(s.wasmMemory)ct=s.wasmMemory;else{var pn=s.INITIAL_MEMORY||16777216;ct=new WebAssembly.Memory({initial:pn/65536,maximum:32768})}Ve();var tn=[],nn=[],Nn=[];function br(){var e=s.preRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(qr)),zt(tn)}function yr(){!s.noFSInit&&!c.initialized&&c.init(),c.ignorePermissions=!1,zt(nn)}function Mn(){var e=s.postRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(ze)),zt(Nn)}function qr(e){tn.unshift(e)}function Un(e){nn.unshift(e)}function ze(e){Nn.unshift(e)}var At=0,Me=null;function Er(e){return e}function Re(e){var t;At++,(t=s.monitorRunDependencies)==null||t.call(s,At)}function xt(e){var n;if(At--,(n=s.monitorRunDependencies)==null||n.call(s,At),At==0&&Me){var t=Me;Me=null,t()}}function Yt(e){var n;(n=s.onAbort)==null||n.call(s,e),e="Aborted("+e+")",it(e),Qe=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw H(t),t}var Bn="data:application/octet-stream;base64,",rn=e=>e.startsWith(Bn);function jn(){if(s.locateFile){var e="sqlite3.wasm";return rn(e)?e:xe(e)}return new URL("/prompt-api-sqlite/assets/sqlite3-cHTLJfQJ.wasm",import.meta.url).href}var sn;function Lt(e){if(e==sn&&pt)return new Uint8Array(pt);if(nt)return nt(e);throw"both async and sync fetching of the wasm failed"}function on(e){return pt?Promise.resolve().then(()=>Lt(e)):Ne(e).then(t=>new Uint8Array(t),()=>Lt(e))}function Tt(e,t,n){return on(e).then(r=>WebAssembly.instantiate(r,t)).then(n,r=>{it(`failed to asynchronously prepare wasm: ${r}`),Yt(r)})}function mn(e,t,n,r){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!rn(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(o=>{var a=WebAssembly.instantiateStreaming(o,n);return a.then(r,function(p){return it(`wasm streaming compile failed: ${p}`),it("falling back to ArrayBuffer instantiation"),Tt(t,n,r)})}):Tt(t,n,r)}function hn(){return{env:ss,wasi_snapshot_preview1:ss}}function jt(){var e=hn();function t(r,o){return h=r.exports,Un(h.__wasm_call_ctors),xt(),h}Re();function n(r){t(r.instance)}if(s.instantiateWasm)try{return s.instantiateWasm(e,t)}catch(r){it(`Module.instantiateWasm callback failed with error: ${r}`),H(r)}return sn??(sn=jn()),mn(pt,sn,e,n).catch(H),{}}var zt=e=>{e.forEach(t=>t(s))};s.noExitRuntime;var Te={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:(e,t)=>{for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];o==="."?e.splice(r,1):o===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:e=>{var t=Te.isAbs(e),n=e.substr(-1)==="/";return e=Te.normalizeArray(e.split("/").filter(r=>!!r),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=Te.splitPath(e),n=t[0],r=t[1];return!n&&!r?".":(r&&(r=r.substr(0,r.length-1)),n+r)},basename:e=>{if(e==="/")return"/";e=Te.normalize(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},join:(...e)=>Te.normalize(e.join("/")),join2:(e,t)=>Te.normalize(e+"/"+t)},zn=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);Yt("initRandomDevice")},gn=e=>(gn=zn())(e),ht={resolve:(...e)=>{for(var t="",n=!1,r=e.length-1;r>=-1&&!n;r--){var o=r>=0?e[r]:c.cwd();if(typeof o!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!o)return"";t=o+"/"+t,n=Te.isAbs(o)}return t=Te.normalizeArray(t.split("/").filter(a=>!!a),!n).join("/"),(n?"/":"")+t||"."},relative:(e,t)=>{e=ht.resolve(e).substr(1),t=ht.resolve(t).substr(1);function n(M){for(var Y=0;Y<M.length&&M[Y]==="";Y++);for(var J=M.length-1;J>=0&&M[J]==="";J--);return Y>J?[]:M.slice(Y,J-Y+1)}for(var r=n(e.split("/")),o=n(t.split("/")),a=Math.min(r.length,o.length),p=a,q=0;q<a;q++)if(r[q]!==o[q]){p=q;break}for(var N=[],q=p;q<r.length;q++)N.push("..");return N=N.concat(o.slice(p)),N.join("/")}},an=typeof TextDecoder<"u"?new TextDecoder:void 0,_t=(e,t=0,n=NaN)=>{for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.buffer&&an)return an.decode(e.subarray(t,o));for(var a="";t<o;){var p=e[t++];if(!(p&128)){a+=String.fromCharCode(p);continue}var q=e[t++]&63;if((p&224)==192){a+=String.fromCharCode((p&31)<<6|q);continue}var N=e[t++]&63;if((p&240)==224?p=(p&15)<<12|q<<6|N:p=(p&7)<<18|q<<12|N<<6|e[t++]&63,p<65536)a+=String.fromCharCode(p);else{var M=p-65536;a+=String.fromCharCode(55296|M>>10,56320|M&1023)}}return a},kt=[],gt=e=>{for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3}return t},ln=(e,t,n,r)=>{if(!(r>0))return 0;for(var o=n,a=n+r-1,p=0;p<e.length;++p){var q=e.charCodeAt(p);if(q>=55296&&q<=57343){var N=e.charCodeAt(++p);q=65536+((q&1023)<<10)|N&1023}if(q<=127){if(n>=a)break;t[n++]=q}else if(q<=2047){if(n+1>=a)break;t[n++]=192|q>>6,t[n++]=128|q&63}else if(q<=65535){if(n+2>=a)break;t[n++]=224|q>>12,t[n++]=128|q>>6&63,t[n++]=128|q&63}else{if(n+3>=a)break;t[n++]=240|q>>18,t[n++]=128|q>>12&63,t[n++]=128|q>>6&63,t[n++]=128|q&63}}return t[n]=0,n-o};function bn(e,t,n){var r=gt(e)+1,o=new Array(r),a=ln(e,o,0,o.length);return o.length=a,o}var Wn=()=>{if(!kt.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`)),!e)return null;kt=bn(e)}return kt.shift()},bt={ttys:[],init(){},shutdown(){},register(e,t){bt.ttys[e]={input:[],output:[],ops:t},c.registerDevice(e,bt.stream_ops)},stream_ops:{open(e){var t=bt.ttys[e.node.rdev];if(!t)throw new c.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,n,r,o){if(!e.tty||!e.tty.ops.get_char)throw new c.ErrnoError(60);for(var a=0,p=0;p<r;p++){var q;try{q=e.tty.ops.get_char(e.tty)}catch{throw new c.ErrnoError(29)}if(q===void 0&&a===0)throw new c.ErrnoError(6);if(q==null)break;a++,t[n+p]=q}return a&&(e.node.timestamp=Date.now()),a},write(e,t,n,r,o){if(!e.tty||!e.tty.ops.put_char)throw new c.ErrnoError(60);try{for(var a=0;a<r;a++)e.tty.ops.put_char(e.tty,t[n+a])}catch{throw new c.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),a}},default_tty_ops:{get_char(e){return Wn()},put_char(e,t){t===null||t===10?(dt(_t(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(dt(_t(e.output)),e.output=[])},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,t,n){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,t){t===null||t===10?(it(_t(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(it(_t(e.output)),e.output=[])}}},Hn=(e,t)=>{St.fill(0,e,e+t)},Xt=(e,t)=>Math.ceil(e/t)*t,Jt=e=>{e=Xt(e,65536);var t=is(65536,e);return t&&Hn(t,e),t},fe={ops_table:null,mount(e){return fe.createNode(null,"/",16895,0)},createNode(e,t,n,r){if(c.isBlkdev(n)||c.isFIFO(n))throw new c.ErrnoError(63);fe.ops_table||(fe.ops_table={dir:{node:{getattr:fe.node_ops.getattr,setattr:fe.node_ops.setattr,lookup:fe.node_ops.lookup,mknod:fe.node_ops.mknod,rename:fe.node_ops.rename,unlink:fe.node_ops.unlink,rmdir:fe.node_ops.rmdir,readdir:fe.node_ops.readdir,symlink:fe.node_ops.symlink},stream:{llseek:fe.stream_ops.llseek}},file:{node:{getattr:fe.node_ops.getattr,setattr:fe.node_ops.setattr},stream:{llseek:fe.stream_ops.llseek,read:fe.stream_ops.read,write:fe.stream_ops.write,allocate:fe.stream_ops.allocate,mmap:fe.stream_ops.mmap,msync:fe.stream_ops.msync}},link:{node:{getattr:fe.node_ops.getattr,setattr:fe.node_ops.setattr,readlink:fe.node_ops.readlink},stream:{}},chrdev:{node:{getattr:fe.node_ops.getattr,setattr:fe.node_ops.setattr},stream:c.chrdev_stream_ops}});var o=c.createNode(e,t,n,r);return c.isDir(o.mode)?(o.node_ops=fe.ops_table.dir.node,o.stream_ops=fe.ops_table.dir.stream,o.contents={}):c.isFile(o.mode)?(o.node_ops=fe.ops_table.file.node,o.stream_ops=fe.ops_table.file.stream,o.usedBytes=0,o.contents=null):c.isLink(o.mode)?(o.node_ops=fe.ops_table.link.node,o.stream_ops=fe.ops_table.link.stream):c.isChrdev(o.mode)&&(o.node_ops=fe.ops_table.chrdev.node,o.stream_ops=fe.ops_table.chrdev.stream),o.timestamp=Date.now(),e&&(e.contents[t]=o,e.timestamp=o.timestamp),o},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){var r=1024*1024;t=Math.max(t,n*(n<r?2:1.125)>>>0),n!=0&&(t=Math.max(t,256));var o=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(o.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(t==0)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=c.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,c.isDir(e.mode)?t.size=4096:c.isFile(e.mode)?t.size=e.usedBytes:c.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&fe.resizeFileStorage(e,t.size)},lookup(e,t){throw c.genericErrors[44]},mknod(e,t,n,r){return fe.createNode(e,t,n,r)},rename(e,t,n){if(c.isDir(e.mode)){var r;try{r=c.lookupNode(t,n)}catch{}if(r)for(var o in r.contents)throw new c.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp},unlink(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir(e,t){var n=c.lookupNode(e,t);for(var r in n.contents)throw new c.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir(e){var t=[".",".."];for(var n of Object.keys(e.contents))t.push(n);return t},symlink(e,t,n){var r=fe.createNode(e,t,41471,0);return r.link=n,r},readlink(e){if(!c.isLink(e.mode))throw new c.ErrnoError(28);return e.link}},stream_ops:{read(e,t,n,r,o){var a=e.node.contents;if(o>=e.node.usedBytes)return 0;var p=Math.min(e.node.usedBytes-o,r);if(p>8&&a.subarray)t.set(a.subarray(o,o+p),n);else for(var q=0;q<p;q++)t[n+q]=a[o+q];return p},write(e,t,n,r,o,a){if(t.buffer===je.buffer&&(a=!1),!r)return 0;var p=e.node;if(p.timestamp=Date.now(),t.subarray&&(!p.contents||p.contents.subarray)){if(a)return p.contents=t.subarray(n,n+r),p.usedBytes=r,r;if(p.usedBytes===0&&o===0)return p.contents=t.slice(n,n+r),p.usedBytes=r,r;if(o+r<=p.usedBytes)return p.contents.set(t.subarray(n,n+r),o),r}if(fe.expandFileStorage(p,o+r),p.contents.subarray&&t.subarray)p.contents.set(t.subarray(n,n+r),o);else for(var q=0;q<r;q++)p.contents[o+q]=t[n+q];return p.usedBytes=Math.max(p.usedBytes,o+r),r},llseek(e,t,n){var r=t;if(n===1?r+=e.position:n===2&&c.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new c.ErrnoError(28);return r},allocate(e,t,n){fe.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap(e,t,n,r,o){if(!c.isFile(e.node.mode))throw new c.ErrnoError(43);var a,p,q=e.node.contents;if(!(o&2)&&q&&q.buffer===je.buffer)p=!1,a=q.byteOffset;else{if(p=!0,a=Jt(t),!a)throw new c.ErrnoError(48);q&&((n>0||n+t<q.length)&&(q.subarray?q=q.subarray(n,n+t):q=Array.prototype.slice.call(q,n,n+t)),je.set(q,a))}return{ptr:a,allocated:p}},msync(e,t,n,r,o){return fe.stream_ops.write(e,t,0,r,n,!1),0}}},Wt=(e,t,n,r)=>{var o=`al ${e}`;Ne(e).then(a=>{t(new Uint8Array(a)),o&&xt()},a=>{if(n)n();else throw`Loading data file "${e}" failed.`}),o&&Re()},yn=(e,t,n,r,o,a)=>{c.createDataFile(e,t,n,r,o,a)},qn=s.preloadPlugins||[],wr=(e,t,n,r)=>{typeof Browser<"u"&&Browser.init();var o=!1;return qn.forEach(a=>{o||a.canHandle(t)&&(a.handle(e,t,n,r),o=!0)}),o},cn=(e,t,n,r,o,a,p,q,N,M)=>{var Y=t?ht.resolve(Te.join2(e,t)):e;function J(D){function P(z){M==null||M(),q||yn(e,t,z,r,o,N),a==null||a(),xt()}wr(D,Y,P,()=>{p==null||p(),xt()})||P(D)}Re(),typeof n=="string"?Wt(n,J,p):J(n)},_n=e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},n=t[e];if(typeof n>"u")throw new Error(`Unknown file open mode: ${e}`);return n},En=(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},c={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(e){this.name="ErrnoError",this.errno=e}},genericErrors:{},filesystems:null,syncFSRequests:0,readFiles:{},FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(e){this.node=e}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{constructor(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=c.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return c.isDir(this.mode)}get isDevice(){return c.isChrdev(this.mode)}},lookupPath(e,t={}){if(e=ht.resolve(e),!e)return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};if(t=Object.assign(n,t),t.recurse_count>8)throw new c.ErrnoError(32);for(var r=e.split("/").filter(J=>!!J),o=c.root,a="/",p=0;p<r.length;p++){var q=p===r.length-1;if(q&&t.parent)break;if(o=c.lookupNode(o,r[p]),a=Te.join2(a,r[p]),c.isMountpoint(o)&&(!q||q&&t.follow_mount)&&(o=o.mounted.root),!q||t.follow)for(var N=0;c.isLink(o.mode);){var M=c.readlink(a);a=ht.resolve(Te.dirname(a),M);var Y=c.lookupPath(a,{recurse_count:t.recurse_count+1});if(o=Y.node,N++>40)throw new c.ErrnoError(32)}}return{path:a,node:o}},getPath(e){for(var t;;){if(c.isRoot(e)){var n=e.mount.mountpoint;return t?n[n.length-1]!=="/"?`${n}/${t}`:n+t:n}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%c.nameTable.length},hashAddNode(e){var t=c.hashName(e.parent.id,e.name);e.name_next=c.nameTable[t],c.nameTable[t]=e},hashRemoveNode(e){var t=c.hashName(e.parent.id,e.name);if(c.nameTable[t]===e)c.nameTable[t]=e.name_next;else for(var n=c.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode(e,t){var n=c.mayLookup(e);if(n)throw new c.ErrnoError(n);for(var r=c.hashName(e.id,t),o=c.nameTable[r];o;o=o.name_next){var a=o.name;if(o.parent.id===e.id&&a===t)return o}return c.lookup(e,t)},createNode(e,t,n,r){var o=new c.FSNode(e,t,n,r);return c.hashAddNode(o),o},destroyNode(e){c.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions(e,t){return c.ignorePermissions?0:t.includes("r")&&!(e.mode&292)||t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){if(!c.isDir(e.mode))return 54;var t=c.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate(e,t){try{var n=c.lookupNode(e,t);return 20}catch{}return c.nodePermissions(e,"wx")},mayDelete(e,t,n){var r;try{r=c.lookupNode(e,t)}catch(a){return a.errno}var o=c.nodePermissions(e,"wx");if(o)return o;if(n){if(!c.isDir(r.mode))return 54;if(c.isRoot(r)||c.getPath(r)===c.cwd())return 10}else if(c.isDir(r.mode))return 31;return 0},mayOpen(e,t){return e?c.isLink(e.mode)?32:c.isDir(e.mode)&&(c.flagsToPermissionString(t)!=="r"||t&512)?31:c.nodePermissions(e,c.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=c.MAX_OPEN_FDS;e++)if(!c.streams[e])return e;throw new c.ErrnoError(33)},getStreamChecked(e){var t=c.getStream(e);if(!t)throw new c.ErrnoError(8);return t},getStream:e=>c.streams[e],createStream(e,t=-1){return e=Object.assign(new c.FSStream,e),t==-1&&(t=c.nextfd()),e.fd=t,c.streams[t]=e,e},closeStream(e){c.streams[e]=null},dupStream(e,t=-1){var r,o;var n=c.createStream(e,t);return(o=(r=n.stream_ops)==null?void 0:r.dup)==null||o.call(r,n),n},chrdev_stream_ops:{open(e){var n,r;var t=c.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,(r=(n=e.stream_ops).open)==null||r.call(n,e)},llseek(){throw new c.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice(e,t){c.devices[e]={stream_ops:t}},getDevice:e=>c.devices[e],getMounts(e){for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push(...r.mounts)}return t},syncfs(e,t){typeof e=="function"&&(t=e,e=!1),c.syncFSRequests++,c.syncFSRequests>1&&it(`warning: ${c.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var n=c.getMounts(c.root.mount),r=0;function o(p){return c.syncFSRequests--,t(p)}function a(p){if(p)return a.errored?void 0:(a.errored=!0,o(p));++r>=n.length&&o(null)}n.forEach(p=>{if(!p.type.syncfs)return a(null);p.type.syncfs(p,e,a)})},mount(e,t,n){var r=n==="/",o=!n,a;if(r&&c.root)throw new c.ErrnoError(10);if(!r&&!o){var p=c.lookupPath(n,{follow_mount:!1});if(n=p.path,a=p.node,c.isMountpoint(a))throw new c.ErrnoError(10);if(!c.isDir(a.mode))throw new c.ErrnoError(54)}var q={type:e,opts:t,mountpoint:n,mounts:[]},N=e.mount(q);return N.mount=q,q.root=N,r?c.root=N:a&&(a.mounted=q,a.mount&&a.mount.mounts.push(q)),N},unmount(e){var t=c.lookupPath(e,{follow_mount:!1});if(!c.isMountpoint(t.node))throw new c.ErrnoError(28);var n=t.node,r=n.mounted,o=c.getMounts(r);Object.keys(c.nameTable).forEach(p=>{for(var q=c.nameTable[p];q;){var N=q.name_next;o.includes(q.mount)&&c.destroyNode(q),q=N}}),n.mounted=null;var a=n.mount.mounts.indexOf(r);n.mount.mounts.splice(a,1)},lookup(e,t){return e.node_ops.lookup(e,t)},mknod(e,t,n){var r=c.lookupPath(e,{parent:!0}),o=r.node,a=Te.basename(e);if(!a||a==="."||a==="..")throw new c.ErrnoError(28);var p=c.mayCreate(o,a);if(p)throw new c.ErrnoError(p);if(!o.node_ops.mknod)throw new c.ErrnoError(63);return o.node_ops.mknod(o,a,t,n)},create(e,t){return t=t!==void 0?t:438,t&=4095,t|=32768,c.mknod(e,t,0)},mkdir(e,t){return t=t!==void 0?t:511,t&=1023,t|=16384,c.mknod(e,t,0)},mkdirTree(e,t){for(var n=e.split("/"),r="",o=0;o<n.length;++o)if(n[o]){r+="/"+n[o];try{c.mkdir(r,t)}catch(a){if(a.errno!=20)throw a}}},mkdev(e,t,n){return typeof n>"u"&&(n=t,t=438),t|=8192,c.mknod(e,t,n)},symlink(e,t){if(!ht.resolve(e))throw new c.ErrnoError(44);var n=c.lookupPath(t,{parent:!0}),r=n.node;if(!r)throw new c.ErrnoError(44);var o=Te.basename(t),a=c.mayCreate(r,o);if(a)throw new c.ErrnoError(a);if(!r.node_ops.symlink)throw new c.ErrnoError(63);return r.node_ops.symlink(r,o,e)},rename(e,t){var n=Te.dirname(e),r=Te.dirname(t),o=Te.basename(e),a=Te.basename(t),p,q,N;if(p=c.lookupPath(e,{parent:!0}),q=p.node,p=c.lookupPath(t,{parent:!0}),N=p.node,!q||!N)throw new c.ErrnoError(44);if(q.mount!==N.mount)throw new c.ErrnoError(75);var M=c.lookupNode(q,o),Y=ht.relative(e,r);if(Y.charAt(0)!==".")throw new c.ErrnoError(28);if(Y=ht.relative(t,n),Y.charAt(0)!==".")throw new c.ErrnoError(55);var J;try{J=c.lookupNode(N,a)}catch{}if(M!==J){var D=c.isDir(M.mode),P=c.mayDelete(q,o,D);if(P)throw new c.ErrnoError(P);if(P=J?c.mayDelete(N,a,D):c.mayCreate(N,a),P)throw new c.ErrnoError(P);if(!q.node_ops.rename)throw new c.ErrnoError(63);if(c.isMountpoint(M)||J&&c.isMountpoint(J))throw new c.ErrnoError(10);if(N!==q&&(P=c.nodePermissions(q,"w"),P))throw new c.ErrnoError(P);c.hashRemoveNode(M);try{q.node_ops.rename(M,N,a),M.parent=N}catch(z){throw z}finally{c.hashAddNode(M)}}},rmdir(e){var t=c.lookupPath(e,{parent:!0}),n=t.node,r=Te.basename(e),o=c.lookupNode(n,r),a=c.mayDelete(n,r,!0);if(a)throw new c.ErrnoError(a);if(!n.node_ops.rmdir)throw new c.ErrnoError(63);if(c.isMountpoint(o))throw new c.ErrnoError(10);n.node_ops.rmdir(n,r),c.destroyNode(o)},readdir(e){var t=c.lookupPath(e,{follow:!0}),n=t.node;if(!n.node_ops.readdir)throw new c.ErrnoError(54);return n.node_ops.readdir(n)},unlink(e){var t=c.lookupPath(e,{parent:!0}),n=t.node;if(!n)throw new c.ErrnoError(44);var r=Te.basename(e),o=c.lookupNode(n,r),a=c.mayDelete(n,r,!1);if(a)throw new c.ErrnoError(a);if(!n.node_ops.unlink)throw new c.ErrnoError(63);if(c.isMountpoint(o))throw new c.ErrnoError(10);n.node_ops.unlink(n,r),c.destroyNode(o)},readlink(e){var t=c.lookupPath(e),n=t.node;if(!n)throw new c.ErrnoError(44);if(!n.node_ops.readlink)throw new c.ErrnoError(28);return ht.resolve(c.getPath(n.parent),n.node_ops.readlink(n))},stat(e,t){var n=c.lookupPath(e,{follow:!t}),r=n.node;if(!r)throw new c.ErrnoError(44);if(!r.node_ops.getattr)throw new c.ErrnoError(63);return r.node_ops.getattr(r)},lstat(e){return c.stat(e,!0)},chmod(e,t,n){var r;if(typeof e=="string"){var o=c.lookupPath(e,{follow:!n});r=o.node}else r=e;if(!r.node_ops.setattr)throw new c.ErrnoError(63);r.node_ops.setattr(r,{mode:t&4095|r.mode&-4096,timestamp:Date.now()})},lchmod(e,t){c.chmod(e,t,!0)},fchmod(e,t){var n=c.getStreamChecked(e);c.chmod(n.node,t)},chown(e,t,n,r){var o;if(typeof e=="string"){var a=c.lookupPath(e,{follow:!r});o=a.node}else o=e;if(!o.node_ops.setattr)throw new c.ErrnoError(63);o.node_ops.setattr(o,{timestamp:Date.now()})},lchown(e,t,n){c.chown(e,t,n,!0)},fchown(e,t,n){var r=c.getStreamChecked(e);c.chown(r.node,t,n)},truncate(e,t){if(t<0)throw new c.ErrnoError(28);var n;if(typeof e=="string"){var r=c.lookupPath(e,{follow:!0});n=r.node}else n=e;if(!n.node_ops.setattr)throw new c.ErrnoError(63);if(c.isDir(n.mode))throw new c.ErrnoError(31);if(!c.isFile(n.mode))throw new c.ErrnoError(28);var o=c.nodePermissions(n,"w");if(o)throw new c.ErrnoError(o);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate(e,t){var n=c.getStreamChecked(e);if((n.flags&2097155)===0)throw new c.ErrnoError(28);c.truncate(n.node,t)},utime(e,t,n){var r=c.lookupPath(e,{follow:!0}),o=r.node;o.node_ops.setattr(o,{timestamp:Math.max(t,n)})},open(e,t,n){if(e==="")throw new c.ErrnoError(44);t=typeof t=="string"?_n(t):t,t&64?(n=typeof n>"u"?438:n,n=n&4095|32768):n=0;var r;if(typeof e=="object")r=e;else{e=Te.normalize(e);try{var o=c.lookupPath(e,{follow:!(t&131072)});r=o.node}catch{}}var a=!1;if(t&64)if(r){if(t&128)throw new c.ErrnoError(20)}else r=c.mknod(e,n,0),a=!0;if(!r)throw new c.ErrnoError(44);if(c.isChrdev(r.mode)&&(t&=-513),t&65536&&!c.isDir(r.mode))throw new c.ErrnoError(54);if(!a){var p=c.mayOpen(r,t);if(p)throw new c.ErrnoError(p)}t&512&&!a&&c.truncate(r,0),t&=-131713;var q=c.createStream({node:r,path:c.getPath(r),flags:t,seekable:!0,position:0,stream_ops:r.stream_ops,ungotten:[],error:!1});return q.stream_ops.open&&q.stream_ops.open(q),s.logReadFiles&&!(t&1)&&(e in c.readFiles||(c.readFiles[e]=1)),q},close(e){if(c.isClosed(e))throw new c.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{c.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,t,n){if(c.isClosed(e))throw new c.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new c.ErrnoError(70);if(n!=0&&n!=1&&n!=2)throw new c.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read(e,t,n,r,o){if(r<0||o<0)throw new c.ErrnoError(28);if(c.isClosed(e))throw new c.ErrnoError(8);if((e.flags&2097155)===1)throw new c.ErrnoError(8);if(c.isDir(e.node.mode))throw new c.ErrnoError(31);if(!e.stream_ops.read)throw new c.ErrnoError(28);var a=typeof o<"u";if(!a)o=e.position;else if(!e.seekable)throw new c.ErrnoError(70);var p=e.stream_ops.read(e,t,n,r,o);return a||(e.position+=p),p},write(e,t,n,r,o,a){if(r<0||o<0)throw new c.ErrnoError(28);if(c.isClosed(e))throw new c.ErrnoError(8);if((e.flags&2097155)===0)throw new c.ErrnoError(8);if(c.isDir(e.node.mode))throw new c.ErrnoError(31);if(!e.stream_ops.write)throw new c.ErrnoError(28);e.seekable&&e.flags&1024&&c.llseek(e,0,2);var p=typeof o<"u";if(!p)o=e.position;else if(!e.seekable)throw new c.ErrnoError(70);var q=e.stream_ops.write(e,t,n,r,o,a);return p||(e.position+=q),q},allocate(e,t,n){if(c.isClosed(e))throw new c.ErrnoError(8);if(t<0||n<=0)throw new c.ErrnoError(28);if((e.flags&2097155)===0)throw new c.ErrnoError(8);if(!c.isFile(e.node.mode)&&!c.isDir(e.node.mode))throw new c.ErrnoError(43);if(!e.stream_ops.allocate)throw new c.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap(e,t,n,r,o){if((r&2)!==0&&(o&2)===0&&(e.flags&2097155)!==2)throw new c.ErrnoError(2);if((e.flags&2097155)===1)throw new c.ErrnoError(2);if(!e.stream_ops.mmap)throw new c.ErrnoError(43);if(!t)throw new c.ErrnoError(28);return e.stream_ops.mmap(e,t,n,r,o)},msync(e,t,n,r,o){return e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,o):0},ioctl(e,t,n){if(!e.stream_ops.ioctl)throw new c.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile(e,t={}){if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error(`Invalid encoding type "${t.encoding}"`);var n,r=c.open(e,t.flags),o=c.stat(e),a=o.size,p=new Uint8Array(a);return c.read(r,p,0,a,0),t.encoding==="utf8"?n=_t(p):t.encoding==="binary"&&(n=p),c.close(r),n},writeFile(e,t,n={}){n.flags=n.flags||577;var r=c.open(e,n.flags,n.mode);if(typeof t=="string"){var o=new Uint8Array(gt(t)+1),a=ln(t,o,0,o.length);c.write(r,o,0,a,void 0,n.canOwn)}else if(ArrayBuffer.isView(t))c.write(r,t,0,t.byteLength,void 0,n.canOwn);else throw new Error("Unsupported data type");c.close(r)},cwd:()=>c.currentPath,chdir(e){var t=c.lookupPath(e,{follow:!0});if(t.node===null)throw new c.ErrnoError(44);if(!c.isDir(t.node.mode))throw new c.ErrnoError(54);var n=c.nodePermissions(t.node,"x");if(n)throw new c.ErrnoError(n);c.currentPath=t.path},createDefaultDirectories(){c.mkdir("/tmp"),c.mkdir("/home"),c.mkdir("/home/web_user")},createDefaultDevices(){c.mkdir("/dev"),c.registerDevice(c.makedev(1,3),{read:()=>0,write:(r,o,a,p,q)=>p}),c.mkdev("/dev/null",c.makedev(1,3)),bt.register(c.makedev(5,0),bt.default_tty_ops),bt.register(c.makedev(6,0),bt.default_tty1_ops),c.mkdev("/dev/tty",c.makedev(5,0)),c.mkdev("/dev/tty1",c.makedev(6,0));var e=new Uint8Array(1024),t=0,n=()=>(t===0&&(t=gn(e).byteLength),e[--t]);c.createDevice("/dev","random",n),c.createDevice("/dev","urandom",n),c.mkdir("/dev/shm"),c.mkdir("/dev/shm/tmp")},createSpecialDirectories(){c.mkdir("/proc");var e=c.mkdir("/proc/self");c.mkdir("/proc/self/fd"),c.mount({mount(){var t=c.createNode(e,"fd",16895,73);return t.node_ops={lookup(n,r){var o=+r,a=c.getStreamChecked(o),p={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>a.path}};return p.parent=p,p}},t}},{},"/proc/self/fd")},createStandardStreams(e,t,n){e?c.createDevice("/dev","stdin",e):c.symlink("/dev/tty","/dev/stdin"),t?c.createDevice("/dev","stdout",null,t):c.symlink("/dev/tty","/dev/stdout"),n?c.createDevice("/dev","stderr",null,n):c.symlink("/dev/tty1","/dev/stderr"),c.open("/dev/stdin",0),c.open("/dev/stdout",1),c.open("/dev/stderr",1)},staticInit(){[44].forEach(e=>{c.genericErrors[e]=new c.ErrnoError(e),c.genericErrors[e].stack="<generic error, no stack>"}),c.nameTable=new Array(4096),c.mount(fe,{},"/"),c.createDefaultDirectories(),c.createDefaultDevices(),c.createSpecialDirectories(),c.filesystems={MEMFS:fe}},init(e,t,n){c.initialized=!0,e??(e=s.stdin),t??(t=s.stdout),n??(n=s.stderr),c.createStandardStreams(e,t,n)},quit(){c.initialized=!1;for(var e=0;e<c.streams.length;e++){var t=c.streams[e];t&&c.close(t)}},findObject(e,t){var n=c.analyzePath(e,t);return n.exists?n.object:null},analyzePath(e,t){try{var n=c.lookupPath(e,{follow:!t});e=n.path}catch{}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=c.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=n.path,r.parentObject=n.node,r.name=Te.basename(e),n=c.lookupPath(e,{follow:!t}),r.exists=!0,r.path=n.path,r.object=n.node,r.name=n.node.name,r.isRoot=n.path==="/"}catch(o){r.error=o.errno}return r},createPath(e,t,n,r){e=typeof e=="string"?e:c.getPath(e);for(var o=t.split("/").reverse();o.length;){var a=o.pop();if(a){var p=Te.join2(e,a);try{c.mkdir(p)}catch{}e=p}}return p},createFile(e,t,n,r,o){var a=Te.join2(typeof e=="string"?e:c.getPath(e),t),p=En(r,o);return c.create(a,p)},createDataFile(e,t,n,r,o,a){var p=t;e&&(e=typeof e=="string"?e:c.getPath(e),p=t?Te.join2(e,t):e);var q=En(r,o),N=c.create(p,q);if(n){if(typeof n=="string"){for(var M=new Array(n.length),Y=0,J=n.length;Y<J;++Y)M[Y]=n.charCodeAt(Y);n=M}c.chmod(N,q|146);var D=c.open(N,577);c.write(D,n,0,n.length,0,a),c.close(D),c.chmod(N,q)}},createDevice(e,t,n,r){var q;var o=Te.join2(typeof e=="string"?e:c.getPath(e),t),a=En(!!n,!!r);(q=c.createDevice).major??(q.major=64);var p=c.makedev(c.createDevice.major++,0);return c.registerDevice(p,{open(N){N.seekable=!1},close(N){var M;(M=r==null?void 0:r.buffer)!=null&&M.length&&r(10)},read(N,M,Y,J,D){for(var P=0,z=0;z<J;z++){var A;try{A=n()}catch{throw new c.ErrnoError(29)}if(A===void 0&&P===0)throw new c.ErrnoError(6);if(A==null)break;P++,M[Y+z]=A}return P&&(N.node.timestamp=Date.now()),P},write(N,M,Y,J,D){for(var P=0;P<J;P++)try{r(M[Y+P])}catch{throw new c.ErrnoError(29)}return J&&(N.node.timestamp=Date.now()),P}}),c.mkdev(o,a,p)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=nt(e.url),e.usedBytes=e.contents.length}catch{throw new c.ErrnoError(29)}},createLazyFile(e,t,n,r,o){class a{constructor(){this.lengthKnown=!1,this.chunks=[]}get(P){if(!(P>this.length-1||P<0)){var z=P%this.chunkSize,A=P/this.chunkSize|0;return this.getter(A)[z]}}setDataGetter(P){this.getter=P}cacheLength(){var P=new XMLHttpRequest;if(P.open("HEAD",n,!1),P.send(null),!(P.status>=200&&P.status<300||P.status===304))throw new Error("Couldn't load "+n+". Status: "+P.status);var z=Number(P.getResponseHeader("Content-length")),A,T=(A=P.getResponseHeader("Accept-Ranges"))&&A==="bytes",F=(A=P.getResponseHeader("Content-Encoding"))&&A==="gzip",R=1024*1024;T||(R=z);var U=(W,X)=>{if(W>X)throw new Error("invalid range ("+W+", "+X+") or no bytes requested!");if(X>z-1)throw new Error("only "+z+" bytes available! programmer error!");var _=new XMLHttpRequest;if(_.open("GET",n,!1),z!==R&&_.setRequestHeader("Range","bytes="+W+"-"+X),_.responseType="arraybuffer",_.overrideMimeType&&_.overrideMimeType("text/plain; charset=x-user-defined"),_.send(null),!(_.status>=200&&_.status<300||_.status===304))throw new Error("Couldn't load "+n+". Status: "+_.status);return _.response!==void 0?new Uint8Array(_.response||[]):bn(_.responseText||"")},O=this;O.setDataGetter(W=>{var X=W*R,_=(W+1)*R-1;if(_=Math.min(_,z-1),typeof O.chunks[W]>"u"&&(O.chunks[W]=U(X,_)),typeof O.chunks[W]>"u")throw new Error("doXHR failed!");return O.chunks[W]}),(F||!z)&&(R=z=1,z=this.getter(0).length,R=z,dt("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=z,this._chunkSize=R,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!we)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var p=new a,q={isDevice:!1,contents:p}}else var q={isDevice:!1,url:n};var N=c.createFile(e,t,q,r,o);q.contents?N.contents=q.contents:q.url&&(N.contents=null,N.url=q.url),Object.defineProperties(N,{usedBytes:{get:function(){return this.contents.length}}});var M={},Y=Object.keys(N.stream_ops);Y.forEach(D=>{var P=N.stream_ops[D];M[D]=(...z)=>(c.forceLoadFile(N),P(...z))});function J(D,P,z,A,T){var F=D.node.contents;if(T>=F.length)return 0;var R=Math.min(F.length-T,A);if(F.slice)for(var U=0;U<R;U++)P[z+U]=F[T+U];else for(var U=0;U<R;U++)P[z+U]=F.get(T+U);return R}return M.read=(D,P,z,A,T)=>(c.forceLoadFile(N),J(D,P,z,A,T)),M.mmap=(D,P,z,A,T)=>{c.forceLoadFile(N);var F=Jt(P);if(!F)throw new c.ErrnoError(48);return J(D,je,F,P,z),{ptr:F,allocated:!0}},N.stream_ops=M,N}},vr=(e,t)=>e?_t(St,e,t):"",ye={DEFAULT_POLLMASK:5,calculateAt(e,t,n){if(Te.isAbs(t))return t;var r;if(e===-100)r=c.cwd();else{var o=ye.getStreamFromFD(e);r=o.path}if(t.length==0){if(!n)throw new c.ErrnoError(44);return r}return Te.join2(r,t)},doStat(e,t,n){var r=e(t);Ae[n>>2]=r.dev,Ae[n+4>>2]=r.mode,He[n+8>>2]=r.nlink,Ae[n+12>>2]=r.uid,Ae[n+16>>2]=r.gid,Ae[n+20>>2]=r.rdev,mt[n+24>>3]=BigInt(r.size),Ae[n+32>>2]=4096,Ae[n+36>>2]=r.blocks;var o=r.atime.getTime(),a=r.mtime.getTime(),p=r.ctime.getTime();return mt[n+40>>3]=BigInt(Math.floor(o/1e3)),He[n+48>>2]=o%1e3*1e3*1e3,mt[n+56>>3]=BigInt(Math.floor(a/1e3)),He[n+64>>2]=a%1e3*1e3*1e3,mt[n+72>>3]=BigInt(Math.floor(p/1e3)),He[n+80>>2]=p%1e3*1e3*1e3,mt[n+88>>3]=BigInt(r.ino),0},doMsync(e,t,n,r,o){if(!c.isFile(t.node.mode))throw new c.ErrnoError(43);if(r&2)return 0;var a=St.slice(e,e+n);c.msync(t,a,o,n,r)},getStreamFromFD(e){var t=c.getStreamChecked(e);return t},varargs:void 0,getStr(e){var t=vr(e);return t}};function We(e,t){try{return e=ye.getStr(e),c.chmod(e,t),0}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Ht(e,t,n,r){try{if(t=ye.getStr(t),t=ye.calculateAt(e,t),n&-8)return-28;var o=c.lookupPath(t,{follow:!0}),a=o.node;if(!a)return-44;var p="";return n&4&&(p+="r"),n&2&&(p+="w"),n&1&&(p+="x"),p&&c.nodePermissions(a,p)?-2:0}catch(q){if(typeof c>"u"||q.name!=="ErrnoError")throw q;return-q.errno}}function Sr(e,t){try{return c.fchmod(e,t),0}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Qn(e,t,n){try{return c.fchown(e,t,n),0}catch(r){if(typeof c>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function Qt(){var e=Ae[+ye.varargs>>2];return ye.varargs+=4,e}var Ft=Qt;function Vn(e,t,n){ye.varargs=n;try{var r=ye.getStreamFromFD(e);switch(t){case 0:{var o=Qt();if(o<0)return-28;for(;c.streams[o];)o++;var a;return a=c.dupStream(r,o),a.fd}case 1:case 2:return 0;case 3:return r.flags;case 4:{var o=Qt();return r.flags|=o,0}case 12:{var o=Ft(),p=0;return Kt[o+p>>1]=2,0}case 13:case 14:return 0}return-28}catch(q){if(typeof c>"u"||q.name!=="ErrnoError")throw q;return-q.errno}}function Ar(e,t){try{var n=ye.getStreamFromFD(e);return ye.doStat(c.stat,n.path,t)}catch(r){if(typeof c>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}var ut=9007199254740992,Vt=-9007199254740992,Gt=e=>e<Vt||e>ut?NaN:Number(e);function Gn(e,t){t=Gt(t);try{return isNaN(t)?61:(c.ftruncate(e,t),0)}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}var It=(e,t,n)=>ln(e,St,t,n);function $n(e,t){try{if(t===0)return-28;var n=c.cwd(),r=gt(n)+1;return t<r?-68:(It(n,e,t),r)}catch(o){if(typeof c>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function yt(e,t,n){ye.varargs=n;try{var r=ye.getStreamFromFD(e);switch(t){case 21509:return r.tty?0:-59;case 21505:{if(!r.tty)return-59;if(r.tty.ops.ioctl_tcgets){var o=r.tty.ops.ioctl_tcgets(r),a=Ft();Ae[a>>2]=o.c_iflag||0,Ae[a+4>>2]=o.c_oflag||0,Ae[a+8>>2]=o.c_cflag||0,Ae[a+12>>2]=o.c_lflag||0;for(var p=0;p<32;p++)je[a+p+17]=o.c_cc[p]||0;return 0}return 0}case 21510:case 21511:case 21512:return r.tty?0:-59;case 21506:case 21507:case 21508:{if(!r.tty)return-59;if(r.tty.ops.ioctl_tcsets){for(var a=Ft(),q=Ae[a>>2],N=Ae[a+4>>2],M=Ae[a+8>>2],Y=Ae[a+12>>2],J=[],p=0;p<32;p++)J.push(je[a+p+17]);return r.tty.ops.ioctl_tcsets(r.tty,t,{c_iflag:q,c_oflag:N,c_cflag:M,c_lflag:Y,c_cc:J})}return 0}case 21519:{if(!r.tty)return-59;var a=Ft();return Ae[a>>2]=0,0}case 21520:return r.tty?-28:-59;case 21531:{var a=Ft();return c.ioctl(r,t,a)}case 21523:{if(!r.tty)return-59;if(r.tty.ops.ioctl_tiocgwinsz){var D=r.tty.ops.ioctl_tiocgwinsz(r.tty),a=Ft();Kt[a>>1]=D[0],Kt[a+2>>1]=D[1]}return 0}case 21524:return r.tty?0:-59;case 21515:return r.tty?0:-59;default:return-28}}catch(P){if(typeof c>"u"||P.name!=="ErrnoError")throw P;return-P.errno}}function Kn(e,t){try{return e=ye.getStr(e),ye.doStat(c.lstat,e,t)}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Yn(e,t,n){try{return t=ye.getStr(t),t=ye.calculateAt(e,t),t=Te.normalize(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),c.mkdir(t,n,0),0}catch(r){if(typeof c>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function Xn(e,t,n,r){try{t=ye.getStr(t);var o=r&256,a=r&4096;return r=r&-6401,t=ye.calculateAt(e,t,a),ye.doStat(o?c.lstat:c.stat,t,n)}catch(p){if(typeof c>"u"||p.name!=="ErrnoError")throw p;return-p.errno}}function Jn(e,t,n,r){ye.varargs=r;try{t=ye.getStr(t),t=ye.calculateAt(e,t);var o=r?Qt():0;return c.open(t,n,o).fd}catch(a){if(typeof c>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}function xr(e,t,n,r){try{if(t=ye.getStr(t),t=ye.calculateAt(e,t),r<=0)return-28;var o=c.readlink(t),a=Math.min(r,gt(o)),p=je[n+a];return It(o,n,r+1),je[n+a]=p,a}catch(q){if(typeof c>"u"||q.name!=="ErrnoError")throw q;return-q.errno}}function _e(e){try{return e=ye.getStr(e),c.rmdir(e),0}catch(t){if(typeof c>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function k(e,t){try{return e=ye.getStr(e),ye.doStat(c.stat,e,t)}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Z(e,t,n){try{return t=ye.getStr(t),t=ye.calculateAt(e,t),n===0?c.unlink(t):n===512?c.rmdir(t):Yt("Invalid flags passed to unlinkat"),0}catch(r){if(typeof c>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}var le=e=>He[e>>2]+Ae[e+4>>2]*4294967296;function Fe(e,t,n,r){try{t=ye.getStr(t),t=ye.calculateAt(e,t,!0);var o=Date.now(),a,p;if(!n)a=o,p=o;else{var q=le(n),N=Ae[n+8>>2];N==1073741823?a=o:N==1073741822?a=-1:a=q*1e3+N/(1e3*1e3),n+=16,q=le(n),N=Ae[n+8>>2],N==1073741823?p=o:N==1073741822?p=-1:p=q*1e3+N/(1e3*1e3)}return(p!=-1||a!=-1)&&c.utime(t,a,p),0}catch(M){if(typeof c>"u"||M.name!=="ErrnoError")throw M;return-M.errno}}var Ge=1,Be=()=>Ge,Xe=e=>e%4===0&&(e%100!==0||e%400===0),qt=[0,31,60,91,121,152,182,213,244,274,305,335],Zt=[0,31,59,90,120,151,181,212,243,273,304,334],wn=e=>{var t=Xe(e.getFullYear()),n=t?qt:Zt,r=n[e.getMonth()]+e.getDate()-1;return r};function $e(e,t){e=Gt(e);var n=new Date(e*1e3);Ae[t>>2]=n.getSeconds(),Ae[t+4>>2]=n.getMinutes(),Ae[t+8>>2]=n.getHours(),Ae[t+12>>2]=n.getDate(),Ae[t+16>>2]=n.getMonth(),Ae[t+20>>2]=n.getFullYear()-1900,Ae[t+24>>2]=n.getDay();var r=wn(n)|0;Ae[t+28>>2]=r,Ae[t+36>>2]=-(n.getTimezoneOffset()*60);var o=new Date(n.getFullYear(),0,1),a=new Date(n.getFullYear(),6,1).getTimezoneOffset(),p=o.getTimezoneOffset(),q=(a!=p&&n.getTimezoneOffset()==Math.min(p,a))|0;Ae[t+32>>2]=q}function Zn(e,t,n,r,o,a,p){o=Gt(o);try{if(isNaN(o))return 61;var q=ye.getStreamFromFD(r),N=c.mmap(q,e,o,t,n),M=N.ptr;return Ae[a>>2]=N.allocated,He[p>>2]=M,0}catch(Y){if(typeof c>"u"||Y.name!=="ErrnoError")throw Y;return-Y.errno}}function er(e,t,n,r,o,a){a=Gt(a);try{var p=ye.getStreamFromFD(o);n&2&&ye.doMsync(e,p,t,r,a)}catch(q){if(typeof c>"u"||q.name!=="ErrnoError")throw q;return-q.errno}}var Hs=(e,t,n,r)=>{var o=new Date().getFullYear(),a=new Date(o,0,1),p=new Date(o,6,1),q=a.getTimezoneOffset(),N=p.getTimezoneOffset(),M=Math.max(q,N);He[e>>2]=M*60,Ae[t>>2]=+(q!=N);var Y=P=>{var z=P>=0?"-":"+",A=Math.abs(P),T=String(Math.floor(A/60)).padStart(2,"0"),F=String(A%60).padStart(2,"0");return`UTC${z}${T}${F}`},J=Y(q),D=Y(N);N<q?(It(J,n,17),It(D,r,17)):(It(J,r,17),It(D,n,17))},Qs=()=>Date.now(),Vs=()=>performance.now(),Gs=()=>2147483648,$s=e=>{var t=ct.buffer,n=(e-t.byteLength+65535)/65536|0;try{return ct.grow(n),Ve(),1}catch{}},Ks=e=>{var t=St.length;e>>>=0;var n=Gs();if(e>n)return!1;for(var r=1;r<=4;r*=2){var o=t*(1+.2/r);o=Math.min(o,e+100663296);var a=Math.min(n,Xt(Math.max(e,o),65536)),p=$s(a);if(p)return!0}return!1},Tr={},Ys=()=>te||"./this.program",vn=()=>{if(!vn.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Ys()};for(var n in Tr)Tr[n]===void 0?delete t[n]:t[n]=Tr[n];var r=[];for(var n in t)r.push(`${n}=${t[n]}`);vn.strings=r}return vn.strings},Xs=(e,t)=>{for(var n=0;n<e.length;++n)je[t++]=e.charCodeAt(n);je[t]=0},Js=(e,t)=>{var n=0;return vn().forEach((r,o)=>{var a=t+n;He[e+o*4>>2]=a,Xs(r,a),n+=r.length+1}),0},Zs=(e,t)=>{var n=vn();He[e>>2]=n.length;var r=0;return n.forEach(o=>r+=o.length+1),He[t>>2]=r,0};function ei(e){try{var t=ye.getStreamFromFD(e);return c.close(t),0}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return n.errno}}function ti(e,t){try{var n=0,r=0,o=0,a=ye.getStreamFromFD(e),p=a.tty?2:c.isDir(a.mode)?3:c.isLink(a.mode)?7:4;return je[t]=p,Kt[t+2>>1]=o,mt[t+8>>3]=BigInt(n),mt[t+16>>3]=BigInt(r),0}catch(q){if(typeof c>"u"||q.name!=="ErrnoError")throw q;return q.errno}}var ni=(e,t,n,r)=>{for(var o=0,a=0;a<n;a++){var p=He[t>>2],q=He[t+4>>2];t+=8;var N=c.read(e,je,p,q,r);if(N<0)return-1;if(o+=N,N<q)break}return o};function ri(e,t,n,r){try{var o=ye.getStreamFromFD(e),a=ni(o,t,n);return He[r>>2]=a,0}catch(p){if(typeof c>"u"||p.name!=="ErrnoError")throw p;return p.errno}}function si(e,t,n,r){t=Gt(t);try{if(isNaN(t))return 61;var o=ye.getStreamFromFD(e);return c.llseek(o,t,n),mt[r>>3]=BigInt(o.position),o.getdents&&t===0&&n===0&&(o.getdents=null),0}catch(a){if(typeof c>"u"||a.name!=="ErrnoError")throw a;return a.errno}}function ii(e){var n;try{var t=ye.getStreamFromFD(e);return(n=t.stream_ops)!=null&&n.fsync?t.stream_ops.fsync(t):0}catch(r){if(typeof c>"u"||r.name!=="ErrnoError")throw r;return r.errno}}var oi=(e,t,n,r)=>{for(var o=0,a=0;a<n;a++){var p=He[t>>2],q=He[t+4>>2];t+=8;var N=c.write(e,je,p,q,r);if(N<0)return-1;if(o+=N,N<q)break}return o};function ai(e,t,n,r){try{var o=ye.getStreamFromFD(e),a=oi(o,t,n);return He[r>>2]=a,0}catch(p){if(typeof c>"u"||p.name!=="ErrnoError")throw p;return p.errno}}c.createPreloadedFile=cn,c.staticInit();var ss={__syscall_chmod:We,__syscall_faccessat:Ht,__syscall_fchmod:Sr,__syscall_fchown32:Qn,__syscall_fcntl64:Vn,__syscall_fstat64:Ar,__syscall_ftruncate64:Gn,__syscall_getcwd:$n,__syscall_ioctl:yt,__syscall_lstat64:Kn,__syscall_mkdirat:Yn,__syscall_newfstatat:Xn,__syscall_openat:Jn,__syscall_readlinkat:xr,__syscall_rmdir:_e,__syscall_stat64:k,__syscall_unlinkat:Z,__syscall_utimensat:Fe,_emscripten_get_now_is_monotonic:Be,_localtime_js:$e,_mmap_js:Zn,_munmap_js:er,_tzset_js:Hs,emscripten_date_now:Qs,emscripten_get_now:Vs,emscripten_resize_heap:Ks,environ_get:Js,environ_sizes_get:Zs,fd_close:ei,fd_fdstat_get:ti,fd_read:ri,fd_seek:si,fd_sync:ii,fd_write:ai,memory:ct},h=jt();s._sqlite3_status64=(e,t,n,r)=>(s._sqlite3_status64=h.sqlite3_status64)(e,t,n,r),s._sqlite3_status=(e,t,n,r)=>(s._sqlite3_status=h.sqlite3_status)(e,t,n,r),s._sqlite3_db_status=(e,t,n,r,o)=>(s._sqlite3_db_status=h.sqlite3_db_status)(e,t,n,r,o),s._sqlite3_msize=e=>(s._sqlite3_msize=h.sqlite3_msize)(e),s._sqlite3_vfs_find=e=>(s._sqlite3_vfs_find=h.sqlite3_vfs_find)(e),s._sqlite3_initialize=()=>(s._sqlite3_initialize=h.sqlite3_initialize)(),s._sqlite3_malloc=e=>(s._sqlite3_malloc=h.sqlite3_malloc)(e),s._sqlite3_free=e=>(s._sqlite3_free=h.sqlite3_free)(e),s._sqlite3_vfs_register=(e,t)=>(s._sqlite3_vfs_register=h.sqlite3_vfs_register)(e,t),s._sqlite3_vfs_unregister=e=>(s._sqlite3_vfs_unregister=h.sqlite3_vfs_unregister)(e),s._sqlite3_malloc64=e=>(s._sqlite3_malloc64=h.sqlite3_malloc64)(e),s._sqlite3_realloc=(e,t)=>(s._sqlite3_realloc=h.sqlite3_realloc)(e,t),s._sqlite3_realloc64=(e,t)=>(s._sqlite3_realloc64=h.sqlite3_realloc64)(e,t),s._sqlite3_value_text=e=>(s._sqlite3_value_text=h.sqlite3_value_text)(e),s._sqlite3_randomness=(e,t)=>(s._sqlite3_randomness=h.sqlite3_randomness)(e,t),s._sqlite3_stricmp=(e,t)=>(s._sqlite3_stricmp=h.sqlite3_stricmp)(e,t),s._sqlite3_strnicmp=(e,t,n)=>(s._sqlite3_strnicmp=h.sqlite3_strnicmp)(e,t,n),s._sqlite3_uri_parameter=(e,t)=>(s._sqlite3_uri_parameter=h.sqlite3_uri_parameter)(e,t),s._sqlite3_uri_boolean=(e,t,n)=>(s._sqlite3_uri_boolean=h.sqlite3_uri_boolean)(e,t,n),s._sqlite3_serialize=(e,t,n,r)=>(s._sqlite3_serialize=h.sqlite3_serialize)(e,t,n,r),s._sqlite3_prepare_v2=(e,t,n,r,o)=>(s._sqlite3_prepare_v2=h.sqlite3_prepare_v2)(e,t,n,r,o),s._sqlite3_step=e=>(s._sqlite3_step=h.sqlite3_step)(e),s._sqlite3_column_int64=(e,t)=>(s._sqlite3_column_int64=h.sqlite3_column_int64)(e,t),s._sqlite3_reset=e=>(s._sqlite3_reset=h.sqlite3_reset)(e),s._sqlite3_exec=(e,t,n,r,o)=>(s._sqlite3_exec=h.sqlite3_exec)(e,t,n,r,o),s._sqlite3_column_int=(e,t)=>(s._sqlite3_column_int=h.sqlite3_column_int)(e,t),s._sqlite3_finalize=e=>(s._sqlite3_finalize=h.sqlite3_finalize)(e),s._sqlite3_file_control=(e,t,n,r)=>(s._sqlite3_file_control=h.sqlite3_file_control)(e,t,n,r),s._sqlite3_column_name=(e,t)=>(s._sqlite3_column_name=h.sqlite3_column_name)(e,t),s._sqlite3_column_text=(e,t)=>(s._sqlite3_column_text=h.sqlite3_column_text)(e,t),s._sqlite3_column_type=(e,t)=>(s._sqlite3_column_type=h.sqlite3_column_type)(e,t),s._sqlite3_errmsg=e=>(s._sqlite3_errmsg=h.sqlite3_errmsg)(e),s._sqlite3_deserialize=(e,t,n,r,o,a)=>(s._sqlite3_deserialize=h.sqlite3_deserialize)(e,t,n,r,o,a),s._sqlite3_clear_bindings=e=>(s._sqlite3_clear_bindings=h.sqlite3_clear_bindings)(e),s._sqlite3_value_blob=e=>(s._sqlite3_value_blob=h.sqlite3_value_blob)(e),s._sqlite3_value_bytes=e=>(s._sqlite3_value_bytes=h.sqlite3_value_bytes)(e),s._sqlite3_value_double=e=>(s._sqlite3_value_double=h.sqlite3_value_double)(e),s._sqlite3_value_int=e=>(s._sqlite3_value_int=h.sqlite3_value_int)(e),s._sqlite3_value_int64=e=>(s._sqlite3_value_int64=h.sqlite3_value_int64)(e),s._sqlite3_value_subtype=e=>(s._sqlite3_value_subtype=h.sqlite3_value_subtype)(e),s._sqlite3_value_pointer=(e,t)=>(s._sqlite3_value_pointer=h.sqlite3_value_pointer)(e,t),s._sqlite3_value_type=e=>(s._sqlite3_value_type=h.sqlite3_value_type)(e),s._sqlite3_value_nochange=e=>(s._sqlite3_value_nochange=h.sqlite3_value_nochange)(e),s._sqlite3_value_frombind=e=>(s._sqlite3_value_frombind=h.sqlite3_value_frombind)(e),s._sqlite3_value_dup=e=>(s._sqlite3_value_dup=h.sqlite3_value_dup)(e),s._sqlite3_value_free=e=>(s._sqlite3_value_free=h.sqlite3_value_free)(e),s._sqlite3_result_blob=(e,t,n,r)=>(s._sqlite3_result_blob=h.sqlite3_result_blob)(e,t,n,r),s._sqlite3_result_error_toobig=e=>(s._sqlite3_result_error_toobig=h.sqlite3_result_error_toobig)(e),s._sqlite3_result_error_nomem=e=>(s._sqlite3_result_error_nomem=h.sqlite3_result_error_nomem)(e),s._sqlite3_result_double=(e,t)=>(s._sqlite3_result_double=h.sqlite3_result_double)(e,t),s._sqlite3_result_error=(e,t,n)=>(s._sqlite3_result_error=h.sqlite3_result_error)(e,t,n),s._sqlite3_result_int=(e,t)=>(s._sqlite3_result_int=h.sqlite3_result_int)(e,t),s._sqlite3_result_int64=(e,t)=>(s._sqlite3_result_int64=h.sqlite3_result_int64)(e,t),s._sqlite3_result_null=e=>(s._sqlite3_result_null=h.sqlite3_result_null)(e),s._sqlite3_result_pointer=(e,t,n,r)=>(s._sqlite3_result_pointer=h.sqlite3_result_pointer)(e,t,n,r),s._sqlite3_result_subtype=(e,t)=>(s._sqlite3_result_subtype=h.sqlite3_result_subtype)(e,t),s._sqlite3_result_text=(e,t,n,r)=>(s._sqlite3_result_text=h.sqlite3_result_text)(e,t,n,r),s._sqlite3_result_zeroblob=(e,t)=>(s._sqlite3_result_zeroblob=h.sqlite3_result_zeroblob)(e,t),s._sqlite3_result_zeroblob64=(e,t)=>(s._sqlite3_result_zeroblob64=h.sqlite3_result_zeroblob64)(e,t),s._sqlite3_result_error_code=(e,t)=>(s._sqlite3_result_error_code=h.sqlite3_result_error_code)(e,t),s._sqlite3_user_data=e=>(s._sqlite3_user_data=h.sqlite3_user_data)(e),s._sqlite3_context_db_handle=e=>(s._sqlite3_context_db_handle=h.sqlite3_context_db_handle)(e),s._sqlite3_vtab_nochange=e=>(s._sqlite3_vtab_nochange=h.sqlite3_vtab_nochange)(e),s._sqlite3_vtab_in_first=(e,t)=>(s._sqlite3_vtab_in_first=h.sqlite3_vtab_in_first)(e,t),s._sqlite3_vtab_in_next=(e,t)=>(s._sqlite3_vtab_in_next=h.sqlite3_vtab_in_next)(e,t),s._sqlite3_aggregate_context=(e,t)=>(s._sqlite3_aggregate_context=h.sqlite3_aggregate_context)(e,t),s._sqlite3_get_auxdata=(e,t)=>(s._sqlite3_get_auxdata=h.sqlite3_get_auxdata)(e,t),s._sqlite3_set_auxdata=(e,t,n,r)=>(s._sqlite3_set_auxdata=h.sqlite3_set_auxdata)(e,t,n,r),s._sqlite3_column_count=e=>(s._sqlite3_column_count=h.sqlite3_column_count)(e),s._sqlite3_data_count=e=>(s._sqlite3_data_count=h.sqlite3_data_count)(e),s._sqlite3_column_blob=(e,t)=>(s._sqlite3_column_blob=h.sqlite3_column_blob)(e,t),s._sqlite3_column_bytes=(e,t)=>(s._sqlite3_column_bytes=h.sqlite3_column_bytes)(e,t),s._sqlite3_column_double=(e,t)=>(s._sqlite3_column_double=h.sqlite3_column_double)(e,t),s._sqlite3_column_value=(e,t)=>(s._sqlite3_column_value=h.sqlite3_column_value)(e,t),s._sqlite3_column_decltype=(e,t)=>(s._sqlite3_column_decltype=h.sqlite3_column_decltype)(e,t),s._sqlite3_bind_blob=(e,t,n,r,o)=>(s._sqlite3_bind_blob=h.sqlite3_bind_blob)(e,t,n,r,o),s._sqlite3_bind_double=(e,t,n)=>(s._sqlite3_bind_double=h.sqlite3_bind_double)(e,t,n),s._sqlite3_bind_int=(e,t,n)=>(s._sqlite3_bind_int=h.sqlite3_bind_int)(e,t,n),s._sqlite3_bind_int64=(e,t,n)=>(s._sqlite3_bind_int64=h.sqlite3_bind_int64)(e,t,n),s._sqlite3_bind_null=(e,t)=>(s._sqlite3_bind_null=h.sqlite3_bind_null)(e,t),s._sqlite3_bind_pointer=(e,t,n,r,o)=>(s._sqlite3_bind_pointer=h.sqlite3_bind_pointer)(e,t,n,r,o),s._sqlite3_bind_text=(e,t,n,r,o)=>(s._sqlite3_bind_text=h.sqlite3_bind_text)(e,t,n,r,o),s._sqlite3_bind_parameter_count=e=>(s._sqlite3_bind_parameter_count=h.sqlite3_bind_parameter_count)(e),s._sqlite3_bind_parameter_name=(e,t)=>(s._sqlite3_bind_parameter_name=h.sqlite3_bind_parameter_name)(e,t),s._sqlite3_bind_parameter_index=(e,t)=>(s._sqlite3_bind_parameter_index=h.sqlite3_bind_parameter_index)(e,t),s._sqlite3_db_handle=e=>(s._sqlite3_db_handle=h.sqlite3_db_handle)(e),s._sqlite3_stmt_readonly=e=>(s._sqlite3_stmt_readonly=h.sqlite3_stmt_readonly)(e),s._sqlite3_stmt_isexplain=e=>(s._sqlite3_stmt_isexplain=h.sqlite3_stmt_isexplain)(e),s._sqlite3_stmt_explain=(e,t)=>(s._sqlite3_stmt_explain=h.sqlite3_stmt_explain)(e,t),s._sqlite3_stmt_busy=e=>(s._sqlite3_stmt_busy=h.sqlite3_stmt_busy)(e),s._sqlite3_stmt_status=(e,t,n)=>(s._sqlite3_stmt_status=h.sqlite3_stmt_status)(e,t,n),s._sqlite3_sql=e=>(s._sqlite3_sql=h.sqlite3_sql)(e),s._sqlite3_expanded_sql=e=>(s._sqlite3_expanded_sql=h.sqlite3_expanded_sql)(e),s._sqlite3_preupdate_old=(e,t,n)=>(s._sqlite3_preupdate_old=h.sqlite3_preupdate_old)(e,t,n),s._sqlite3_preupdate_count=e=>(s._sqlite3_preupdate_count=h.sqlite3_preupdate_count)(e),s._sqlite3_preupdate_depth=e=>(s._sqlite3_preupdate_depth=h.sqlite3_preupdate_depth)(e),s._sqlite3_preupdate_blobwrite=e=>(s._sqlite3_preupdate_blobwrite=h.sqlite3_preupdate_blobwrite)(e),s._sqlite3_preupdate_new=(e,t,n)=>(s._sqlite3_preupdate_new=h.sqlite3_preupdate_new)(e,t,n),s._sqlite3_value_numeric_type=e=>(s._sqlite3_value_numeric_type=h.sqlite3_value_numeric_type)(e),s._sqlite3_set_authorizer=(e,t,n)=>(s._sqlite3_set_authorizer=h.sqlite3_set_authorizer)(e,t,n),s._sqlite3_strglob=(e,t)=>(s._sqlite3_strglob=h.sqlite3_strglob)(e,t),s._sqlite3_strlike=(e,t,n)=>(s._sqlite3_strlike=h.sqlite3_strlike)(e,t,n),s._sqlite3_auto_extension=e=>(s._sqlite3_auto_extension=h.sqlite3_auto_extension)(e),s._sqlite3_cancel_auto_extension=e=>(s._sqlite3_cancel_auto_extension=h.sqlite3_cancel_auto_extension)(e),s._sqlite3_reset_auto_extension=()=>(s._sqlite3_reset_auto_extension=h.sqlite3_reset_auto_extension)(),s._sqlite3_prepare_v3=(e,t,n,r,o,a)=>(s._sqlite3_prepare_v3=h.sqlite3_prepare_v3)(e,t,n,r,o,a),s._sqlite3_create_module=(e,t,n,r)=>(s._sqlite3_create_module=h.sqlite3_create_module)(e,t,n,r),s._sqlite3_create_module_v2=(e,t,n,r,o)=>(s._sqlite3_create_module_v2=h.sqlite3_create_module_v2)(e,t,n,r,o),s._sqlite3_drop_modules=(e,t)=>(s._sqlite3_drop_modules=h.sqlite3_drop_modules)(e,t),s._sqlite3_declare_vtab=(e,t)=>(s._sqlite3_declare_vtab=h.sqlite3_declare_vtab)(e,t),s._sqlite3_vtab_on_conflict=e=>(s._sqlite3_vtab_on_conflict=h.sqlite3_vtab_on_conflict)(e),s._sqlite3_vtab_collation=(e,t)=>(s._sqlite3_vtab_collation=h.sqlite3_vtab_collation)(e,t),s._sqlite3_vtab_in=(e,t,n)=>(s._sqlite3_vtab_in=h.sqlite3_vtab_in)(e,t,n),s._sqlite3_vtab_rhs_value=(e,t,n)=>(s._sqlite3_vtab_rhs_value=h.sqlite3_vtab_rhs_value)(e,t,n),s._sqlite3_vtab_distinct=e=>(s._sqlite3_vtab_distinct=h.sqlite3_vtab_distinct)(e),s._sqlite3_keyword_name=(e,t,n)=>(s._sqlite3_keyword_name=h.sqlite3_keyword_name)(e,t,n),s._sqlite3_keyword_count=()=>(s._sqlite3_keyword_count=h.sqlite3_keyword_count)(),s._sqlite3_keyword_check=(e,t)=>(s._sqlite3_keyword_check=h.sqlite3_keyword_check)(e,t),s._sqlite3_complete=e=>(s._sqlite3_complete=h.sqlite3_complete)(e),s._sqlite3_libversion=()=>(s._sqlite3_libversion=h.sqlite3_libversion)(),s._sqlite3_libversion_number=()=>(s._sqlite3_libversion_number=h.sqlite3_libversion_number)(),s._sqlite3_shutdown=()=>(s._sqlite3_shutdown=h.sqlite3_shutdown)(),s._sqlite3_last_insert_rowid=e=>(s._sqlite3_last_insert_rowid=h.sqlite3_last_insert_rowid)(e),s._sqlite3_set_last_insert_rowid=(e,t)=>(s._sqlite3_set_last_insert_rowid=h.sqlite3_set_last_insert_rowid)(e,t),s._sqlite3_changes64=e=>(s._sqlite3_changes64=h.sqlite3_changes64)(e),s._sqlite3_changes=e=>(s._sqlite3_changes=h.sqlite3_changes)(e),s._sqlite3_total_changes64=e=>(s._sqlite3_total_changes64=h.sqlite3_total_changes64)(e),s._sqlite3_total_changes=e=>(s._sqlite3_total_changes=h.sqlite3_total_changes)(e),s._sqlite3_txn_state=(e,t)=>(s._sqlite3_txn_state=h.sqlite3_txn_state)(e,t),s._sqlite3_close_v2=e=>(s._sqlite3_close_v2=h.sqlite3_close_v2)(e),s._sqlite3_busy_handler=(e,t,n)=>(s._sqlite3_busy_handler=h.sqlite3_busy_handler)(e,t,n),s._sqlite3_progress_handler=(e,t,n,r)=>(s._sqlite3_progress_handler=h.sqlite3_progress_handler)(e,t,n,r),s._sqlite3_busy_timeout=(e,t)=>(s._sqlite3_busy_timeout=h.sqlite3_busy_timeout)(e,t),s._sqlite3_interrupt=e=>(s._sqlite3_interrupt=h.sqlite3_interrupt)(e),s._sqlite3_is_interrupted=e=>(s._sqlite3_is_interrupted=h.sqlite3_is_interrupted)(e),s._sqlite3_create_function=(e,t,n,r,o,a,p,q)=>(s._sqlite3_create_function=h.sqlite3_create_function)(e,t,n,r,o,a,p,q),s._sqlite3_create_function_v2=(e,t,n,r,o,a,p,q,N)=>(s._sqlite3_create_function_v2=h.sqlite3_create_function_v2)(e,t,n,r,o,a,p,q,N),s._sqlite3_create_window_function=(e,t,n,r,o,a,p,q,N,M)=>(s._sqlite3_create_window_function=h.sqlite3_create_window_function)(e,t,n,r,o,a,p,q,N,M),s._sqlite3_overload_function=(e,t,n)=>(s._sqlite3_overload_function=h.sqlite3_overload_function)(e,t,n),s._sqlite3_trace_v2=(e,t,n,r)=>(s._sqlite3_trace_v2=h.sqlite3_trace_v2)(e,t,n,r),s._sqlite3_commit_hook=(e,t,n)=>(s._sqlite3_commit_hook=h.sqlite3_commit_hook)(e,t,n),s._sqlite3_update_hook=(e,t,n)=>(s._sqlite3_update_hook=h.sqlite3_update_hook)(e,t,n),s._sqlite3_rollback_hook=(e,t,n)=>(s._sqlite3_rollback_hook=h.sqlite3_rollback_hook)(e,t,n),s._sqlite3_preupdate_hook=(e,t,n)=>(s._sqlite3_preupdate_hook=h.sqlite3_preupdate_hook)(e,t,n),s._sqlite3_error_offset=e=>(s._sqlite3_error_offset=h.sqlite3_error_offset)(e),s._sqlite3_errcode=e=>(s._sqlite3_errcode=h.sqlite3_errcode)(e),s._sqlite3_extended_errcode=e=>(s._sqlite3_extended_errcode=h.sqlite3_extended_errcode)(e),s._sqlite3_errstr=e=>(s._sqlite3_errstr=h.sqlite3_errstr)(e),s._sqlite3_limit=(e,t,n)=>(s._sqlite3_limit=h.sqlite3_limit)(e,t,n),s._sqlite3_open=(e,t)=>(s._sqlite3_open=h.sqlite3_open)(e,t),s._sqlite3_open_v2=(e,t,n,r)=>(s._sqlite3_open_v2=h.sqlite3_open_v2)(e,t,n,r),s._sqlite3_create_collation=(e,t,n,r,o)=>(s._sqlite3_create_collation=h.sqlite3_create_collation)(e,t,n,r,o),s._sqlite3_create_collation_v2=(e,t,n,r,o,a)=>(s._sqlite3_create_collation_v2=h.sqlite3_create_collation_v2)(e,t,n,r,o,a),s._sqlite3_collation_needed=(e,t,n)=>(s._sqlite3_collation_needed=h.sqlite3_collation_needed)(e,t,n),s._sqlite3_get_autocommit=e=>(s._sqlite3_get_autocommit=h.sqlite3_get_autocommit)(e),s._sqlite3_table_column_metadata=(e,t,n,r,o,a,p,q,N)=>(s._sqlite3_table_column_metadata=h.sqlite3_table_column_metadata)(e,t,n,r,o,a,p,q,N),s._sqlite3_extended_result_codes=(e,t)=>(s._sqlite3_extended_result_codes=h.sqlite3_extended_result_codes)(e,t),s._sqlite3_uri_key=(e,t)=>(s._sqlite3_uri_key=h.sqlite3_uri_key)(e,t),s._sqlite3_uri_int64=(e,t,n)=>(s._sqlite3_uri_int64=h.sqlite3_uri_int64)(e,t,n),s._sqlite3_db_name=(e,t)=>(s._sqlite3_db_name=h.sqlite3_db_name)(e,t),s._sqlite3_db_filename=(e,t)=>(s._sqlite3_db_filename=h.sqlite3_db_filename)(e,t),s._sqlite3_db_readonly=(e,t)=>(s._sqlite3_db_readonly=h.sqlite3_db_readonly)(e,t),s._sqlite3_compileoption_used=e=>(s._sqlite3_compileoption_used=h.sqlite3_compileoption_used)(e),s._sqlite3_compileoption_get=e=>(s._sqlite3_compileoption_get=h.sqlite3_compileoption_get)(e),s._sqlite3session_diff=(e,t,n,r)=>(s._sqlite3session_diff=h.sqlite3session_diff)(e,t,n,r),s._sqlite3session_attach=(e,t)=>(s._sqlite3session_attach=h.sqlite3session_attach)(e,t),s._sqlite3session_create=(e,t,n)=>(s._sqlite3session_create=h.sqlite3session_create)(e,t,n),s._sqlite3session_delete=e=>(s._sqlite3session_delete=h.sqlite3session_delete)(e),s._sqlite3session_table_filter=(e,t,n)=>(s._sqlite3session_table_filter=h.sqlite3session_table_filter)(e,t,n),s._sqlite3session_changeset=(e,t,n)=>(s._sqlite3session_changeset=h.sqlite3session_changeset)(e,t,n),s._sqlite3session_changeset_strm=(e,t,n)=>(s._sqlite3session_changeset_strm=h.sqlite3session_changeset_strm)(e,t,n),s._sqlite3session_patchset_strm=(e,t,n)=>(s._sqlite3session_patchset_strm=h.sqlite3session_patchset_strm)(e,t,n),s._sqlite3session_patchset=(e,t,n)=>(s._sqlite3session_patchset=h.sqlite3session_patchset)(e,t,n),s._sqlite3session_enable=(e,t)=>(s._sqlite3session_enable=h.sqlite3session_enable)(e,t),s._sqlite3session_indirect=(e,t)=>(s._sqlite3session_indirect=h.sqlite3session_indirect)(e,t),s._sqlite3session_isempty=e=>(s._sqlite3session_isempty=h.sqlite3session_isempty)(e),s._sqlite3session_memory_used=e=>(s._sqlite3session_memory_used=h.sqlite3session_memory_used)(e),s._sqlite3session_object_config=(e,t,n)=>(s._sqlite3session_object_config=h.sqlite3session_object_config)(e,t,n),s._sqlite3session_changeset_size=e=>(s._sqlite3session_changeset_size=h.sqlite3session_changeset_size)(e),s._sqlite3changeset_start=(e,t,n)=>(s._sqlite3changeset_start=h.sqlite3changeset_start)(e,t,n),s._sqlite3changeset_start_v2=(e,t,n,r)=>(s._sqlite3changeset_start_v2=h.sqlite3changeset_start_v2)(e,t,n,r),s._sqlite3changeset_start_strm=(e,t,n)=>(s._sqlite3changeset_start_strm=h.sqlite3changeset_start_strm)(e,t,n),s._sqlite3changeset_start_v2_strm=(e,t,n,r)=>(s._sqlite3changeset_start_v2_strm=h.sqlite3changeset_start_v2_strm)(e,t,n,r),s._sqlite3changeset_next=e=>(s._sqlite3changeset_next=h.sqlite3changeset_next)(e),s._sqlite3changeset_op=(e,t,n,r,o)=>(s._sqlite3changeset_op=h.sqlite3changeset_op)(e,t,n,r,o),s._sqlite3changeset_pk=(e,t,n)=>(s._sqlite3changeset_pk=h.sqlite3changeset_pk)(e,t,n),s._sqlite3changeset_old=(e,t,n)=>(s._sqlite3changeset_old=h.sqlite3changeset_old)(e,t,n),s._sqlite3changeset_new=(e,t,n)=>(s._sqlite3changeset_new=h.sqlite3changeset_new)(e,t,n),s._sqlite3changeset_conflict=(e,t,n)=>(s._sqlite3changeset_conflict=h.sqlite3changeset_conflict)(e,t,n),s._sqlite3changeset_fk_conflicts=(e,t)=>(s._sqlite3changeset_fk_conflicts=h.sqlite3changeset_fk_conflicts)(e,t),s._sqlite3changeset_finalize=e=>(s._sqlite3changeset_finalize=h.sqlite3changeset_finalize)(e),s._sqlite3changeset_invert=(e,t,n,r)=>(s._sqlite3changeset_invert=h.sqlite3changeset_invert)(e,t,n,r),s._sqlite3changeset_invert_strm=(e,t,n,r)=>(s._sqlite3changeset_invert_strm=h.sqlite3changeset_invert_strm)(e,t,n,r),s._sqlite3changeset_apply_v2=(e,t,n,r,o,a,p,q,N)=>(s._sqlite3changeset_apply_v2=h.sqlite3changeset_apply_v2)(e,t,n,r,o,a,p,q,N),s._sqlite3changeset_apply=(e,t,n,r,o,a)=>(s._sqlite3changeset_apply=h.sqlite3changeset_apply)(e,t,n,r,o,a),s._sqlite3changeset_apply_v2_strm=(e,t,n,r,o,a,p,q,N)=>(s._sqlite3changeset_apply_v2_strm=h.sqlite3changeset_apply_v2_strm)(e,t,n,r,o,a,p,q,N),s._sqlite3changeset_apply_strm=(e,t,n,r,o,a)=>(s._sqlite3changeset_apply_strm=h.sqlite3changeset_apply_strm)(e,t,n,r,o,a),s._sqlite3changegroup_new=e=>(s._sqlite3changegroup_new=h.sqlite3changegroup_new)(e),s._sqlite3changegroup_add=(e,t,n)=>(s._sqlite3changegroup_add=h.sqlite3changegroup_add)(e,t,n),s._sqlite3changegroup_output=(e,t,n)=>(s._sqlite3changegroup_output=h.sqlite3changegroup_output)(e,t,n),s._sqlite3changegroup_add_strm=(e,t,n)=>(s._sqlite3changegroup_add_strm=h.sqlite3changegroup_add_strm)(e,t,n),s._sqlite3changegroup_output_strm=(e,t,n)=>(s._sqlite3changegroup_output_strm=h.sqlite3changegroup_output_strm)(e,t,n),s._sqlite3changegroup_delete=e=>(s._sqlite3changegroup_delete=h.sqlite3changegroup_delete)(e),s._sqlite3changeset_concat=(e,t,n,r,o,a)=>(s._sqlite3changeset_concat=h.sqlite3changeset_concat)(e,t,n,r,o,a),s._sqlite3changeset_concat_strm=(e,t,n,r,o,a)=>(s._sqlite3changeset_concat_strm=h.sqlite3changeset_concat_strm)(e,t,n,r,o,a),s._sqlite3session_config=(e,t)=>(s._sqlite3session_config=h.sqlite3session_config)(e,t),s._sqlite3_sourceid=()=>(s._sqlite3_sourceid=h.sqlite3_sourceid)(),s._sqlite3__wasm_pstack_ptr=()=>(s._sqlite3__wasm_pstack_ptr=h.sqlite3__wasm_pstack_ptr)(),s._sqlite3__wasm_pstack_restore=e=>(s._sqlite3__wasm_pstack_restore=h.sqlite3__wasm_pstack_restore)(e),s._sqlite3__wasm_pstack_alloc=e=>(s._sqlite3__wasm_pstack_alloc=h.sqlite3__wasm_pstack_alloc)(e),s._sqlite3__wasm_pstack_remaining=()=>(s._sqlite3__wasm_pstack_remaining=h.sqlite3__wasm_pstack_remaining)(),s._sqlite3__wasm_pstack_quota=()=>(s._sqlite3__wasm_pstack_quota=h.sqlite3__wasm_pstack_quota)(),s._sqlite3__wasm_db_error=(e,t,n)=>(s._sqlite3__wasm_db_error=h.sqlite3__wasm_db_error)(e,t,n),s._sqlite3__wasm_test_struct=e=>(s._sqlite3__wasm_test_struct=h.sqlite3__wasm_test_struct)(e),s._sqlite3__wasm_enum_json=()=>(s._sqlite3__wasm_enum_json=h.sqlite3__wasm_enum_json)(),s._sqlite3__wasm_vfs_unlink=(e,t)=>(s._sqlite3__wasm_vfs_unlink=h.sqlite3__wasm_vfs_unlink)(e,t),s._sqlite3__wasm_db_vfs=(e,t)=>(s._sqlite3__wasm_db_vfs=h.sqlite3__wasm_db_vfs)(e,t),s._sqlite3__wasm_db_reset=e=>(s._sqlite3__wasm_db_reset=h.sqlite3__wasm_db_reset)(e),s._sqlite3__wasm_db_export_chunked=(e,t)=>(s._sqlite3__wasm_db_export_chunked=h.sqlite3__wasm_db_export_chunked)(e,t),s._sqlite3__wasm_db_serialize=(e,t,n,r,o)=>(s._sqlite3__wasm_db_serialize=h.sqlite3__wasm_db_serialize)(e,t,n,r,o),s._sqlite3__wasm_vfs_create_file=(e,t,n,r)=>(s._sqlite3__wasm_vfs_create_file=h.sqlite3__wasm_vfs_create_file)(e,t,n,r),s._sqlite3__wasm_posix_create_file=(e,t,n)=>(s._sqlite3__wasm_posix_create_file=h.sqlite3__wasm_posix_create_file)(e,t,n),s._sqlite3__wasm_kvvfsMakeKeyOnPstack=(e,t)=>(s._sqlite3__wasm_kvvfsMakeKeyOnPstack=h.sqlite3__wasm_kvvfsMakeKeyOnPstack)(e,t),s._sqlite3__wasm_kvvfs_methods=()=>(s._sqlite3__wasm_kvvfs_methods=h.sqlite3__wasm_kvvfs_methods)(),s._sqlite3__wasm_vtab_config=(e,t,n)=>(s._sqlite3__wasm_vtab_config=h.sqlite3__wasm_vtab_config)(e,t,n),s._sqlite3__wasm_db_config_ip=(e,t,n,r)=>(s._sqlite3__wasm_db_config_ip=h.sqlite3__wasm_db_config_ip)(e,t,n,r),s._sqlite3__wasm_db_config_pii=(e,t,n,r,o)=>(s._sqlite3__wasm_db_config_pii=h.sqlite3__wasm_db_config_pii)(e,t,n,r,o),s._sqlite3__wasm_db_config_s=(e,t,n)=>(s._sqlite3__wasm_db_config_s=h.sqlite3__wasm_db_config_s)(e,t,n),s._sqlite3__wasm_config_i=(e,t)=>(s._sqlite3__wasm_config_i=h.sqlite3__wasm_config_i)(e,t),s._sqlite3__wasm_config_ii=(e,t,n)=>(s._sqlite3__wasm_config_ii=h.sqlite3__wasm_config_ii)(e,t,n),s._sqlite3__wasm_config_j=(e,t)=>(s._sqlite3__wasm_config_j=h.sqlite3__wasm_config_j)(e,t),s._sqlite3__wasm_qfmt_token=(e,t)=>(s._sqlite3__wasm_qfmt_token=h.sqlite3__wasm_qfmt_token)(e,t),s._sqlite3__wasm_init_wasmfs=e=>(s._sqlite3__wasm_init_wasmfs=h.sqlite3__wasm_init_wasmfs)(e),s._sqlite3__wasm_test_intptr=e=>(s._sqlite3__wasm_test_intptr=h.sqlite3__wasm_test_intptr)(e),s._sqlite3__wasm_test_voidptr=e=>(s._sqlite3__wasm_test_voidptr=h.sqlite3__wasm_test_voidptr)(e),s._sqlite3__wasm_test_int64_max=()=>(s._sqlite3__wasm_test_int64_max=h.sqlite3__wasm_test_int64_max)(),s._sqlite3__wasm_test_int64_min=()=>(s._sqlite3__wasm_test_int64_min=h.sqlite3__wasm_test_int64_min)(),s._sqlite3__wasm_test_int64_times2=e=>(s._sqlite3__wasm_test_int64_times2=h.sqlite3__wasm_test_int64_times2)(e),s._sqlite3__wasm_test_int64_minmax=(e,t)=>(s._sqlite3__wasm_test_int64_minmax=h.sqlite3__wasm_test_int64_minmax)(e,t),s._sqlite3__wasm_test_int64ptr=e=>(s._sqlite3__wasm_test_int64ptr=h.sqlite3__wasm_test_int64ptr)(e),s._sqlite3__wasm_test_stack_overflow=e=>(s._sqlite3__wasm_test_stack_overflow=h.sqlite3__wasm_test_stack_overflow)(e),s._sqlite3__wasm_test_str_hello=e=>(s._sqlite3__wasm_test_str_hello=h.sqlite3__wasm_test_str_hello)(e),s._sqlite3__wasm_SQLTester_strglob=(e,t)=>(s._sqlite3__wasm_SQLTester_strglob=h.sqlite3__wasm_SQLTester_strglob)(e,t),s._malloc=e=>(s._malloc=h.malloc)(e),s._free=e=>(s._free=h.free)(e),s._realloc=(e,t)=>(s._realloc=h.realloc)(e,t);var is=(e,t)=>(is=h.emscripten_builtin_memalign)(e,t);s.wasmMemory=ct;var tr,os;Me=function e(){tr||as(),tr||(Me=e)};function as(){if(At>0||!os&&(os=1,br(),At>0))return;function e(){var t;tr||(tr=1,s.calledRun=1,!Qe&&(yr(),j(s),(t=s.onRuntimeInitialized)==null||t.call(s),Mn()))}s.setStatus?(s.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>s.setStatus(""),1),e()},1)):e()}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();return as(),s.runSQLite3PostLoadInit=function(e){if(globalThis.sqlite3ApiBootstrap=function t(n=globalThis.sqlite3ApiConfig||t.defaultConfig){if(t.sqlite3)return(t.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),t.sqlite3;const r=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof s<"u"&&s.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},n||{});Object.assign(r,{allocExportName:r.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:r.useStdAlloc?"free":"sqlite3_free",reallocExportName:r.useStdAlloc?"realloc":"sqlite3_realloc"},r),["exports","memory","wasmfsOpfsDir"].forEach(l=>{typeof r[l]=="function"&&(r[l]=r[l]())}),delete globalThis.sqlite3ApiConfig,delete t.defaultConfig;const o=Object.create(null),a=Object.create(null),p=l=>o.sqlite3_js_rc_str&&o.sqlite3_js_rc_str(l)||"Unknown result code #"+l,q=l=>typeof l=="number"&&l===(l|0);class N extends Error{constructor(...u){let w;if(u.length)if(q(u[0]))if(w=u[0],u.length===1)super(p(u[0]));else{const S=p(w);typeof u[1]=="object"?super(S,u[1]):(u[0]=S+":",super(u.join(" ")))}else u.length===2&&typeof u[1]=="object"?super(...u):super(u.join(" "));this.resultCode=w||o.SQLITE_ERROR,this.name="SQLite3Error"}}N.toss=(...l)=>{throw new N(...l)};const M=N.toss;r.wasmfsOpfsDir&&!/^\/[^/]+$/.test(r.wasmfsOpfsDir)&&M("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const Y=l=>typeof l!="bigint"&&l===(l|0)&&l<=2147483647&&l>=-2147483648,J=function l(u){return l._max||(l._max=BigInt("0x7fffffffffffffff"),l._min=~l._max),u>=l._min&&u<=l._max},D=l=>l>=-0x7fffffffn-1n&&l<=0x7fffffffn,P=function l(u){return l._min||(l._min=Number.MIN_SAFE_INTEGER,l._max=Number.MAX_SAFE_INTEGER),u>=l._min&&u<=l._max},z=l=>l&&l.constructor&&Y(l.constructor.BYTES_PER_ELEMENT)?l:!1,A=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,T=l=>l.buffer instanceof A,F=(l,u,w)=>T(l)?l.slice(u,w):l.subarray(u,w),R=l=>l&&(l instanceof Uint8Array||l instanceof Int8Array||l instanceof ArrayBuffer),U=l=>l&&(l instanceof Uint8Array||l instanceof Int8Array||l instanceof ArrayBuffer),O=l=>R(l)||M("Value is not of a supported TypedArray type."),W=new TextDecoder("utf-8"),X=function(l,u,w){return W.decode(F(l,u,w))},_=function(l){return U(l)?X(l instanceof ArrayBuffer?new Uint8Array(l):l):Array.isArray(l)?l.join(""):(a.isPtr(l)&&(l=a.cstrToJs(l)),l)};class b extends Error{constructor(...u){u.length===2&&typeof u[1]=="object"?super(...u):u.length?super(u.join(" ")):super("Allocation failed."),this.resultCode=o.SQLITE_NOMEM,this.name="WasmAllocError"}}b.toss=(...l)=>{throw new b(...l)},Object.assign(o,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(l,u,w,S,G,se,ue,ge,de)=>{},sqlite3_create_function:(l,u,w,S,G,se,ue,ge)=>{},sqlite3_create_window_function:(l,u,w,S,G,se,ue,ge,de,me)=>{},sqlite3_prepare_v3:(l,u,w,S,G,se)=>{},sqlite3_prepare_v2:(l,u,w,S,G)=>{},sqlite3_exec:(l,u,w,S,G)=>{},sqlite3_randomness:(l,u)=>{}});const x={affirmBindableTypedArray:O,flexibleString:_,bigIntFits32:D,bigIntFits64:J,bigIntFitsDouble:P,isBindableTypedArray:R,isInt32:Y,isSQLableTypedArray:U,isTypedArray:z,typedArrayToString:X,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:T,toss:function(...l){throw new Error(l.join(" "))},toss3:M,typedArrayPart:F,affirmDbHeader:function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l));const u="SQLite format 3";u.length>l.byteLength&&M("Input does not contain an SQLite3 database header.");for(let w=0;w<u.length;++w)u.charCodeAt(w)!==l[w]&&M("Input does not contain an SQLite3 database header.")},affirmIsDb:function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l));const u=l.byteLength;(u<512||u%512!==0)&&M("Byte array size",u,"is invalid for an SQLite3 db."),x.affirmDbHeader(l)}};Object.assign(a,{ptrSizeof:r.wasmPtrSizeof||4,ptrIR:r.wasmPtrIR||"i32",bigIntEnabled:!!r.bigIntEnabled,exports:r.exports||M("Missing API config.exports (WASM module exports)."),memory:r.memory||r.exports.memory||M("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),a.allocFromTypedArray=function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l)),O(l);const u=a.alloc(l.byteLength||1);return a.heapForSize(l.constructor).set(l.byteLength?l:[0],u),u};{const l=r.allocExportName,u=r.deallocExportName,w=r.reallocExportName;for(const S of[l,u,w])a.exports[S]instanceof Function||M("Missing required exports[",S,"] function.");a.alloc=function S(G){return S.impl(G)||b.toss("Failed to allocate",G," bytes.")},a.alloc.impl=a.exports[l],a.realloc=function S(G,se){const ue=S.impl(G,se);return se?ue||b.toss("Failed to reallocate",se," bytes."):0},a.realloc.impl=a.exports[w],a.dealloc=a.exports[u]}a.compileOptionUsed=function l(u){if(arguments.length){if(Array.isArray(u)){const w={};return u.forEach(S=>{w[S]=o.sqlite3_compileoption_used(S)}),w}else if(typeof u=="object")return Object.keys(u).forEach(w=>{u[w]=o.sqlite3_compileoption_used(w)}),u}else{if(l._result)return l._result;l._opt||(l._rx=/^([^=]+)=(.+)/,l._rxInt=/^-?\d+$/,l._opt=function(ue,ge){const de=l._rx.exec(ue);ge[0]=de?de[1]:ue,ge[1]=de?l._rxInt.test(de[2])?+de[2]:de[2]:!0});const w={},S=[0,0];let G=0,se;for(;se=o.sqlite3_compileoption_get(G++);)l._opt(se,S),w[S[0]]=S[1];return l._result=w}return typeof u=="string"?!!o.sqlite3_compileoption_used(u):!1},a.pstack=Object.assign(Object.create(null),{restore:a.exports.sqlite3__wasm_pstack_restore,alloc:function(l){return typeof l=="string"&&!(l=a.sizeofIR(l))&&b.toss("Invalid value for pstack.alloc(",arguments[0],")"),a.exports.sqlite3__wasm_pstack_alloc(l)||b.toss("Could not allocate",l,"bytes from the pstack.")},allocChunks:function(l,u){typeof u=="string"&&!(u=a.sizeofIR(u))&&b.toss("Invalid size value for allocChunks(",arguments[1],")");const w=a.pstack.alloc(l*u),S=[];let G=0,se=0;for(;G<l;++G,se+=u)S.push(w+se);return S},allocPtr:(l=1,u=!0)=>l===1?a.pstack.alloc(u?8:a.ptrSizeof):a.pstack.allocChunks(l,u?8:a.ptrSizeof),call:function(l){const u=a.pstack.pointer;try{return l(g)}finally{a.pstack.restore(u)}}}),Object.defineProperties(a.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3__wasm_pstack_remaining}}),o.sqlite3_randomness=(...l)=>{if(l.length===1&&x.isTypedArray(l[0])&&l[0].BYTES_PER_ELEMENT===1){const u=l[0];if(u.byteLength===0)return a.exports.sqlite3_randomness(0,0),u;const w=a.pstack.pointer;try{let S=u.byteLength,G=0;const se=a.exports.sqlite3_randomness,ue=a.heap8u(),ge=S<512?S:512,de=a.pstack.alloc(ge);do{const me=S>ge?ge:S;se(me,de),u.set(F(ue,de,de+me),G),S-=me,G+=me}while(S>0)}catch(S){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",S)}finally{a.pstack.restore(w)}return u}a.exports.sqlite3_randomness(...l)};let $;if(o.sqlite3_wasmfs_opfs_dir=function(){if($!==void 0)return $;const l=r.wasmfsOpfsDir;if(!l||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return $="";try{return l&&a.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],l)===0?$=l:$=""}catch{return $=""}},o.sqlite3_wasmfs_filename_is_persistent=function(l){const u=o.sqlite3_wasmfs_opfs_dir();return u&&l?l.startsWith(u+"/"):!1},o.sqlite3_js_db_uses_vfs=function(l,u,w=0){try{const S=o.sqlite3_vfs_find(u);return S?l?S===o.sqlite3_js_db_vfs(l,w)?S:!1:S===o.sqlite3_vfs_find(0)?S:!1:!1}catch{return!1}},o.sqlite3_js_vfs_list=function(){const l=[];let u=o.sqlite3_vfs_find(0);for(;u;){const w=new o.sqlite3_vfs(u);l.push(a.cstrToJs(w.$zName)),u=w.$pNext,w.dispose()}return l},o.sqlite3_js_db_export=function(l,u=0){l=a.xWrap.testConvertArg("sqlite3*",l),l||M("Invalid sqlite3* argument."),a.bigIntEnabled||M("BigInt64 support is not enabled.");const w=a.scopedAllocPush();let S;try{const G=a.scopedAlloc(8+a.ptrSizeof),se=G+8,ue=u?a.isPtr(u)?u:a.scopedAllocCString(""+u):0;let ge=a.exports.sqlite3__wasm_db_serialize(l,ue,se,G,0);ge&&M("Database serialization failed with code",g.capi.sqlite3_js_rc_str(ge)),S=a.peekPtr(se);const de=a.peek(G,"i64");return ge=de?a.heap8u().slice(S,S+Number(de)):new Uint8Array,ge}finally{S&&a.exports.sqlite3_free(S),a.scopedAllocPop(w)}},o.sqlite3_js_db_vfs=(l,u=0)=>x.sqlite3__wasm_db_vfs(l,u),o.sqlite3_js_aggregate_context=(l,u)=>o.sqlite3_aggregate_context(l,u)||(u?b.toss("Cannot allocate",u,"bytes for sqlite3_aggregate_context()"):0),o.sqlite3_js_posix_create_file=function(l,u,w){let S;u&&a.isPtr(u)?S=u:u instanceof ArrayBuffer||u instanceof Uint8Array?(S=a.allocFromTypedArray(u),(arguments.length<3||!x.isInt32(w)||w<0)&&(w=u.byteLength)):N.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!x.isInt32(w)||w<0)&&N.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const G=x.sqlite3__wasm_posix_create_file(l,S,w);G&&N.toss("Creation of file failed with sqlite3 result code",o.sqlite3_js_rc_str(G))}finally{a.dealloc(S)}},o.sqlite3_js_vfs_create_file=function(l,u,w,S){r.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let G;w?(a.isPtr(w)?G=w:w instanceof ArrayBuffer&&(w=new Uint8Array(w)),w instanceof Uint8Array?(G=a.allocFromTypedArray(w),(arguments.length<4||!x.isInt32(S)||S<0)&&(S=w.byteLength)):N.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):G=0,(!x.isInt32(S)||S<0)&&(a.dealloc(G),N.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const se=x.sqlite3__wasm_vfs_create_file(l,u,G,S);se&&N.toss("Creation of file failed with sqlite3 result code",o.sqlite3_js_rc_str(se))}finally{a.dealloc(G)}},o.sqlite3_js_sql_to_string=l=>{if(typeof l=="string")return l;const u=_(v);return u===v?void 0:u},x.isUIThread()){const l=function(u){const w=Object.create(null);return w.prefix="kvvfs-"+u,w.stores=[],(u==="session"||u==="")&&w.stores.push(globalThis.sessionStorage),(u==="local"||u==="")&&w.stores.push(globalThis.localStorage),w};o.sqlite3_js_kvvfs_clear=function(u=""){let w=0;const S=l(u);return S.stores.forEach(G=>{const se=[];let ue;for(ue=0;ue<G.length;++ue){const ge=G.key(ue);ge.startsWith(S.prefix)&&se.push(ge)}se.forEach(ge=>G.removeItem(ge)),w+=se.length}),w},o.sqlite3_js_kvvfs_size=function(u=""){let w=0;const S=l(u);return S.stores.forEach(G=>{let se;for(se=0;se<G.length;++se){const ue=G.key(se);ue.startsWith(S.prefix)&&(w+=ue.length,w+=G.getItem(ue).length)}}),w*2}}o.sqlite3_db_config=(function(l,u,...w){switch(u){case o.SQLITE_DBCONFIG_ENABLE_FKEY:case o.SQLITE_DBCONFIG_ENABLE_TRIGGER:case o.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case o.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case o.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case o.SQLITE_DBCONFIG_ENABLE_QPSG:case o.SQLITE_DBCONFIG_TRIGGER_EQP:case o.SQLITE_DBCONFIG_RESET_DATABASE:case o.SQLITE_DBCONFIG_DEFENSIVE:case o.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case o.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case o.SQLITE_DBCONFIG_DQS_DML:case o.SQLITE_DBCONFIG_DQS_DDL:case o.SQLITE_DBCONFIG_ENABLE_VIEW:case o.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case o.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case o.SQLITE_DBCONFIG_STMT_SCANSTATUS:case o.SQLITE_DBCONFIG_REVERSE_SCANORDER:case o.SQLITE_DBCONFIG_ENABLE_ATTACH_CREATE:case o.SQLITE_DBCONFIG_ENABLE_ATTACH_WRITE:case o.SQLITE_DBCONFIG_ENABLE_COMMENTS:return this.ip||(this.ip=a.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),this.ip(l,u,w[0],w[1]||0);case o.SQLITE_DBCONFIG_LOOKASIDE:return this.pii||(this.pii=a.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"])),this.pii(l,u,w[0],w[1],w[2]);case o.SQLITE_DBCONFIG_MAINDBNAME:return this.s||(this.s=a.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"])),this.s(l,u,w[0]);default:return o.SQLITE_MISUSE}}).bind(Object.create(null)),o.sqlite3_value_to_js=function(l,u=!0){let w;const S=o.sqlite3_value_type(l);switch(S){case o.SQLITE_INTEGER:a.bigIntEnabled?(w=o.sqlite3_value_int64(l),x.bigIntFitsDouble(w)&&(w=Number(w))):w=o.sqlite3_value_double(l);break;case o.SQLITE_FLOAT:w=o.sqlite3_value_double(l);break;case o.SQLITE_TEXT:w=o.sqlite3_value_text(l);break;case o.SQLITE_BLOB:{const G=o.sqlite3_value_bytes(l),se=o.sqlite3_value_blob(l);G&&!se&&g.WasmAllocError.toss("Cannot allocate memory for blob argument of",G,"byte(s)"),w=G?a.heap8u().slice(se,se+Number(G)):null;break}case o.SQLITE_NULL:w=null;break;default:u&&M(o.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",S),w=void 0}return w},o.sqlite3_values_to_js=function(l,u,w=!0){let S;const G=[];for(S=0;S<l;++S)G.push(o.sqlite3_value_to_js(a.peekPtr(u+a.ptrSizeof*S),w));return G},o.sqlite3_result_error_js=function(l,u){u instanceof b?o.sqlite3_result_error_nomem(l):o.sqlite3_result_error(l,""+u,-1)},o.sqlite3_result_js=function(l,u){if(u instanceof Error){o.sqlite3_result_error_js(l,u);return}try{switch(typeof u){case"undefined":break;case"boolean":o.sqlite3_result_int(l,u?1:0);break;case"bigint":x.bigIntFits32(u)?o.sqlite3_result_int(l,Number(u)):x.bigIntFitsDouble(u)?o.sqlite3_result_double(l,Number(u)):a.bigIntEnabled?x.bigIntFits64(u)?o.sqlite3_result_int64(l,u):M("BigInt value",u.toString(),"is too BigInt for int64."):M("BigInt value",u.toString(),"is too BigInt.");break;case"number":{let w;x.isInt32(u)?w=o.sqlite3_result_int:a.bigIntEnabled&&Number.isInteger(u)&&x.bigIntFits64(BigInt(u))?w=o.sqlite3_result_int64:w=o.sqlite3_result_double,w(l,u);break}case"string":{const[w,S]=a.allocCString(u,!0);o.sqlite3_result_text(l,w,S,o.SQLITE_WASM_DEALLOC);break}case"object":if(u===null){o.sqlite3_result_null(l);break}else if(x.isBindableTypedArray(u)){const w=a.allocFromTypedArray(u);o.sqlite3_result_blob(l,w,u.byteLength,o.SQLITE_WASM_DEALLOC);break}default:M("Don't not how to handle this UDF result value:",typeof u,u)}}catch(w){o.sqlite3_result_error_js(l,w)}},o.sqlite3_column_js=function(l,u,w=!0){const S=o.sqlite3_column_value(l,u);return S===0?void 0:o.sqlite3_value_to_js(S,w)};const f=(function(l,u,w){w=o[w],this.ptr?a.pokePtr(this.ptr,0):this.ptr=a.allocPtr();const S=w(l,u,this.ptr);if(S)return N.toss(S,arguments[2]+"() failed with code "+S);const G=a.peekPtr(this.ptr);return G?o.sqlite3_value_to_js(G,!0):void 0}).bind(Object.create(null));o.sqlite3_preupdate_new_js=(l,u)=>f(l,u,"sqlite3_preupdate_new"),o.sqlite3_preupdate_old_js=(l,u)=>f(l,u,"sqlite3_preupdate_old"),o.sqlite3changeset_new_js=(l,u)=>f(l,u,"sqlite3changeset_new"),o.sqlite3changeset_old_js=(l,u)=>f(l,u,"sqlite3changeset_old");const g={WasmAllocError:b,SQLite3Error:N,capi:o,util:x,wasm:a,config:r,version:Object.create(null),client:void 0,asyncPostInit:async function l(){if(l.isReady instanceof Promise)return l.isReady;let u=t.initializersAsync;delete t.initializersAsync;const w=async()=>(g.__isUnderTest||(delete g.util,delete g.StructBinder),g),S=se=>{throw r.error("an async sqlite3 initializer failed:",se),se};if(!u||!u.length)return l.isReady=w().catch(S);u=u.map(se=>se instanceof Function?async ue=>se(g):se),u.push(w);let G=Promise.resolve(g);for(;u.length;)G=G.then(u.shift());return l.isReady=G.catch(S)},scriptInfo:void 0};try{t.initializers.forEach(l=>{l(g)})}catch(l){throw console.error("sqlite3 bootstrap initializer threw:",l),l}return delete t.initializers,t.sqlite3=g,g},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(t){t.bigIntEnabled===void 0&&(t.bigIntEnabled=!!globalThis.BigInt64Array);const n=(..._)=>{throw new Error(_.join(" "))};t.exports||Object.defineProperty(t,"exports",{enumerable:!0,configurable:!0,get:()=>t.instance&&t.instance.exports});const r=t.pointerIR||"i32",o=t.ptrSizeof=r==="i32"?4:r==="i64"?8:n("Unhandled ptrSizeof:",r),a=Object.create(null);a.heapSize=0,a.memory=null,a.freeFuncIndexes=[],a.scopedAlloc=[],a.utf8Decoder=new TextDecoder,a.utf8Encoder=new TextEncoder("utf-8"),t.sizeofIR=_=>{switch(_){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return o;default:return(""+_).endsWith("*")?o:void 0}};const p=function(){if(!a.memory)a.memory=t.memory instanceof WebAssembly.Memory?t.memory:t.exports.memory;else if(a.heapSize===a.memory.buffer.byteLength)return a;const _=a.memory.buffer;return a.HEAP8=new Int8Array(_),a.HEAP8U=new Uint8Array(_),a.HEAP16=new Int16Array(_),a.HEAP16U=new Uint16Array(_),a.HEAP32=new Int32Array(_),a.HEAP32U=new Uint32Array(_),t.bigIntEnabled&&(a.HEAP64=new BigInt64Array(_),a.HEAP64U=new BigUint64Array(_)),a.HEAP32F=new Float32Array(_),a.HEAP64F=new Float64Array(_),a.heapSize=_.byteLength,a};t.heap8=()=>p().HEAP8,t.heap8u=()=>p().HEAP8U,t.heap16=()=>p().HEAP16,t.heap16u=()=>p().HEAP16U,t.heap32=()=>p().HEAP32,t.heap32u=()=>p().HEAP32U,t.heapForSize=function(_,b=!0){const x=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:p();switch(_){case Int8Array:return x.HEAP8;case Uint8Array:return x.HEAP8U;case Int16Array:return x.HEAP16;case Uint16Array:return x.HEAP16U;case Int32Array:return x.HEAP32;case Uint32Array:return x.HEAP32U;case 8:return b?x.HEAP8U:x.HEAP8;case 16:return b?x.HEAP16U:x.HEAP16;case 32:return b?x.HEAP32U:x.HEAP32;case 64:if(x.HEAP64)return b?x.HEAP64U:x.HEAP64;break;default:if(t.bigIntEnabled){if(_===globalThis.BigUint64Array)return x.HEAP64U;if(_===globalThis.BigInt64Array)return x.HEAP64;break}}n("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},t.functionTable=function(){return t.exports.__indirect_function_table},t.functionEntry=function(_){const b=t.functionTable();return _<b.length?b.get(_):void 0},t.jsFuncToWasm=function _(b,x){if(_._||(_._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(g,l,u){u<128?g[l](u):g[l](u%128|128,u>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(g){const l=_._.rxJSig.exec(g);return l?l[2]:g.substr(1)},letterType:g=>_._.sigTypes[g]||n("Invalid signature letter:",g),pushSigType:(g,l)=>g.push(_._.typeCodes[_._.letterType(l)])}),typeof b=="string"){const g=x;x=b,b=g}const $=_._.sigParams(x),f=[1,96];_._.uleb128Encode(f,"push",$.length);for(const g of $)_._.pushSigType(f,g);return x[0]==="v"?f.push(0):(f.push(1),_._.pushSigType(f,x[0])),_._.uleb128Encode(f,"unshift",f.length),f.unshift(0,97,115,109,1,0,0,0,1),f.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(f)),{e:{f:b}}).exports.f};const q=function(b,x,$){if($&&!a.scopedAlloc.length&&n("No scopedAllocPush() scope is active."),typeof b=="string"){const u=x;x=b,b=u}(typeof x!="string"||!(b instanceof Function))&&n("Invalid arguments: expecting (function,signature) or (signature,function).");const f=t.functionTable(),g=f.length;let l;for(;a.freeFuncIndexes.length&&(l=a.freeFuncIndexes.pop(),f.get(l));){l=null;continue}l||(l=g,f.grow(1));try{return f.set(l,b),$&&a.scopedAlloc[a.scopedAlloc.length-1].push(l),l}catch(u){if(!(u instanceof TypeError))throw l===g&&a.freeFuncIndexes.push(g),u}try{const u=t.jsFuncToWasm(b,x);f.set(l,u),$&&a.scopedAlloc[a.scopedAlloc.length-1].push(l)}catch(u){throw l===g&&a.freeFuncIndexes.push(g),u}return l};t.installFunction=(_,b)=>q(_,b,!1),t.scopedInstallFunction=(_,b)=>q(_,b,!0),t.uninstallFunction=function(_){if(!_&&_!==0)return;const b=a.freeFuncIndexes,x=t.functionTable();b.push(_);const $=x.get(_);return x.set(_,null),$},t.peek=function(b,x="i8"){x.endsWith("*")&&(x=r);const $=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:p(),f=Array.isArray(b)?[]:void 0;let g;do{switch(f&&(b=arguments[0].shift()),x){case"i1":case"i8":g=$.HEAP8[b>>0];break;case"i16":g=$.HEAP16[b>>1];break;case"i32":g=$.HEAP32[b>>2];break;case"float":case"f32":g=$.HEAP32F[b>>2];break;case"double":case"f64":g=Number($.HEAP64F[b>>3]);break;case"i64":if(t.bigIntEnabled){g=BigInt($.HEAP64[b>>3]);break}default:n("Invalid type for peek():",x)}f&&f.push(g)}while(f&&arguments[0].length);return f||g},t.poke=function(_,b,x="i8"){x.endsWith("*")&&(x=r);const $=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:p();for(const f of Array.isArray(_)?_:[_])switch(x){case"i1":case"i8":$.HEAP8[f>>0]=b;continue;case"i16":$.HEAP16[f>>1]=b;continue;case"i32":$.HEAP32[f>>2]=b;continue;case"float":case"f32":$.HEAP32F[f>>2]=b;continue;case"double":case"f64":$.HEAP64F[f>>3]=b;continue;case"i64":if($.HEAP64){$.HEAP64[f>>3]=BigInt(b);continue}default:n("Invalid type for poke(): "+x)}return this},t.peekPtr=(..._)=>t.peek(_.length===1?_[0]:_,r),t.pokePtr=(_,b=0)=>t.poke(_,b,r),t.peek8=(..._)=>t.peek(_.length===1?_[0]:_,"i8"),t.poke8=(_,b)=>t.poke(_,b,"i8"),t.peek16=(..._)=>t.peek(_.length===1?_[0]:_,"i16"),t.poke16=(_,b)=>t.poke(_,b,"i16"),t.peek32=(..._)=>t.peek(_.length===1?_[0]:_,"i32"),t.poke32=(_,b)=>t.poke(_,b,"i32"),t.peek64=(..._)=>t.peek(_.length===1?_[0]:_,"i64"),t.poke64=(_,b)=>t.poke(_,b,"i64"),t.peek32f=(..._)=>t.peek(_.length===1?_[0]:_,"f32"),t.poke32f=(_,b)=>t.poke(_,b,"f32"),t.peek64f=(..._)=>t.peek(_.length===1?_[0]:_,"f64"),t.poke64f=(_,b)=>t.poke(_,b,"f64"),t.getMemValue=t.peek,t.getPtrValue=t.peekPtr,t.setMemValue=t.poke,t.setPtrValue=t.pokePtr,t.isPtr32=_=>typeof _=="number"&&_===(_|0)&&_>=0,t.isPtr=t.isPtr32,t.cstrlen=function(_){if(!_||!t.isPtr(_))return null;const b=p().HEAP8U;let x=_;for(;b[x]!==0;++x);return x-_};const N=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,M=function(_,b,x){return a.utf8Decoder.decode(_.buffer instanceof N?_.slice(b,x):_.subarray(b,x))};t.cstrToJs=function(_){const b=t.cstrlen(_);return b?M(p().HEAP8U,_,_+b):b===null?b:""},t.jstrlen=function(_){if(typeof _!="string")return null;const b=_.length;let x=0;for(let $=0;$<b;++$){let f=_.charCodeAt($);f>=55296&&f<=57343&&(f=65536+((f&1023)<<10)|_.charCodeAt(++$)&1023),f<=127?++x:f<=2047?x+=2:f<=65535?x+=3:x+=4}return x},t.jstrcpy=function(_,b,x=0,$=-1,f=!0){if((!b||!(b instanceof Int8Array)&&!(b instanceof Uint8Array))&&n("jstrcpy() target must be an Int8Array or Uint8Array."),$<0&&($=b.length-x),!($>0)||!(x>=0))return 0;let g=0,l=_.length;const u=x,w=x+$-(f?1:0);for(;g<l&&x<w;++g){let S=_.charCodeAt(g);if(S>=55296&&S<=57343&&(S=65536+((S&1023)<<10)|_.charCodeAt(++g)&1023),S<=127){if(x>=w)break;b[x++]=S}else if(S<=2047){if(x+1>=w)break;b[x++]=192|S>>6,b[x++]=128|S&63}else if(S<=65535){if(x+2>=w)break;b[x++]=224|S>>12,b[x++]=128|S>>6&63,b[x++]=128|S&63}else{if(x+3>=w)break;b[x++]=240|S>>18,b[x++]=128|S>>12&63,b[x++]=128|S>>6&63,b[x++]=128|S&63}}return f&&(b[x++]=0),x-u},t.cstrncpy=function(_,b,x){if((!_||!b)&&n("cstrncpy() does not accept NULL strings."),x<0)x=t.cstrlen(strPtr)+1;else if(!(x>0))return 0;const $=t.heap8u();let f=0,g;for(;f<x&&(g=$[b+f]);++f)$[_+f]=g;return f<x&&($[_+f++]=0),f},t.jstrToUintArray=(_,b=!1)=>a.utf8Encoder.encode(b?_+"\0":_);const Y=(_,b)=>{(!(_.alloc instanceof Function)||!(_.dealloc instanceof Function))&&n("Object is missing alloc() and/or dealloc() function(s)","required by",b+"().")},J=function(_,b,x,$){if(Y(t,$),typeof _!="string")return null;{const f=a.utf8Encoder.encode(_),g=x(f.length+1),l=p().HEAP8U;return l.set(f,g),l[g+f.length]=0,b?[g,f.length]:g}};t.allocCString=(_,b=!1)=>J(_,b,t.alloc,"allocCString()"),t.scopedAllocPush=function(){Y(t,"scopedAllocPush");const _=[];return a.scopedAlloc.push(_),_},t.scopedAllocPop=function(_){Y(t,"scopedAllocPop");const b=arguments.length?a.scopedAlloc.indexOf(_):a.scopedAlloc.length-1;b<0&&n("Invalid state object for scopedAllocPop()."),arguments.length===0&&(_=a.scopedAlloc[b]),a.scopedAlloc.splice(b,1);for(let x;x=_.pop();)t.functionEntry(x)?t.uninstallFunction(x):t.dealloc(x)},t.scopedAlloc=function(_){a.scopedAlloc.length||n("No scopedAllocPush() scope is active.");const b=t.alloc(_);return a.scopedAlloc[a.scopedAlloc.length-1].push(b),b},Object.defineProperty(t.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>a.scopedAlloc.length,set:()=>n("The 'active' property is read-only.")}),t.scopedAllocCString=(_,b=!1)=>J(_,b,t.scopedAlloc,"scopedAllocCString()");const D=function(_,b){const x=t[_?"scopedAlloc":"alloc"]((b.length+1)*t.ptrSizeof);let $=0;return b.forEach(f=>{t.pokePtr(x+t.ptrSizeof*$++,t[_?"scopedAllocCString":"allocCString"](""+f))}),t.pokePtr(x+t.ptrSizeof*$,0),x};t.scopedAllocMainArgv=_=>D(!0,_),t.allocMainArgv=_=>D(!1,_),t.cArgvToJs=(_,b)=>{const x=[];for(let $=0;$<_;++$){const f=t.peekPtr(b+t.ptrSizeof*$);x.push(f?t.cstrToJs(f):null)}return x},t.scopedAllocCall=function(_){t.scopedAllocPush();try{return _()}finally{t.scopedAllocPop()}};const P=function(_,b,x){Y(t,x);const $=b?"i64":r;let f=t[x](_*(b?8:o));if(t.poke(f,0,$),_===1)return f;const g=[f];for(let l=1;l<_;++l)f+=b?8:o,g[l]=f,t.poke(f,0,$);return g};t.allocPtr=(_=1,b=!0)=>P(_,b,"alloc"),t.scopedAllocPtr=(_=1,b=!0)=>P(_,b,"scopedAlloc"),t.xGet=function(_){return t.exports[_]||n("Cannot find exported symbol:",_)};const z=(_,b)=>n(_+"() requires",b,"argument(s).");t.xCall=function(_,...b){const x=_ instanceof Function?_:t.xGet(_);return x instanceof Function||n("Exported symbol",_,"is not a function."),x.length!==b.length&&z(x===_?x.name:_,x.length),arguments.length===2&&Array.isArray(arguments[1])?x.apply(null,arguments[1]):x.apply(null,b)},a.xWrap=Object.create(null),a.xWrap.convert=Object.create(null),a.xWrap.convert.arg=new Map,a.xWrap.convert.result=new Map;const A=a.xWrap.convert.arg,T=a.xWrap.convert.result;t.bigIntEnabled&&A.set("i64",_=>BigInt(_));const F=r==="i32"?_=>_|0:_=>BigInt(_)|BigInt(0);A.set("i32",F).set("i16",_=>(_|0)&65535).set("i8",_=>(_|0)&255).set("f32",_=>Number(_).valueOf()).set("float",A.get("f32")).set("f64",A.get("f32")).set("double",A.get("f64")).set("int",A.get("i32")).set("null",_=>_).set(null,A.get("null")).set("**",F).set("*",F),T.set("*",F).set("pointer",F).set("number",_=>Number(_)).set("void",_=>{}).set("null",_=>_).set(null,T.get("null"));{const _=["i8","i16","i32","int","f32","float","f64","double"];t.bigIntEnabled&&_.push("i64");const b=A.get(r);for(const x of _)A.set(x+"*",b),T.set(x+"*",b),T.set(x,A.get(x)||n("Missing arg converter:",x))}const R=function(_){return typeof _=="string"?t.scopedAllocCString(_):_?F(_):null};A.set("string",R).set("utf8",R).set("pointer",R),T.set("string",_=>t.cstrToJs(_)).set("utf8",T.get("string")).set("string:dealloc",_=>{try{return _?t.cstrToJs(_):null}finally{t.dealloc(_)}}).set("utf8:dealloc",T.get("string:dealloc")).set("json",_=>JSON.parse(t.cstrToJs(_))).set("json:dealloc",_=>{try{return _?JSON.parse(t.cstrToJs(_)):null}finally{t.dealloc(_)}});const U=class{constructor(_){this.name=_.name||"unnamed adapter"}convertArg(_,b,x){n("AbstractArgAdapter must be subclassed.")}};A.FuncPtrAdapter=class Rt extends U{constructor(b){super(b),A.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",b),this.name=b.name||"unnamed",this.signature=b.signature,b.contextKey instanceof Function&&(this.contextKey=b.contextKey,b.bindScope||(b.bindScope="context")),this.bindScope=b.bindScope||n("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Rt.bindScopes.indexOf(b.bindScope)<0&&n("Invalid options.bindScope ("+b.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Rt.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=b.callProxy instanceof Function?b.callProxy:void 0}contextKey(b,x){return this}contextMap(b){const x=this.__cmap||(this.__cmap=new Map);let $=x.get(b);return $===void 0&&x.set(b,$=[]),$}convertArg(b,x,$){let f=this.singleton;if(!f&&this.isContext&&(f=this.contextMap(this.contextKey(x,$))),f&&f[0]===b)return f[1];if(b instanceof Function){this.callProxy&&(b=this.callProxy(b));const g=q(b,this.signature,this.isTransient);if(Rt.debugFuncInstall&&Rt.debugOut("FuncPtrAdapter installed",this,this.contextKey(x,$),"@"+g,b),f){if(f[1]){Rt.debugFuncInstall&&Rt.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(x,$),"@"+f[1],b);try{a.scopedAlloc[a.scopedAlloc.length-1].push(f[1])}catch{}}f[0]=b,f[1]=g}return g}else if(t.isPtr(b)||b===null||b===void 0){if(f&&f[1]&&f[1]!==b){Rt.debugFuncInstall&&Rt.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(x,$),"@"+f[1],b);try{a.scopedAlloc[a.scopedAlloc.length-1].push(f[1])}catch{}f[0]=f[1]=b|0}return b||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},A.FuncPtrAdapter.warnOnUse=!1,A.FuncPtrAdapter.debugFuncInstall=!1,A.FuncPtrAdapter.debugOut=console.debug.bind(console),A.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const O=_=>A.get(_)||n("Argument adapter not found:",_),W=_=>T.get(_)||n("Result adapter not found:",_);a.xWrap.convertArg=(_,...b)=>O(_)(...b),a.xWrap.convertArgNoCheck=(_,...b)=>A.get(_)(...b),a.xWrap.convertResult=(_,b)=>_===null?b:_?W(_)(b):void 0,a.xWrap.convertResultNoCheck=(_,b)=>_===null?b:_?T.get(_)(b):void 0,t.xWrap=function(_,b,...x){arguments.length===3&&Array.isArray(arguments[2])&&(x=arguments[2]),t.isPtr(_)&&(_=t.functionEntry(_)||n("Function pointer not found in WASM function table."));const $=_ instanceof Function,f=$?_:t.xGet(_);if($&&(_=f.name||"unnamed function"),x.length!==f.length&&z(_,f.length),b===null&&f.length===0)return f;b!=null&&W(b);for(const l of x)l instanceof U?A.set(l,(...u)=>l.convertArg(...u)):O(l);const g=a.xWrap;return f.length===0?(...l)=>l.length?z(_,f.length):g.convertResult(b,f.call(null)):function(...l){l.length!==f.length&&z(_,f.length);const u=t.scopedAllocPush();try{let w=0;for(;w<l.length;++w)l[w]=g.convertArgNoCheck(x[w],l[w],l,w);return g.convertResultNoCheck(b,f.apply(null,l))}finally{t.scopedAllocPop(u)}}};const X=function(_,b,x,$,f,g){if(typeof x=="string"){if(b===1)return g.get(x);if(b===2){if($)$ instanceof Function||n(f,"requires a function argument.");else return g.delete(x),_;return g.set(x,$),_}}n("Invalid arguments to",f)};return t.xWrap.resultAdapter=function _(b,x){return X(_,arguments.length,b,x,"resultAdapter()",T)},t.xWrap.argAdapter=function _(b,x){return X(_,arguments.length,b,x,"argAdapter()",A)},t.xWrap.FuncPtrAdapter=A.FuncPtrAdapter,t.xCallWrapped=function(_,b,x,...$){return Array.isArray(arguments[3])&&($=arguments[3]),t.xWrap(_,b,x||[]).apply(null,$||[])},t.xWrap.testConvertArg=a.xWrap.convertArg,t.xWrap.testConvertResult=a.xWrap.convertResult,t},globalThis.WhWasmUtilInstaller.yawl=(function(t){const n=()=>fetch(t.uri,{credentials:"same-origin"}),r=this,o=function(p){if(t.wasmUtilTarget){const q=(...M)=>{throw new Error(M.join(" "))},N=t.wasmUtilTarget;if(N.module=p.module,N.instance=p.instance,N.instance.exports.memory||(N.memory=t.imports&&t.imports.env&&t.imports.env.memory||q("Missing 'memory' object!")),!N.alloc&&p.instance.exports.malloc){const M=p.instance.exports;N.alloc=function(Y){return M.malloc(Y)||q("Allocation of",Y,"bytes failed.")},N.dealloc=function(Y){M.free(Y)}}r(N)}return t.onload&&t.onload(p,t),p};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(n(),t.imports||{}).then(o)}:function(){return n().then(q=>q.arrayBuffer()).then(q=>WebAssembly.instantiate(q,t.imports||{})).then(o)}}).bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function t(n){const r=(...d)=>{throw new Error(d.join(" "))};!(n.heap instanceof WebAssembly.Memory)&&!(n.heap instanceof Function)&&r("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(d){n[d]instanceof Function||r("Config option '"+d+"' must be a function.")});const o=t,a=n.heap instanceof Function?n.heap:()=>new Uint8Array(n.heap.buffer),p=n.alloc,q=n.dealloc,N=n.log||console.log.bind(console),M=n.memberPrefix||"",Y=n.memberSuffix||"",J=n.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!n.bigIntEnabled,D=globalThis.BigInt,P=globalThis.BigInt64Array,z=n.ptrSizeof||4,A=n.ptrIR||"i32";o.debugFlags||(o.__makeDebugFlags=function(d=null){d&&d.__flags&&(d=d.__flags);const I=function L(B){return arguments.length===0?L.__flags:(B<0?(delete L.__flags.getter,delete L.__flags.setter,delete L.__flags.alloc,delete L.__flags.dealloc):(L.__flags.getter=(1&B)!==0,L.__flags.setter=(2&B)!==0,L.__flags.alloc=(4&B)!==0,L.__flags.dealloc=(8&B)!==0),L._flags)};return Object.defineProperty(I,"__flags",{iterable:!1,writable:!1,value:Object.create(d)}),d||I(0),I},o.debugFlags=o.__makeDebugFlags());const T=function(){const d=new ArrayBuffer(2);return new DataView(d).setInt16(0,256,!0),new Int16Array(d)[0]===256}(),F=d=>d[1]==="(",R=d=>d==="P",U=d=>F(d)?"p":d[0],O=function(d){switch(U(d)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return A;case"j":return"i64";case"f":return"float";case"d":return"double"}r("Unhandled signature IR:",d)},W=P?()=>!0:()=>r("BigInt64Array is not available."),X=function(d){switch(U(d)){case"p":case"P":case"s":{switch(z){case 4:return"getInt32";case 8:return W()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return W()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}r("Unhandled DataView getter for signature:",d)},_=function(d){switch(U(d)){case"p":case"P":case"s":{switch(z){case 4:return"setInt32";case 8:return W()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return W()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}r("Unhandled DataView setter for signature:",d)},b=function(d){switch(U(d)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return W()&&D;case"p":case"P":case"s":switch(z){case 4:return Number;case 8:return W()&&D}break}r("Unhandled DataView set wrapper for signature:",d)},x=(d,I)=>d+"::"+I,$=function(d,I){return()=>r(x(d,I),"is read-only.")},f=new WeakMap,g="(pointer-is-external)",l=function(d,I,L){if(L||(L=f.get(I)),L){if(f.delete(I),Array.isArray(I.ondispose)){let B;for(;B=I.ondispose.shift();)try{B instanceof Function?B.call(I):B instanceof ee?B.dispose():typeof B=="number"&&q(B)}catch(ne){console.warn("ondispose() for",d.structName,"@",L,"threw. NOT propagating it.",ne)}}else if(I.ondispose instanceof Function)try{I.ondispose()}catch(B){console.warn("ondispose() for",d.structName,"@",L,"threw. NOT propagating it.",B)}delete I.ondispose,d.debugFlags.__flags.dealloc&&N("debug.dealloc:",I[g]?"EXTERNAL":"",d.structName,"instance:",d.structInfo.sizeof,"bytes @"+L),I[g]||q(L)}},u=d=>({configurable:!1,writable:!1,iterable:!1,value:d}),w=function(d,I,L){let B=!L;L?Object.defineProperty(I,g,u(L)):(L=p(d.structInfo.sizeof),L||r("Allocation of",d.structName,"structure failed."));try{d.debugFlags.__flags.alloc&&N("debug.alloc:",B?"":"EXTERNAL",d.structName,"instance:",d.structInfo.sizeof,"bytes @"+L),B&&a().fill(0,L,L+d.structInfo.sizeof),f.set(I,L)}catch(ne){throw l(d,I,L),ne}},S=function(){const d=this.pointer;return d?new Uint8Array(a().slice(d,d+this.structInfo.sizeof)):null},se=u(d=>M+d+Y),ue=function(d,I,L=!0){let B=d.members[I];if(!B&&(M||Y)){for(const ne of Object.values(d.members))if(ne.key===I){B=ne;break}!B&&L&&r(x(d.name,I),"is not a mapped struct member.")}return B},ge=function d(I,L,B=!1){d._||(d._=ce=>ce.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const ne=ue(I.structInfo,L,!0);return B?d._(ne.signature):ne.signature},de={configurable:!1,enumerable:!1,get:function(){return f.get(this)},set:()=>r("Cannot assign the 'pointer' property of a struct.")},me=u(function(){const d=[];for(const I of Object.keys(this.structInfo.members))d.push(this.memberKey(I));return d}),qe=new TextDecoder("utf-8"),ve=new TextEncoder,Ie=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Oe=function(d,I,L){return qe.decode(d.buffer instanceof Ie?d.slice(I,L):d.subarray(I,L))},Ye=function(d,I,L=!1){const B=ue(d.structInfo,I,L);return B&&B.signature.length===1&&B.signature[0]==="s"?B:!1},Ce=function(d){d.signature!=="s"&&r("Invalid member type signature for C-string value:",JSON.stringify(d))},C=function(I,L){const B=ue(I.structInfo,L,!0);Ce(B);const ne=I[B.key];if(!ne)return null;let ce=ne;const Ee=a();for(;Ee[ce]!==0;++ce);return ne===ce?"":Oe(Ee,ne,ce)},Q=function(d,...I){d.ondispose?Array.isArray(d.ondispose)||(d.ondispose=[d.ondispose]):d.ondispose=[],d.ondispose.push(...I)},K=function(d){const I=ve.encode(d),L=p(I.length+1);L||r("Allocation error while duplicating string:",d);const B=a();return B.set(I,L),B[L+I.length]=0,L},re=function(d,I,L){const B=ue(d.structInfo,I,!0);Ce(B);const ne=K(L);return d[B.key]=ne,Q(d,ne),d},ee=function(I,L){arguments[2]!==u&&r("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:u(I),structInfo:u(L)})};ee.prototype=Object.create(null,{dispose:u(function(){l(this.constructor,this)}),lookupMember:u(function(d,I=!0){return ue(this.structInfo,d,I)}),memberToJsString:u(function(d){return C(this,d)}),memberIsString:u(function(d,I=!0){return Ye(this,d,I)}),memberKey:se,memberKeys:me,memberSignature:u(function(d,I=!1){return ge(this,d,I)}),memoryDump:u(S),pointer:de,setMemberCString:u(function(d,I){return re(this,d,I)})}),Object.assign(ee.prototype,{addOnDispose:function(...d){return Q(this,...d),this}}),Object.defineProperties(ee,{allocCString:u(K),isA:u(d=>d instanceof ee),hasExternalPointer:u(d=>d instanceof ee&&!!d[g]),memberKey:se});const ie=d=>Number.isFinite(d)||d instanceof(D||Number),V=function d(I,L,B){if(!d._){d._={getters:{},setters:{},sw:{}};const Je=["i","c","C","p","P","s","f","d","v()"];J&&Je.push("j"),Je.forEach(function(Ot){d._.getters[Ot]=X(Ot),d._.setters[Ot]=_(Ot),d._.sw[Ot]=b(Ot)});const li=/^[ipPsjfdcC]$/,ci=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;d.sigCheck=function(Ot,_i,ls,kr){Object.prototype.hasOwnProperty.call(Ot,ls)&&r(Ot.structName,"already has a property named",ls+"."),li.test(kr)||ci.test(kr)||r("Malformed signature for",x(Ot.structName,_i)+":",kr)}}const ne=I.memberKey(L);d.sigCheck(I.prototype,L,ne,B.signature),B.key=ne,B.name=L;const ce=U(B.signature),Ee=x(I.prototype.structName,ne),ke=I.prototype.debugFlags.__flags,ot=Object.create(null);ot.configurable=!1,ot.enumerable=!1,ot.get=function(){ke.getter&&N("debug.getter:",d._.getters[ce],"for",O(ce),Ee,"@",this.pointer,"+",B.offset,"sz",B.sizeof);let Je=new DataView(a().buffer,this.pointer+B.offset,B.sizeof)[d._.getters[ce]](0,T);return ke.getter&&N("debug.getter:",Ee,"result =",Je),Je},B.readOnly?ot.set=$(I.prototype.structName,ne):ot.set=function(Je){if(ke.setter&&N("debug.setter:",d._.setters[ce],"for",O(ce),Ee,"@",this.pointer,"+",B.offset,"sz",B.sizeof,Je),this.pointer||r("Cannot set struct property on disposed instance."),Je===null)Je=0;else for(;!ie(Je);){if(R(B.signature)&&Je instanceof ee){Je=Je.pointer||0,ke.setter&&N("debug.setter:",Ee,"resolved to",Je);break}r("Invalid value for pointer-type",Ee+".")}new DataView(a().buffer,this.pointer+B.offset,B.sizeof)[d._.setters[ce]](0,d._.sw[ce](Je),T)},Object.defineProperty(I.prototype,ne,ot)},m=function d(I,L){arguments.length===1?(L=I,I=L.name):L.name||(L.name=I),I||r("Struct name is required.");let B=!1;Object.keys(L.members).forEach(Ee=>{const ke=L.members[Ee];ke.sizeof?ke.sizeof===1?ke.signature==="c"||ke.signature==="C"||r("Unexpected sizeof==1 member",x(L.name,Ee),"with signature",ke.signature):(ke.sizeof%4!==0&&(console.warn("Invalid struct member description =",ke,"from",L),r(I,"member",Ee,"sizeof is not aligned. sizeof="+ke.sizeof)),ke.offset%4!==0&&(console.warn("Invalid struct member description =",ke,"from",L),r(I,"member",Ee,"offset is not aligned. offset="+ke.offset))):r(I,"member",Ee,"is missing sizeof."),(!B||B.offset<ke.offset)&&(B=ke)}),B?L.sizeof<B.offset+B.sizeof&&r("Invalid struct config:",I,"max member offset ("+B.offset+") ","extends past end of struct (sizeof="+L.sizeof+")."):r("No member property descriptions found.");const ne=u(o.__makeDebugFlags(d.debugFlags)),ce=function Ee(ke){this instanceof Ee?arguments.length?((ke!==(ke|0)||ke<=0)&&r("Invalid pointer value for",I,"constructor."),w(Ee,this,ke)):w(Ee,this):r("The",I,"constructor may only be called via 'new'.")};return Object.defineProperties(ce,{debugFlags:ne,isA:u(Ee=>Ee instanceof ce),memberKey:se,memberKeys:me,methodInfoForKey:u(function(Ee){}),structInfo:u(L),structName:u(I)}),ce.prototype=new ee(I,L,u),Object.defineProperties(ce.prototype,{debugFlags:ne,constructor:u(ce)}),Object.keys(L.members).forEach(Ee=>V(ce,Ee,L.members[Ee])),ce};return m.StructType=ee,m.config=n,m.allocCString=K,m.debugFlags||(m.debugFlags=o.__makeDebugFlags(o.debugFlags)),m},globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=(...A)=>{throw new Error(A.join(" "))};t.SQLite3Error.toss;const r=t.capi,o=t.wasm,a=t.util;if(globalThis.WhWasmUtilInstaller(o),delete globalThis.WhWasmUtilInstaller,o.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new o.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(A,T)=>A[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:A=>A[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new o.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:A=>{let T;return(F,R,U,O)=>{try{const W=o.cArgvToJs(R,U);return T||(T=o.cArgvToJs(R,O)),A(W,T)|0}catch(W){return W.resultCode||r.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:A=>A[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*","*"]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new o.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(A,T)=>A[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],o.exports.sqlite3_progress_handler&&o.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new o.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(A,T)=>A[0]}),"*"]]),o.exports.sqlite3_stmt_explain&&o.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),o.exports.sqlite3_set_authorizer&&o.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(A,T)=>A[0],callProxy:A=>(T,F,R,U,O,W)=>{try{return R=R&&o.cstrToJs(R),U=U&&o.cstrToJs(U),O=O&&o.cstrToJs(O),W=W&&o.cstrToJs(W),A(T,F,R,U,O,W)||0}catch(X){return X.resultCode||r.SQLITE_ERROR}}}),"*"]]),o.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:A=>A[0],callProxy:A=>(T,F,R,U,O)=>{A(T,F,o.cstrToJs(R),o.cstrToJs(U),O)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],o.bigIntEnabled&&o.exports.sqlite3_declare_vtab&&o.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),o.bigIntEnabled&&o.exports.sqlite3_preupdate_hook&&o.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:A=>A[0],callProxy:A=>(T,F,R,U,O,W,X)=>{A(T,F,R,o.cstrToJs(U),o.cstrToJs(O),W,X)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),o.bigIntEnabled&&o.exports.sqlite3changegroup_add&&o.exports.sqlite3session_create&&o.exports.sqlite3_preupdate_hook){const A={signature:"i(ps)",callProxy:T=>(F,R)=>{try{return T(F,o.cstrToJs(R))|0}catch(U){return U.resultCode||r.SQLITE_ERROR}}};o.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new o.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new o.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new o.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...A}),new o.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new o.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...A}),new o.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new o.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...A}),new o.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new o.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...A}),new o.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new o.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new o.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new o.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new o.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new o.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new o.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new o.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new o.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new o.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new o.xWrap.FuncPtrAdapter({name:"xFilter",...A,contextKey:(T,F)=>T[0]}),"*"]])}o.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],t.StructBinder=globalThis.Jaccwabyt({heap:o.heap8u,alloc:o.alloc,dealloc:o.dealloc,bigIntEnabled:o.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const A=o.xWrap.argAdapter("string");o.xWrap.argAdapter("string:flexible",O=>A(a.flexibleString(O))),o.xWrap.argAdapter("string:static",(function(O){return o.isPtr(O)?O:(O=""+O,this[O]||(this[O]=o.allocCString(O)))}).bind(Object.create(null)));const T=o.xWrap.argAdapter("*"),F=function(){};o.xWrap.argAdapter("sqlite3_filename",T)("sqlite3_context*",T)("sqlite3_value*",T)("void*",T)("sqlite3_changegroup*",T)("sqlite3_changeset_iter*",T)("sqlite3_session*",T)("sqlite3_stmt*",O=>{var W;return T(O instanceof(((W=t==null?void 0:t.oo1)==null?void 0:W.Stmt)||F)?O.pointer:O)})("sqlite3*",O=>{var W;return T(O instanceof(((W=t==null?void 0:t.oo1)==null?void 0:W.DB)||F)?O.pointer:O)})("sqlite3_vfs*",O=>typeof O=="string"?r.sqlite3_vfs_find(O)||t.SQLite3Error.toss(r.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",O):T(O instanceof(r.sqlite3_vfs||F)?O.pointer:O)),o.exports.sqlite3_declare_vtab&&o.xWrap.argAdapter("sqlite3_index_info*",O=>T(O instanceof(r.sqlite3_index_info||F)?O.pointer:O))("sqlite3_module*",O=>T(O instanceof(r.sqlite3_module||F)?O.pointer:O));const R=o.xWrap.resultAdapter("*");o.xWrap.resultAdapter("sqlite3*",R)("sqlite3_context*",R)("sqlite3_stmt*",R)("sqlite3_value*",R)("sqlite3_vfs*",R)("void*",R),o.exports.sqlite3_step.length===0&&(o.xWrap.doArgcCheck=!1,t.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const O of o.bindingSignatures)r[O[0]]=o.xWrap.apply(null,O);for(const O of o.bindingSignatures.wasmInternal)a[O[0]]=o.xWrap.apply(null,O);const U=function(O){return()=>n(O+"() is unavailable due to lack","of BigInt support in this build.")};for(const O of o.bindingSignatures.int64)r[O[0]]=o.bigIntEnabled?o.xWrap.apply(null,O):U(O[0]);if(delete o.bindingSignatures,o.exports.sqlite3__wasm_db_error){const O=o.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");a.sqlite3__wasm_db_error=function(W,X,_){return X instanceof t.WasmAllocError?(X=r.SQLITE_NOMEM,_=0):X instanceof Error&&(_=_||""+X,X=X.resultCode||r.SQLITE_ERROR),W?O(W,X,_):X}}else a.sqlite3__wasm_db_error=function(O,W,X){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),W}}{const A=o.xCall("sqlite3__wasm_enum_json");A||n("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),o.ctype=JSON.parse(o.cstrToJs(A));const T=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];o.bigIntEnabled&&T.push("serialize","session","vtab");for(const U of T)for(const O of Object.entries(o.ctype[U]))r[O[0]]=O[1];o.functionEntry(r.SQLITE_WASM_DEALLOC)||n("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+r.SQLITE_WASM_DEALLOC+").");const F=Object.create(null);for(const U of["resultCodes"])for(const O of Object.entries(o.ctype[U]))F[O[1]]=O[0];r.sqlite3_js_rc_str=U=>F[U];const R=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!a.isUIThread(),sqlite3_index_info:!o.bigIntEnabled,sqlite3_index_constraint:!o.bigIntEnabled,sqlite3_index_orderby:!o.bigIntEnabled,sqlite3_index_constraint_usage:!o.bigIntEnabled});for(const U of o.ctype.structs)R[U.name]||(r[U.name]=t.StructBinder(U));if(r.sqlite3_index_info){for(const U of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])r.sqlite3_index_info[U]=r[U],delete r[U];r.sqlite3_vtab_config=o.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const p=(A,T,F)=>a.sqlite3__wasm_db_error(A,r.SQLITE_MISUSE,T+"() requires "+F+" argument"+(F===1?"":"s")+"."),q=A=>a.sqlite3__wasm_db_error(A,r.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),N=A=>o.xWrap.argAdapter("sqlite3*")(A),M=A=>o.isPtr(A)?o.cstrToJs(A):A,Y=(function(A,T){A=N(A);let F=this.dbMap.get(A);if(T)!F&&T>0&&this.dbMap.set(A,F=Object.create(null));else return this.dbMap.delete(A),F;return F}).bind(Object.assign(Object.create(null),{dbMap:new Map}));Y.addCollation=function(A,T){const F=Y(A,1);F.collation||(F.collation=new Set),F.collation.add(M(T).toLowerCase())},Y._addUDF=function(A,T,F,R){T=M(T).toLowerCase();let U=R.get(T);U||R.set(T,U=new Set),U.add(F<0?-1:F)},Y.addFunction=function(A,T,F){const R=Y(A,1);R.udf||(R.udf=new Map),this._addUDF(A,T,F,R.udf)},o.exports.sqlite3_create_window_function&&(Y.addWindowFunc=function(A,T,F){const R=Y(A,1);R.wudf||(R.wudf=new Map),this._addUDF(A,T,F,R.wudf)}),Y.cleanup=function(A){A=N(A);const T=[A];for(const U of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const O=o.exports[U];if(O){T.length=O.length;try{r[U](...T)}catch(W){t.config.warn("close-time call of",U+"(",T,") threw:",W)}}}const F=Y(A,0);if(!F)return;if(F.collation){for(const U of F.collation)try{r.sqlite3_create_collation_v2(A,U,r.SQLITE_UTF8,0,0,0)}catch{}delete F.collation}let R;for(R=0;R<2;++R){const U=R?F.wudf:F.udf;if(!U)continue;const O=R?r.sqlite3_create_window_function:r.sqlite3_create_function_v2;for(const W of U){const X=W[0],_=W[1],b=[A,X,0,r.SQLITE_UTF8,0,0,0,0,0];R&&b.push(0);for(const x of _)try{b[2]=x,O.apply(null,b)}catch{}_.clear()}U.clear()}delete F.udf,delete F.wudf};{const A=o.xWrap("sqlite3_close_v2","int","sqlite3*");r.sqlite3_close_v2=function(T){if(arguments.length!==1)return p(T,"sqlite3_close_v2",1);if(T)try{Y.cleanup(T)}catch{}return A(T)}}if(r.sqlite3session_create){const A=o.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);r.sqlite3session_delete=function(T){if(arguments.length!==1)return p(pDb,"sqlite3session_delete",1);T&&r.sqlite3session_table_filter(T,0,0),A(T)}}{const A=(F,R)=>"argv["+R+"]:"+F[0]+":"+o.cstrToJs(F[1]).toLowerCase(),T=o.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new o.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:A}),new o.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:A})]);r.sqlite3_create_collation_v2=function(F,R,U,O,W,X){if(arguments.length!==6)return p(F,"sqlite3_create_collation_v2",6);if((U&15)===0)U|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(U&15))return q(F);try{const _=T(F,R,U,O,W,X);return _===0&&W instanceof Function&&Y.addCollation(F,R),_}catch(_){return a.sqlite3__wasm_db_error(F,_)}},r.sqlite3_create_collation=(F,R,U,O,W)=>arguments.length===5?r.sqlite3_create_collation_v2(F,R,U,O,W,0):p(F,"sqlite3_create_collation",5)}{const A=function(U,O){return U[0]+":"+(U[2]<0?-1:U[2])+":"+O+":"+o.cstrToJs(U[1]).toLowerCase()},T=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:A,callProxy:U=>(O,W,X)=>{try{U(O,...r.sqlite3_values_to_js(W,X))}catch(_){r.sqlite3_result_error_js(O,_)}}},xFinalAndValue:{signature:"v(p)",contextKey:A,callProxy:U=>O=>{try{r.sqlite3_result_js(O,U(O))}catch(W){r.sqlite3_result_error_js(O,W)}}},xFunc:{signature:"v(pip)",contextKey:A,callProxy:U=>(O,W,X)=>{try{r.sqlite3_result_js(O,U(O,...r.sqlite3_values_to_js(W,X)))}catch(_){r.sqlite3_result_error_js(O,_)}}},xDestroy:{signature:"v(p)",contextKey:A,callProxy:U=>O=>{try{U(O)}catch(W){console.error("UDF xDestroy method threw:",W)}}}}),F=o.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new o.xWrap.FuncPtrAdapter({name:"xFunc",...T.xFunc}),new o.xWrap.FuncPtrAdapter({name:"xStep",...T.xInverseAndStep}),new o.xWrap.FuncPtrAdapter({name:"xFinal",...T.xFinalAndValue}),new o.xWrap.FuncPtrAdapter({name:"xDestroy",...T.xDestroy})]),R=o.exports.sqlite3_create_window_function?o.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new o.xWrap.FuncPtrAdapter({name:"xStep",...T.xInverseAndStep}),new o.xWrap.FuncPtrAdapter({name:"xFinal",...T.xFinalAndValue}),new o.xWrap.FuncPtrAdapter({name:"xValue",...T.xFinalAndValue}),new o.xWrap.FuncPtrAdapter({name:"xInverse",...T.xInverseAndStep}),new o.xWrap.FuncPtrAdapter({name:"xDestroy",...T.xDestroy})]):void 0;r.sqlite3_create_function_v2=function U(O,W,X,_,b,x,$,f,g){if(U.length!==arguments.length)return p(O,"sqlite3_create_function_v2",U.length);if((_&15)===0)_|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(_&15))return q(O);try{const l=F(O,W,X,_,b,x,$,f,g);return l===0&&(x instanceof Function||$ instanceof Function||f instanceof Function||g instanceof Function)&&Y.addFunction(O,W,X),l}catch(l){return console.error("sqlite3_create_function_v2() setup threw:",l),a.sqlite3__wasm_db_error(O,l,"Creation of UDF threw: "+l)}},r.sqlite3_create_function=function U(O,W,X,_,b,x,$,f){return U.length===arguments.length?r.sqlite3_create_function_v2(O,W,X,_,b,x,$,f,0):p(O,"sqlite3_create_function",U.length)},R?r.sqlite3_create_window_function=function U(O,W,X,_,b,x,$,f,g,l){if(U.length!==arguments.length)return p(O,"sqlite3_create_window_function",U.length);if((_&15)===0)_|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(_&15))return q(O);try{const u=R(O,W,X,_,b,x,$,f,g,l);return u===0&&(x instanceof Function||$ instanceof Function||f instanceof Function||g instanceof Function||l instanceof Function)&&Y.addWindowFunc(O,W,X),u}catch(u){return console.error("sqlite3_create_window_function() setup threw:",u),a.sqlite3__wasm_db_error(O,u,"Creation of UDF threw: "+u)}}:delete r.sqlite3_create_window_function,r.sqlite3_create_function_v2.udfSetResult=r.sqlite3_create_function.udfSetResult=r.sqlite3_result_js,r.sqlite3_create_window_function&&(r.sqlite3_create_window_function.udfSetResult=r.sqlite3_result_js),r.sqlite3_create_function_v2.udfConvertArgs=r.sqlite3_create_function.udfConvertArgs=r.sqlite3_values_to_js,r.sqlite3_create_window_function&&(r.sqlite3_create_window_function.udfConvertArgs=r.sqlite3_values_to_js),r.sqlite3_create_function_v2.udfSetError=r.sqlite3_create_function.udfSetError=r.sqlite3_result_error_js,r.sqlite3_create_window_function&&(r.sqlite3_create_window_function.udfSetError=r.sqlite3_result_error_js)}{const A=(F,R)=>(typeof F=="string"?R=-1:a.isSQLableTypedArray(F)?(R=F.byteLength,F=a.typedArrayToString(F instanceof ArrayBuffer?new Uint8Array(F):F)):Array.isArray(F)&&(F=F.join(""),R=-1),[F,R]),T={basic:o.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:o.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};r.sqlite3_prepare_v3=function F(R,U,O,W,X,_){if(F.length!==arguments.length)return p(R,"sqlite3_prepare_v3",F.length);const[b,x]=A(U,O);switch(typeof b){case"string":return T.basic(R,b,x,W,X,null);case"number":return T.full(R,b,x,W,X,_);default:return a.sqlite3__wasm_db_error(R,r.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},r.sqlite3_prepare_v2=function F(R,U,O,W,X){return F.length===arguments.length?r.sqlite3_prepare_v3(R,U,O,0,W,X):p(R,"sqlite3_prepare_v2",F.length)}}{const A=o.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),T=o.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);r.sqlite3_bind_text=function F(R,U,O,W,X){if(F.length!==arguments.length)return p(r.sqlite3_db_handle(R),"sqlite3_bind_text",F.length);if(o.isPtr(O)||O===null)return A(R,U,O,W,X);O instanceof ArrayBuffer?O=new Uint8Array(O):Array.isArray(pMem)&&(O=pMem.join(""));let _,b;try{if(a.isSQLableTypedArray(O))_=o.allocFromTypedArray(O),b=O.byteLength;else if(typeof O=="string")[_,b]=o.allocCString(O);else return a.sqlite3__wasm_db_error(r.sqlite3_db_handle(R),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return A(R,U,_,b,r.SQLITE_WASM_DEALLOC)}catch(x){return o.dealloc(_),a.sqlite3__wasm_db_error(r.sqlite3_db_handle(R),x)}},r.sqlite3_bind_blob=function F(R,U,O,W,X){if(F.length!==arguments.length)return p(r.sqlite3_db_handle(R),"sqlite3_bind_blob",F.length);if(o.isPtr(O)||O===null)return T(R,U,O,W,X);O instanceof ArrayBuffer?O=new Uint8Array(O):Array.isArray(O)&&(O=O.join(""));let _,b;try{if(a.isBindableTypedArray(O))_=o.allocFromTypedArray(O),b=W>=0?W:O.byteLength;else if(typeof O=="string")[_,b]=o.allocCString(O);else return a.sqlite3__wasm_db_error(r.sqlite3_db_handle(R),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return T(R,U,_,b,r.SQLITE_WASM_DEALLOC)}catch(x){return o.dealloc(_),a.sqlite3__wasm_db_error(r.sqlite3_db_handle(R),x)}}}r.sqlite3_config=function(A,...T){if(arguments.length<2)return r.SQLITE_MISUSE;switch(A){case r.SQLITE_CONFIG_COVERING_INDEX_SCAN:case r.SQLITE_CONFIG_MEMSTATUS:case r.SQLITE_CONFIG_SMALL_MALLOC:case r.SQLITE_CONFIG_SORTERREF_SIZE:case r.SQLITE_CONFIG_STMTJRNL_SPILL:case r.SQLITE_CONFIG_URI:return o.exports.sqlite3__wasm_config_i(A,T[0]);case r.SQLITE_CONFIG_LOOKASIDE:return o.exports.sqlite3__wasm_config_ii(A,T[0],T[1]);case r.SQLITE_CONFIG_MEMDB_MAXSIZE:return o.exports.sqlite3__wasm_config_j(A,T[0]);case r.SQLITE_CONFIG_GETMALLOC:case r.SQLITE_CONFIG_GETMUTEX:case r.SQLITE_CONFIG_GETPCACHE2:case r.SQLITE_CONFIG_GETPCACHE:case r.SQLITE_CONFIG_HEAP:case r.SQLITE_CONFIG_LOG:case r.SQLITE_CONFIG_MALLOC:case r.SQLITE_CONFIG_MMAP_SIZE:case r.SQLITE_CONFIG_MULTITHREAD:case r.SQLITE_CONFIG_MUTEX:case r.SQLITE_CONFIG_PAGECACHE:case r.SQLITE_CONFIG_PCACHE2:case r.SQLITE_CONFIG_PCACHE:case r.SQLITE_CONFIG_PCACHE_HDRSZ:case r.SQLITE_CONFIG_PMASZ:case r.SQLITE_CONFIG_SERIALIZED:case r.SQLITE_CONFIG_SINGLETHREAD:case r.SQLITE_CONFIG_SQLLOG:case r.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return r.SQLITE_NOTFOUND}};{const A=new Set;r.sqlite3_auto_extension=function(T){if(T instanceof Function)T=o.installFunction("i(ppp)",T);else if(arguments.length!==1||!o.isPtr(T))return r.SQLITE_MISUSE;const F=o.exports.sqlite3_auto_extension(T);return T!==arguments[0]&&(F===0?A.add(T):o.uninstallFunction(T)),F},r.sqlite3_cancel_auto_extension=function(T){return!T||arguments.length!==1||!o.isPtr(T)?0:o.exports.sqlite3_cancel_auto_extension(T)},r.sqlite3_reset_auto_extension=function(){o.exports.sqlite3_reset_auto_extension();for(const T of A)o.uninstallFunction(T);A.clear()}}const J=r.sqlite3_vfs_find("kvvfs");if(J)if(a.isUIThread()){const A=new r.sqlite3_kvvfs_methods(o.exports.sqlite3__wasm_kvvfs_methods());delete r.sqlite3_kvvfs_methods;const T=o.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,F=o.pstack,R=O=>o.peek(O)===115?sessionStorage:localStorage,U={xRead:(O,W,X,_)=>{const b=F.pointer,x=o.scopedAllocPush();try{const $=T(O,W);if(!$)return-3;const f=o.cstrToJs($),g=R(O).getItem(f);if(!g)return-1;const l=g.length;if(_<=0)return l;if(_===1)return o.poke(X,0),l;const u=o.scopedAllocCString(g);return _>l+1&&(_=l+1),o.heap8u().copyWithin(X,u,u+_-1),o.poke(X+_-1,0),_-1}catch($){return console.error("kvstorageRead()",$),-2}finally{F.restore(b),o.scopedAllocPop(x)}},xWrite:(O,W,X)=>{const _=F.pointer;try{const b=T(O,W);if(!b)return 1;const x=o.cstrToJs(b);return R(O).setItem(x,o.cstrToJs(X)),0}catch(b){return console.error("kvstorageWrite()",b),r.SQLITE_IOERR}finally{F.restore(_)}},xDelete:(O,W)=>{const X=F.pointer;try{const _=T(O,W);return _?(R(O).removeItem(o.cstrToJs(_)),0):1}catch(_){return console.error("kvstorageDelete()",_),r.SQLITE_IOERR}finally{F.restore(X)}}};for(const O of Object.keys(U))A[A.memberKey(O)]=o.installFunction(A.memberSignature(O),U[O])}else r.sqlite3_vfs_unregister(J);o.xWrap.FuncPtrAdapter.warnOnUse=!0;const D=t.StructBinder,P=function A(T,F,R,U=A.installMethodArgcCheck){if(T instanceof D.StructType?!(R instanceof Function)&&!o.isPtr(R)&&n("Usage errror: expecting a Function or WASM pointer to one."):n("Usage error: target object is-not-a StructType."),arguments.length===1)return(_,b)=>A(T,_,b,U);A.argcProxy||(A.argcProxy=function(_,b,x,$){return function(...f){return x.length!==arguments.length&&n("Argument mismatch for",_.structInfo.name+"::"+b+": Native signature is:",$),x.apply(this,f)}},A.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((_,b)=>{if(typeof _=="number")try{o.uninstallFunction(_)}catch{}}),delete this.ondispose.__removeFuncList)});const O=T.memberSignature(F);O.length<2&&n("Member",F,"does not have a function pointer signature:",O);const W=T.memberKey(F),X=U&&!o.isPtr(R)?A.argcProxy(T,W,R,O):R;if(o.isPtr(X))X&&!o.functionEntry(X)&&n("Pointer",X,"is not a WASM function table entry."),T[W]=X;else{const _=o.installFunction(X,T.memberSignature(F,!0));T[W]=_,(!T.ondispose||!T.ondispose.__removeFuncList)&&(T.addOnDispose("ondispose.__removeFuncList handler",A.removeFuncList),T.ondispose.__removeFuncList=[]),T.ondispose.__removeFuncList.push(W,_)}return(_,b)=>A(T,_,b,U)};P.installMethodArgcCheck=!1;const z=function(A,T,F=P.installMethodArgcCheck){const R=new Map;for(const U of Object.keys(T)){const O=T[U],W=R.get(O);if(W){const X=A.memberKey(U);A[X]=A[A.memberKey(W)]}else P(A,U,O,F),R.set(O,U)}return A};D.StructType.prototype.installMethod=function(T,F,R=P.installMethodArgcCheck){return arguments.length<3&&T&&typeof T=="object"?z(this,...arguments):P(this,...arguments)},D.StructType.prototype.installMethods=function(A,T=P.installMethodArgcCheck){return z(this,A,T)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){t.version={libVersion:"3.49.2",libVersionNumber:3049002,sourceId:"2025-05-07 10:39:52 17144570b0d96ae63cd6f3edca39e27ebd74925252bbaf6723bcb2f6b4861fb1",downloadVersion:3490200}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=(...f)=>{throw new t.SQLite3Error(...f)},r=t.capi,o=t.wasm,a=t.util,p=new WeakMap,q=new WeakMap,N=(f,g,l)=>{const u=Object.getOwnPropertyDescriptor(f,g);return u?u.value:l},M=function(f,g){return g&&(f instanceof P&&(f=f.pointer),n(g,"sqlite3 result code",g+":",f?r.sqlite3_errmsg(f):r.sqlite3_errstr(g))),arguments[0]},Y=o.installFunction("i(ippp)",(function(f,g,l,u){r.SQLITE_TRACE_STMT===f&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+g+":",o.cstrToJs(u))}).bind({counter:0})),J=Object.create(null),D=function f(...g){if(!f._name2vfs){f._name2vfs=Object.create(null);const me=typeof importScripts=="function"?qe=>n("The VFS for",qe,"is only available in the main window thread."):!1;f._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:me||(()=>"local")},f._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:me||(()=>"session")}}const l=f.normalizeArgs(...g);let u=l.filename,w=l.vfs,S=l.flags;(typeof u!="string"&&typeof u!="number"||typeof S!="string"||w&&typeof w!="string"&&typeof w!="number")&&(t.config.error("Invalid DB ctor args",l,arguments),n("Invalid arguments for DB constructor."));let G=typeof u=="number"?o.cstrToJs(u):u;const se=f._name2vfs[G];se&&(w=se.vfs,u=G=se.filename(G));let ue,ge=0;S.indexOf("c")>=0&&(ge|=r.SQLITE_OPEN_CREATE|r.SQLITE_OPEN_READWRITE),S.indexOf("w")>=0&&(ge|=r.SQLITE_OPEN_READWRITE),ge===0&&(ge|=r.SQLITE_OPEN_READONLY),ge|=r.SQLITE_OPEN_EXRESCODE;const de=o.pstack.pointer;try{const me=o.pstack.allocPtr();let qe=r.sqlite3_open_v2(u,me,ge,w||0);ue=o.peekPtr(me),M(ue,qe),r.sqlite3_extended_result_codes(ue,1),S.indexOf("t")>=0&&r.sqlite3_trace_v2(ue,r.SQLITE_TRACE_STMT,Y,ue)}catch(me){throw ue&&r.sqlite3_close_v2(ue),me}finally{o.pstack.restore(de)}this.filename=G,p.set(this,ue),q.set(this,Object.create(null));try{const me=r.sqlite3_js_db_vfs(ue)||n("Internal error: cannot get VFS for new db handle."),qe=J[me];qe&&(qe instanceof Function?qe(this,t):M(ue,r.sqlite3_exec(ue,qe,0,0,0)))}catch(me){throw this.close(),me}};D.setVfsPostOpenCallback=function(f,g){g instanceof Function||n("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),J[f]=g},D.normalizeArgs=function(f=":memory:",g="c",l=null){const u={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(u,arguments[0]),u.flags===void 0&&(u.flags="c"),u.vfs===void 0&&(u.vfs=null),u.filename===void 0&&(u.filename=":memory:")):(u.filename=f,u.flags=g,u.vfs=l),u};const P=function(...f){D.apply(this,f)};P.dbCtorHelper=D;const z={null:1,number:2,string:3,boolean:4,blob:5};z.undefined==z.null,o.bigIntEnabled&&(z.bigint=z.number);const A=function(){z!==arguments[2]&&n(r.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],p.set(this,arguments[1]),this.parameterCount=r.sqlite3_bind_parameter_count(this.pointer)},T=function(f){return f.pointer||n("DB has been closed."),f},F=function(f,g){return(g!==(g|0)||g<0||g>=f.columnCount)&&n("Column index",g,"is out of range."),f},R=function(f,g){const l=Object.create(null);switch(l.opt=Object.create(null),g.length){case 1:typeof g[0]=="string"||a.isSQLableTypedArray(g[0])||Array.isArray(g[0])?l.sql=g[0]:g[0]&&typeof g[0]=="object"&&(l.opt=g[0],l.sql=l.opt.sql);break;case 2:l.sql=g[0],l.opt=g[1];break;default:n("Invalid argument count for exec().")}l.sql=a.flexibleString(l.sql),typeof l.sql!="string"&&n("Missing SQL argument or unsupported SQL value type.");const u=l.opt;switch(u.returnValue){case"resultRows":u.resultRows||(u.resultRows=[]),l.returnVal=()=>u.resultRows;break;case"saveSql":u.saveSql||(u.saveSql=[]),l.returnVal=()=>u.saveSql;break;case void 0:case"this":l.returnVal=()=>f;break;default:n("Invalid returnValue value:",u.returnValue)}if(!u.callback&&!u.returnValue&&u.rowMode!==void 0&&(u.resultRows||(u.resultRows=[]),l.returnVal=()=>u.resultRows),u.callback||u.resultRows)switch(u.rowMode===void 0?"array":u.rowMode){case"object":l.cbArg=(w,S)=>{S.columnNames||(S.columnNames=w.getColumnNames([]));const G=w.get([]),se=Object.create(null);for(const ue in S.columnNames)se[S.columnNames[ue]]=G[ue];return se};break;case"array":l.cbArg=w=>w.get([]);break;case"stmt":Array.isArray(u.resultRows)&&n("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),l.cbArg=w=>w;break;default:if(a.isInt32(u.rowMode)){l.cbArg=w=>w.get(u.rowMode);break}else if(typeof u.rowMode=="string"&&u.rowMode.length>1&&u.rowMode[0]==="$"){const w=u.rowMode.substr(1);l.cbArg=S=>{const G=S.get(Object.create(null))[w];return G===void 0?n(r.SQLITE_NOTFOUND,"exec(): unknown result column:",w):G};break}n("Invalid rowMode:",u.rowMode)}return l},U=(f,g,l,...u)=>{const w=f.prepare(g);try{const S=w.bind(l).step()?w.get(...u):void 0;return w.reset(),S}finally{w.finalize()}},O=(f,g,l,u)=>f.exec({sql:g,bind:l,rowMode:u,returnValue:"resultRows"});P.checkRc=(f,g)=>M(f,g),P.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return T(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const f=this.pointer;if(Object.keys(q.get(this)).forEach((g,l)=>{if(l&&l.pointer)try{l.finalize()}catch{}}),p.delete(this),q.delete(this),r.sqlite3_close_v2(f),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(f=!1,g=!1){const l=T(this).pointer;return f?g?r.sqlite3_total_changes64(l):r.sqlite3_total_changes(l):g?r.sqlite3_changes64(l):r.sqlite3_changes(l)},dbFilename:function(f="main"){return r.sqlite3_db_filename(T(this).pointer,f)},dbName:function(f=0){return r.sqlite3_db_name(T(this).pointer,f)},dbVfsName:function(f=0){let g;const l=r.sqlite3_js_db_vfs(T(this).pointer,f);if(l){const u=new r.sqlite3_vfs(l);try{g=o.cstrToJs(u.$zName)}finally{u.dispose()}}return g},prepare:function(f){T(this);const g=o.pstack.pointer;let l,u;try{l=o.pstack.alloc(8),P.checkRc(this,r.sqlite3_prepare_v2(this.pointer,f,-1,l,null)),u=o.peekPtr(l)}finally{o.pstack.restore(g)}u||n("Cannot prepare empty SQL.");const w=new A(this,u,z);return q.get(this)[u]=w,w},exec:function(){T(this);const f=R(this,arguments);if(!f.sql)return n("exec() requires an SQL string.");const g=f.opt,l=g.callback,u=Array.isArray(g.resultRows)?g.resultRows:void 0;let w,S=g.bind,G=!!(f.cbArg||g.columnNames||u);const se=o.scopedAllocPush(),ue=Array.isArray(g.saveSql)?g.saveSql:void 0;try{const ge=a.isSQLableTypedArray(f.sql);let de=ge?f.sql.byteLength:o.jstrlen(f.sql);const me=o.scopedAlloc(2*o.ptrSizeof+(de+1)),qe=me+o.ptrSizeof;let ve=qe+o.ptrSizeof;const Ie=ve+de;for(ge?o.heap8().set(f.sql,ve):o.jstrcpy(f.sql,o.heap8(),ve,de,!1),o.poke(ve+de,0);ve&&o.peek(ve,"i8");){o.pokePtr([me,qe],0),P.checkRc(this,r.sqlite3_prepare_v3(this.pointer,ve,de,0,me,qe));const Oe=o.peekPtr(me);if(ve=o.peekPtr(qe),de=Ie-ve,!!Oe){if(ue&&ue.push(r.sqlite3_sql(Oe).trim()),w=new A(this,Oe,z),S&&w.parameterCount&&(w.bind(S),S=null),G&&w.columnCount){let Ye=Array.isArray(g.columnNames)?0:1;if(G=!1,f.cbArg||u){const Ce=Object.create(null);for(;w.step();w._lockedByExec=!1){Ye++===0&&w.getColumnNames(Ce.columnNames=g.columnNames||[]),w._lockedByExec=!0;const C=f.cbArg(w,Ce);if(u&&u.push(C),l&&l.call(g,C,w)===!1)break}w._lockedByExec=!1}Ye===0&&w.getColumnNames(g.columnNames)}else w.step();w.reset().finalize(),w=null}}}finally{o.scopedAllocPop(se),w&&(delete w._lockedByExec,w.finalize())}return f.returnVal()},createFunction:function(g,l,u){const w=Ce=>Ce instanceof Function;switch(arguments.length){case 1:u=g,g=u.name,l=u.xFunc||0;break;case 2:w(l)||(u=l,l=u.xFunc||0);break}u||(u={}),typeof g!="string"&&n("Invalid arguments: missing function name.");let S=u.xStep||0,G=u.xFinal||0;const se=u.xValue||0,ue=u.xInverse||0;let ge;w(l)?(ge=!1,(w(S)||w(G))&&n("Ambiguous arguments: scalar or aggregate?"),S=G=null):w(S)?(w(G)||n("Missing xFinal() callback for aggregate or window UDF."),l=null):w(G)?n("Missing xStep() callback for aggregate or window UDF."):n("Missing function-type properties."),ge===!1?(w(se)||w(ue))&&n("xValue and xInverse are not permitted for non-window UDFs."):w(se)?(w(ue)||n("xInverse must be provided if xValue is."),ge=!0):w(ue)&&n("xValue must be provided if xInverse is.");const de=u.pApp;de!=null&&(typeof de!="number"||!a.isInt32(de))&&n("Invalid value for pApp property. Must be a legal WASM pointer value.");const me=u.xDestroy||0;me&&!w(me)&&n("xDestroy property must be a function.");let qe=0;N(u,"deterministic")&&(qe|=r.SQLITE_DETERMINISTIC),N(u,"directOnly")&&(qe|=r.SQLITE_DIRECTONLY),N(u,"innocuous")&&(qe|=r.SQLITE_INNOCUOUS),g=g.toLowerCase();const ve=l||S,Ie=N(u,"arity"),Oe=typeof Ie=="number"?Ie:ve.length?ve.length-1:0;let Ye;return ge?Ye=r.sqlite3_create_window_function(this.pointer,g,Oe,r.SQLITE_UTF8|qe,de||0,S,G,se,ue,me):Ye=r.sqlite3_create_function_v2(this.pointer,g,Oe,r.SQLITE_UTF8|qe,de||0,l,S,G,me),P.checkRc(this,Ye),this},selectValue:function(f,g,l){return U(this,f,g,0,l)},selectValues:function(f,g,l){const u=this.prepare(f),w=[];try{for(u.bind(g);u.step();)w.push(u.get(0,l));u.reset()}finally{u.finalize()}return w},selectArray:function(f,g){return U(this,f,g,[])},selectObject:function(f,g){return U(this,f,g,{})},selectArrays:function(f,g){return O(this,f,g,"array")},selectObjects:function(f,g){return O(this,f,g,"object")},openStatementCount:function(){return this.pointer?Object.keys(q.get(this)).length:0},transaction:function(f){let g="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&n(r.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),g+=" "+arguments[0],f=arguments[1]),T(this).exec(g);try{const l=f(this);return this.exec("COMMIT"),l}catch(l){throw this.exec("ROLLBACK"),l}},savepoint:function(f){T(this).exec("SAVEPOINT oo1");try{const g=f(this);return this.exec("RELEASE oo1"),g}catch(g){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),g}},checkRc:function(f){return M(this,f)}};const W=function(f){return f.pointer||n("Stmt has been closed."),f},X=function(f){let g=z[f==null?"null":typeof f];switch(g){case z.boolean:case z.null:case z.number:case z.string:return g;case z.bigint:if(o.bigIntEnabled)return g;default:return a.isBindableTypedArray(f)?z.blob:void 0}},_=function(f){return X(f)||n("Unsupported bind() argument type:",typeof f)},b=function(f,g){const l=typeof g=="number"?g:r.sqlite3_bind_parameter_index(f.pointer,g);return l===0||!a.isInt32(l)?n("Invalid bind() parameter name: "+g):(l<1||l>f.parameterCount)&&n("Bind index",g,"is out of range."),l},x=function(f,g){return f._lockedByExec&&n("Operation is illegal when statement is locked:",g),f},$=function f(g,l,u,w){x(W(g),"bind()"),f._||(f._tooBigInt=G=>n("BigInt value is too big to store without precision loss:",G),f._={string:function(G,se,ue,ge){const[de,me]=o.allocCString(ue,!0);return(ge?r.sqlite3_bind_blob:r.sqlite3_bind_text)(G.pointer,se,de,me,r.SQLITE_WASM_DEALLOC)}}),_(w),l=b(g,l);let S=0;switch(w==null?z.null:u){case z.null:S=r.sqlite3_bind_null(g.pointer,l);break;case z.string:S=f._.string(g,l,w,!1);break;case z.number:{let G;a.isInt32(w)?G=r.sqlite3_bind_int:typeof w=="bigint"?a.bigIntFits64(w)?o.bigIntEnabled?G=r.sqlite3_bind_int64:a.bigIntFitsDouble(w)?(w=Number(w),G=r.sqlite3_bind_double):f._tooBigInt(w):f._tooBigInt(w):(w=Number(w),o.bigIntEnabled&&Number.isInteger(w)?G=r.sqlite3_bind_int64:G=r.sqlite3_bind_double),S=G(g.pointer,l,w);break}case z.boolean:S=r.sqlite3_bind_int(g.pointer,l,w?1:0);break;case z.blob:{if(typeof w=="string"){S=f._.string(g,l,w,!0);break}else w instanceof ArrayBuffer?w=new Uint8Array(w):a.isBindableTypedArray(w)||n("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const G=o.alloc(w.byteLength||1);o.heap8().set(w.byteLength?w:[0],G),S=r.sqlite3_bind_blob(g.pointer,l,G,w.byteLength,r.SQLITE_WASM_DEALLOC);break}default:t.config.warn("Unsupported bind() argument type:",w),n("Unsupported bind() argument type: "+typeof w)}return S&&P.checkRc(g.db.pointer,S),g._mayGet=!1,g};A.prototype={finalize:function(){if(this.pointer){x(this,"finalize()");const f=r.sqlite3_finalize(this.pointer);return delete q.get(this.db)[this.pointer],p.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,f}},clearBindings:function(){return x(W(this),"clearBindings()"),r.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(f){x(this,"reset()"),f&&this.clearBindings();const g=r.sqlite3_reset(W(this).pointer);return this._mayGet=!1,M(this.db,g),this},bind:function(){W(this);let f,g;switch(arguments.length){case 1:f=1,g=arguments[0];break;case 2:f=arguments[0],g=arguments[1];break;default:n("Invalid bind() arguments.")}return g===void 0?this:(this.parameterCount||n("This statement has no bindable parameters."),this._mayGet=!1,g===null?$(this,f,z.null,g):Array.isArray(g)?(arguments.length!==1&&n("When binding an array, an index argument is not permitted."),g.forEach((l,u)=>$(this,u+1,_(l),l)),this):(g instanceof ArrayBuffer&&(g=new Uint8Array(g)),typeof g=="object"&&!a.isBindableTypedArray(g)?(arguments.length!==1&&n("When binding an object, an index argument is not permitted."),Object.keys(g).forEach(l=>$(this,l,_(g[l]),g[l])),this):$(this,f,_(g),g)))},bindAsBlob:function(f,g){W(this),arguments.length===1&&(g=f,f=1);const l=_(g);return z.string!==l&&z.blob!==l&&z.null!==l&&n("Invalid value type for bindAsBlob()"),$(this,f,z.blob,g)},step:function(){x(this,"step()");const f=r.sqlite3_step(W(this).pointer);switch(f){case r.SQLITE_DONE:return this._mayGet=!1;case r.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,t.config.warn("sqlite3_step() rc=",f,r.sqlite3_js_rc_str(f),"SQL =",r.sqlite3_sql(this.pointer)),P.checkRc(this.db.pointer,f)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const f=this.step();return this.reset(),f}finally{try{this.finalize()}catch{}}},get:function(f,g){if(W(this)._mayGet||n("Stmt.step() has not (recently) returned true."),Array.isArray(f)){let l=0;const u=this.columnCount;for(;l<u;)f[l]=this.get(l++);return f}else if(f&&typeof f=="object"){let l=0;const u=this.columnCount;for(;l<u;)f[r.sqlite3_column_name(this.pointer,l)]=this.get(l++);return f}switch(F(this,f),g===void 0?r.sqlite3_column_type(this.pointer,f):g){case r.SQLITE_NULL:return null;case r.SQLITE_INTEGER:if(o.bigIntEnabled){const l=r.sqlite3_column_int64(this.pointer,f);return l>=Number.MIN_SAFE_INTEGER&&l<=Number.MAX_SAFE_INTEGER?Number(l).valueOf():l}else{const l=r.sqlite3_column_double(this.pointer,f);return(l>Number.MAX_SAFE_INTEGER||l<Number.MIN_SAFE_INTEGER)&&n("Integer is out of range for JS integer range: "+l),a.isInt32(l)?l|0:l}case r.SQLITE_FLOAT:return r.sqlite3_column_double(this.pointer,f);case r.SQLITE_TEXT:return r.sqlite3_column_text(this.pointer,f);case r.SQLITE_BLOB:{const l=r.sqlite3_column_bytes(this.pointer,f),u=r.sqlite3_column_blob(this.pointer,f),w=new Uint8Array(l);return l&&w.set(o.heap8u().slice(u,u+l),0),l&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(w.buffer),w}default:n("Don't know how to translate","type of result column #"+f+".")}n("Not reached.")},getInt:function(f){return this.get(f,r.SQLITE_INTEGER)},getFloat:function(f){return this.get(f,r.SQLITE_FLOAT)},getString:function(f){return this.get(f,r.SQLITE_TEXT)},getBlob:function(f){return this.get(f,r.SQLITE_BLOB)},getJSON:function(f){const g=this.get(f,r.SQLITE_STRING);return g===null?g:JSON.parse(g)},getColumnName:function(f){return r.sqlite3_column_name(F(W(this),f).pointer,f)},getColumnNames:function(f=[]){F(W(this),0);const g=this.columnCount;for(let l=0;l<g;++l)f.push(r.sqlite3_column_name(this.pointer,l));return f},getParamIndex:function(f){return W(this).parameterCount?r.sqlite3_bind_parameter_index(this.pointer,f):void 0},getParamName:function(f){return W(this).parameterCount?r.sqlite3_bind_parameter_name(this.pointer,f):void 0},isBusy:function(){return r.sqlite3_stmt_busy(W(this))!==0},isReadOnly:function(){return r.sqlite3_stmt_readonly(W(this))!==0}};{const f={enumerable:!0,get:function(){return p.get(this)},set:()=>n("The pointer property is read-only.")};Object.defineProperty(A.prototype,"pointer",f),Object.defineProperty(P.prototype,"pointer",f)}if(Object.defineProperty(A.prototype,"columnCount",{enumerable:!1,get:function(){return r.sqlite3_column_count(this.pointer)},set:()=>n("The columnCount property is read-only.")}),t.oo1={DB:P,Stmt:A},a.isUIThread()){t.oo1.JsStorageDb=function(g="session"){const l=D.normalizeArgs(...arguments);g=l.filename,g!=="session"&&g!=="local"&&n("JsStorageDb db name must be one of 'session' or 'local'."),l.vfs="kvvfs",D.call(this,l)};const f=t.oo1.JsStorageDb;f.prototype=Object.create(P.prototype),f.clearStorage=r.sqlite3_js_kvvfs_clear,f.prototype.clearStorage=function(){return f.clearStorage(T(this).filename)},f.storageSize=r.sqlite3_js_kvvfs_size,f.prototype.storageSize=function(){return f.storageSize(T(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=t.util;t.initWorker1API=(function(){const r=(...D)=>{throw new Error(D.join(" "))};globalThis.WorkerGlobalScope instanceof Function||r("initWorker1API() must be run from a Worker thread.");const o=this.sqlite3||r("Missing this.sqlite3 object."),a=o.oo1.DB,p=function(D){let P=q.idMap.get(D);return P||(P="db#"+ ++q.idSeq+"@"+D.pointer,q.idMap.set(D,P),P)},q={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(D){const P=new a(D);return this.dbs[p(P)]=P,this.dbList.indexOf(P)<0&&this.dbList.push(P),P},close:function(D,P){if(D){delete this.dbs[p(D)];const z=D.filename,A=n.sqlite3__wasm_db_vfs(D.pointer,0);D.close();const T=this.dbList.indexOf(D);T>=0&&this.dbList.splice(T,1),P&&z&&A&&n.sqlite3__wasm_vfs_unlink(A,z)}},post:function(D,P){P&&P.length?(globalThis.postMessage(D,Array.from(P)),P.length=0):globalThis.postMessage(D)},dbs:Object.create(null),getDb:function(D,P=!0){return this.dbs[D]||(P?r("Unknown (or closed) DB ID:",D):void 0)}},N=function(D=q.dbList[0]){return D&&D.pointer?D:r("DB is not opened.")},M=function(D,P=!0){const z=q.getDb(D.dbId,!1)||q.dbList[0];return P?N(z):z},Y=function(){return q.dbList[0]&&p(q.dbList[0])},J={open:function(D){const P=Object.create(null),z=D.args||Object.create(null);z.simulateError&&r("Throwing because of simulateError flag.");const A=Object.create(null);P.vfs=z.vfs,P.filename=z.filename||"";const T=q.open(P);return A.filename=T.filename,A.persistent=!!o.capi.sqlite3_js_db_uses_vfs(T.pointer,"opfs"),A.dbId=p(T),A.vfs=T.dbVfsName(),A},close:function(D){const P=M(D,!1),z={filename:P&&P.filename};if(P){const A=D.args&&typeof D.args=="object"?!!D.args.unlink:!1;q.close(P,A)}return z},exec:function(D){const P=typeof D.args=="string"?{sql:D.args}:D.args||Object.create(null);P.rowMode==="stmt"?r("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):P.sql||r("'exec' requires input SQL.");const z=M(D);(P.callback||Array.isArray(P.resultRows))&&(z._blobXfer=q.xfer);const A=P.callback;let T=0;const F=!!P.columnNames;typeof A=="string"&&(F||(P.columnNames=[]),P.callback=function(R,U){q.post({type:A,columnNames:P.columnNames,rowNumber:++T,row:R},q.xfer)});try{const R=P.countChanges?z.changes(!0,P.countChanges===64):void 0;z.exec(P),R!==void 0&&(P.changeCount=z.changes(!0,P.countChanges===64)-R),P.callback instanceof Function&&(P.callback=A,q.post({type:A,columnNames:P.columnNames,rowNumber:null,row:void 0}))}finally{delete z._blobXfer,P.callback&&(P.callback=A)}return P},"config-get":function(){const D=Object.create(null),P=o.config;return["bigIntEnabled"].forEach(function(z){Object.getOwnPropertyDescriptor(P,z)&&(D[z]=P[z])}),D.version=o.version,D.vfsList=o.capi.sqlite3_js_vfs_list(),D},export:function(D){const P=M(D),z={byteArray:o.capi.sqlite3_js_db_export(P.pointer),filename:P.filename,mimetype:"application/x-sqlite3"};return q.xfer.push(z.byteArray.buffer),z},toss:function(D){r("Testing worker exception")}};globalThis.onmessage=async function(D){D=D.data;let P,z=D.dbId,A=D.type;const T=performance.now();try{J.hasOwnProperty(A)&&J[A]instanceof Function?P=await J[A](D):r("Unknown db worker message type:",D.type)}catch(F){A="error",P={operation:D.type,message:F.message,errorClass:F.name,input:D},F.stack&&(P.stack=typeof F.stack=="string"?F.stack.split(/\n\s*/):F.stack)}z||(z=P.dbId||Y()),q.post({type:A,dbId:z,messageId:D.messageId,workerReceivedTime:T,workerRespondTime:performance.now(),departureTime:D.departureTime,result:P},q.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}).bind({sqlite3:t})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=t.wasm,r=t.capi,o=t.util.toss3,a=Object.create(null);t.vfs=a,r.sqlite3_vfs.prototype.registerVfs=function(p=!1){this instanceof t.capi.sqlite3_vfs||o("Expecting a sqlite3_vfs-type argument.");const q=r.sqlite3_vfs_register(this,p?1:0);return q&&o("sqlite3_vfs_register(",this,") failed with rc",q),this.pointer!==r.sqlite3_vfs_find(this.$zName)&&o("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},a.installVfs=function(p){let q=0;const N=["io","vfs"];for(const M of N){const Y=p[M];Y&&(++q,Y.struct.installMethods(Y.methods,!!Y.applyArgcCheck),M==="vfs"&&(!Y.struct.$zName&&typeof Y.name=="string"&&Y.struct.addOnDispose(Y.struct.$zName=n.allocCString(Y.name)),Y.struct.registerVfs(!!Y.asDefault)))}return q||o("Misuse: installVfs() options object requires at least","one of:",N),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){if(!t.wasm.exports.sqlite3_declare_vtab)return;const n=t.wasm,r=t.capi,o=t.util.toss3,a=Object.create(null);t.vtab=a;const p=r.sqlite3_index_info;p.prototype.nthConstraint=function(M,Y=!1){if(M<0||M>=this.$nConstraint)return!1;const J=this.$aConstraint+p.sqlite3_index_constraint.structInfo.sizeof*M;return Y?J:new p.sqlite3_index_constraint(J)},p.prototype.nthConstraintUsage=function(M,Y=!1){if(M<0||M>=this.$nConstraint)return!1;const J=this.$aConstraintUsage+p.sqlite3_index_constraint_usage.structInfo.sizeof*M;return Y?J:new p.sqlite3_index_constraint_usage(J)},p.prototype.nthOrderBy=function(M,Y=!1){if(M<0||M>=this.$nOrderBy)return!1;const J=this.$aOrderBy+p.sqlite3_index_orderby.structInfo.sizeof*M;return Y?J:new p.sqlite3_index_orderby(J)};const q=function(M,Y){return(function(J,D=!1){if(arguments.length===0&&(J=new Y),J instanceof Y)return this.set(J.pointer,J),J;n.isPtr(J)||t.SQLite3Error.toss("Invalid argument to",M+"()");let P=this.get(J);return D&&this.delete(J),P}).bind(new Map)},N=function(M,Y){const J=q(M,Y);return Object.assign(Object.create(null),{StructType:Y,create:D=>{const P=J();return n.pokePtr(D,P.pointer),P},get:D=>J(D),unget:D=>J(D,!0),dispose:D=>{const P=J(D,!0);P&&P.dispose()}})};a.xVtab=N("xVtab",r.sqlite3_vtab),a.xCursor=N("xCursor",r.sqlite3_vtab_cursor),a.xIndexInfo=M=>new r.sqlite3_index_info(M),a.xError=function M(Y,J,D){if(M.errorReporter instanceof Function)try{M.errorReporter("sqlite3_module::"+Y+"(): "+J.message)}catch{}let P;return J instanceof t.WasmAllocError?P=r.SQLITE_NOMEM:arguments.length>2?P=D:J instanceof t.SQLite3Error&&(P=J.resultCode),P||r.SQLITE_ERROR},a.xError.errorReporter=console.error.bind(console),a.xRowid=(M,Y)=>n.poke(M,Y,"i64"),a.setupModule=function(M){let Y=!1;const J=this instanceof r.sqlite3_module?this:M.struct||(Y=new r.sqlite3_module);try{const D=M.methods||o("Missing 'methods' object.");for(const P of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const z=P[0],A=P[1];D[z]===!0?D[z]=D[A]:D[A]===!0&&(D[A]=D[z])}if(M.catchExceptions){const P=function(T,F){return["xConnect","xCreate"].indexOf(T)>=0?function(R,U,O,W,X,_){try{return F(...arguments)||0}catch(b){return b instanceof t.WasmAllocError||(n.dealloc(n.peekPtr(_)),n.pokePtr(_,n.allocCString(b.message))),a.xError(T,b)}}:function(...R){try{return F(...R)||0}catch(U){return a.xError(T,U)}}},z=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],A=Object.create(null);for(const T of z){const F=D[T];if(F instanceof Function)T==="xConnect"&&D.xCreate===F?A[T]=D.xCreate:T==="xCreate"&&D.xConnect===F?A[T]=D.xConnect:A[T]=P(T,F);else continue}J.installMethods(A,!1)}else J.installMethods(D,!!M.applyArgcCheck);if(J.$iVersion===0){let P;typeof M.iVersion=="number"?P=M.iVersion:J.$xShadowName?P=3:J.$xSavePoint||J.$xRelease||J.$xRollbackTo?P=2:P=1,J.$iVersion=P}}catch(D){throw Y&&Y.dispose(),D}return J},r.sqlite3_module.prototype.setupModule=function(M){return a.setupModule.call(this,M)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=function r(o){var q;if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((q=navigator==null?void 0:navigator.storage)!=null&&q.getDirectory))return Promise.reject(new Error("Missing required OPFS APIs."));(!o||typeof o!="object")&&(o=Object.create(null));const a=new URL(globalThis.location.href).searchParams;return a.has("opfs-disable")?Promise.resolve(t):(o.verbose===void 0&&(o.verbose=a.has("opfs-verbose")?+a.get("opfs-verbose")||2:1),o.sanityChecks===void 0&&(o.sanityChecks=a.has("opfs-sanity-check")),o.proxyUri===void 0&&(o.proxyUri=r.defaultProxyUri),typeof o.proxyUri=="function"&&(o.proxyUri=o.proxyUri()),new Promise(function(N,M){const Y=[t.config.error,t.config.warn,t.config.log],J=(C,...Q)=>{o.verbose>C&&Y[C]("OPFS syncer:",...Q)},D=(...C)=>J(2,...C),P=(...C)=>J(1,...C),z=(...C)=>J(0,...C),A=t.util.toss,T=t.capi,F=t.util,R=t.wasm,U=T.sqlite3_vfs,O=T.sqlite3_file,W=T.sqlite3_io_methods,X=Object.create(null),_=()=>{var C;return globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&((C=navigator==null?void 0:navigator.storage)==null?void 0:C.getDirectory)};X.metrics={dump:function(){let C,Q=0,K=0,re=0;for(C in S.opIds){const ee=G[C];Q+=ee.count,K+=ee.time,re+=ee.wait,ee.avgTime=ee.count&&ee.time?ee.time/ee.count:0,ee.avgWait=ee.count&&ee.wait?ee.wait/ee.count:0}t.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",G,`
Total of`,Q,"op(s) for",K,"ms (incl. "+re+" ms of waiting on the async side)"),t.config.log("Serialization metrics:",G.s11n),l.postMessage({type:"opfs-async-metrics"})},reset:function(){let C;const Q=re=>re.count=re.time=re.wait=0;for(C in S.opIds)Q(G[C]=Object.create(null));let K=G.s11n=Object.create(null);K=K.serialize=Object.create(null),K.count=K.time=0,K=G.s11n.deserialize=Object.create(null),K.count=K.time=0}};const b=new W,x=new U().addOnDispose(()=>b.dispose());let $;const f=C=>($=!0,x.dispose(),M(C)),g=()=>($=!1,N(t)),l=new Worker(new URL("/prompt-api-sqlite/assets/sqlite3-opfs-async-proxy-DZdsd1Kz.js",import.meta.url));setTimeout(()=>{$===void 0&&f(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),l._originalOnError=l.onerror,l.onerror=function(C){z("Error initializing OPFS asyncer:",C),f(new Error("Loading OPFS async Worker failed for unknown reasons."))};const u=T.sqlite3_vfs_find(null),w=u?new U(u):null;b.$iVersion=1,x.$iVersion=2,x.$szOsFile=T.sqlite3_file.structInfo.sizeof,x.$mxPathname=1024,x.$zName=R.allocCString("opfs"),x.$xDlOpen=x.$xDlError=x.$xDlSym=x.$xDlClose=null,x.addOnDispose("$zName",x.$zName,"cleanup default VFS wrapper",()=>w?w.dispose():null);const S=Object.create(null);S.verbose=o.verbose,S.littleEndian=(()=>{const C=new ArrayBuffer(2);return new DataView(C).setInt16(0,256,!0),new Int16Array(C)[0]===256})(),S.asyncIdleWaitTime=150,S.asyncS11nExceptions=1,S.fileBufferSize=1024*64,S.sabS11nOffset=S.fileBufferSize,S.sabS11nSize=x.$mxPathname*2,S.sabIO=new SharedArrayBuffer(S.fileBufferSize+S.sabS11nSize),S.opIds=Object.create(null);const G=Object.create(null);{let C=0;S.opIds.whichOp=C++,S.opIds.rc=C++,S.opIds.xAccess=C++,S.opIds.xClose=C++,S.opIds.xDelete=C++,S.opIds.xDeleteNoWait=C++,S.opIds.xFileSize=C++,S.opIds.xLock=C++,S.opIds.xOpen=C++,S.opIds.xRead=C++,S.opIds.xSleep=C++,S.opIds.xSync=C++,S.opIds.xTruncate=C++,S.opIds.xUnlock=C++,S.opIds.xWrite=C++,S.opIds.mkdir=C++,S.opIds["opfs-async-metrics"]=C++,S.opIds["opfs-async-shutdown"]=C++,S.opIds.retry=C++,S.sabOP=new SharedArrayBuffer(C*4),X.metrics.reset()}S.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(C=>{(S.sq3Codes[C]=T[C])===void 0&&A("Maintenance required: not found:",C)}),S.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const se=(C,...Q)=>{const K=S.opIds[C]||A("Invalid op ID:",C);S.s11n.serialize(...Q),Atomics.store(S.sabOPView,S.opIds.rc,-1),Atomics.store(S.sabOPView,S.opIds.whichOp,K),Atomics.notify(S.sabOPView,S.opIds.whichOp);const re=performance.now();for(;Atomics.wait(S.sabOPView,S.opIds.rc,-1)!=="not-equal";);const ee=Atomics.load(S.sabOPView,S.opIds.rc);if(G[C].wait+=performance.now()-re,ee&&S.asyncS11nExceptions){const ie=S.s11n.deserialize();ie&&z(C+"() async error:",...ie)}return ee};X.debug={asyncShutdown:()=>{P("Shutting down OPFS async listener. The OPFS VFS will no longer work."),se("opfs-async-shutdown")},asyncRestart:()=>{P("Attempting to restart OPFS VFS async listener. Might work, might not."),l.postMessage({type:"opfs-async-restart"})}};const ue=()=>{if(S.s11n)return S.s11n;const C=new TextDecoder,Q=new TextEncoder("utf-8"),K=new Uint8Array(S.sabIO,S.sabS11nOffset,S.sabS11nSize),re=new DataView(S.sabIO,S.sabS11nOffset,S.sabS11nSize);S.s11n=Object.create(null);const ee=Object.create(null);ee.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},ee.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},ee.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},ee.string={id:4};const ie=m=>ee[typeof m]||A("Maintenance required: this value type cannot be serialized.",m),V=m=>{switch(m){case ee.number.id:return ee.number;case ee.bigint.id:return ee.bigint;case ee.boolean.id:return ee.boolean;case ee.string.id:return ee.string;default:A("Invalid type ID:",m)}};return S.s11n.deserialize=function(m=!1){++G.s11n.deserialize.count;const d=performance.now(),I=K[0],L=I?[]:null;if(I){const B=[];let ne=1,ce,Ee,ke;for(ce=0;ce<I;++ce,++ne)B.push(V(K[ne]));for(ce=0;ce<I;++ce){const ot=B[ce];ot.getter?(ke=re[ot.getter](ne,S.littleEndian),ne+=ot.size):(Ee=re.getInt32(ne,S.littleEndian),ne+=4,ke=C.decode(K.slice(ne,ne+Ee)),ne+=Ee),L.push(ke)}}return m&&(K[0]=0),G.s11n.deserialize.time+=performance.now()-d,L},S.s11n.serialize=function(...m){const d=performance.now();if(++G.s11n.serialize.count,m.length){const I=[];let L=0,B=1;for(K[0]=m.length&255;L<m.length;++L,++B)I.push(ie(m[L])),K[B]=I[L].id;for(L=0;L<m.length;++L){const ne=I[L];if(ne.setter)re[ne.setter](B,m[L],S.littleEndian),B+=ne.size;else{const ce=Q.encode(m[L]);re.setInt32(B,ce.byteLength,S.littleEndian),B+=4,K.set(ce,B),B+=ce.byteLength}}}else K[0]=0;G.s11n.serialize.time+=performance.now()-d},S.s11n},ge=function C(Q=16){C._chars||(C._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",C._n=C._chars.length);const K=[];let re=0;for(;re<Q;++re){const ee=Math.random()*(C._n*64)%C._n|0;K[re]=C._chars[ee]}return K.join("")},de=Object.create(null),me=Object.create(null);me.op=void 0,me.start=void 0;const qe=C=>{me.start=performance.now(),me.op=C,++G[C].count},ve=()=>G[me.op].time+=performance.now()-me.start,Ie={xCheckReservedLock:function(C,Q){return R.poke(Q,0,"i32"),0},xClose:function(C){qe("xClose");let Q=0;const K=de[C];return K&&(delete de[C],Q=se("xClose",C),K.sq3File&&K.sq3File.dispose()),ve(),Q},xDeviceCharacteristics:function(C){return T.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(C,Q,K){return T.SQLITE_NOTFOUND},xFileSize:function(C,Q){qe("xFileSize");let K=se("xFileSize",C);if(K==0)try{const re=S.s11n.deserialize()[0];R.poke(Q,re,"i64")}catch(re){z("Unexpected error reading xFileSize() result:",re),K=S.sq3Codes.SQLITE_IOERR}return ve(),K},xLock:function(C,Q){qe("xLock");const K=de[C];let re=0;return K.lockType?K.lockType=Q:(re=se("xLock",C,Q),re===0&&(K.lockType=Q)),ve(),re},xRead:function(C,Q,K,re){qe("xRead");const ee=de[C];let ie;try{ie=se("xRead",C,K,Number(re)),(ie===0||T.SQLITE_IOERR_SHORT_READ===ie)&&R.heap8u().set(ee.sabView.subarray(0,K),Q)}catch(V){z("xRead(",arguments,") failed:",V,ee),ie=T.SQLITE_IOERR_READ}return ve(),ie},xSync:function(C,Q){qe("xSync"),++G.xSync.count;const K=se("xSync",C,Q);return ve(),K},xTruncate:function(C,Q){qe("xTruncate");const K=se("xTruncate",C,Number(Q));return ve(),K},xUnlock:function(C,Q){qe("xUnlock");const K=de[C];let re=0;return T.SQLITE_LOCK_NONE===Q&&K.lockType&&(re=se("xUnlock",C,Q)),re===0&&(K.lockType=Q),ve(),re},xWrite:function(C,Q,K,re){qe("xWrite");const ee=de[C];let ie;try{ee.sabView.set(R.heap8u().subarray(Q,Q+K)),ie=se("xWrite",C,K,Number(re))}catch(V){z("xWrite(",arguments,") failed:",V,ee),ie=T.SQLITE_IOERR_WRITE}return ve(),ie}},Oe={xAccess:function(C,Q,K,re){qe("xAccess");const ee=se("xAccess",R.cstrToJs(Q));return R.poke(re,ee?0:1,"i32"),ve(),0},xCurrentTime:function(C,Q){return R.poke(Q,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(C,Q){return R.poke(Q,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(C,Q,K){qe("xDelete");const re=se("xDelete",R.cstrToJs(Q),K,!1);return ve(),re},xFullPathname:function(C,Q,K,re){return R.cstrncpy(re,Q,K)<K?0:T.SQLITE_CANTOPEN},xGetLastError:function(C,Q,K){return P("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(Q,K,re,ee,ie){qe("xOpen");let V=0;K===0?K=ge():R.isPtr(K)&&(T.sqlite3_uri_boolean(K,"opfs-unlock-asap",0)&&(V|=S.opfsFlags.OPFS_UNLOCK_ASAP),T.sqlite3_uri_boolean(K,"delete-before-open",0)&&(V|=S.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),K=R.cstrToJs(K));const m=Object.create(null);m.fid=re,m.filename=K,m.sab=new SharedArrayBuffer(S.fileBufferSize),m.flags=ee,m.readOnly=!(t.SQLITE_OPEN_CREATE&ee)&&!!(ee&T.SQLITE_OPEN_READONLY);const d=se("xOpen",re,K,ee,V);return d||(m.readOnly&&R.poke(ie,T.SQLITE_OPEN_READONLY,"i32"),de[re]=m,m.sabView=S.sabFileBufView,m.sq3File=new O(re),m.sq3File.$pMethods=b.pointer,m.lockType=T.SQLITE_LOCK_NONE),ve(),d}};w&&(x.$xRandomness=w.$xRandomness,x.$xSleep=w.$xSleep),x.$xRandomness||(Oe.xRandomness=function(C,Q,K){const re=R.heap8u();let ee=0;for(;ee<Q;++ee)re[K+ee]=Math.random()*255e3&255;return ee}),x.$xSleep||(Oe.xSleep=function(C,Q){return Atomics.wait(S.sabOPView,S.opIds.xSleep,0,Q),0}),X.getResolvedPath=function(C,Q){const K=new URL(C,"file://irrelevant").pathname;return Q?K.split("/").filter(re=>!!re):K},X.getDirForFilename=async function(Q,K=!1){const re=X.getResolvedPath(Q,!0),ee=re.pop();let ie=X.rootDirectory;for(const V of re)V&&(ie=await ie.getDirectoryHandle(V,{create:!!K}));return[ie,ee]},X.mkdir=async function(C){try{return await X.getDirForFilename(C+"/filepart",!0),!0}catch{return!1}},X.entryExists=async function(C){try{const[Q,K]=await X.getDirForFilename(C);return await Q.getFileHandle(K),!0}catch{return!1}},X.randomFilename=ge,X.treeList=async function(){const C=async function K(re,ee){ee.name=re.name,ee.dirs=[],ee.files=[];for await(const ie of re.values())if(ie.kind==="directory"){const V=Object.create(null);ee.dirs.push(V),await K(ie,V)}else ee.files.push(ie.name)},Q=Object.create(null);return await C(X.rootDirectory,Q),Q},X.rmfr=async function(){const C=X.rootDirectory,Q={recurse:!0};for await(const K of C.values())C.removeEntry(K.name,Q)},X.unlink=async function(C,Q=!1,K=!1){try{const[re,ee]=await X.getDirForFilename(C,!1);return await re.removeEntry(ee,{recursive:Q}),!0}catch(re){if(K)throw new Error("unlink(",arguments[0],") failed: "+re.message,{cause:re});return!1}},X.traverse=async function(C){const Q={recursive:!0,directory:X.rootDirectory};typeof C=="function"&&(C={callback:C}),C=Object.assign(Q,C||{}),async function re(ee,ie){for await(const V of ee.values()){if(C.callback(V,ee,ie)===!1)return!1;if(C.recursive&&V.kind==="directory"&&await re(V,ie+1)===!1)break}}(C.directory,0)};const Ye=async function(C,Q){const[K,re]=await X.getDirForFilename(C,!0);let ie=await(await K.getFileHandle(re,{create:!0})).createSyncAccessHandle(),V=0,m,d=!1;try{for(ie.truncate(0);(m=await Q())!==void 0;)m instanceof ArrayBuffer&&(m=new Uint8Array(m)),V===0&&m.byteLength>=15&&(F.affirmDbHeader(m),d=!0),ie.write(m,{at:V}),V+=m.byteLength;if((V<512||V%512!==0)&&A("Input size",V,"is not correct for an SQLite database."),!d){const I=new Uint8Array(20);ie.read(I,{at:0}),F.affirmDbHeader(I)}return ie.write(new Uint8Array([1,1]),{at:18}),V}catch(I){throw await ie.close(),ie=void 0,await K.removeEntry(re).catch(()=>{}),I}finally{ie&&await ie.close()}};if(X.importDb=async function(C,Q){if(Q instanceof Function)return Ye(C,Q);Q instanceof ArrayBuffer&&(Q=new Uint8Array(Q)),F.affirmIsDb(Q);const K=Q.byteLength,[re,ee]=await X.getDirForFilename(C,!0);let ie,V=0;try{return ie=await(await re.getFileHandle(ee,{create:!0})).createSyncAccessHandle(),ie.truncate(0),V=ie.write(Q,{at:0}),V!=K&&A("Expected to write "+K+" bytes but wrote "+V+"."),ie.write(new Uint8Array([1,1]),{at:18}),V}catch(m){throw ie&&(await ie.close(),ie=void 0),await re.removeEntry(ee).catch(()=>{}),m}finally{ie&&await ie.close()}},t.oo1){const C=function(...Q){const K=t.oo1.DB.dbCtorHelper.normalizeArgs(...Q);K.vfs=x.$zName,t.oo1.DB.dbCtorHelper.call(this,K)};C.prototype=Object.create(t.oo1.DB.prototype),t.oo1.OpfsDb=C,C.importDb=X.importDb,t.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(x.pointer,function(Q,K){K.capi.sqlite3_busy_timeout(Q,1e4)})}const Ce=function(){const C=R.scopedAllocPush(),Q=new O;try{const K=Q.pointer,re=T.SQLITE_OPEN_CREATE|T.SQLITE_OPEN_READWRITE|T.SQLITE_OPEN_MAIN_DB,ee=R.scopedAlloc(8),ie="/sanity/check/file"+ge(8),V=R.scopedAllocCString(ie);let m;if(S.s11n.serialize("This is  string."),m=S.s11n.deserialize(),D("deserialize() says:",m),m[0]!=="This is  string."&&A("String d13n error."),Oe.xAccess(x.pointer,V,0,ee),m=R.peek(ee,"i32"),D("xAccess(",ie,") exists ?=",m),m=Oe.xOpen(x.pointer,V,K,re,ee),D("open rc =",m,"state.sabOPView[xOpen] =",S.sabOPView[S.opIds.xOpen]),m!==0){z("open failed with code",m);return}Oe.xAccess(x.pointer,V,0,ee),m=R.peek(ee,"i32"),m||A("xAccess() failed to detect file."),m=Ie.xSync(Q.pointer,0),m&&A("sync failed w/ rc",m),m=Ie.xTruncate(Q.pointer,1024),m&&A("truncate failed w/ rc",m),R.poke(ee,0,"i64"),m=Ie.xFileSize(Q.pointer,ee),m&&A("xFileSize failed w/ rc",m),D("xFileSize says:",R.peek(ee,"i64")),m=Ie.xWrite(Q.pointer,V,10,1),m&&A("xWrite() failed!");const d=R.scopedAlloc(16);m=Ie.xRead(Q.pointer,d,6,2),R.poke(d+6,0);let I=R.cstrToJs(d);D("xRead() got:",I),I!=="sanity"&&A("Unexpected xRead() value."),Oe.xSleep&&(D("xSleep()ing before close()ing..."),Oe.xSleep(x.pointer,2e3),D("waking up from xSleep()")),m=Ie.xClose(K),D("xClose rc =",m,"sabOPView =",S.sabOPView),D("Deleting file:",ie),Oe.xDelete(x.pointer,V,4660),Oe.xAccess(x.pointer,V,0,ee),m=R.peek(ee,"i32"),m&&A("Expecting 0 from xAccess(",ie,") after xDelete()."),P("End of OPFS sanity checks.")}finally{Q.dispose(),R.scopedAllocPop(C)}};l.onmessage=function({data:C}){switch(C.type){case"opfs-unavailable":f(new Error(C.payload.join(" ")));break;case"opfs-async-loaded":l.postMessage({type:"opfs-async-init",args:S});break;case"opfs-async-inited":{if($===!0)break;try{t.vfs.installVfs({io:{struct:b,methods:Ie},vfs:{struct:x,methods:Oe}}),S.sabOPView=new Int32Array(S.sabOP),S.sabFileBufView=new Uint8Array(S.sabIO,0,S.fileBufferSize),S.sabS11nView=new Uint8Array(S.sabIO,S.sabS11nOffset,S.sabS11nSize),ue(),o.sanityChecks&&(P("Running sanity checks because of opfs-sanity-check URL arg..."),Ce()),_()?navigator.storage.getDirectory().then(Q=>{l.onerror=l._originalOnError,delete l._originalOnError,t.opfs=X,X.rootDirectory=Q,D("End of OPFS sqlite3_vfs setup.",x),g()}).catch(f):g()}catch(Q){z(Q),f(Q)}break}default:{const Q="Unexpected message from the OPFS async worker: "+JSON.stringify(C);z(Q),f(new Error(Q));break}}}}))};n.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async r=>{try{let o=n.defaultProxyUri;return r.scriptInfo.sqlite3Dir&&(n.defaultProxyUri=r.scriptInfo.sqlite3Dir+o),n().catch(a=>{r.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",a.message)})}catch(o){return r.config.error("installOpfsVfs() exception:",o),Promise.reject(o)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){var de,me,qe,ve,Ie,Oe,Ye,Ce,C,Q,K,re,ar,ie;const n=t.util.toss,r=t.util.toss3,o=Object.create(null),a=t.capi,p=t.util,q=t.wasm,N=4096,M=512,Y=4,J=8,D=M+Y,P=M,z=D,A=N,T=a.SQLITE_OPEN_MAIN_DB|a.SQLITE_OPEN_MAIN_JOURNAL|a.SQLITE_OPEN_SUPER_JOURNAL|a.SQLITE_OPEN_WAL,F=".opaque",R=()=>Math.random().toString(36).slice(2),U=new TextDecoder,O=new TextEncoder,W=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),X=[t.config.error,t.config.warn,t.config.log];t.config.log;const _=t.config.warn;t.config.error;const b=new Map,x=V=>b.get(V),$=(V,m)=>{m?b.set(V,m):b.delete(V)},f=new Map,g=V=>f.get(V),l=(V,m)=>{m?f.set(V,m):f.delete(V)},u={xCheckReservedLock:function(V,m){const d=g(V);return d.log("xCheckReservedLock"),d.storeErr(),q.poke32(m,1),0},xClose:function(V){const m=g(V);m.storeErr();const d=m.getOFileForS3File(V);if(d)try{m.log(`xClose ${d.path}`),m.mapS3FileToOFile(V,!1),d.sah.flush(),d.flags&a.SQLITE_OPEN_DELETEONCLOSE&&m.deletePath(d.path)}catch(I){return m.storeErr(I,a.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(V){return a.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(V,m,d){return a.SQLITE_NOTFOUND},xFileSize:function(V,m){const d=g(V);d.log("xFileSize");const L=d.getOFileForS3File(V).sah.getSize()-A;return q.poke64(m,BigInt(L)),0},xLock:function(V,m){const d=g(V);d.log(`xLock ${m}`),d.storeErr();const I=d.getOFileForS3File(V);return I.lockType=m,0},xRead:function(V,m,d,I){const L=g(V);L.storeErr();const B=L.getOFileForS3File(V);L.log(`xRead ${B.path} ${d} @ ${I}`);try{const ne=B.sah.read(q.heap8u().subarray(m,m+d),{at:A+Number(I)});return ne<d?(q.heap8u().fill(0,m+ne,m+d),a.SQLITE_IOERR_SHORT_READ):0}catch(ne){return L.storeErr(ne,a.SQLITE_IOERR)}},xSectorSize:function(V){return N},xSync:function(V,m){const d=g(V);d.log(`xSync ${m}`),d.storeErr();const I=d.getOFileForS3File(V);try{return I.sah.flush(),0}catch(L){return d.storeErr(L,a.SQLITE_IOERR)}},xTruncate:function(V,m){const d=g(V);d.log(`xTruncate ${m}`),d.storeErr();const I=d.getOFileForS3File(V);try{return I.sah.truncate(A+Number(m)),0}catch(L){return d.storeErr(L,a.SQLITE_IOERR)}},xUnlock:function(V,m){const d=g(V);d.log("xUnlock");const I=d.getOFileForS3File(V);return I.lockType=m,0},xWrite:function(V,m,d,I){const L=g(V);L.storeErr();const B=L.getOFileForS3File(V);L.log(`xWrite ${B.path} ${d} ${I}`);try{const ne=B.sah.write(q.heap8u().subarray(m,m+d),{at:A+Number(I)});return d===ne?0:n("Unknown write() failure.")}catch(ne){return L.storeErr(ne,a.SQLITE_IOERR)}}},w=new a.sqlite3_io_methods;w.$iVersion=1,t.vfs.installVfs({io:{struct:w,methods:u}});const S={xAccess:function(V,m,d,I){const L=x(V);L.storeErr();try{const B=L.getPath(m);q.poke32(I,L.hasFilename(B)?1:0)}catch{q.poke32(I,0)}return 0},xCurrentTime:function(V,m){return q.poke(m,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(V,m){return q.poke(m,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(V,m,d){const I=x(V);I.log(`xDelete ${q.cstrToJs(m)}`),I.storeErr();try{return I.deletePath(I.getPath(m)),0}catch(L){return I.storeErr(L),a.SQLITE_IOERR_DELETE}},xFullPathname:function(V,m,d,I){return q.cstrncpy(I,m,d)<d?0:a.SQLITE_CANTOPEN},xGetLastError:function(V,m,d){const I=x(V),L=I.popErr();if(I.log(`xGetLastError ${m} e =`,L),L){const B=q.scopedAllocPush();try{const[ne,ce]=q.scopedAllocCString(L.message,!0);q.cstrncpy(d,ne,m),ce>m&&q.poke8(d+m-1,0)}catch{return a.SQLITE_NOMEM}finally{q.scopedAllocPop(B)}}return L?L.sqlite3Rc||a.SQLITE_IOERR:0},xOpen:function(m,d,I,L,B){const ne=x(m);try{ne.log(`xOpen ${q.cstrToJs(d)} ${L}`);const ce=d&&q.peek8(d)?ne.getPath(d):R();let Ee=ne.getSAHForPath(ce);!Ee&&L&a.SQLITE_OPEN_CREATE&&(ne.getFileCount()<ne.getCapacity()?(Ee=ne.nextAvailableSAH(),ne.setAssociatedPath(Ee,ce,L)):n("SAH pool is full. Cannot create file",ce)),Ee||n("file not found:",ce);const ke={path:ce,flags:L,sah:Ee};ne.mapS3FileToOFile(I,ke),ke.lockType=a.SQLITE_LOCK_NONE;const ot=new a.sqlite3_file(I);return ot.$pMethods=w.pointer,ot.dispose(),q.poke32(B,L),0}catch(ce){return ne.storeErr(ce),a.SQLITE_CANTOPEN}}},G=function(V){t.capi.sqlite3_vfs_find(V)&&r("VFS name is already registered:",V);const m=new a.sqlite3_vfs,d=a.sqlite3_vfs_find(null),I=d?new a.sqlite3_vfs(d):null;return m.$iVersion=2,m.$szOsFile=a.sqlite3_file.structInfo.sizeof,m.$mxPathname=M,m.addOnDispose(m.$zName=q.allocCString(V),()=>$(m.pointer,0)),I&&(m.$xRandomness=I.$xRandomness,m.$xSleep=I.$xSleep,I.dispose()),!m.$xRandomness&&!S.xRandomness&&(S.xRandomness=function(L,B,ne){const ce=q.heap8u();let Ee=0;for(;Ee<B;++Ee)ce[ne+Ee]=Math.random()*255e3&255;return Ee}),!m.$xSleep&&!S.xSleep&&(S.xSleep=(L,B)=>0),t.vfs.installVfs({vfs:{struct:m,methods:S}}),m};class se{constructor(m=Object.create(null)){rt(this,re);_s(this,"vfsDir");rt(this,de);rt(this,me);rt(this,qe);rt(this,ve,new Map);rt(this,Ie,new Map);rt(this,Oe,new Set);rt(this,Ye,new Map);rt(this,Ce,new Uint8Array(D));rt(this,C);rt(this,Q);rt(this,K);Et(this,K,m.verbosity??W.verbosity),this.vfsName=m.name||W.name,Et(this,Q,G(this.vfsName)),$(oe(this,Q).pointer,this),this.vfsDir=m.directory||"."+this.vfsName,Et(this,C,new DataView(oe(this,Ce).buffer,oe(this,Ce).byteOffset)),this.isReady=this.reset(!!(m.clearOnInit??W.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(m.initialCapacity||W.initialCapacity)})}log(...m){nr(this,re,ar).call(this,2,...m)}warn(...m){nr(this,re,ar).call(this,1,...m)}error(...m){nr(this,re,ar).call(this,0,...m)}getVfs(){return oe(this,Q)}getCapacity(){return oe(this,ve).size}getFileCount(){return oe(this,Ie).size}getFileNames(){const m=[],d=oe(this,Ie).keys();for(const I of d)m.push(I);return m}async addCapacity(m){for(let d=0;d<m;++d){const I=R(),B=await(await oe(this,me).getFileHandle(I,{create:!0})).createSyncAccessHandle();oe(this,ve).set(B,I),this.setAssociatedPath(B,"",0)}return this.getCapacity()}async reduceCapacity(m){let d=0;for(const I of Array.from(oe(this,Oe))){if(d===m||this.getFileCount()===this.getCapacity())break;const L=oe(this,ve).get(I);I.close(),await oe(this,me).removeEntry(L),oe(this,ve).delete(I),oe(this,Oe).delete(I),++d}return d}releaseAccessHandles(){for(const m of oe(this,ve).keys())m.close();oe(this,ve).clear(),oe(this,Ie).clear(),oe(this,Oe).clear()}async acquireAccessHandles(m){const d=[];for await(const[I,L]of oe(this,me))L.kind==="file"&&d.push([I,L]);return Promise.all(d.map(async([I,L])=>{try{const B=await L.createSyncAccessHandle();if(oe(this,ve).set(B,I),m)B.truncate(A),this.setAssociatedPath(B,"",0);else{const ne=this.getAssociatedPath(B);ne?oe(this,Ie).set(ne,B):oe(this,Oe).add(B)}}catch(B){throw this.storeErr(B),this.releaseAccessHandles(),B}}))}getAssociatedPath(m){m.read(oe(this,Ce),{at:0});const d=oe(this,C).getUint32(P);if(oe(this,Ce)[0]&&(d&a.SQLITE_OPEN_DELETEONCLOSE||(d&T)===0))return _(`Removing file with unexpected flags ${d.toString(16)}`,oe(this,Ce)),this.setAssociatedPath(m,"",0),"";const I=new Uint32Array(J/4);m.read(I,{at:z});const L=this.computeDigest(oe(this,Ce));if(I.every((B,ne)=>B===L[ne])){const B=oe(this,Ce).findIndex(ne=>ne===0);return B===0&&m.truncate(A),B?U.decode(oe(this,Ce).subarray(0,B)):""}else return _("Disassociating file with bad digest."),this.setAssociatedPath(m,"",0),""}setAssociatedPath(m,d,I){const L=O.encodeInto(d,oe(this,Ce));M<=L.written+1&&n("Path too long:",d),oe(this,Ce).fill(0,L.written,M),oe(this,C).setUint32(P,I);const B=this.computeDigest(oe(this,Ce));m.write(oe(this,Ce),{at:0}),m.write(B,{at:z}),m.flush(),d?(oe(this,Ie).set(d,m),oe(this,Oe).delete(m)):(m.truncate(A),oe(this,Oe).add(m))}computeDigest(m){let d=3735928559,I=1103547991;for(const L of m)d=31*d+L*307,I=31*I+L*307;return new Uint32Array([d>>>0,I>>>0])}async reset(m){await this.isReady;let d=await navigator.storage.getDirectory(),I;for(const L of this.vfsDir.split("/"))L&&(I=d,d=await d.getDirectoryHandle(L,{create:!0}));return Et(this,de,d),Et(this,qe,I),Et(this,me,await oe(this,de).getDirectoryHandle(F,{create:!0})),this.releaseAccessHandles(),this.acquireAccessHandles(m)}getPath(m){return q.isPtr(m)&&(m=q.cstrToJs(m)),(m instanceof URL?m:new URL(m,"file://localhost/")).pathname}deletePath(m){const d=oe(this,Ie).get(m);return d&&(oe(this,Ie).delete(m),this.setAssociatedPath(d,"",0)),!!d}storeErr(m,d){return m&&(m.sqlite3Rc=d||a.SQLITE_IOERR,this.error(m)),this.$error=m,d}popErr(){const m=this.$error;return this.$error=void 0,m}nextAvailableSAH(){const[m]=oe(this,Oe).keys();return m}getOFileForS3File(m){return oe(this,Ye).get(m)}mapS3FileToOFile(m,d){d?(oe(this,Ye).set(m,d),l(m,this)):(oe(this,Ye).delete(m),l(m,!1))}hasFilename(m){return oe(this,Ie).has(m)}getSAHForPath(m){return oe(this,Ie).get(m)}async removeVfs(){if(!oe(this,Q).pointer||!oe(this,me))return!1;a.sqlite3_vfs_unregister(oe(this,Q).pointer),oe(this,Q).dispose(),delete o[this.vfsName];try{this.releaseAccessHandles(),await oe(this,de).removeEntry(F,{recursive:!0}),Et(this,me,void 0),await oe(this,qe).removeEntry(oe(this,de).name,{recursive:!0}),Et(this,de,Et(this,qe,void 0))}catch(m){t.config.error(this.vfsName,"removeVfs() failed:",m)}return!0}exportFile(m){const d=oe(this,Ie).get(m)||n("File not found:",m),I=d.getSize()-A,L=new Uint8Array(I>0?I:0);if(I>0){const B=d.read(L,{at:A});B!=I&&n("Expected to read "+I+" bytes but read "+B+".")}return L}async importDbChunked(m,d){const I=oe(this,Ie).get(m)||this.nextAvailableSAH()||n("No available handles to import to.");I.truncate(0);let L=0,B,ne=!1;try{for(;(B=await d())!==void 0;)B instanceof ArrayBuffer&&(B=new Uint8Array(B)),L===0&&B.byteLength>=15&&(p.affirmDbHeader(B),ne=!0),I.write(B,{at:A+L}),L+=B.byteLength;if((L<512||L%512!==0)&&n("Input size",L,"is not correct for an SQLite database."),!ne){const ce=new Uint8Array(20);I.read(ce,{at:0}),p.affirmDbHeader(ce)}I.write(new Uint8Array([1,1]),{at:A+18})}catch(ce){throw this.setAssociatedPath(I,"",0),ce}return this.setAssociatedPath(I,m,a.SQLITE_OPEN_MAIN_DB),L}importDb(m,d){if(d instanceof ArrayBuffer)d=new Uint8Array(d);else if(d instanceof Function)return this.importDbChunked(m,d);const I=oe(this,Ie).get(m)||this.nextAvailableSAH()||n("No available handles to import to."),L=d.byteLength;(L<512||L%512!=0)&&n("Byte array size is invalid for an SQLite db.");const B="SQLite format 3";for(let ce=0;ce<B.length;++ce)B.charCodeAt(ce)!==d[ce]&&n("Input does not contain an SQLite database header.");const ne=I.write(d,{at:A});return ne!=L?(this.setAssociatedPath(I,"",0),n("Expected to write "+L+" bytes but wrote "+ne+".")):(I.write(new Uint8Array([1,1]),{at:A+18}),this.setAssociatedPath(I,m,a.SQLITE_OPEN_MAIN_DB)),ne}}de=new WeakMap,me=new WeakMap,qe=new WeakMap,ve=new WeakMap,Ie=new WeakMap,Oe=new WeakMap,Ye=new WeakMap,Ce=new WeakMap,C=new WeakMap,Q=new WeakMap,K=new WeakMap,re=new WeakSet,ar=function(m,...d){oe(this,K)>m&&X[m](this.vfsName+":",...d)};class ue{constructor(m){rt(this,ie);Et(this,ie,m),this.vfsName=m.vfsName}async addCapacity(m){return oe(this,ie).addCapacity(m)}async reduceCapacity(m){return oe(this,ie).reduceCapacity(m)}getCapacity(){return oe(this,ie).getCapacity(oe(this,ie))}getFileCount(){return oe(this,ie).getFileCount()}getFileNames(){return oe(this,ie).getFileNames()}async reserveMinimumCapacity(m){const d=oe(this,ie).getCapacity();return d<m?oe(this,ie).addCapacity(m-d):d}exportFile(m){return oe(this,ie).exportFile(m)}importDb(m,d){return oe(this,ie).importDb(m,d)}async wipeFiles(){return oe(this,ie).reset(!0)}unlink(m){return oe(this,ie).deletePath(m)}async removeVfs(){return oe(this,ie).removeVfs()}}ie=new WeakMap;const ge=async()=>{const V=await navigator.storage.getDirectory(),m=".opfs-sahpool-sync-check-"+R(),L=(await(await V.getFileHandle(m,{create:!0})).createSyncAccessHandle()).close();return await L,await V.removeEntry(m),L!=null&&L.then&&n("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};t.installOpfsSAHPoolVfs=async function(V=Object.create(null)){var d;V=Object.assign(Object.create(null),W,V||{});const m=V.name;if(V.$testThrowPhase1)throw V.$testThrowPhase1;if(o[m])try{return await o[m]}catch(I){if(V.forceReinitIfPreviouslyFailed)delete o[m];else throw I}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((d=navigator==null?void 0:navigator.storage)!=null&&d.getDirectory)?o[m]=Promise.reject(new Error("Missing required OPFS APIs.")):o[m]=ge().then(async function(){if(V.$testThrowPhase2)throw V.$testThrowPhase2;const I=new se(V);return I.isReady.then(async()=>{const L=new ue(I);if(t.oo1){const B=t.oo1,ne=I.getVfs(),ce=function(...Ee){const ke=B.DB.dbCtorHelper.normalizeArgs(...Ee);ke.vfs=ne.$zName,B.DB.dbCtorHelper.call(this,ke)};ce.prototype=Object.create(B.DB.prototype),L.OpfsSAHPoolDb=ce}return I.log("VFS initialized."),L}).catch(async L=>{throw await I.removeVfs().catch(()=>{}),L})}).catch(I=>o[m]=Promise.reject(I))}}),typeof s<"u"){const t=Object.assign(Object.create(null),{exports:typeof h>"u"?s.asm:h,memory:s.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=t;let n;try{n=globalThis.sqlite3ApiBootstrap()}catch(r){throw console.error("sqlite3ApiBootstrap() error:",r),r}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}s.sqlite3=n}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")},y=ae,y}})();const di=function(){var y,s;const i=vs;if(!i)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const E=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:(y=globalThis==null?void 0:globalThis.document)==null?void 0:y.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:(s=globalThis==null?void 0:globalThis.location)!=null&&s.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(E.debugModule=E.urlParams.has("sqlite3.debugModule")?(...j)=>console.warn("sqlite3.debugModule:",...j):()=>{},E.urlParams.has("sqlite3.dir"))E.sqlite3Dir=E.urlParams.get("sqlite3.dir")+"/";else if(E.moduleScript){const j=E.moduleScript.src.split("/");j.pop(),E.sqlite3Dir=j.join("/")+"/"}if(globalThis.sqlite3InitModule=function j(...H){return i(...H).then(ae=>{ae.runSQLite3PostLoadInit(ae);const pe=ae.sqlite3;pe.scriptInfo=E,j.__isUnderTest&&(pe.__isUnderTest=!0);const we=pe.asyncPostInit;return delete pe.asyncPostInit,we()}).catch(ae=>{throw console.error("Exception loading sqlite3 module:",ae),ae})},globalThis.sqlite3InitModule.ready=i.ready,globalThis.sqlite3InitModuleState.moduleScript){const j=globalThis.sqlite3InitModuleState;let H=j.moduleScript.src.split("/");H.pop(),j.scriptDir=H.join("/")+"/"}return E.debugModule("sqlite3InitModuleState =",E),globalThis.sqlite3InitModule}();vs=di;globalThis.sqlite3Worker1Promiser=function i(E=i.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const te=E;E=Object.assign(Object.create(null),i.defaultConfig),E.onready=te}else E=Object.assign(Object.create(null),i.defaultConfig,E);const y=Object.create(null),s=function(){},j=E.onerror||s,H=E.debug||s,ae=E.generateMessageId?void 0:Object.create(null),pe=E.generateMessageId||function(te){return te.type+"#"+(ae[te.type]=(ae[te.type]||0)+1)},we=(...te)=>{throw new Error(te.join(" "))};E.worker||(E.worker=i.defaultConfig.worker),typeof E.worker=="function"&&(E.worker=E.worker());let be,De;return E.worker.onmessage=function(te){te=te.data,H("worker1.onmessage",te);let he=y[te.messageId];if(!he){if(te&&te.type==="sqlite3-api"&&te.result==="worker1-ready"){E.onready&&E.onready(De);return}if(he=y[te.type],he&&he.onrow){he.onrow(te);return}E.onunhandled?E.onunhandled(arguments[0]):j("sqlite3Worker1Promiser() unhandled worker message:",te);return}switch(delete y[te.messageId],te.type){case"error":he.reject(te);return;case"open":be||(be=te.dbId);break;case"close":te.dbId===be&&(be=void 0);break}try{he.resolve(te)}catch(xe){he.reject(xe)}},De=function(){let te;arguments.length===1?te=arguments[0]:arguments.length===2?(te=Object.create(null),te.type=arguments[0],te.args=arguments[1],te.dbId=te.args.dbId):we("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!te.dbId&&te.type!=="open"&&(te.dbId=be),te.messageId=pe(te),te.departureTime=performance.now();const he=Object.create(null);he.message=te;let xe;te.type==="exec"&&te.args&&(typeof te.args.callback=="function"?(xe=te.messageId+":row",he.onrow=te.args.callback,te.args.callback=xe,y[xe]=he):typeof te.args.callback=="string"&&we("exec callback may not be a string when using the Promise interface."));let Ne=new Promise(function(nt,dt){he.resolve=nt,he.reject=dt,y[te.messageId]=he,H("Posting",te.type,"message to Worker dbId="+(be||"default")+":",te),E.worker.postMessage(te)});return xe&&(Ne=Ne.finally(()=>delete y[xe])),Ne}};globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("/prompt-api-sqlite/assets/sqlite3-worker1-bundler-friendly-D1I8Os66.js",import.meta.url),{type:"module"})},onerror:(...i)=>console.error("worker1 promiser error",...i)};sqlite3Worker1Promiser.v2=(function(i){let E;typeof i=="function"?(E=i,i={}):typeof(i==null?void 0:i.onready)=="function"&&(E=i.onready,delete i.onready);const y=Object.create(null);i=Object.assign(i||Object.create(null),{onready:async function(j){try{E&&await E(j),y.resolve(j)}catch(H){y.reject(H)}}});const s=new Promise(function(j,H){y.resolve=j,y.reject=H});try{this.original(i)}catch(j){y.reject(j)}return s}).bind({original:sqlite3Worker1Promiser});sqlite3Worker1Promiser.v2;const pi=globalThis.sqlite3Worker1Promiser,lt=console.log,mi=console.error;let st,Ut;const hi=async()=>{try{st=await new Promise(y=>{const s=pi({onready:()=>{y(s)}})});let i;i=await st("config-get",{}),lt("Running SQLite3 version",i.result.version.libVersion),i=await st("open",{filename:"file:worker-promiser.sqlite3?vfs=opfs"});const{dbId:E}=i;lt("OPFS is available, created persisted database at",i.result.filename.replace(/^file:(.*?)\?vfs=opfs/,"$1")),await st("exec",{dbId:E,sql:`
      CREATE TABLE IF NOT EXISTS sessions (
        uuid TEXT PRIMARY KEY,
        conversation_summary TEXT
      );
    `}),lt("CREATE TABLE IF NOT EXISTS sessions (uuid TEXT PRIMARY KEY, conversation_summary TEXT);"),await st("exec",{dbId:E,sql:`
      CREATE TABLE IF NOT EXISTS prompts (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        session_uuid TEXT,
        role TEXT CHECK(role IN ('user', 'assistant', 'system')),
        content TEXT,
        image BLOB,
        FOREIGN KEY (session_uuid) REFERENCES sessions(uuid)
      );`}),lt(`
      CREATE TABLE IF NOT EXISTS prompts (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        session_uuid TEXT,
        role TEXT CHECK(role IN ('user', 'assistant', 'system')),
        content TEXT,
        image BLOB,
        FOREIGN KEY (session_uuid) REFERENCES sessions(uuid)
      );
    `)}catch(i){i instanceof Error||(i=new Error(i.result.message)),mi(i.name,i.message)}},gi=async()=>{const i=await st("exec",{dbId:Ut,sql:"SELECT uuid FROM sessions ORDER BY rowid;",rowMode:"array"});return lt(`SELECT uuid FROM sessions ORDER BY rowid; -> Fetched ${i.result.resultRows.length} UUIDs`),i.result.resultRows.map(E=>E[0])},bi=async i=>{const E=await st("exec",{dbId:Ut,sql:"SELECT conversation_summary FROM sessions WHERE uuid = $uuid;",bind:{$uuid:i},rowMode:"array"});lt(`SELECT conversation_summary FROM sessions WHERE uuid = $uuid; (bind: ${i})`);let y=null;E.result.resultRows.length>0&&(y=E.result.resultRows[0][0]);const s=await st("exec",{dbId:Ut,sql:"SELECT role, content, image FROM prompts WHERE session_uuid = $uuid ORDER BY id;",bind:{$uuid:i},rowMode:"array"});lt(`SELECT role, content, image FROM prompts WHERE session_uuid = $uuid ORDER BY id; (bind: ${i})`);const j=s.result.resultRows.map(H=>{const ae=H[0],pe=H[1],we=H[2];return we&&we.length>0?{role:ae,content:[{type:"image",value:new Blob([we],{type:"image/*"})}]}:{role:ae,content:[{type:"text",value:pe}]}});return{conversationSummary:y,initialPrompts:j}},Ur=async(i,E)=>{await st("exec",{dbId:Ut,sql:"REPLACE INTO sessions (uuid, conversation_summary) VALUES ($uuid, $summary);",bind:{$uuid:i,$summary:E.conversationSummary}}),lt(`REPLACE INTO sessions (uuid, conversation_summary) VALUES ($uuid, $summary); (bind: ${i}, ${E.conversationSummary})`),await st("exec",{dbId:Ut,sql:"DELETE FROM prompts WHERE session_uuid = $uuid;",bind:{$uuid:i}}),lt(`DELETE FROM prompts WHERE session_uuid = $uuid; (bind: ${i})`);for(const y of E.initialPrompts)for(const s of y.content)if(s.type==="image"&&s.value instanceof Blob){const j=await qi(s.value);await st("exec",{dbId:Ut,sql:`INSERT INTO prompts (session_uuid, role, image)
                VALUES ($uuid, $role, $image);`,bind:{$uuid:i,$role:y.role,$image:j}}),lt("INSERT INTO prompts (session_uuid, role, image) ... (image)")}else s.type==="text"&&(await st("exec",{dbId:Ut,sql:`INSERT INTO prompts (session_uuid, role, content)
                VALUES ($uuid, $role, $content);`,bind:{$uuid:i,$role:y.role,$content:s.value}}),lt("INSERT INTO prompts (session_uuid, role, content) ... (text)"))},yi=async i=>{await st("exec",{dbId:Ut,sql:"DELETE FROM prompts WHERE session_uuid = $uuid;",bind:{$uuid:i}}),lt(`DELETE FROM prompts WHERE session_uuid = $uuid; (bind: ${i})`),await st("exec",{dbId:Ut,sql:"DELETE FROM sessions WHERE uuid = $uuid;",bind:{$uuid:i}}),lt(`DELETE FROM sessions WHERE uuid = $uuid; (bind: ${i}) -- Prompts deleted via CASCADE`)},qi=async i=>{if(!(i instanceof Blob))throw new TypeError("Expected a Blob object");const E=await i.arrayBuffer();return new Uint8Array(E)},dr=1,Br=2,Kr=3,Yr=4,Xr=5,Jr=6,Zr=7,es=8,pr=9,mr=10,jr=11,lr=12,In=13,On=14,Pn=15,Ln=16,un=17,zr=18,at=19,Rn=20,$t=21,Ss=22,Cn=23,hr=24,dn=25,As=26,Wr=27,cr=28,_r=29,Ct=30,Pt=31,rr=101,us=102,xs=103,fs=104,Or=105,Hr=1,Ts=2,ks=4,Is=8,Os=16;function Ei(i){switch(i){case Hr:return"href";case Ts:return"src";case ks:return"class";case Is:return"checked";case Os:return"start"}}const wi=i=>{switch(i){case 1:return Kr;case 2:return Yr;case 3:return Xr;case 4:return Jr;case 5:return Zr;default:return es}},vi=wi,ds=24;function Ps(i){const E=new Uint32Array(ds);return E[0]=dr,{renderer:i,text:"",pending:"",tokens:E,len:0,token:dr,fence_end:0,blockquote_idx:0,hr_char:"",hr_chars:0,fence_start:0,spaces:new Uint8Array(ds),indent:"",indent_len:0,table_state:0}}function Ls(i){i.pending.length>0&&Ke(i,`
`)}function Pe(i){i.text.length!==0&&(console.assert(i.len>0,"Never adding text to root"),i.renderer.add_text(i.renderer.data,i.text),i.text="")}function Ue(i){console.assert(i.len>0,"No nodes to end"),i.len-=1,i.token=i.tokens[i.len],i.renderer.end_token(i.renderer.data)}function Le(i,E){(i.tokens[i.len]===hr||i.tokens[i.len]===Cn)&&E!==dn&&Ue(i),i.len+=1,i.tokens[i.len]=E,i.token=E,i.renderer.add_token(i.renderer.data,E)}function Si(i,E,y){for(;y<=i.len;){if(i.tokens[y]===E)return y;y+=1}return-1}function en(i,E){for(i.fence_start=0;i.len>E;)Ue(i)}function sr(i,E){let y=0;for(let s=0;s<=i.len&&(E-=i.spaces[s],!(E<0));s+=1)switch(i.tokens[s]){case pr:case mr:case Rn:case dn:y=s;break}for(;i.len>y;)Ue(i);return E}function Pr(i,E){let y=-1,s=-1;for(let j=i.blockquote_idx+1;j<=i.len;j+=1)if(i.tokens[j]===dn){if(i.indent_len<i.spaces[j]){s=-1;break}s=j}else i.tokens[j]===E&&(y=j);return s===-1?y===-1?(en(i,i.blockquote_idx),Le(i,E),!0):(en(i,y),!1):(en(i,s),Le(i,E),!0)}function Lr(i,E){Le(i,dn),i.spaces[i.len]=i.indent_len+E,Dt(i),i.token=xs}function Dt(i){i.indent="",i.indent_len=0,i.pending=""}function Qr(i){switch(i){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return!0;default:return!1}}function Ai(i){switch(i){case 32:case 58:case 59:case 41:case 44:case 33:case 46:case 63:case 93:case 10:return!0;default:return!1}}function xi(i){return Qr(i)||Ai(i)}function Ke(i,E){for(const y of E){if(i.token===rr){switch(y){case" ":i.indent_len+=1;continue;case"	":i.indent_len+=4;continue}let j=sr(i,i.indent_len);i.indent_len=0,i.token=i.tokens[i.len],j>0&&Ke(i," ".repeat(j))}const s=i.pending+y;switch(i.token){case $t:case dr:case Rn:case hr:case Cn:switch(console.assert(i.text.length===0,"Root should not have any text"),i.pending[0]){case void 0:i.pending=y;continue;case" ":console.assert(i.pending.length===1),i.pending=y,i.indent+=" ",i.indent_len+=1;continue;case"	":console.assert(i.pending.length===1),i.pending=y,i.indent+="	",i.indent_len+=4;continue;case`
`:if(console.assert(i.pending.length===1),i.tokens[i.len]===dn&&i.token===$t){Ue(i),Dt(i),i.pending=y;continue}en(i,i.blockquote_idx),Dt(i),i.blockquote_idx=0,i.fence_start=0,i.pending=y;continue;case"#":switch(y){case"#":if(i.pending.length<6){i.pending=s;continue}break;case" ":sr(i,i.indent_len),Le(i,vi(i.pending.length)),Dt(i);continue}break;case">":{const H=Si(i,Rn,i.blockquote_idx+1);H===-1?(en(i,i.blockquote_idx),i.blockquote_idx+=1,i.fence_start=0,Le(i,Rn)):i.blockquote_idx=H,Dt(i),i.pending=y;continue}case"-":case"*":case"_":if(i.hr_chars===0&&(console.assert(i.pending.length===1,"Pending should be one character"),i.hr_chars=1,i.hr_char=i.pending),i.hr_chars>0){switch(y){case i.hr_char:i.hr_chars+=1,i.pending=s;continue;case" ":i.pending=s;continue;case`
`:if(i.hr_chars<3)break;sr(i,i.indent_len),i.renderer.add_token(i.renderer.data,Ss),i.renderer.end_token(i.renderer.data),Dt(i),i.hr_chars=0;continue}i.hr_chars=0}if(i.pending[0]!=="_"&&i.pending[1]===" "){Pr(i,Cn),Lr(i,2),Ke(i,s.slice(2));continue}break;case"`":if(i.pending.length<3){if(y==="`"){i.pending=s,i.fence_start=s.length;continue}i.fence_start=0;break}switch(y){case"`":i.pending.length===i.fence_start?(i.pending=s,i.fence_start=s.length):(Le(i,Br),Dt(i),i.fence_start=0,Ke(i,s));continue;case`
`:{sr(i,i.indent_len),Le(i,mr),i.pending.length>i.fence_start&&i.renderer.set_attr(i.renderer.data,ks,i.pending.slice(i.fence_start)),Dt(i),i.token=rr;continue}default:i.pending=s;continue}case"+":if(y!==" ")break;Pr(i,Cn),Lr(i,2);continue;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(i.pending[i.pending.length-1]==="."){if(y!==" ")break;Pr(i,hr)&&i.pending!=="1."&&i.renderer.set_attr(i.renderer.data,Os,i.pending.slice(0,-1)),Lr(i,i.pending.length+1);continue}else{const H=y.charCodeAt(0);if(H===46||Qr(H)){i.pending=s;continue}}break;case"|":en(i,i.blockquote_idx),Le(i,Wr),Le(i,cr),i.pending="",Ke(i,y);continue}let j=s;if(i.token===$t)i.token=i.tokens[i.len],i.renderer.add_token(i.renderer.data,$t),i.renderer.end_token(i.renderer.data);else if(i.indent_len>=4){let H=0;for(;H<4;H+=1)if(i.indent[H]==="	"){H=H+1;break}j=i.indent.slice(H)+s,Le(i,pr)}else Le(i,Br);Dt(i),Ke(i,j);continue;case Wr:if(i.table_state===1)switch(y){case"-":case" ":case"|":case":":i.pending=s;continue;case`
`:i.table_state=2,i.pending="";continue;default:Ue(i),i.table_state=0;break}else switch(i.pending){case"|":Le(i,cr),i.pending="",Ke(i,y);continue;case`
`:Ue(i),i.pending="",i.table_state=0,Ke(i,y);continue}break;case cr:switch(i.pending){case"":break;case"|":Le(i,_r),Ue(i),i.pending="",Ke(i,y);continue;case`
`:Ue(i),i.table_state=Math.min(i.table_state+1,2),i.pending="",Ke(i,y);continue;default:Le(i,_r),Ke(i,y);continue}break;case _r:if(i.pending==="|"){Pe(i),Ue(i),i.pending="",Ke(i,y);continue}break;case pr:switch(s){case`
    `:case`
   	`:case`
  	`:case`
 	`:case`
	`:i.text+=`
`,i.pending="";continue;case`
`:case`
 `:case`
  `:case`
   `:i.pending=s;continue;default:i.pending.length!==0?(Pe(i),Ue(i),i.pending=y):i.text+=y;continue}case mr:switch(y){case"`":i.pending=s;continue;case`
`:if(s.length===i.fence_start+i.fence_end+1){Pe(i),Ue(i),i.pending="",i.fence_start=0,i.fence_end=0,i.token=rr;continue}i.token=rr;break;case" ":if(i.pending[0]===`
`){i.pending=s,i.fence_end+=1;continue}break}i.text+=i.pending,i.pending=y,i.fence_end=1;continue;case jr:switch(y){case"`":s.length===i.fence_start+ +(i.pending[0]===" ")?(Pe(i),Ue(i),i.pending="",i.fence_start=0):i.pending=s;continue;case`
`:i.text+=i.pending,i.pending="",i.token=$t,i.blockquote_idx=0,Pe(i);continue;case" ":i.text+=i.pending,i.pending=y;continue;default:i.text+=s,i.pending="";continue}case xs:switch(i.pending.length){case 0:if(y!=="[")break;i.pending=s;continue;case 1:if(y!==" "&&y!=="x")break;i.pending=s;continue;case 2:if(y!=="]")break;i.pending=s;continue;case 3:if(y!==" ")break;i.renderer.add_token(i.renderer.data,As),i.pending[1]==="x"&&i.renderer.set_attr(i.renderer.data,Is,""),i.renderer.end_token(i.renderer.data),i.pending=" ";continue}i.token=i.tokens[i.len],i.pending="",Ke(i,s);continue;case On:case Pn:{let H="*",ae=lr;if(i.token===Pn&&(H="_",ae=In),H===i.pending){if(Pe(i),H===y){Ue(i),i.pending="";continue}Le(i,ae),i.pending=y;continue}break}case lr:case In:{let H="*",ae=On;switch(i.token===In&&(H="_",ae=Pn),i.pending){case H:H===y?i.tokens[i.len-1]===ae?i.pending=s:(Pe(i),Le(i,ae),i.pending=""):(Pe(i),Ue(i),i.pending=y);continue;case H+H:const pe=i.token;Pe(i),Ue(i),Ue(i),H!==y?(Le(i,pe),i.pending=y):i.pending="";continue}break}case Ln:if(s==="~~"){Pe(i),Ue(i),i.pending="";continue}break;case Or:y===`
`?(Pe(i),Le(i,Ct),i.pending=""):(i.token=i.tokens[i.len],i.pending[0]==="\\"?i.text+="[":i.text+="$$",i.pending="",Ke(i,y));continue;case Ct:if(s==="\\]"||s==="$$"){Pe(i),Ue(i),i.pending="";continue}break;case Pt:if(s==="\\)"||i.pending[0]==="$"){Pe(i),Ue(i),y===")"?i.pending="":i.pending=y;continue}break;case us:s==="http://"||s==="https://"?(Pe(i),Le(i,zr),i.pending=s,i.text=s):"http:/"[i.pending.length]===y||"https:/"[i.pending.length]===y?i.pending=s:(i.token=i.tokens[i.len],Ke(i,y));continue;case un:case at:if(i.pending==="]"){Pe(i),y==="("?i.pending=s:(Ue(i),i.pending=y);continue}if(i.pending[0]==="]"&&i.pending[1]==="("){if(y===")"){const H=i.token===un?Hr:Ts,ae=i.pending.slice(2);i.renderer.set_attr(i.renderer.data,H,ae),Ue(i),i.pending=""}else i.pending+=y;continue}break;case zr:y===" "||y===`
`||y==="\\"?(i.renderer.set_attr(i.renderer.data,Hr,i.pending),Pe(i),Ue(i),i.pending=y):(i.text+=y,i.pending=s);continue;case fs:if(s.startsWith("<br")){if(s.length===3||y===" "||y==="/"&&(s.length===4||i.pending[i.pending.length-1]===" ")){i.pending=s;continue}if(y===">"){Pe(i),i.token=i.tokens[i.len],i.renderer.add_token(i.renderer.data,$t),i.renderer.end_token(i.renderer.data),i.pending="";continue}}i.token=i.tokens[i.len],i.text+="<",i.pending=i.pending.slice(1),Ke(i,y);continue}switch(i.pending[0]){case"\\":if(i.token===at||i.token===Ct||i.token===Pt)break;switch(y){case"(":Pe(i),Le(i,Pt),i.pending="";continue;case"[":i.token=Or,i.pending=s;continue;case`
`:i.pending=y;continue;default:let j=y.charCodeAt(0);i.pending="",i.text+=Qr(j)||j>=65&&j<=90||j>=97&&j<=122?s:y;continue}case`
`:switch(i.token){case at:case Ct:case Pt:break;case Kr:case Yr:case Xr:case Jr:case Zr:case es:Pe(i),en(i,i.blockquote_idx),i.blockquote_idx=0,i.pending=y;continue;default:Pe(i),i.pending=y,i.token=$t,i.blockquote_idx=0;continue}break;case"<":if(i.token!==at&&i.token!==Ct&&i.token!==Pt){Pe(i),i.pending=s,i.token=fs;continue}break;case"`":if(i.token===at)break;y==="`"?(i.fence_start+=1,i.pending=s):(i.fence_start+=1,Pe(i),Le(i,jr),i.text=y===" "||y===`
`?"":y,i.pending="");continue;case"_":case"*":{if(i.token===at||i.token===Ct||i.token===Pt||i.token===On)break;let j=lr,H=On;const ae=i.pending[0];if(ae==="_"&&(j=In,H=Pn),i.pending.length===1){if(ae===y){i.pending=s;continue}if(y!==" "&&y!==`
`){Pe(i),Le(i,j),i.pending=y;continue}}else{if(ae===y){Pe(i),Le(i,H),Le(i,j),i.pending="";continue}if(y!==" "&&y!==`
`){Pe(i),Le(i,H),i.pending=y;continue}}break}case"~":if(i.token!==at&&i.token!==Ln){if(i.pending==="~"){if(y==="~"){i.pending=s;continue}}else if(y!==" "&&y!==`
`){Pe(i),Le(i,Ln),i.pending=y;continue}}break;case"$":if(i.token!==at&&i.token!==Ln&&i.pending==="$")if(y==="$"){i.token=Or,i.pending=s;continue}else{if(xi(y.charCodeAt(0)))break;Pe(i),Le(i,Pt),i.pending=y;continue}break;case"[":if(i.token!==at&&i.token!==un&&i.token!==Ct&&i.token!==Pt&&y!=="]"){Pe(i),Le(i,un),i.pending=y;continue}break;case"!":if(i.token!==at&&y==="["){Pe(i),Le(i,at),i.pending="";continue}break;case" ":if(i.pending.length===1&&y===" ")continue;break}if(i.token!==at&&i.token!==un&&i.token!==Ct&&i.token!==Pt&&y==="h"&&(i.pending===" "||i.pending==="")){i.text+=i.pending,i.pending=y,i.token=us;continue}i.text+=i.pending,i.pending=y}Pe(i)}function Fs(i){return{add_token:Ti,end_token:ki,add_text:Ii,set_attr:Oi,data:{nodes:[i,,,,,],index:0}}}function Ti(i,E){var j;let y=i.nodes[i.index],s;switch(E){case dr:return;case Rn:s=document.createElement("blockquote");break;case Br:s=document.createElement("p");break;case $t:s=document.createElement("br");break;case Ss:s=document.createElement("hr");break;case Kr:s=document.createElement("h1");break;case Yr:s=document.createElement("h2");break;case Xr:s=document.createElement("h3");break;case Jr:s=document.createElement("h4");break;case Zr:s=document.createElement("h5");break;case es:s=document.createElement("h6");break;case lr:case In:s=document.createElement("em");break;case On:case Pn:s=document.createElement("strong");break;case Ln:s=document.createElement("s");break;case jr:s=document.createElement("code");break;case zr:case un:s=document.createElement("a");break;case at:s=document.createElement("img");break;case Cn:s=document.createElement("ul");break;case hr:s=document.createElement("ol");break;case dn:s=document.createElement("li");break;case As:let H=s=document.createElement("input");H.type="checkbox",H.disabled=!0;break;case pr:case mr:y=y.appendChild(document.createElement("pre")),s=document.createElement("code");break;case Wr:s=document.createElement("table");break;case cr:switch(y.children.length){case 0:y=y.appendChild(document.createElement("thead"));break;case 1:y=y.appendChild(document.createElement("tbody"));break;default:y=y.children[1]}s=document.createElement("tr");break;case _r:s=document.createElement(((j=y.parentElement)==null?void 0:j.tagName)==="THEAD"?"th":"td");break;case Ct:s=document.createElement("equation-block");break;case Pt:s=document.createElement("equation-inline");break}i.nodes[++i.index]=y.appendChild(s)}function ki(i){i.index-=1}function Ii(i,E){i.nodes[i.index].appendChild(document.createTextNode(E))}function Oi(i,E,y){i.nodes[i.index].setAttribute(Ei(E),y)}/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:Rs,setPrototypeOf:ps,isFrozen:Pi,getPrototypeOf:Li,getOwnPropertyDescriptor:Fi}=Object;let{freeze:et,seal:ft,create:Cs}=Object,{apply:Vr,construct:Gr}=typeof Reflect<"u"&&Reflect;et||(et=function(E){return E});ft||(ft=function(E){return E});Vr||(Vr=function(E,y,s){return E.apply(y,s)});Gr||(Gr=function(E,y){return new E(...y)});const ir=tt(Array.prototype.forEach),Ri=tt(Array.prototype.lastIndexOf),ms=tt(Array.prototype.pop),Sn=tt(Array.prototype.push),Ci=tt(Array.prototype.splice),ur=tt(String.prototype.toLowerCase),Fr=tt(String.prototype.toString),hs=tt(String.prototype.match),An=tt(String.prototype.replace),Di=tt(String.prototype.indexOf),Ni=tt(String.prototype.trim),wt=tt(Object.prototype.hasOwnProperty),Ze=tt(RegExp.prototype.test),xn=Mi(TypeError);function tt(i){return function(E){E instanceof RegExp&&(E.lastIndex=0);for(var y=arguments.length,s=new Array(y>1?y-1:0),j=1;j<y;j++)s[j-1]=arguments[j];return Vr(i,E,s)}}function Mi(i){return function(){for(var E=arguments.length,y=new Array(E),s=0;s<E;s++)y[s]=arguments[s];return Gr(i,y)}}function Se(i,E){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ur;ps&&ps(i,null);let s=E.length;for(;s--;){let j=E[s];if(typeof j=="string"){const H=y(j);H!==j&&(Pi(E)||(E[s]=H),j=H)}i[j]=!0}return i}function Ui(i){for(let E=0;E<i.length;E++)wt(i,E)||(i[E]=null);return i}function Nt(i){const E=Cs(null);for(const[y,s]of Rs(i))wt(i,y)&&(Array.isArray(s)?E[y]=Ui(s):s&&typeof s=="object"&&s.constructor===Object?E[y]=Nt(s):E[y]=s);return E}function Tn(i,E){for(;i!==null;){const s=Fi(i,E);if(s){if(s.get)return tt(s.get);if(typeof s.value=="function")return tt(s.value)}i=Li(i)}function y(){return null}return y}const gs=et(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Rr=et(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Cr=et(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Bi=et(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Dr=et(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ji=et(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),bs=et(["#text"]),ys=et(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Nr=et(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),qs=et(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),or=et(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),zi=ft(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Wi=ft(/<%[\w\W]*|[\w\W]*%>/gm),Hi=ft(/\$\{[\w\W]*/gm),Qi=ft(/^data-[\-\w.\u00B7-\uFFFF]+$/),Vi=ft(/^aria-[\-\w]+$/),Ds=ft(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Gi=ft(/^(?:\w+script|data):/i),$i=ft(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ns=ft(/^html$/i),Ki=ft(/^[a-z][.\w]*(-[.\w]+)+$/i);var Es=Object.freeze({__proto__:null,ARIA_ATTR:Vi,ATTR_WHITESPACE:$i,CUSTOM_ELEMENT:Ki,DATA_ATTR:Qi,DOCTYPE_NAME:Ns,ERB_EXPR:Wi,IS_ALLOWED_URI:Ds,IS_SCRIPT_OR_DATA:Gi,MUSTACHE_EXPR:zi,TMPLIT_EXPR:Hi});const kn={element:1,text:3,progressingInstruction:7,comment:8,document:9},Yi=function(){return typeof window>"u"?null:window},Xi=function(E,y){if(typeof E!="object"||typeof E.createPolicy!="function")return null;let s=null;const j="data-tt-policy-suffix";y&&y.hasAttribute(j)&&(s=y.getAttribute(j));const H="dompurify"+(s?"#"+s:"");try{return E.createPolicy(H,{createHTML(ae){return ae},createScriptURL(ae){return ae}})}catch{return console.warn("TrustedTypes policy "+H+" could not be created."),null}},ws=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ms(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Yi();const E=_e=>Ms(_e);if(E.version="3.2.6",E.removed=[],!i||!i.document||i.document.nodeType!==kn.document||!i.Element)return E.isSupported=!1,E;let{document:y}=i;const s=y,j=s.currentScript,{DocumentFragment:H,HTMLTemplateElement:ae,Node:pe,Element:we,NodeFilter:be,NamedNodeMap:De=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:te,DOMParser:he,trustedTypes:xe}=i,Ne=we.prototype,nt=Tn(Ne,"cloneNode"),dt=Tn(Ne,"remove"),it=Tn(Ne,"nextSibling"),pt=Tn(Ne,"childNodes"),ct=Tn(Ne,"parentNode");if(typeof ae=="function"){const _e=y.createElement("template");_e.content&&_e.content.ownerDocument&&(y=_e.content.ownerDocument)}let Qe,je="";const{implementation:St,createNodeIterator:Kt,createDocumentFragment:Ae,getElementsByTagName:He}=y,{importNode:mt}=s;let Ve=ws();E.isSupported=typeof Rs=="function"&&typeof ct=="function"&&St&&St.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:pn,ERB_EXPR:tn,TMPLIT_EXPR:nn,DATA_ATTR:Nn,ARIA_ATTR:br,IS_SCRIPT_OR_DATA:yr,ATTR_WHITESPACE:Mn,CUSTOM_ELEMENT:qr}=Es;let{IS_ALLOWED_URI:Un}=Es,ze=null;const At=Se({},[...gs,...Rr,...Cr,...Dr,...bs]);let Me=null;const Er=Se({},[...ys,...Nr,...qs,...or]);let Re=Object.seal(Cs(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),xt=null,Yt=null,Bn=!0,rn=!0,jn=!1,sn=!0,Lt=!1,on=!0,Tt=!1,mn=!1,hn=!1,jt=!1,zt=!1,Te=!1,zn=!0,gn=!1;const ht="user-content-";let an=!0,_t=!1,kt={},gt=null;const ln=Se({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let bn=null;const Wn=Se({},["audio","video","img","source","image","track"]);let bt=null;const Hn=Se({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Xt="http://www.w3.org/1998/Math/MathML",Jt="http://www.w3.org/2000/svg",fe="http://www.w3.org/1999/xhtml";let Wt=fe,yn=!1,qn=null;const wr=Se({},[Xt,Jt,fe],Fr);let cn=Se({},["mi","mo","mn","ms","mtext"]),_n=Se({},["annotation-xml"]);const En=Se({},["title","style","font","a","script"]);let c=null;const vr=["application/xhtml+xml","text/html"],ye="text/html";let We=null,Ht=null;const Sr=y.createElement("form"),Qn=function(k){return k instanceof RegExp||k instanceof Function},Qt=function(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ht&&Ht===k)){if((!k||typeof k!="object")&&(k={}),k=Nt(k),c=vr.indexOf(k.PARSER_MEDIA_TYPE)===-1?ye:k.PARSER_MEDIA_TYPE,We=c==="application/xhtml+xml"?Fr:ur,ze=wt(k,"ALLOWED_TAGS")?Se({},k.ALLOWED_TAGS,We):At,Me=wt(k,"ALLOWED_ATTR")?Se({},k.ALLOWED_ATTR,We):Er,qn=wt(k,"ALLOWED_NAMESPACES")?Se({},k.ALLOWED_NAMESPACES,Fr):wr,bt=wt(k,"ADD_URI_SAFE_ATTR")?Se(Nt(Hn),k.ADD_URI_SAFE_ATTR,We):Hn,bn=wt(k,"ADD_DATA_URI_TAGS")?Se(Nt(Wn),k.ADD_DATA_URI_TAGS,We):Wn,gt=wt(k,"FORBID_CONTENTS")?Se({},k.FORBID_CONTENTS,We):ln,xt=wt(k,"FORBID_TAGS")?Se({},k.FORBID_TAGS,We):Nt({}),Yt=wt(k,"FORBID_ATTR")?Se({},k.FORBID_ATTR,We):Nt({}),kt=wt(k,"USE_PROFILES")?k.USE_PROFILES:!1,Bn=k.ALLOW_ARIA_ATTR!==!1,rn=k.ALLOW_DATA_ATTR!==!1,jn=k.ALLOW_UNKNOWN_PROTOCOLS||!1,sn=k.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Lt=k.SAFE_FOR_TEMPLATES||!1,on=k.SAFE_FOR_XML!==!1,Tt=k.WHOLE_DOCUMENT||!1,jt=k.RETURN_DOM||!1,zt=k.RETURN_DOM_FRAGMENT||!1,Te=k.RETURN_TRUSTED_TYPE||!1,hn=k.FORCE_BODY||!1,zn=k.SANITIZE_DOM!==!1,gn=k.SANITIZE_NAMED_PROPS||!1,an=k.KEEP_CONTENT!==!1,_t=k.IN_PLACE||!1,Un=k.ALLOWED_URI_REGEXP||Ds,Wt=k.NAMESPACE||fe,cn=k.MATHML_TEXT_INTEGRATION_POINTS||cn,_n=k.HTML_INTEGRATION_POINTS||_n,Re=k.CUSTOM_ELEMENT_HANDLING||{},k.CUSTOM_ELEMENT_HANDLING&&Qn(k.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Re.tagNameCheck=k.CUSTOM_ELEMENT_HANDLING.tagNameCheck),k.CUSTOM_ELEMENT_HANDLING&&Qn(k.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Re.attributeNameCheck=k.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),k.CUSTOM_ELEMENT_HANDLING&&typeof k.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Re.allowCustomizedBuiltInElements=k.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Lt&&(rn=!1),zt&&(jt=!0),kt&&(ze=Se({},bs),Me=[],kt.html===!0&&(Se(ze,gs),Se(Me,ys)),kt.svg===!0&&(Se(ze,Rr),Se(Me,Nr),Se(Me,or)),kt.svgFilters===!0&&(Se(ze,Cr),Se(Me,Nr),Se(Me,or)),kt.mathMl===!0&&(Se(ze,Dr),Se(Me,qs),Se(Me,or))),k.ADD_TAGS&&(ze===At&&(ze=Nt(ze)),Se(ze,k.ADD_TAGS,We)),k.ADD_ATTR&&(Me===Er&&(Me=Nt(Me)),Se(Me,k.ADD_ATTR,We)),k.ADD_URI_SAFE_ATTR&&Se(bt,k.ADD_URI_SAFE_ATTR,We),k.FORBID_CONTENTS&&(gt===ln&&(gt=Nt(gt)),Se(gt,k.FORBID_CONTENTS,We)),an&&(ze["#text"]=!0),Tt&&Se(ze,["html","head","body"]),ze.table&&(Se(ze,["tbody"]),delete xt.tbody),k.TRUSTED_TYPES_POLICY){if(typeof k.TRUSTED_TYPES_POLICY.createHTML!="function")throw xn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof k.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw xn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Qe=k.TRUSTED_TYPES_POLICY,je=Qe.createHTML("")}else Qe===void 0&&(Qe=Xi(xe,j)),Qe!==null&&typeof je=="string"&&(je=Qe.createHTML(""));et&&et(k),Ht=k}},Ft=Se({},[...Rr,...Cr,...Bi]),Vn=Se({},[...Dr,...ji]),Ar=function(k){let Z=ct(k);(!Z||!Z.tagName)&&(Z={namespaceURI:Wt,tagName:"template"});const le=ur(k.tagName),Fe=ur(Z.tagName);return qn[k.namespaceURI]?k.namespaceURI===Jt?Z.namespaceURI===fe?le==="svg":Z.namespaceURI===Xt?le==="svg"&&(Fe==="annotation-xml"||cn[Fe]):!!Ft[le]:k.namespaceURI===Xt?Z.namespaceURI===fe?le==="math":Z.namespaceURI===Jt?le==="math"&&_n[Fe]:!!Vn[le]:k.namespaceURI===fe?Z.namespaceURI===Jt&&!_n[Fe]||Z.namespaceURI===Xt&&!cn[Fe]?!1:!Vn[le]&&(En[le]||!Ft[le]):!!(c==="application/xhtml+xml"&&qn[k.namespaceURI]):!1},ut=function(k){Sn(E.removed,{element:k});try{ct(k).removeChild(k)}catch{dt(k)}},Vt=function(k,Z){try{Sn(E.removed,{attribute:Z.getAttributeNode(k),from:Z})}catch{Sn(E.removed,{attribute:null,from:Z})}if(Z.removeAttribute(k),k==="is")if(jt||zt)try{ut(Z)}catch{}else try{Z.setAttribute(k,"")}catch{}},Gt=function(k){let Z=null,le=null;if(hn)k="<remove></remove>"+k;else{const Be=hs(k,/^[\r\n\t ]+/);le=Be&&Be[0]}c==="application/xhtml+xml"&&Wt===fe&&(k='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+k+"</body></html>");const Fe=Qe?Qe.createHTML(k):k;if(Wt===fe)try{Z=new he().parseFromString(Fe,c)}catch{}if(!Z||!Z.documentElement){Z=St.createDocument(Wt,"template",null);try{Z.documentElement.innerHTML=yn?je:Fe}catch{}}const Ge=Z.body||Z.documentElement;return k&&le&&Ge.insertBefore(y.createTextNode(le),Ge.childNodes[0]||null),Wt===fe?He.call(Z,Tt?"html":"body")[0]:Tt?Z.documentElement:Ge},Gn=function(k){return Kt.call(k.ownerDocument||k,k,be.SHOW_ELEMENT|be.SHOW_COMMENT|be.SHOW_TEXT|be.SHOW_PROCESSING_INSTRUCTION|be.SHOW_CDATA_SECTION,null)},It=function(k){return k instanceof te&&(typeof k.nodeName!="string"||typeof k.textContent!="string"||typeof k.removeChild!="function"||!(k.attributes instanceof De)||typeof k.removeAttribute!="function"||typeof k.setAttribute!="function"||typeof k.namespaceURI!="string"||typeof k.insertBefore!="function"||typeof k.hasChildNodes!="function")},$n=function(k){return typeof pe=="function"&&k instanceof pe};function yt(_e,k,Z){ir(_e,le=>{le.call(E,k,Z,Ht)})}const Kn=function(k){let Z=null;if(yt(Ve.beforeSanitizeElements,k,null),It(k))return ut(k),!0;const le=We(k.nodeName);if(yt(Ve.uponSanitizeElement,k,{tagName:le,allowedTags:ze}),on&&k.hasChildNodes()&&!$n(k.firstElementChild)&&Ze(/<[/\w!]/g,k.innerHTML)&&Ze(/<[/\w!]/g,k.textContent)||k.nodeType===kn.progressingInstruction||on&&k.nodeType===kn.comment&&Ze(/<[/\w]/g,k.data))return ut(k),!0;if(!ze[le]||xt[le]){if(!xt[le]&&Xn(le)&&(Re.tagNameCheck instanceof RegExp&&Ze(Re.tagNameCheck,le)||Re.tagNameCheck instanceof Function&&Re.tagNameCheck(le)))return!1;if(an&&!gt[le]){const Fe=ct(k)||k.parentNode,Ge=pt(k)||k.childNodes;if(Ge&&Fe){const Be=Ge.length;for(let Xe=Be-1;Xe>=0;--Xe){const qt=nt(Ge[Xe],!0);qt.__removalCount=(k.__removalCount||0)+1,Fe.insertBefore(qt,it(k))}}}return ut(k),!0}return k instanceof we&&!Ar(k)||(le==="noscript"||le==="noembed"||le==="noframes")&&Ze(/<\/no(script|embed|frames)/i,k.innerHTML)?(ut(k),!0):(Lt&&k.nodeType===kn.text&&(Z=k.textContent,ir([pn,tn,nn],Fe=>{Z=An(Z,Fe," ")}),k.textContent!==Z&&(Sn(E.removed,{element:k.cloneNode()}),k.textContent=Z)),yt(Ve.afterSanitizeElements,k,null),!1)},Yn=function(k,Z,le){if(zn&&(Z==="id"||Z==="name")&&(le in y||le in Sr))return!1;if(!(rn&&!Yt[Z]&&Ze(Nn,Z))){if(!(Bn&&Ze(br,Z))){if(!Me[Z]||Yt[Z]){if(!(Xn(k)&&(Re.tagNameCheck instanceof RegExp&&Ze(Re.tagNameCheck,k)||Re.tagNameCheck instanceof Function&&Re.tagNameCheck(k))&&(Re.attributeNameCheck instanceof RegExp&&Ze(Re.attributeNameCheck,Z)||Re.attributeNameCheck instanceof Function&&Re.attributeNameCheck(Z))||Z==="is"&&Re.allowCustomizedBuiltInElements&&(Re.tagNameCheck instanceof RegExp&&Ze(Re.tagNameCheck,le)||Re.tagNameCheck instanceof Function&&Re.tagNameCheck(le))))return!1}else if(!bt[Z]){if(!Ze(Un,An(le,Mn,""))){if(!((Z==="src"||Z==="xlink:href"||Z==="href")&&k!=="script"&&Di(le,"data:")===0&&bn[k])){if(!(jn&&!Ze(yr,An(le,Mn,"")))){if(le)return!1}}}}}}return!0},Xn=function(k){return k!=="annotation-xml"&&hs(k,qr)},Jn=function(k){yt(Ve.beforeSanitizeAttributes,k,null);const{attributes:Z}=k;if(!Z||It(k))return;const le={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Me,forceKeepAttr:void 0};let Fe=Z.length;for(;Fe--;){const Ge=Z[Fe],{name:Be,namespaceURI:Xe,value:qt}=Ge,Zt=We(Be),wn=qt;let $e=Be==="value"?wn:Ni(wn);if(le.attrName=Zt,le.attrValue=$e,le.keepAttr=!0,le.forceKeepAttr=void 0,yt(Ve.uponSanitizeAttribute,k,le),$e=le.attrValue,gn&&(Zt==="id"||Zt==="name")&&(Vt(Be,k),$e=ht+$e),on&&Ze(/((--!?|])>)|<\/(style|title)/i,$e)){Vt(Be,k);continue}if(le.forceKeepAttr)continue;if(!le.keepAttr){Vt(Be,k);continue}if(!sn&&Ze(/\/>/i,$e)){Vt(Be,k);continue}Lt&&ir([pn,tn,nn],er=>{$e=An($e,er," ")});const Zn=We(k.nodeName);if(!Yn(Zn,Zt,$e)){Vt(Be,k);continue}if(Qe&&typeof xe=="object"&&typeof xe.getAttributeType=="function"&&!Xe)switch(xe.getAttributeType(Zn,Zt)){case"TrustedHTML":{$e=Qe.createHTML($e);break}case"TrustedScriptURL":{$e=Qe.createScriptURL($e);break}}if($e!==wn)try{Xe?k.setAttributeNS(Xe,Be,$e):k.setAttribute(Be,$e),It(k)?ut(k):ms(E.removed)}catch{Vt(Be,k)}}yt(Ve.afterSanitizeAttributes,k,null)},xr=function _e(k){let Z=null;const le=Gn(k);for(yt(Ve.beforeSanitizeShadowDOM,k,null);Z=le.nextNode();)yt(Ve.uponSanitizeShadowNode,Z,null),Kn(Z),Jn(Z),Z.content instanceof H&&_e(Z.content);yt(Ve.afterSanitizeShadowDOM,k,null)};return E.sanitize=function(_e){let k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=null,le=null,Fe=null,Ge=null;if(yn=!_e,yn&&(_e="<!-->"),typeof _e!="string"&&!$n(_e))if(typeof _e.toString=="function"){if(_e=_e.toString(),typeof _e!="string")throw xn("dirty is not a string, aborting")}else throw xn("toString is not a function");if(!E.isSupported)return _e;if(mn||Qt(k),E.removed=[],typeof _e=="string"&&(_t=!1),_t){if(_e.nodeName){const qt=We(_e.nodeName);if(!ze[qt]||xt[qt])throw xn("root node is forbidden and cannot be sanitized in-place")}}else if(_e instanceof pe)Z=Gt("<!---->"),le=Z.ownerDocument.importNode(_e,!0),le.nodeType===kn.element&&le.nodeName==="BODY"||le.nodeName==="HTML"?Z=le:Z.appendChild(le);else{if(!jt&&!Lt&&!Tt&&_e.indexOf("<")===-1)return Qe&&Te?Qe.createHTML(_e):_e;if(Z=Gt(_e),!Z)return jt?null:Te?je:""}Z&&hn&&ut(Z.firstChild);const Be=Gn(_t?_e:Z);for(;Fe=Be.nextNode();)Kn(Fe),Jn(Fe),Fe.content instanceof H&&xr(Fe.content);if(_t)return _e;if(jt){if(zt)for(Ge=Ae.call(Z.ownerDocument);Z.firstChild;)Ge.appendChild(Z.firstChild);else Ge=Z;return(Me.shadowroot||Me.shadowrootmode)&&(Ge=mt.call(s,Ge,!0)),Ge}let Xe=Tt?Z.outerHTML:Z.innerHTML;return Tt&&ze["!doctype"]&&Z.ownerDocument&&Z.ownerDocument.doctype&&Z.ownerDocument.doctype.name&&Ze(Ns,Z.ownerDocument.doctype.name)&&(Xe="<!DOCTYPE "+Z.ownerDocument.doctype.name+`>
`+Xe),Lt&&ir([pn,tn,nn],qt=>{Xe=An(Xe,qt," ")}),Qe&&Te?Qe.createHTML(Xe):Xe},E.setConfig=function(){let _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Qt(_e),mn=!0},E.clearConfig=function(){Ht=null,mn=!1},E.isValidAttribute=function(_e,k,Z){Ht||Qt({});const le=We(_e),Fe=We(k);return Yn(le,Fe,Z)},E.addHook=function(_e,k){typeof k=="function"&&Sn(Ve[_e],k)},E.removeHook=function(_e,k){if(k!==void 0){const Z=Ri(Ve[_e],k);return Z===-1?void 0:Ci(Ve[_e],Z,1)[0]}return ms(Ve[_e])},E.removeHooks=function(_e){Ve[_e]=[]},E.removeAllHooks=function(){Ve=ws()},E}var Mr=Ms();const ts=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),Ji=ts?Promise.resolve().then(function(){return no}):Promise.resolve().then(function(){return lo});async function Zi(...i){return(await Ji).default(...i)}ts?Promise.resolve().then(function(){return so}):Promise.resolve().then(function(){return _o});ts?Promise.resolve().then(function(){return oo}):Promise.resolve().then(function(){return fo});const eo=async i=>{const E=await i.getFile();return E.handle=i,E};var to=async(i=[{}])=>{Array.isArray(i)||(i=[i]);const E=[];i.forEach((j,H)=>{E[H]={description:j.description||"Files",accept:{}},j.mimeTypes?j.mimeTypes.map(ae=>{E[H].accept[ae]=j.extensions||[]}):E[H].accept["*/*"]=j.extensions||[]});const y=await window.showOpenFilePicker({id:i[0].id,startIn:i[0].startIn,types:E,multiple:i[0].multiple||!1,excludeAcceptAllOption:i[0].excludeAcceptAllOption||!1}),s=await Promise.all(y.map(eo));return i[0].multiple?s:s[0]},no={__proto__:null,default:to};function fr(i){function E(y){if(Object(y)!==y)return Promise.reject(new TypeError(y+" is not an object."));var s=y.done;return Promise.resolve(y.value).then(function(j){return{value:j,done:s}})}return fr=function(y){this.s=y,this.n=y.next},fr.prototype={s:null,n:null,next:function(){return E(this.n.apply(this.s,arguments))},return:function(y){var s=this.s.return;return s===void 0?Promise.resolve({value:y,done:!0}):E(s.apply(this.s,arguments))},throw:function(y){var s=this.s.return;return s===void 0?Promise.reject(y):E(s.apply(this.s,arguments))}},new fr(i)}const Us=async(i,E,y=i.name,s)=>{const j=[],H=[];var ae,pe=!1,we=!1;try{for(var be,De=function(te){var he,xe,Ne,nt=2;for(typeof Symbol<"u"&&(xe=Symbol.asyncIterator,Ne=Symbol.iterator);nt--;){if(xe&&(he=te[xe])!=null)return he.call(te);if(Ne&&(he=te[Ne])!=null)return new fr(he.call(te));xe="@@asyncIterator",Ne="@@iterator"}throw new TypeError("Object is not async iterable")}(i.values());pe=!(be=await De.next()).done;pe=!1){const te=be.value,he=`${y}/${te.name}`;te.kind==="file"?H.push(te.getFile().then(xe=>(xe.directoryHandle=i,xe.handle=te,Object.defineProperty(xe,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>he})))):te.kind!=="directory"||!E||s&&s(te)||j.push(Us(te,E,he,s))}}catch(te){we=!0,ae=te}finally{try{pe&&De.return!=null&&await De.return()}finally{if(we)throw ae}}return[...(await Promise.all(j)).flat(),...await Promise.all(H)]};var ro=async(i={})=>{i.recursive=i.recursive||!1,i.mode=i.mode||"read";const E=await window.showDirectoryPicker({id:i.id,startIn:i.startIn,mode:i.mode});return(await(await E.values()).next()).done?[E]:Us(E,i.recursive,void 0,i.skipDirectory)},so={__proto__:null,default:ro},io=async(i,E=[{}],y=null,s=!1,j=null)=>{Array.isArray(E)||(E=[E]),E[0].fileName=E[0].fileName||"Untitled";const H=[];let ae=null;if(i instanceof Blob&&i.type?ae=i.type:i.headers&&i.headers.get("content-type")&&(ae=i.headers.get("content-type")),E.forEach((be,De)=>{H[De]={description:be.description||"Files",accept:{}},be.mimeTypes?(De===0&&ae&&be.mimeTypes.push(ae),be.mimeTypes.map(te=>{H[De].accept[te]=be.extensions||[]})):ae?H[De].accept[ae]=be.extensions||[]:H[De].accept["*/*"]=be.extensions||[]}),y)try{await y.getFile()}catch(be){if(y=null,s)throw be}const pe=y||await window.showSaveFilePicker({suggestedName:E[0].fileName,id:E[0].id,startIn:E[0].startIn,types:H,excludeAcceptAllOption:E[0].excludeAcceptAllOption||!1});!y&&j&&j(pe);const we=await pe.createWritable();return"stream"in i?(await i.stream().pipeTo(we),pe):"body"in i?(await i.body.pipeTo(we),pe):(await we.write(await i),await we.close(),pe)},oo={__proto__:null,default:io},ao=async(i=[{}])=>(Array.isArray(i)||(i=[i]),new Promise((E,y)=>{const s=document.createElement("input");s.type="file";const j=[...i.map(H=>H.mimeTypes||[]),...i.map(H=>H.extensions||[])].join();s.multiple=i[0].multiple||!1,s.accept=j||"",s.style.display="none",document.body.append(s),s.addEventListener("cancel",()=>{s.remove(),y(new DOMException("The user aborted a request.","AbortError"))}),s.addEventListener("change",()=>{s.remove(),E(s.multiple?Array.from(s.files):s.files[0])}),"showPicker"in HTMLInputElement.prototype?s.showPicker():s.click()})),lo={__proto__:null,default:ao},co=async(i=[{}])=>(Array.isArray(i)||(i=[i]),i[0].recursive=i[0].recursive||!1,new Promise((E,y)=>{const s=document.createElement("input");s.type="file",s.webkitdirectory=!0,s.style.display="none",document.body.append(s),s.addEventListener("cancel",()=>{s.remove(),y(new DOMException("The user aborted a request.","AbortError"))}),s.addEventListener("change",()=>{s.remove();let j=Array.from(s.files);i[0].recursive?i[0].recursive&&i[0].skipDirectory&&(j=j.filter(H=>H.webkitRelativePath.split("/").every(ae=>!i[0].skipDirectory({name:ae,kind:"directory"})))):j=j.filter(H=>H.webkitRelativePath.split("/").length===2),E(j)}),"showPicker"in HTMLInputElement.prototype?s.showPicker():s.click()})),_o={__proto__:null,default:co},uo=async(i,E={})=>{Array.isArray(E)&&(E=E[0]);const y=document.createElement("a");let s=i;"body"in i&&(s=await async function(ae,pe){const we=ae.getReader(),be=new ReadableStream({start:he=>async function xe(){return we.read().then(({done:Ne,value:nt})=>{if(!Ne)return he.enqueue(nt),xe();he.close()})}()}),De=new Response(be),te=await De.blob();return we.releaseLock(),new Blob([te],{type:pe})}(i.body,i.headers.get("content-type"))),y.download=E.fileName||"Untitled",y.href=URL.createObjectURL(await s);const j=()=>{typeof H=="function"&&H()},H=E.legacySetup&&E.legacySetup(j,()=>H(),y);return y.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(y.href),3e4),j()}),y.click(),null},fo={__proto__:null,default:uo};"serviceWorker"in navigator&&!location.href.includes("localhost")&&window.addEventListener("load",()=>{navigator.serviceWorker.register(location.href.replace(/\/$/,"")+"/service-worker.js").then(i=>{console.log("Service Worker registered with scope:",i.scope),i.addEventListener("updatefound",()=>location.reload()),i.active&&!navigator.serviceWorker.controller&&location.reload()}).catch(i=>{console.error("Service Worker registration failed:",i)})});const Bs=document.querySelector("#assistant"),js=document.querySelector("#conversation"),po=document.querySelector(".new-assistant"),mo=document.querySelector(".stop-button"),ho=document.querySelector(".file-open-button"),Mt=document.querySelector(".image-preview"),gr=document.querySelector(".remove-image-button"),Fn=document.querySelector(".assistant-container"),ns=document.querySelector(".prompt-form"),Bt=document.querySelector(".active-assistant-form"),Dn=document.querySelector(".prompt-input"),rs={};let fn=null,vt=null;const zs="New conversation";mo.addEventListener("click",()=>{fn==null||fn.abort()});const Ws=i=>{const E=i.naturalWidth/i.naturalHeight;if(i.width=i.naturalWidth,i.height=i.naturalHeight,E>1){i.style.width="100px",i.style.height="auto";return}i.style.width="auto",i.style.height="100px"},$r=(i,E,y,s=!1)=>{const j=js.content.cloneNode(!0),H=j.querySelector(".item");H.classList.add(E);let ae=null;if(s){const pe=Fs(H);ae=Ps(pe)}for(const pe of y)if(pe.type==="image"&&pe.value){const we=document.createElement("p"),be=document.createElement("img");we.append(be),be.addEventListener("load",()=>{URL.revokeObjectURL(be.src),Ws(be)}),be.src=URL.createObjectURL(pe.value),H.append(we)}else if(pe.type==="text")if(s)Ke(ae,pe.value);else{const we=document.createElement("p");we.textContent=pe.value,H.append(we)}ae&&Ls(ae),i.append(j)};gr.addEventListener("click",()=>{Mt.hidden=!0,Mt.src="",gr.hidden=!0,vt=null});ho.addEventListener("click",async()=>{vt=await Zi({multiple:!1,mimeTypes:["image/*"],description:"Image files",startIn:"pictures",excludeAcceptAllOption:!0}),vt&&(gr.hidden=!1,Mt.addEventListener("load",()=>{URL.revokeObjectURL(Mt.src),Ws(Mt),Mt.hidden=!1}),Mt.src=URL.createObjectURL(vt))});(async function(){try{if(!("LanguageModel"in self)){document.body.append(" This browser doesn't support the Prompt API.");return}await hi();const E=await gi();if(!E.length)return;ns.hidden=!1,Bt.hidden=!1;const{defaultTopK:y,defaultTemperature:s}=await LanguageModel.params();let j=!0;for(const H of E){const ae=await bi(H),pe={initialPrompts:ae.initialPrompts,topK:y,temperature:s,conversationSummary:ae.conversationSummary,expectedInputs:[{type:"text"},{type:"image"}]},we=await self.LanguageModel.create(pe),{inputQuota:be,inputUsage:De}=we;rs[H]={assistant:we,options:pe};const te=Bs.content.cloneNode(!0);j&&(te.querySelector("details").open=!0,te.querySelector("input").checked=!0,j=!1),te.querySelector(".conversation-summary").textContent=pe.conversationSummary,te.querySelector("input").value=H;const he=te.querySelector(".conversation-container");te.querySelector(".tokens-so-far").textContent=De,te.querySelector(".tokens-left").textContent=be-we.inputUsage,Fn.append(te);for(const xe of pe.initialPrompts)xe.role!=="system"&&$r(he,xe.role,xe.content,!0)}}catch(E){console.error(E.name,E.message)}})();Bt.addEventListener("click",async i=>{const E=i.target.nodeName.toLowerCase();if(!(E!=="summary"&&E!=="button")){if(E==="summary")setTimeout(()=>{const y=Bt.querySelector("details[open] input");y&&(y.checked=!0)},0);else if(i.target.classList.contains("delete-conversation")){const y=i.target.closest("details"),s=y.querySelector('[name="active-assistant"]').value;y.remove(),Bt.querySelectorAll("details").length===0&&(Bt.hidden=!0),await yi(s)}}});const go=async(i={})=>{const E=crypto.randomUUID();i.initialPrompts||(i.initialPrompts=[{role:"system",content:[{type:"text",value:"You are a helpful assistant."}]}]),i.conversationSummary||(i.conversationSummary=zs),i.expectedInputs||(i.expectedInputs=[{type:"text"},{type:"image"}]);const y=await self.LanguageModel.create(i);return rs[E]={assistant:y,options:i},await Ur(E,i),E};po.addEventListener("click",async()=>{const i=await go();Bt.hidden=!1;const E=Bs.content.cloneNode(!0);E.querySelector(".conversation-summary").textContent=zs,E.querySelector("input").value=i,Fn.append(E),Fn.querySelectorAll("details").forEach(y=>y.open=!1),Fn.querySelector(`details:has([value="${i}"])`).open=!0,Fn.querySelector(`[value="${i}"]`).checked=!0,ns.hidden=!1,Dn.value="",Dn.focus()});ns.addEventListener("submit",async i=>{i.preventDefault();const E=Dn.value.trim();if(!E)return;if(!Bt.querySelector("details[open]")){alert("Select an active conversation first.");return}const s=new FormData(Bt).get("active-assistant"),{assistant:j,options:H}=rs[s],ae=Bt.querySelector(`input[value="${s}"] + .conversation-container`);$r(ae,"user",[{type:"text",value:E}],!1),vt&&$r(ae,"user",[{type:"image",value:vt}],!1);try{fn=new AbortController;let pe;vt?pe=j.promptStreaming([{role:"user",content:[{type:"text",value:E},{type:"image",value:vt}]}],{signal:fn.signal}):pe=j.promptStreaming(E,{signal:fn.signal});const we=js.content.cloneNode(!0),be=we.querySelector(".item");be.classList.add("assistant"),ae.append(we);const De=Fs(be),te=Ps(De);let he="";for await(let pt of pe)he+=pt,Mr.sanitize(he),Mr.removed.length&&console.warn(Mr.removed),Ke(te,pt);Ls(te);const xe=ae.closest("details");xe.querySelector(".tokens-so-far").textContent=j.inputUsage,xe.querySelector(".tokens-left").textContent=j.inputQuota-j.inputUsage,vt?H.initialPrompts.push({role:"user",content:[{type:"text",value:E}]},{role:"user",content:[{type:"image",value:vt}]},{role:"assistant",content:[{type:"text",value:he}]}):H.initialPrompts.push({role:"user",content:[{type:"text",value:E}]},{role:"assistant",content:[{type:"text",value:he}]}),Dn.value="",vt=null,Mt.hidden=!0,Mt.src="",gr.hidden=!0,Dn.focus(),await Ur(s,H);const Ne=await self.LanguageModel.create(H),nt=Ne.promptStreaming("Summarize the conversation as briefly as possible in one short sentence."),dt=xe.querySelector("summary");let it=!0;for await(const pt of nt)it&&(dt.textContent=""),dt.append(pt),it=!1;Ne.destroy(),H.conversationSummary=dt.textContent,await Ur(s,H)}catch(pe){pe.name!=="AbortError"&&console.error(pe.name,pe.message)}});
