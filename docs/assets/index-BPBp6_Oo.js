var ci=Object.defineProperty;var cs=i=>{throw TypeError(i)};var _i=(i,S,y)=>S in i?ci(i,S,{enumerable:!0,configurable:!0,writable:!0,value:y}):i[S]=y;var _s=(i,S,y)=>_i(i,typeof S!="symbol"?S+"":S,y),Or=(i,S,y)=>S.has(i)||cs("Cannot "+y);var oe=(i,S,y)=>(Or(i,S,"read from private field"),y?y.call(i):S.get(i)),ot=(i,S,y)=>S.has(i)?cs("Cannot add the same private member more than once"):S instanceof WeakSet?S.add(i):S.set(i,y),qt=(i,S,y,r)=>(Or(i,S,"write to private field"),r?r.call(i,y):S.set(i,y),y),rr=(i,S,y)=>(Or(i,S,"access private method"),y);(function(){const S=document.createElement("link").relList;if(S&&S.supports&&S.supports("modulepreload"))return;for(const W of document.querySelectorAll('link[rel="modulepreload"]'))r(W);new MutationObserver(W=>{for(const K of W)if(K.type==="childList")for(const le of K.addedNodes)le.tagName==="LINK"&&le.rel==="modulepreload"&&r(le)}).observe(document,{childList:!0,subtree:!0});function y(W){const K={};return W.integrity&&(K.integrity=W.integrity),W.referrerPolicy&&(K.referrerPolicy=W.referrerPolicy),W.crossOrigin==="use-credentials"?K.credentials="include":W.crossOrigin==="anonymous"?K.credentials="omit":K.credentials="same-origin",K}function r(W){if(W.ep)return;W.ep=!0;const K=y(W);fetch(W.href,K)}})();var vs=(()=>{var i=import.meta.url;return function(S={}){var y,r=S,W,K,le=new Promise((e,t)=>{W=e,K=t}),Se=typeof window=="object",Ee=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";const pe=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,pe.debugModule("globalThis.location =",globalThis.location);var Ie=Object.assign({},r),te="./this.program",ge="";function ke(e){return r.locateFile?r.locateFile(e,ge):ge+e}var Re,ze;(Se||Ee)&&(Ee?ge=self.location.href:typeof document<"u"&&document.currentScript&&(ge=document.currentScript.src),i&&(ge=i),ge.startsWith("blob:")?ge="":ge=ge.substr(0,ge.replace(/[?#].*/,"").lastIndexOf("/")+1),Ee&&(ze=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Re=e=>fetch(e,{credentials:"same-origin"}).then(t=>t.ok?t.arrayBuffer():Promise.reject(new Error(t.status+" : "+t.url))));var dt=r.print||console.log.bind(console),Je=r.printErr||console.error.bind(console);Object.assign(r,Ie),Ie=null,r.arguments&&r.arguments,r.thisProgram&&(te=r.thisProgram);var it=r.wasmBinary,We,De=!1,He,St,Kt,Ae,Ge,pt;function $e(){var e=We.buffer;r.HEAP8=He=new Int8Array(e),r.HEAP16=Kt=new Int16Array(e),r.HEAPU8=St=new Uint8Array(e),r.HEAPU16=new Uint16Array(e),r.HEAP32=Ae=new Int32Array(e),r.HEAPU32=Ge=new Uint32Array(e),r.HEAPF32=new Float32Array(e),r.HEAPF64=new Float64Array(e),r.HEAP64=pt=new BigInt64Array(e),r.HEAPU64=new BigUint64Array(e)}if(r.wasmMemory)We=r.wasmMemory;else{var pn=r.INITIAL_MEMORY||16777216;We=new WebAssembly.Memory({initial:pn/65536,maximum:32768})}$e();var tn=[],nn=[],Mn=[];function yr(){var e=r.preRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(Er)),jt(tn)}function qr(){!r.noFSInit&&!c.initialized&&c.init(),c.ignorePermissions=!1,jt(nn)}function Un(){var e=r.postRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(Qe)),jt(Mn)}function Er(e){tn.unshift(e)}function Bn(e){nn.unshift(e)}function Qe(e){Mn.unshift(e)}var At=0,Ue=null;function wr(e){return e}function Ne(e){var t;At++,(t=r.monitorRunDependencies)==null||t.call(r,At)}function xt(e){var n;if(At--,(n=r.monitorRunDependencies)==null||n.call(r,At),At==0&&Ue){var t=Ue;Ue=null,t()}}function Yt(e){var n;(n=r.onAbort)==null||n.call(r,e),e="Aborted("+e+")",Je(e),De=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw K(t),t}var jn="data:application/octet-stream;base64,",rn=e=>e.startsWith(jn);function zn(){if(r.locateFile){var e="sqlite3.wasm";return rn(e)?e:ke(e)}return new URL("/prompt-api-sqlite/assets/sqlite3-cHTLJfQJ.wasm",import.meta.url).href}var sn;function Lt(e){if(e==sn&&it)return new Uint8Array(it);if(ze)return ze(e);throw"both async and sync fetching of the wasm failed"}function on(e){return it?Promise.resolve().then(()=>Lt(e)):Re(e).then(t=>new Uint8Array(t),()=>Lt(e))}function Tt(e,t,n){return on(e).then(s=>WebAssembly.instantiate(s,t)).then(n,s=>{Je(`failed to asynchronously prepare wasm: ${s}`),Yt(s)})}function mn(e,t,n,s){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!rn(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(o=>{var a=WebAssembly.instantiateStreaming(o,n);return a.then(s,function(p){return Je(`wasm streaming compile failed: ${p}`),Je("falling back to ArrayBuffer instantiation"),Tt(t,n,s)})}):Tt(t,n,s)}function hn(){return{env:ss,wasi_snapshot_preview1:ss}}function Bt(){var e=hn();function t(s,o){return h=s.exports,Bn(h.__wasm_call_ctors),xt(),h}Ne();function n(s){t(s.instance)}if(r.instantiateWasm)try{return r.instantiateWasm(e,t)}catch(s){Je(`Module.instantiateWasm callback failed with error: ${s}`),K(s)}return sn??(sn=zn()),mn(it,sn,e,n).catch(K),{}}var jt=e=>{e.forEach(t=>t(r))};r.noExitRuntime;var xe={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:(e,t)=>{for(var n=0,s=e.length-1;s>=0;s--){var o=e[s];o==="."?e.splice(s,1):o===".."?(e.splice(s,1),n++):n&&(e.splice(s,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:e=>{var t=xe.isAbs(e),n=e.substr(-1)==="/";return e=xe.normalizeArray(e.split("/").filter(s=>!!s),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=xe.splitPath(e),n=t[0],s=t[1];return!n&&!s?".":(s&&(s=s.substr(0,s.length-1)),n+s)},basename:e=>{if(e==="/")return"/";e=xe.normalize(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},join:(...e)=>xe.normalize(e.join("/")),join2:(e,t)=>xe.normalize(e+"/"+t)},Wn=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);Yt("initRandomDevice")},gn=e=>(gn=Wn())(e),mt={resolve:(...e)=>{for(var t="",n=!1,s=e.length-1;s>=-1&&!n;s--){var o=s>=0?e[s]:c.cwd();if(typeof o!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!o)return"";t=o+"/"+t,n=xe.isAbs(o)}return t=xe.normalizeArray(t.split("/").filter(a=>!!a),!n).join("/"),(n?"/":"")+t||"."},relative:(e,t)=>{e=mt.resolve(e).substr(1),t=mt.resolve(t).substr(1);function n(M){for(var Y=0;Y<M.length&&M[Y]==="";Y++);for(var J=M.length-1;J>=0&&M[J]==="";J--);return Y>J?[]:M.slice(Y,J-Y+1)}for(var s=n(e.split("/")),o=n(t.split("/")),a=Math.min(s.length,o.length),p=a,q=0;q<a;q++)if(s[q]!==o[q]){p=q;break}for(var N=[],q=p;q<s.length;q++)N.push("..");return N=N.concat(o.slice(p)),N.join("/")}},an=typeof TextDecoder<"u"?new TextDecoder:void 0,_t=(e,t=0,n=NaN)=>{for(var s=t+n,o=t;e[o]&&!(o>=s);)++o;if(o-t>16&&e.buffer&&an)return an.decode(e.subarray(t,o));for(var a="";t<o;){var p=e[t++];if(!(p&128)){a+=String.fromCharCode(p);continue}var q=e[t++]&63;if((p&224)==192){a+=String.fromCharCode((p&31)<<6|q);continue}var N=e[t++]&63;if((p&240)==224?p=(p&15)<<12|q<<6|N:p=(p&7)<<18|q<<12|N<<6|e[t++]&63,p<65536)a+=String.fromCharCode(p);else{var M=p-65536;a+=String.fromCharCode(55296|M>>10,56320|M&1023)}}return a},kt=[],ht=e=>{for(var t=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s<=127?t++:s<=2047?t+=2:s>=55296&&s<=57343?(t+=4,++n):t+=3}return t},ln=(e,t,n,s)=>{if(!(s>0))return 0;for(var o=n,a=n+s-1,p=0;p<e.length;++p){var q=e.charCodeAt(p);if(q>=55296&&q<=57343){var N=e.charCodeAt(++p);q=65536+((q&1023)<<10)|N&1023}if(q<=127){if(n>=a)break;t[n++]=q}else if(q<=2047){if(n+1>=a)break;t[n++]=192|q>>6,t[n++]=128|q&63}else if(q<=65535){if(n+2>=a)break;t[n++]=224|q>>12,t[n++]=128|q>>6&63,t[n++]=128|q&63}else{if(n+3>=a)break;t[n++]=240|q>>18,t[n++]=128|q>>12&63,t[n++]=128|q>>6&63,t[n++]=128|q&63}}return t[n]=0,n-o};function bn(e,t,n){var s=ht(e)+1,o=new Array(s),a=ln(e,o,0,o.length);return o.length=a,o}var Hn=()=>{if(!kt.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`)),!e)return null;kt=bn(e)}return kt.shift()},gt={ttys:[],init(){},shutdown(){},register(e,t){gt.ttys[e]={input:[],output:[],ops:t},c.registerDevice(e,gt.stream_ops)},stream_ops:{open(e){var t=gt.ttys[e.node.rdev];if(!t)throw new c.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,n,s,o){if(!e.tty||!e.tty.ops.get_char)throw new c.ErrnoError(60);for(var a=0,p=0;p<s;p++){var q;try{q=e.tty.ops.get_char(e.tty)}catch{throw new c.ErrnoError(29)}if(q===void 0&&a===0)throw new c.ErrnoError(6);if(q==null)break;a++,t[n+p]=q}return a&&(e.node.timestamp=Date.now()),a},write(e,t,n,s,o){if(!e.tty||!e.tty.ops.put_char)throw new c.ErrnoError(60);try{for(var a=0;a<s;a++)e.tty.ops.put_char(e.tty,t[n+a])}catch{throw new c.ErrnoError(29)}return s&&(e.node.timestamp=Date.now()),a}},default_tty_ops:{get_char(e){return Hn()},put_char(e,t){t===null||t===10?(dt(_t(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(dt(_t(e.output)),e.output=[])},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,t,n){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,t){t===null||t===10?(Je(_t(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(Je(_t(e.output)),e.output=[])}}},Qn=(e,t)=>{St.fill(0,e,e+t)},Xt=(e,t)=>Math.ceil(e/t)*t,Jt=e=>{e=Xt(e,65536);var t=is(65536,e);return t&&Qn(t,e),t},fe={ops_table:null,mount(e){return fe.createNode(null,"/",16895,0)},createNode(e,t,n,s){if(c.isBlkdev(n)||c.isFIFO(n))throw new c.ErrnoError(63);fe.ops_table||(fe.ops_table={dir:{node:{getattr:fe.node_ops.getattr,setattr:fe.node_ops.setattr,lookup:fe.node_ops.lookup,mknod:fe.node_ops.mknod,rename:fe.node_ops.rename,unlink:fe.node_ops.unlink,rmdir:fe.node_ops.rmdir,readdir:fe.node_ops.readdir,symlink:fe.node_ops.symlink},stream:{llseek:fe.stream_ops.llseek}},file:{node:{getattr:fe.node_ops.getattr,setattr:fe.node_ops.setattr},stream:{llseek:fe.stream_ops.llseek,read:fe.stream_ops.read,write:fe.stream_ops.write,allocate:fe.stream_ops.allocate,mmap:fe.stream_ops.mmap,msync:fe.stream_ops.msync}},link:{node:{getattr:fe.node_ops.getattr,setattr:fe.node_ops.setattr,readlink:fe.node_ops.readlink},stream:{}},chrdev:{node:{getattr:fe.node_ops.getattr,setattr:fe.node_ops.setattr},stream:c.chrdev_stream_ops}});var o=c.createNode(e,t,n,s);return c.isDir(o.mode)?(o.node_ops=fe.ops_table.dir.node,o.stream_ops=fe.ops_table.dir.stream,o.contents={}):c.isFile(o.mode)?(o.node_ops=fe.ops_table.file.node,o.stream_ops=fe.ops_table.file.stream,o.usedBytes=0,o.contents=null):c.isLink(o.mode)?(o.node_ops=fe.ops_table.link.node,o.stream_ops=fe.ops_table.link.stream):c.isChrdev(o.mode)&&(o.node_ops=fe.ops_table.chrdev.node,o.stream_ops=fe.ops_table.chrdev.stream),o.timestamp=Date.now(),e&&(e.contents[t]=o,e.timestamp=o.timestamp),o},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){var s=1024*1024;t=Math.max(t,n*(n<s?2:1.125)>>>0),n!=0&&(t=Math.max(t,256));var o=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(o.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(t==0)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=c.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,c.isDir(e.mode)?t.size=4096:c.isFile(e.mode)?t.size=e.usedBytes:c.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&fe.resizeFileStorage(e,t.size)},lookup(e,t){throw c.genericErrors[44]},mknod(e,t,n,s){return fe.createNode(e,t,n,s)},rename(e,t,n){if(c.isDir(e.mode)){var s;try{s=c.lookupNode(t,n)}catch{}if(s)for(var o in s.contents)throw new c.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp},unlink(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir(e,t){var n=c.lookupNode(e,t);for(var s in n.contents)throw new c.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir(e){var t=[".",".."];for(var n of Object.keys(e.contents))t.push(n);return t},symlink(e,t,n){var s=fe.createNode(e,t,41471,0);return s.link=n,s},readlink(e){if(!c.isLink(e.mode))throw new c.ErrnoError(28);return e.link}},stream_ops:{read(e,t,n,s,o){var a=e.node.contents;if(o>=e.node.usedBytes)return 0;var p=Math.min(e.node.usedBytes-o,s);if(p>8&&a.subarray)t.set(a.subarray(o,o+p),n);else for(var q=0;q<p;q++)t[n+q]=a[o+q];return p},write(e,t,n,s,o,a){if(t.buffer===He.buffer&&(a=!1),!s)return 0;var p=e.node;if(p.timestamp=Date.now(),t.subarray&&(!p.contents||p.contents.subarray)){if(a)return p.contents=t.subarray(n,n+s),p.usedBytes=s,s;if(p.usedBytes===0&&o===0)return p.contents=t.slice(n,n+s),p.usedBytes=s,s;if(o+s<=p.usedBytes)return p.contents.set(t.subarray(n,n+s),o),s}if(fe.expandFileStorage(p,o+s),p.contents.subarray&&t.subarray)p.contents.set(t.subarray(n,n+s),o);else for(var q=0;q<s;q++)p.contents[o+q]=t[n+q];return p.usedBytes=Math.max(p.usedBytes,o+s),s},llseek(e,t,n){var s=t;if(n===1?s+=e.position:n===2&&c.isFile(e.node.mode)&&(s+=e.node.usedBytes),s<0)throw new c.ErrnoError(28);return s},allocate(e,t,n){fe.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap(e,t,n,s,o){if(!c.isFile(e.node.mode))throw new c.ErrnoError(43);var a,p,q=e.node.contents;if(!(o&2)&&q&&q.buffer===He.buffer)p=!1,a=q.byteOffset;else{if(p=!0,a=Jt(t),!a)throw new c.ErrnoError(48);q&&((n>0||n+t<q.length)&&(q.subarray?q=q.subarray(n,n+t):q=Array.prototype.slice.call(q,n,n+t)),He.set(q,a))}return{ptr:a,allocated:p}},msync(e,t,n,s,o){return fe.stream_ops.write(e,t,0,s,n,!1),0}}},zt=(e,t,n,s)=>{var o=`al ${e}`;Re(e).then(a=>{t(new Uint8Array(a)),o&&xt()},a=>{if(n)n();else throw`Loading data file "${e}" failed.`}),o&&Ne()},yn=(e,t,n,s,o,a)=>{c.createDataFile(e,t,n,s,o,a)},qn=r.preloadPlugins||[],vr=(e,t,n,s)=>{typeof Browser<"u"&&Browser.init();var o=!1;return qn.forEach(a=>{o||a.canHandle(t)&&(a.handle(e,t,n,s),o=!0)}),o},cn=(e,t,n,s,o,a,p,q,N,M)=>{var Y=t?mt.resolve(xe.join2(e,t)):e;function J(D){function P(j){M==null||M(),q||yn(e,t,j,s,o,N),a==null||a(),xt()}vr(D,Y,P,()=>{p==null||p(),xt()})||P(D)}Ne(),typeof n=="string"?zt(n,J,p):J(n)},_n=e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},n=t[e];if(typeof n>"u")throw new Error(`Unknown file open mode: ${e}`);return n},En=(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},c={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(e){this.name="ErrnoError",this.errno=e}},genericErrors:{},filesystems:null,syncFSRequests:0,readFiles:{},FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(e){this.node=e}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{constructor(e,t,n,s){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=c.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=s,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return c.isDir(this.mode)}get isDevice(){return c.isChrdev(this.mode)}},lookupPath(e,t={}){if(e=mt.resolve(e),!e)return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};if(t=Object.assign(n,t),t.recurse_count>8)throw new c.ErrnoError(32);for(var s=e.split("/").filter(J=>!!J),o=c.root,a="/",p=0;p<s.length;p++){var q=p===s.length-1;if(q&&t.parent)break;if(o=c.lookupNode(o,s[p]),a=xe.join2(a,s[p]),c.isMountpoint(o)&&(!q||q&&t.follow_mount)&&(o=o.mounted.root),!q||t.follow)for(var N=0;c.isLink(o.mode);){var M=c.readlink(a);a=mt.resolve(xe.dirname(a),M);var Y=c.lookupPath(a,{recurse_count:t.recurse_count+1});if(o=Y.node,N++>40)throw new c.ErrnoError(32)}}return{path:a,node:o}},getPath(e){for(var t;;){if(c.isRoot(e)){var n=e.mount.mountpoint;return t?n[n.length-1]!=="/"?`${n}/${t}`:n+t:n}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var n=0,s=0;s<t.length;s++)n=(n<<5)-n+t.charCodeAt(s)|0;return(e+n>>>0)%c.nameTable.length},hashAddNode(e){var t=c.hashName(e.parent.id,e.name);e.name_next=c.nameTable[t],c.nameTable[t]=e},hashRemoveNode(e){var t=c.hashName(e.parent.id,e.name);if(c.nameTable[t]===e)c.nameTable[t]=e.name_next;else for(var n=c.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode(e,t){var n=c.mayLookup(e);if(n)throw new c.ErrnoError(n);for(var s=c.hashName(e.id,t),o=c.nameTable[s];o;o=o.name_next){var a=o.name;if(o.parent.id===e.id&&a===t)return o}return c.lookup(e,t)},createNode(e,t,n,s){var o=new c.FSNode(e,t,n,s);return c.hashAddNode(o),o},destroyNode(e){c.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions(e,t){return c.ignorePermissions?0:t.includes("r")&&!(e.mode&292)||t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){if(!c.isDir(e.mode))return 54;var t=c.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate(e,t){try{var n=c.lookupNode(e,t);return 20}catch{}return c.nodePermissions(e,"wx")},mayDelete(e,t,n){var s;try{s=c.lookupNode(e,t)}catch(a){return a.errno}var o=c.nodePermissions(e,"wx");if(o)return o;if(n){if(!c.isDir(s.mode))return 54;if(c.isRoot(s)||c.getPath(s)===c.cwd())return 10}else if(c.isDir(s.mode))return 31;return 0},mayOpen(e,t){return e?c.isLink(e.mode)?32:c.isDir(e.mode)&&(c.flagsToPermissionString(t)!=="r"||t&512)?31:c.nodePermissions(e,c.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=c.MAX_OPEN_FDS;e++)if(!c.streams[e])return e;throw new c.ErrnoError(33)},getStreamChecked(e){var t=c.getStream(e);if(!t)throw new c.ErrnoError(8);return t},getStream:e=>c.streams[e],createStream(e,t=-1){return e=Object.assign(new c.FSStream,e),t==-1&&(t=c.nextfd()),e.fd=t,c.streams[t]=e,e},closeStream(e){c.streams[e]=null},dupStream(e,t=-1){var s,o;var n=c.createStream(e,t);return(o=(s=n.stream_ops)==null?void 0:s.dup)==null||o.call(s,n),n},chrdev_stream_ops:{open(e){var n,s;var t=c.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,(s=(n=e.stream_ops).open)==null||s.call(n,e)},llseek(){throw new c.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice(e,t){c.devices[e]={stream_ops:t}},getDevice:e=>c.devices[e],getMounts(e){for(var t=[],n=[e];n.length;){var s=n.pop();t.push(s),n.push(...s.mounts)}return t},syncfs(e,t){typeof e=="function"&&(t=e,e=!1),c.syncFSRequests++,c.syncFSRequests>1&&Je(`warning: ${c.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var n=c.getMounts(c.root.mount),s=0;function o(p){return c.syncFSRequests--,t(p)}function a(p){if(p)return a.errored?void 0:(a.errored=!0,o(p));++s>=n.length&&o(null)}n.forEach(p=>{if(!p.type.syncfs)return a(null);p.type.syncfs(p,e,a)})},mount(e,t,n){var s=n==="/",o=!n,a;if(s&&c.root)throw new c.ErrnoError(10);if(!s&&!o){var p=c.lookupPath(n,{follow_mount:!1});if(n=p.path,a=p.node,c.isMountpoint(a))throw new c.ErrnoError(10);if(!c.isDir(a.mode))throw new c.ErrnoError(54)}var q={type:e,opts:t,mountpoint:n,mounts:[]},N=e.mount(q);return N.mount=q,q.root=N,s?c.root=N:a&&(a.mounted=q,a.mount&&a.mount.mounts.push(q)),N},unmount(e){var t=c.lookupPath(e,{follow_mount:!1});if(!c.isMountpoint(t.node))throw new c.ErrnoError(28);var n=t.node,s=n.mounted,o=c.getMounts(s);Object.keys(c.nameTable).forEach(p=>{for(var q=c.nameTable[p];q;){var N=q.name_next;o.includes(q.mount)&&c.destroyNode(q),q=N}}),n.mounted=null;var a=n.mount.mounts.indexOf(s);n.mount.mounts.splice(a,1)},lookup(e,t){return e.node_ops.lookup(e,t)},mknod(e,t,n){var s=c.lookupPath(e,{parent:!0}),o=s.node,a=xe.basename(e);if(!a||a==="."||a==="..")throw new c.ErrnoError(28);var p=c.mayCreate(o,a);if(p)throw new c.ErrnoError(p);if(!o.node_ops.mknod)throw new c.ErrnoError(63);return o.node_ops.mknod(o,a,t,n)},create(e,t){return t=t!==void 0?t:438,t&=4095,t|=32768,c.mknod(e,t,0)},mkdir(e,t){return t=t!==void 0?t:511,t&=1023,t|=16384,c.mknod(e,t,0)},mkdirTree(e,t){for(var n=e.split("/"),s="",o=0;o<n.length;++o)if(n[o]){s+="/"+n[o];try{c.mkdir(s,t)}catch(a){if(a.errno!=20)throw a}}},mkdev(e,t,n){return typeof n>"u"&&(n=t,t=438),t|=8192,c.mknod(e,t,n)},symlink(e,t){if(!mt.resolve(e))throw new c.ErrnoError(44);var n=c.lookupPath(t,{parent:!0}),s=n.node;if(!s)throw new c.ErrnoError(44);var o=xe.basename(t),a=c.mayCreate(s,o);if(a)throw new c.ErrnoError(a);if(!s.node_ops.symlink)throw new c.ErrnoError(63);return s.node_ops.symlink(s,o,e)},rename(e,t){var n=xe.dirname(e),s=xe.dirname(t),o=xe.basename(e),a=xe.basename(t),p,q,N;if(p=c.lookupPath(e,{parent:!0}),q=p.node,p=c.lookupPath(t,{parent:!0}),N=p.node,!q||!N)throw new c.ErrnoError(44);if(q.mount!==N.mount)throw new c.ErrnoError(75);var M=c.lookupNode(q,o),Y=mt.relative(e,s);if(Y.charAt(0)!==".")throw new c.ErrnoError(28);if(Y=mt.relative(t,n),Y.charAt(0)!==".")throw new c.ErrnoError(55);var J;try{J=c.lookupNode(N,a)}catch{}if(M!==J){var D=c.isDir(M.mode),P=c.mayDelete(q,o,D);if(P)throw new c.ErrnoError(P);if(P=J?c.mayDelete(N,a,D):c.mayCreate(N,a),P)throw new c.ErrnoError(P);if(!q.node_ops.rename)throw new c.ErrnoError(63);if(c.isMountpoint(M)||J&&c.isMountpoint(J))throw new c.ErrnoError(10);if(N!==q&&(P=c.nodePermissions(q,"w"),P))throw new c.ErrnoError(P);c.hashRemoveNode(M);try{q.node_ops.rename(M,N,a),M.parent=N}catch(j){throw j}finally{c.hashAddNode(M)}}},rmdir(e){var t=c.lookupPath(e,{parent:!0}),n=t.node,s=xe.basename(e),o=c.lookupNode(n,s),a=c.mayDelete(n,s,!0);if(a)throw new c.ErrnoError(a);if(!n.node_ops.rmdir)throw new c.ErrnoError(63);if(c.isMountpoint(o))throw new c.ErrnoError(10);n.node_ops.rmdir(n,s),c.destroyNode(o)},readdir(e){var t=c.lookupPath(e,{follow:!0}),n=t.node;if(!n.node_ops.readdir)throw new c.ErrnoError(54);return n.node_ops.readdir(n)},unlink(e){var t=c.lookupPath(e,{parent:!0}),n=t.node;if(!n)throw new c.ErrnoError(44);var s=xe.basename(e),o=c.lookupNode(n,s),a=c.mayDelete(n,s,!1);if(a)throw new c.ErrnoError(a);if(!n.node_ops.unlink)throw new c.ErrnoError(63);if(c.isMountpoint(o))throw new c.ErrnoError(10);n.node_ops.unlink(n,s),c.destroyNode(o)},readlink(e){var t=c.lookupPath(e),n=t.node;if(!n)throw new c.ErrnoError(44);if(!n.node_ops.readlink)throw new c.ErrnoError(28);return mt.resolve(c.getPath(n.parent),n.node_ops.readlink(n))},stat(e,t){var n=c.lookupPath(e,{follow:!t}),s=n.node;if(!s)throw new c.ErrnoError(44);if(!s.node_ops.getattr)throw new c.ErrnoError(63);return s.node_ops.getattr(s)},lstat(e){return c.stat(e,!0)},chmod(e,t,n){var s;if(typeof e=="string"){var o=c.lookupPath(e,{follow:!n});s=o.node}else s=e;if(!s.node_ops.setattr)throw new c.ErrnoError(63);s.node_ops.setattr(s,{mode:t&4095|s.mode&-4096,timestamp:Date.now()})},lchmod(e,t){c.chmod(e,t,!0)},fchmod(e,t){var n=c.getStreamChecked(e);c.chmod(n.node,t)},chown(e,t,n,s){var o;if(typeof e=="string"){var a=c.lookupPath(e,{follow:!s});o=a.node}else o=e;if(!o.node_ops.setattr)throw new c.ErrnoError(63);o.node_ops.setattr(o,{timestamp:Date.now()})},lchown(e,t,n){c.chown(e,t,n,!0)},fchown(e,t,n){var s=c.getStreamChecked(e);c.chown(s.node,t,n)},truncate(e,t){if(t<0)throw new c.ErrnoError(28);var n;if(typeof e=="string"){var s=c.lookupPath(e,{follow:!0});n=s.node}else n=e;if(!n.node_ops.setattr)throw new c.ErrnoError(63);if(c.isDir(n.mode))throw new c.ErrnoError(31);if(!c.isFile(n.mode))throw new c.ErrnoError(28);var o=c.nodePermissions(n,"w");if(o)throw new c.ErrnoError(o);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate(e,t){var n=c.getStreamChecked(e);if((n.flags&2097155)===0)throw new c.ErrnoError(28);c.truncate(n.node,t)},utime(e,t,n){var s=c.lookupPath(e,{follow:!0}),o=s.node;o.node_ops.setattr(o,{timestamp:Math.max(t,n)})},open(e,t,n){if(e==="")throw new c.ErrnoError(44);t=typeof t=="string"?_n(t):t,t&64?(n=typeof n>"u"?438:n,n=n&4095|32768):n=0;var s;if(typeof e=="object")s=e;else{e=xe.normalize(e);try{var o=c.lookupPath(e,{follow:!(t&131072)});s=o.node}catch{}}var a=!1;if(t&64)if(s){if(t&128)throw new c.ErrnoError(20)}else s=c.mknod(e,n,0),a=!0;if(!s)throw new c.ErrnoError(44);if(c.isChrdev(s.mode)&&(t&=-513),t&65536&&!c.isDir(s.mode))throw new c.ErrnoError(54);if(!a){var p=c.mayOpen(s,t);if(p)throw new c.ErrnoError(p)}t&512&&!a&&c.truncate(s,0),t&=-131713;var q=c.createStream({node:s,path:c.getPath(s),flags:t,seekable:!0,position:0,stream_ops:s.stream_ops,ungotten:[],error:!1});return q.stream_ops.open&&q.stream_ops.open(q),r.logReadFiles&&!(t&1)&&(e in c.readFiles||(c.readFiles[e]=1)),q},close(e){if(c.isClosed(e))throw new c.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{c.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,t,n){if(c.isClosed(e))throw new c.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new c.ErrnoError(70);if(n!=0&&n!=1&&n!=2)throw new c.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read(e,t,n,s,o){if(s<0||o<0)throw new c.ErrnoError(28);if(c.isClosed(e))throw new c.ErrnoError(8);if((e.flags&2097155)===1)throw new c.ErrnoError(8);if(c.isDir(e.node.mode))throw new c.ErrnoError(31);if(!e.stream_ops.read)throw new c.ErrnoError(28);var a=typeof o<"u";if(!a)o=e.position;else if(!e.seekable)throw new c.ErrnoError(70);var p=e.stream_ops.read(e,t,n,s,o);return a||(e.position+=p),p},write(e,t,n,s,o,a){if(s<0||o<0)throw new c.ErrnoError(28);if(c.isClosed(e))throw new c.ErrnoError(8);if((e.flags&2097155)===0)throw new c.ErrnoError(8);if(c.isDir(e.node.mode))throw new c.ErrnoError(31);if(!e.stream_ops.write)throw new c.ErrnoError(28);e.seekable&&e.flags&1024&&c.llseek(e,0,2);var p=typeof o<"u";if(!p)o=e.position;else if(!e.seekable)throw new c.ErrnoError(70);var q=e.stream_ops.write(e,t,n,s,o,a);return p||(e.position+=q),q},allocate(e,t,n){if(c.isClosed(e))throw new c.ErrnoError(8);if(t<0||n<=0)throw new c.ErrnoError(28);if((e.flags&2097155)===0)throw new c.ErrnoError(8);if(!c.isFile(e.node.mode)&&!c.isDir(e.node.mode))throw new c.ErrnoError(43);if(!e.stream_ops.allocate)throw new c.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap(e,t,n,s,o){if((s&2)!==0&&(o&2)===0&&(e.flags&2097155)!==2)throw new c.ErrnoError(2);if((e.flags&2097155)===1)throw new c.ErrnoError(2);if(!e.stream_ops.mmap)throw new c.ErrnoError(43);if(!t)throw new c.ErrnoError(28);return e.stream_ops.mmap(e,t,n,s,o)},msync(e,t,n,s,o){return e.stream_ops.msync?e.stream_ops.msync(e,t,n,s,o):0},ioctl(e,t,n){if(!e.stream_ops.ioctl)throw new c.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile(e,t={}){if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error(`Invalid encoding type "${t.encoding}"`);var n,s=c.open(e,t.flags),o=c.stat(e),a=o.size,p=new Uint8Array(a);return c.read(s,p,0,a,0),t.encoding==="utf8"?n=_t(p):t.encoding==="binary"&&(n=p),c.close(s),n},writeFile(e,t,n={}){n.flags=n.flags||577;var s=c.open(e,n.flags,n.mode);if(typeof t=="string"){var o=new Uint8Array(ht(t)+1),a=ln(t,o,0,o.length);c.write(s,o,0,a,void 0,n.canOwn)}else if(ArrayBuffer.isView(t))c.write(s,t,0,t.byteLength,void 0,n.canOwn);else throw new Error("Unsupported data type");c.close(s)},cwd:()=>c.currentPath,chdir(e){var t=c.lookupPath(e,{follow:!0});if(t.node===null)throw new c.ErrnoError(44);if(!c.isDir(t.node.mode))throw new c.ErrnoError(54);var n=c.nodePermissions(t.node,"x");if(n)throw new c.ErrnoError(n);c.currentPath=t.path},createDefaultDirectories(){c.mkdir("/tmp"),c.mkdir("/home"),c.mkdir("/home/web_user")},createDefaultDevices(){c.mkdir("/dev"),c.registerDevice(c.makedev(1,3),{read:()=>0,write:(s,o,a,p,q)=>p}),c.mkdev("/dev/null",c.makedev(1,3)),gt.register(c.makedev(5,0),gt.default_tty_ops),gt.register(c.makedev(6,0),gt.default_tty1_ops),c.mkdev("/dev/tty",c.makedev(5,0)),c.mkdev("/dev/tty1",c.makedev(6,0));var e=new Uint8Array(1024),t=0,n=()=>(t===0&&(t=gn(e).byteLength),e[--t]);c.createDevice("/dev","random",n),c.createDevice("/dev","urandom",n),c.mkdir("/dev/shm"),c.mkdir("/dev/shm/tmp")},createSpecialDirectories(){c.mkdir("/proc");var e=c.mkdir("/proc/self");c.mkdir("/proc/self/fd"),c.mount({mount(){var t=c.createNode(e,"fd",16895,73);return t.node_ops={lookup(n,s){var o=+s,a=c.getStreamChecked(o),p={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>a.path}};return p.parent=p,p}},t}},{},"/proc/self/fd")},createStandardStreams(e,t,n){e?c.createDevice("/dev","stdin",e):c.symlink("/dev/tty","/dev/stdin"),t?c.createDevice("/dev","stdout",null,t):c.symlink("/dev/tty","/dev/stdout"),n?c.createDevice("/dev","stderr",null,n):c.symlink("/dev/tty1","/dev/stderr"),c.open("/dev/stdin",0),c.open("/dev/stdout",1),c.open("/dev/stderr",1)},staticInit(){[44].forEach(e=>{c.genericErrors[e]=new c.ErrnoError(e),c.genericErrors[e].stack="<generic error, no stack>"}),c.nameTable=new Array(4096),c.mount(fe,{},"/"),c.createDefaultDirectories(),c.createDefaultDevices(),c.createSpecialDirectories(),c.filesystems={MEMFS:fe}},init(e,t,n){c.initialized=!0,e??(e=r.stdin),t??(t=r.stdout),n??(n=r.stderr),c.createStandardStreams(e,t,n)},quit(){c.initialized=!1;for(var e=0;e<c.streams.length;e++){var t=c.streams[e];t&&c.close(t)}},findObject(e,t){var n=c.analyzePath(e,t);return n.exists?n.object:null},analyzePath(e,t){try{var n=c.lookupPath(e,{follow:!t});e=n.path}catch{}var s={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=c.lookupPath(e,{parent:!0});s.parentExists=!0,s.parentPath=n.path,s.parentObject=n.node,s.name=xe.basename(e),n=c.lookupPath(e,{follow:!t}),s.exists=!0,s.path=n.path,s.object=n.node,s.name=n.node.name,s.isRoot=n.path==="/"}catch(o){s.error=o.errno}return s},createPath(e,t,n,s){e=typeof e=="string"?e:c.getPath(e);for(var o=t.split("/").reverse();o.length;){var a=o.pop();if(a){var p=xe.join2(e,a);try{c.mkdir(p)}catch{}e=p}}return p},createFile(e,t,n,s,o){var a=xe.join2(typeof e=="string"?e:c.getPath(e),t),p=En(s,o);return c.create(a,p)},createDataFile(e,t,n,s,o,a){var p=t;e&&(e=typeof e=="string"?e:c.getPath(e),p=t?xe.join2(e,t):e);var q=En(s,o),N=c.create(p,q);if(n){if(typeof n=="string"){for(var M=new Array(n.length),Y=0,J=n.length;Y<J;++Y)M[Y]=n.charCodeAt(Y);n=M}c.chmod(N,q|146);var D=c.open(N,577);c.write(D,n,0,n.length,0,a),c.close(D),c.chmod(N,q)}},createDevice(e,t,n,s){var q;var o=xe.join2(typeof e=="string"?e:c.getPath(e),t),a=En(!!n,!!s);(q=c.createDevice).major??(q.major=64);var p=c.makedev(c.createDevice.major++,0);return c.registerDevice(p,{open(N){N.seekable=!1},close(N){var M;(M=s==null?void 0:s.buffer)!=null&&M.length&&s(10)},read(N,M,Y,J,D){for(var P=0,j=0;j<J;j++){var A;try{A=n()}catch{throw new c.ErrnoError(29)}if(A===void 0&&P===0)throw new c.ErrnoError(6);if(A==null)break;P++,M[Y+j]=A}return P&&(N.node.timestamp=Date.now()),P},write(N,M,Y,J,D){for(var P=0;P<J;P++)try{s(M[Y+P])}catch{throw new c.ErrnoError(29)}return J&&(N.node.timestamp=Date.now()),P}}),c.mkdev(o,a,p)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=ze(e.url),e.usedBytes=e.contents.length}catch{throw new c.ErrnoError(29)}},createLazyFile(e,t,n,s,o){class a{constructor(){this.lengthKnown=!1,this.chunks=[]}get(P){if(!(P>this.length-1||P<0)){var j=P%this.chunkSize,A=P/this.chunkSize|0;return this.getter(A)[j]}}setDataGetter(P){this.getter=P}cacheLength(){var P=new XMLHttpRequest;if(P.open("HEAD",n,!1),P.send(null),!(P.status>=200&&P.status<300||P.status===304))throw new Error("Couldn't load "+n+". Status: "+P.status);var j=Number(P.getResponseHeader("Content-length")),A,T=(A=P.getResponseHeader("Accept-Ranges"))&&A==="bytes",F=(A=P.getResponseHeader("Content-Encoding"))&&A==="gzip",R=1024*1024;T||(R=j);var U=(z,X)=>{if(z>X)throw new Error("invalid range ("+z+", "+X+") or no bytes requested!");if(X>j-1)throw new Error("only "+j+" bytes available! programmer error!");var _=new XMLHttpRequest;if(_.open("GET",n,!1),j!==R&&_.setRequestHeader("Range","bytes="+z+"-"+X),_.responseType="arraybuffer",_.overrideMimeType&&_.overrideMimeType("text/plain; charset=x-user-defined"),_.send(null),!(_.status>=200&&_.status<300||_.status===304))throw new Error("Couldn't load "+n+". Status: "+_.status);return _.response!==void 0?new Uint8Array(_.response||[]):bn(_.responseText||"")},O=this;O.setDataGetter(z=>{var X=z*R,_=(z+1)*R-1;if(_=Math.min(_,j-1),typeof O.chunks[z]>"u"&&(O.chunks[z]=U(X,_)),typeof O.chunks[z]>"u")throw new Error("doXHR failed!");return O.chunks[z]}),(F||!j)&&(R=j=1,j=this.getter(0).length,R=j,dt("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=j,this._chunkSize=R,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!Ee)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var p=new a,q={isDevice:!1,contents:p}}else var q={isDevice:!1,url:n};var N=c.createFile(e,t,q,s,o);q.contents?N.contents=q.contents:q.url&&(N.contents=null,N.url=q.url),Object.defineProperties(N,{usedBytes:{get:function(){return this.contents.length}}});var M={},Y=Object.keys(N.stream_ops);Y.forEach(D=>{var P=N.stream_ops[D];M[D]=(...j)=>(c.forceLoadFile(N),P(...j))});function J(D,P,j,A,T){var F=D.node.contents;if(T>=F.length)return 0;var R=Math.min(F.length-T,A);if(F.slice)for(var U=0;U<R;U++)P[j+U]=F[T+U];else for(var U=0;U<R;U++)P[j+U]=F.get(T+U);return R}return M.read=(D,P,j,A,T)=>(c.forceLoadFile(N),J(D,P,j,A,T)),M.mmap=(D,P,j,A,T)=>{c.forceLoadFile(N);var F=Jt(P);if(!F)throw new c.ErrnoError(48);return J(D,He,F,P,j),{ptr:F,allocated:!0}},N.stream_ops=M,N}},Sr=(e,t)=>e?_t(St,e,t):"",be={DEFAULT_POLLMASK:5,calculateAt(e,t,n){if(xe.isAbs(t))return t;var s;if(e===-100)s=c.cwd();else{var o=be.getStreamFromFD(e);s=o.path}if(t.length==0){if(!n)throw new c.ErrnoError(44);return s}return xe.join2(s,t)},doStat(e,t,n){var s=e(t);Ae[n>>2]=s.dev,Ae[n+4>>2]=s.mode,Ge[n+8>>2]=s.nlink,Ae[n+12>>2]=s.uid,Ae[n+16>>2]=s.gid,Ae[n+20>>2]=s.rdev,pt[n+24>>3]=BigInt(s.size),Ae[n+32>>2]=4096,Ae[n+36>>2]=s.blocks;var o=s.atime.getTime(),a=s.mtime.getTime(),p=s.ctime.getTime();return pt[n+40>>3]=BigInt(Math.floor(o/1e3)),Ge[n+48>>2]=o%1e3*1e3*1e3,pt[n+56>>3]=BigInt(Math.floor(a/1e3)),Ge[n+64>>2]=a%1e3*1e3*1e3,pt[n+72>>3]=BigInt(Math.floor(p/1e3)),Ge[n+80>>2]=p%1e3*1e3*1e3,pt[n+88>>3]=BigInt(s.ino),0},doMsync(e,t,n,s,o){if(!c.isFile(t.node.mode))throw new c.ErrnoError(43);if(s&2)return 0;var a=St.slice(e,e+n);c.msync(t,a,o,n,s)},getStreamFromFD(e){var t=c.getStreamChecked(e);return t},varargs:void 0,getStr(e){var t=Sr(e);return t}};function Ve(e,t){try{return e=be.getStr(e),c.chmod(e,t),0}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Wt(e,t,n,s){try{if(t=be.getStr(t),t=be.calculateAt(e,t),n&-8)return-28;var o=c.lookupPath(t,{follow:!0}),a=o.node;if(!a)return-44;var p="";return n&4&&(p+="r"),n&2&&(p+="w"),n&1&&(p+="x"),p&&c.nodePermissions(a,p)?-2:0}catch(q){if(typeof c>"u"||q.name!=="ErrnoError")throw q;return-q.errno}}function Ar(e,t){try{return c.fchmod(e,t),0}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Vn(e,t,n){try{return c.fchown(e,t,n),0}catch(s){if(typeof c>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}function Ht(){var e=Ae[+be.varargs>>2];return be.varargs+=4,e}var Ft=Ht;function Gn(e,t,n){be.varargs=n;try{var s=be.getStreamFromFD(e);switch(t){case 0:{var o=Ht();if(o<0)return-28;for(;c.streams[o];)o++;var a;return a=c.dupStream(s,o),a.fd}case 1:case 2:return 0;case 3:return s.flags;case 4:{var o=Ht();return s.flags|=o,0}case 12:{var o=Ft(),p=0;return Kt[o+p>>1]=2,0}case 13:case 14:return 0}return-28}catch(q){if(typeof c>"u"||q.name!=="ErrnoError")throw q;return-q.errno}}function xr(e,t){try{var n=be.getStreamFromFD(e);return be.doStat(c.stat,n.path,t)}catch(s){if(typeof c>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}var ut=9007199254740992,Qt=-9007199254740992,Vt=e=>e<Qt||e>ut?NaN:Number(e);function $n(e,t){t=Vt(t);try{return isNaN(t)?61:(c.ftruncate(e,t),0)}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}var It=(e,t,n)=>ln(e,St,t,n);function Kn(e,t){try{if(t===0)return-28;var n=c.cwd(),s=ht(n)+1;return t<s?-68:(It(n,e,t),s)}catch(o){if(typeof c>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function bt(e,t,n){be.varargs=n;try{var s=be.getStreamFromFD(e);switch(t){case 21509:return s.tty?0:-59;case 21505:{if(!s.tty)return-59;if(s.tty.ops.ioctl_tcgets){var o=s.tty.ops.ioctl_tcgets(s),a=Ft();Ae[a>>2]=o.c_iflag||0,Ae[a+4>>2]=o.c_oflag||0,Ae[a+8>>2]=o.c_cflag||0,Ae[a+12>>2]=o.c_lflag||0;for(var p=0;p<32;p++)He[a+p+17]=o.c_cc[p]||0;return 0}return 0}case 21510:case 21511:case 21512:return s.tty?0:-59;case 21506:case 21507:case 21508:{if(!s.tty)return-59;if(s.tty.ops.ioctl_tcsets){for(var a=Ft(),q=Ae[a>>2],N=Ae[a+4>>2],M=Ae[a+8>>2],Y=Ae[a+12>>2],J=[],p=0;p<32;p++)J.push(He[a+p+17]);return s.tty.ops.ioctl_tcsets(s.tty,t,{c_iflag:q,c_oflag:N,c_cflag:M,c_lflag:Y,c_cc:J})}return 0}case 21519:{if(!s.tty)return-59;var a=Ft();return Ae[a>>2]=0,0}case 21520:return s.tty?-28:-59;case 21531:{var a=Ft();return c.ioctl(s,t,a)}case 21523:{if(!s.tty)return-59;if(s.tty.ops.ioctl_tiocgwinsz){var D=s.tty.ops.ioctl_tiocgwinsz(s.tty),a=Ft();Kt[a>>1]=D[0],Kt[a+2>>1]=D[1]}return 0}case 21524:return s.tty?0:-59;case 21515:return s.tty?0:-59;default:return-28}}catch(P){if(typeof c>"u"||P.name!=="ErrnoError")throw P;return-P.errno}}function Yn(e,t){try{return e=be.getStr(e),be.doStat(c.lstat,e,t)}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Xn(e,t,n){try{return t=be.getStr(t),t=be.calculateAt(e,t),t=xe.normalize(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),c.mkdir(t,n,0),0}catch(s){if(typeof c>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}function Jn(e,t,n,s){try{t=be.getStr(t);var o=s&256,a=s&4096;return s=s&-6401,t=be.calculateAt(e,t,a),be.doStat(o?c.lstat:c.stat,t,n)}catch(p){if(typeof c>"u"||p.name!=="ErrnoError")throw p;return-p.errno}}function Zn(e,t,n,s){be.varargs=s;try{t=be.getStr(t),t=be.calculateAt(e,t);var o=s?Ht():0;return c.open(t,n,o).fd}catch(a){if(typeof c>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}function Tr(e,t,n,s){try{if(t=be.getStr(t),t=be.calculateAt(e,t),s<=0)return-28;var o=c.readlink(t),a=Math.min(s,ht(o)),p=He[n+a];return It(o,n,s+1),He[n+a]=p,a}catch(q){if(typeof c>"u"||q.name!=="ErrnoError")throw q;return-q.errno}}function _e(e){try{return e=be.getStr(e),c.rmdir(e),0}catch(t){if(typeof c>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function k(e,t){try{return e=be.getStr(e),be.doStat(c.stat,e,t)}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Z(e,t,n){try{return t=be.getStr(t),t=be.calculateAt(e,t),n===0?c.unlink(t):n===512?c.rmdir(t):Yt("Invalid flags passed to unlinkat"),0}catch(s){if(typeof c>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}var ae=e=>Ge[e>>2]+Ae[e+4>>2]*4294967296;function Ce(e,t,n,s){try{t=be.getStr(t),t=be.calculateAt(e,t,!0);var o=Date.now(),a,p;if(!n)a=o,p=o;else{var q=ae(n),N=Ae[n+8>>2];N==1073741823?a=o:N==1073741822?a=-1:a=q*1e3+N/(1e3*1e3),n+=16,q=ae(n),N=Ae[n+8>>2],N==1073741823?p=o:N==1073741822?p=-1:p=q*1e3+N/(1e3*1e3)}return(p!=-1||a!=-1)&&c.utime(t,a,p),0}catch(M){if(typeof c>"u"||M.name!=="ErrnoError")throw M;return-M.errno}}var Ke=1,je=()=>Ke,et=e=>e%4===0&&(e%100!==0||e%400===0),yt=[0,31,60,91,121,152,182,213,244,274,305,335],Zt=[0,31,59,90,120,151,181,212,243,273,304,334],wn=e=>{var t=et(e.getFullYear()),n=t?yt:Zt,s=n[e.getMonth()]+e.getDate()-1;return s};function Ye(e,t){e=Vt(e);var n=new Date(e*1e3);Ae[t>>2]=n.getSeconds(),Ae[t+4>>2]=n.getMinutes(),Ae[t+8>>2]=n.getHours(),Ae[t+12>>2]=n.getDate(),Ae[t+16>>2]=n.getMonth(),Ae[t+20>>2]=n.getFullYear()-1900,Ae[t+24>>2]=n.getDay();var s=wn(n)|0;Ae[t+28>>2]=s,Ae[t+36>>2]=-(n.getTimezoneOffset()*60);var o=new Date(n.getFullYear(),0,1),a=new Date(n.getFullYear(),6,1).getTimezoneOffset(),p=o.getTimezoneOffset(),q=(a!=p&&n.getTimezoneOffset()==Math.min(p,a))|0;Ae[t+32>>2]=q}function er(e,t,n,s,o,a,p){o=Vt(o);try{if(isNaN(o))return 61;var q=be.getStreamFromFD(s),N=c.mmap(q,e,o,t,n),M=N.ptr;return Ae[a>>2]=N.allocated,Ge[p>>2]=M,0}catch(Y){if(typeof c>"u"||Y.name!=="ErrnoError")throw Y;return-Y.errno}}function tr(e,t,n,s,o,a){a=Vt(a);try{var p=be.getStreamFromFD(o);n&2&&be.doMsync(e,p,t,s,a)}catch(q){if(typeof c>"u"||q.name!=="ErrnoError")throw q;return-q.errno}}var zs=(e,t,n,s)=>{var o=new Date().getFullYear(),a=new Date(o,0,1),p=new Date(o,6,1),q=a.getTimezoneOffset(),N=p.getTimezoneOffset(),M=Math.max(q,N);Ge[e>>2]=M*60,Ae[t>>2]=+(q!=N);var Y=P=>{var j=P>=0?"-":"+",A=Math.abs(P),T=String(Math.floor(A/60)).padStart(2,"0"),F=String(A%60).padStart(2,"0");return`UTC${j}${T}${F}`},J=Y(q),D=Y(N);N<q?(It(J,n,17),It(D,s,17)):(It(J,s,17),It(D,n,17))},Ws=()=>Date.now(),Hs=()=>performance.now(),Qs=()=>2147483648,Vs=e=>{var t=We.buffer,n=(e-t.byteLength+65535)/65536|0;try{return We.grow(n),$e(),1}catch{}},Gs=e=>{var t=St.length;e>>>=0;var n=Qs();if(e>n)return!1;for(var s=1;s<=4;s*=2){var o=t*(1+.2/s);o=Math.min(o,e+100663296);var a=Math.min(n,Xt(Math.max(e,o),65536)),p=Vs(a);if(p)return!0}return!1},kr={},$s=()=>te||"./this.program",vn=()=>{if(!vn.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:$s()};for(var n in kr)kr[n]===void 0?delete t[n]:t[n]=kr[n];var s=[];for(var n in t)s.push(`${n}=${t[n]}`);vn.strings=s}return vn.strings},Ks=(e,t)=>{for(var n=0;n<e.length;++n)He[t++]=e.charCodeAt(n);He[t]=0},Ys=(e,t)=>{var n=0;return vn().forEach((s,o)=>{var a=t+n;Ge[e+o*4>>2]=a,Ks(s,a),n+=s.length+1}),0},Xs=(e,t)=>{var n=vn();Ge[e>>2]=n.length;var s=0;return n.forEach(o=>s+=o.length+1),Ge[t>>2]=s,0};function Js(e){try{var t=be.getStreamFromFD(e);return c.close(t),0}catch(n){if(typeof c>"u"||n.name!=="ErrnoError")throw n;return n.errno}}function Zs(e,t){try{var n=0,s=0,o=0,a=be.getStreamFromFD(e),p=a.tty?2:c.isDir(a.mode)?3:c.isLink(a.mode)?7:4;return He[t]=p,Kt[t+2>>1]=o,pt[t+8>>3]=BigInt(n),pt[t+16>>3]=BigInt(s),0}catch(q){if(typeof c>"u"||q.name!=="ErrnoError")throw q;return q.errno}}var ei=(e,t,n,s)=>{for(var o=0,a=0;a<n;a++){var p=Ge[t>>2],q=Ge[t+4>>2];t+=8;var N=c.read(e,He,p,q,s);if(N<0)return-1;if(o+=N,N<q)break}return o};function ti(e,t,n,s){try{var o=be.getStreamFromFD(e),a=ei(o,t,n);return Ge[s>>2]=a,0}catch(p){if(typeof c>"u"||p.name!=="ErrnoError")throw p;return p.errno}}function ni(e,t,n,s){t=Vt(t);try{if(isNaN(t))return 61;var o=be.getStreamFromFD(e);return c.llseek(o,t,n),pt[s>>3]=BigInt(o.position),o.getdents&&t===0&&n===0&&(o.getdents=null),0}catch(a){if(typeof c>"u"||a.name!=="ErrnoError")throw a;return a.errno}}function ri(e){var n;try{var t=be.getStreamFromFD(e);return(n=t.stream_ops)!=null&&n.fsync?t.stream_ops.fsync(t):0}catch(s){if(typeof c>"u"||s.name!=="ErrnoError")throw s;return s.errno}}var si=(e,t,n,s)=>{for(var o=0,a=0;a<n;a++){var p=Ge[t>>2],q=Ge[t+4>>2];t+=8;var N=c.write(e,He,p,q,s);if(N<0)return-1;if(o+=N,N<q)break}return o};function ii(e,t,n,s){try{var o=be.getStreamFromFD(e),a=si(o,t,n);return Ge[s>>2]=a,0}catch(p){if(typeof c>"u"||p.name!=="ErrnoError")throw p;return p.errno}}c.createPreloadedFile=cn,c.staticInit();var ss={__syscall_chmod:Ve,__syscall_faccessat:Wt,__syscall_fchmod:Ar,__syscall_fchown32:Vn,__syscall_fcntl64:Gn,__syscall_fstat64:xr,__syscall_ftruncate64:$n,__syscall_getcwd:Kn,__syscall_ioctl:bt,__syscall_lstat64:Yn,__syscall_mkdirat:Xn,__syscall_newfstatat:Jn,__syscall_openat:Zn,__syscall_readlinkat:Tr,__syscall_rmdir:_e,__syscall_stat64:k,__syscall_unlinkat:Z,__syscall_utimensat:Ce,_emscripten_get_now_is_monotonic:je,_localtime_js:Ye,_mmap_js:er,_munmap_js:tr,_tzset_js:zs,emscripten_date_now:Ws,emscripten_get_now:Hs,emscripten_resize_heap:Gs,environ_get:Ys,environ_sizes_get:Xs,fd_close:Js,fd_fdstat_get:Zs,fd_read:ti,fd_seek:ni,fd_sync:ri,fd_write:ii,memory:We},h=Bt();r._sqlite3_status64=(e,t,n,s)=>(r._sqlite3_status64=h.sqlite3_status64)(e,t,n,s),r._sqlite3_status=(e,t,n,s)=>(r._sqlite3_status=h.sqlite3_status)(e,t,n,s),r._sqlite3_db_status=(e,t,n,s,o)=>(r._sqlite3_db_status=h.sqlite3_db_status)(e,t,n,s,o),r._sqlite3_msize=e=>(r._sqlite3_msize=h.sqlite3_msize)(e),r._sqlite3_vfs_find=e=>(r._sqlite3_vfs_find=h.sqlite3_vfs_find)(e),r._sqlite3_initialize=()=>(r._sqlite3_initialize=h.sqlite3_initialize)(),r._sqlite3_malloc=e=>(r._sqlite3_malloc=h.sqlite3_malloc)(e),r._sqlite3_free=e=>(r._sqlite3_free=h.sqlite3_free)(e),r._sqlite3_vfs_register=(e,t)=>(r._sqlite3_vfs_register=h.sqlite3_vfs_register)(e,t),r._sqlite3_vfs_unregister=e=>(r._sqlite3_vfs_unregister=h.sqlite3_vfs_unregister)(e),r._sqlite3_malloc64=e=>(r._sqlite3_malloc64=h.sqlite3_malloc64)(e),r._sqlite3_realloc=(e,t)=>(r._sqlite3_realloc=h.sqlite3_realloc)(e,t),r._sqlite3_realloc64=(e,t)=>(r._sqlite3_realloc64=h.sqlite3_realloc64)(e,t),r._sqlite3_value_text=e=>(r._sqlite3_value_text=h.sqlite3_value_text)(e),r._sqlite3_randomness=(e,t)=>(r._sqlite3_randomness=h.sqlite3_randomness)(e,t),r._sqlite3_stricmp=(e,t)=>(r._sqlite3_stricmp=h.sqlite3_stricmp)(e,t),r._sqlite3_strnicmp=(e,t,n)=>(r._sqlite3_strnicmp=h.sqlite3_strnicmp)(e,t,n),r._sqlite3_uri_parameter=(e,t)=>(r._sqlite3_uri_parameter=h.sqlite3_uri_parameter)(e,t),r._sqlite3_uri_boolean=(e,t,n)=>(r._sqlite3_uri_boolean=h.sqlite3_uri_boolean)(e,t,n),r._sqlite3_serialize=(e,t,n,s)=>(r._sqlite3_serialize=h.sqlite3_serialize)(e,t,n,s),r._sqlite3_prepare_v2=(e,t,n,s,o)=>(r._sqlite3_prepare_v2=h.sqlite3_prepare_v2)(e,t,n,s,o),r._sqlite3_step=e=>(r._sqlite3_step=h.sqlite3_step)(e),r._sqlite3_column_int64=(e,t)=>(r._sqlite3_column_int64=h.sqlite3_column_int64)(e,t),r._sqlite3_reset=e=>(r._sqlite3_reset=h.sqlite3_reset)(e),r._sqlite3_exec=(e,t,n,s,o)=>(r._sqlite3_exec=h.sqlite3_exec)(e,t,n,s,o),r._sqlite3_column_int=(e,t)=>(r._sqlite3_column_int=h.sqlite3_column_int)(e,t),r._sqlite3_finalize=e=>(r._sqlite3_finalize=h.sqlite3_finalize)(e),r._sqlite3_file_control=(e,t,n,s)=>(r._sqlite3_file_control=h.sqlite3_file_control)(e,t,n,s),r._sqlite3_column_name=(e,t)=>(r._sqlite3_column_name=h.sqlite3_column_name)(e,t),r._sqlite3_column_text=(e,t)=>(r._sqlite3_column_text=h.sqlite3_column_text)(e,t),r._sqlite3_column_type=(e,t)=>(r._sqlite3_column_type=h.sqlite3_column_type)(e,t),r._sqlite3_errmsg=e=>(r._sqlite3_errmsg=h.sqlite3_errmsg)(e),r._sqlite3_deserialize=(e,t,n,s,o,a)=>(r._sqlite3_deserialize=h.sqlite3_deserialize)(e,t,n,s,o,a),r._sqlite3_clear_bindings=e=>(r._sqlite3_clear_bindings=h.sqlite3_clear_bindings)(e),r._sqlite3_value_blob=e=>(r._sqlite3_value_blob=h.sqlite3_value_blob)(e),r._sqlite3_value_bytes=e=>(r._sqlite3_value_bytes=h.sqlite3_value_bytes)(e),r._sqlite3_value_double=e=>(r._sqlite3_value_double=h.sqlite3_value_double)(e),r._sqlite3_value_int=e=>(r._sqlite3_value_int=h.sqlite3_value_int)(e),r._sqlite3_value_int64=e=>(r._sqlite3_value_int64=h.sqlite3_value_int64)(e),r._sqlite3_value_subtype=e=>(r._sqlite3_value_subtype=h.sqlite3_value_subtype)(e),r._sqlite3_value_pointer=(e,t)=>(r._sqlite3_value_pointer=h.sqlite3_value_pointer)(e,t),r._sqlite3_value_type=e=>(r._sqlite3_value_type=h.sqlite3_value_type)(e),r._sqlite3_value_nochange=e=>(r._sqlite3_value_nochange=h.sqlite3_value_nochange)(e),r._sqlite3_value_frombind=e=>(r._sqlite3_value_frombind=h.sqlite3_value_frombind)(e),r._sqlite3_value_dup=e=>(r._sqlite3_value_dup=h.sqlite3_value_dup)(e),r._sqlite3_value_free=e=>(r._sqlite3_value_free=h.sqlite3_value_free)(e),r._sqlite3_result_blob=(e,t,n,s)=>(r._sqlite3_result_blob=h.sqlite3_result_blob)(e,t,n,s),r._sqlite3_result_error_toobig=e=>(r._sqlite3_result_error_toobig=h.sqlite3_result_error_toobig)(e),r._sqlite3_result_error_nomem=e=>(r._sqlite3_result_error_nomem=h.sqlite3_result_error_nomem)(e),r._sqlite3_result_double=(e,t)=>(r._sqlite3_result_double=h.sqlite3_result_double)(e,t),r._sqlite3_result_error=(e,t,n)=>(r._sqlite3_result_error=h.sqlite3_result_error)(e,t,n),r._sqlite3_result_int=(e,t)=>(r._sqlite3_result_int=h.sqlite3_result_int)(e,t),r._sqlite3_result_int64=(e,t)=>(r._sqlite3_result_int64=h.sqlite3_result_int64)(e,t),r._sqlite3_result_null=e=>(r._sqlite3_result_null=h.sqlite3_result_null)(e),r._sqlite3_result_pointer=(e,t,n,s)=>(r._sqlite3_result_pointer=h.sqlite3_result_pointer)(e,t,n,s),r._sqlite3_result_subtype=(e,t)=>(r._sqlite3_result_subtype=h.sqlite3_result_subtype)(e,t),r._sqlite3_result_text=(e,t,n,s)=>(r._sqlite3_result_text=h.sqlite3_result_text)(e,t,n,s),r._sqlite3_result_zeroblob=(e,t)=>(r._sqlite3_result_zeroblob=h.sqlite3_result_zeroblob)(e,t),r._sqlite3_result_zeroblob64=(e,t)=>(r._sqlite3_result_zeroblob64=h.sqlite3_result_zeroblob64)(e,t),r._sqlite3_result_error_code=(e,t)=>(r._sqlite3_result_error_code=h.sqlite3_result_error_code)(e,t),r._sqlite3_user_data=e=>(r._sqlite3_user_data=h.sqlite3_user_data)(e),r._sqlite3_context_db_handle=e=>(r._sqlite3_context_db_handle=h.sqlite3_context_db_handle)(e),r._sqlite3_vtab_nochange=e=>(r._sqlite3_vtab_nochange=h.sqlite3_vtab_nochange)(e),r._sqlite3_vtab_in_first=(e,t)=>(r._sqlite3_vtab_in_first=h.sqlite3_vtab_in_first)(e,t),r._sqlite3_vtab_in_next=(e,t)=>(r._sqlite3_vtab_in_next=h.sqlite3_vtab_in_next)(e,t),r._sqlite3_aggregate_context=(e,t)=>(r._sqlite3_aggregate_context=h.sqlite3_aggregate_context)(e,t),r._sqlite3_get_auxdata=(e,t)=>(r._sqlite3_get_auxdata=h.sqlite3_get_auxdata)(e,t),r._sqlite3_set_auxdata=(e,t,n,s)=>(r._sqlite3_set_auxdata=h.sqlite3_set_auxdata)(e,t,n,s),r._sqlite3_column_count=e=>(r._sqlite3_column_count=h.sqlite3_column_count)(e),r._sqlite3_data_count=e=>(r._sqlite3_data_count=h.sqlite3_data_count)(e),r._sqlite3_column_blob=(e,t)=>(r._sqlite3_column_blob=h.sqlite3_column_blob)(e,t),r._sqlite3_column_bytes=(e,t)=>(r._sqlite3_column_bytes=h.sqlite3_column_bytes)(e,t),r._sqlite3_column_double=(e,t)=>(r._sqlite3_column_double=h.sqlite3_column_double)(e,t),r._sqlite3_column_value=(e,t)=>(r._sqlite3_column_value=h.sqlite3_column_value)(e,t),r._sqlite3_column_decltype=(e,t)=>(r._sqlite3_column_decltype=h.sqlite3_column_decltype)(e,t),r._sqlite3_bind_blob=(e,t,n,s,o)=>(r._sqlite3_bind_blob=h.sqlite3_bind_blob)(e,t,n,s,o),r._sqlite3_bind_double=(e,t,n)=>(r._sqlite3_bind_double=h.sqlite3_bind_double)(e,t,n),r._sqlite3_bind_int=(e,t,n)=>(r._sqlite3_bind_int=h.sqlite3_bind_int)(e,t,n),r._sqlite3_bind_int64=(e,t,n)=>(r._sqlite3_bind_int64=h.sqlite3_bind_int64)(e,t,n),r._sqlite3_bind_null=(e,t)=>(r._sqlite3_bind_null=h.sqlite3_bind_null)(e,t),r._sqlite3_bind_pointer=(e,t,n,s,o)=>(r._sqlite3_bind_pointer=h.sqlite3_bind_pointer)(e,t,n,s,o),r._sqlite3_bind_text=(e,t,n,s,o)=>(r._sqlite3_bind_text=h.sqlite3_bind_text)(e,t,n,s,o),r._sqlite3_bind_parameter_count=e=>(r._sqlite3_bind_parameter_count=h.sqlite3_bind_parameter_count)(e),r._sqlite3_bind_parameter_name=(e,t)=>(r._sqlite3_bind_parameter_name=h.sqlite3_bind_parameter_name)(e,t),r._sqlite3_bind_parameter_index=(e,t)=>(r._sqlite3_bind_parameter_index=h.sqlite3_bind_parameter_index)(e,t),r._sqlite3_db_handle=e=>(r._sqlite3_db_handle=h.sqlite3_db_handle)(e),r._sqlite3_stmt_readonly=e=>(r._sqlite3_stmt_readonly=h.sqlite3_stmt_readonly)(e),r._sqlite3_stmt_isexplain=e=>(r._sqlite3_stmt_isexplain=h.sqlite3_stmt_isexplain)(e),r._sqlite3_stmt_explain=(e,t)=>(r._sqlite3_stmt_explain=h.sqlite3_stmt_explain)(e,t),r._sqlite3_stmt_busy=e=>(r._sqlite3_stmt_busy=h.sqlite3_stmt_busy)(e),r._sqlite3_stmt_status=(e,t,n)=>(r._sqlite3_stmt_status=h.sqlite3_stmt_status)(e,t,n),r._sqlite3_sql=e=>(r._sqlite3_sql=h.sqlite3_sql)(e),r._sqlite3_expanded_sql=e=>(r._sqlite3_expanded_sql=h.sqlite3_expanded_sql)(e),r._sqlite3_preupdate_old=(e,t,n)=>(r._sqlite3_preupdate_old=h.sqlite3_preupdate_old)(e,t,n),r._sqlite3_preupdate_count=e=>(r._sqlite3_preupdate_count=h.sqlite3_preupdate_count)(e),r._sqlite3_preupdate_depth=e=>(r._sqlite3_preupdate_depth=h.sqlite3_preupdate_depth)(e),r._sqlite3_preupdate_blobwrite=e=>(r._sqlite3_preupdate_blobwrite=h.sqlite3_preupdate_blobwrite)(e),r._sqlite3_preupdate_new=(e,t,n)=>(r._sqlite3_preupdate_new=h.sqlite3_preupdate_new)(e,t,n),r._sqlite3_value_numeric_type=e=>(r._sqlite3_value_numeric_type=h.sqlite3_value_numeric_type)(e),r._sqlite3_set_authorizer=(e,t,n)=>(r._sqlite3_set_authorizer=h.sqlite3_set_authorizer)(e,t,n),r._sqlite3_strglob=(e,t)=>(r._sqlite3_strglob=h.sqlite3_strglob)(e,t),r._sqlite3_strlike=(e,t,n)=>(r._sqlite3_strlike=h.sqlite3_strlike)(e,t,n),r._sqlite3_auto_extension=e=>(r._sqlite3_auto_extension=h.sqlite3_auto_extension)(e),r._sqlite3_cancel_auto_extension=e=>(r._sqlite3_cancel_auto_extension=h.sqlite3_cancel_auto_extension)(e),r._sqlite3_reset_auto_extension=()=>(r._sqlite3_reset_auto_extension=h.sqlite3_reset_auto_extension)(),r._sqlite3_prepare_v3=(e,t,n,s,o,a)=>(r._sqlite3_prepare_v3=h.sqlite3_prepare_v3)(e,t,n,s,o,a),r._sqlite3_create_module=(e,t,n,s)=>(r._sqlite3_create_module=h.sqlite3_create_module)(e,t,n,s),r._sqlite3_create_module_v2=(e,t,n,s,o)=>(r._sqlite3_create_module_v2=h.sqlite3_create_module_v2)(e,t,n,s,o),r._sqlite3_drop_modules=(e,t)=>(r._sqlite3_drop_modules=h.sqlite3_drop_modules)(e,t),r._sqlite3_declare_vtab=(e,t)=>(r._sqlite3_declare_vtab=h.sqlite3_declare_vtab)(e,t),r._sqlite3_vtab_on_conflict=e=>(r._sqlite3_vtab_on_conflict=h.sqlite3_vtab_on_conflict)(e),r._sqlite3_vtab_collation=(e,t)=>(r._sqlite3_vtab_collation=h.sqlite3_vtab_collation)(e,t),r._sqlite3_vtab_in=(e,t,n)=>(r._sqlite3_vtab_in=h.sqlite3_vtab_in)(e,t,n),r._sqlite3_vtab_rhs_value=(e,t,n)=>(r._sqlite3_vtab_rhs_value=h.sqlite3_vtab_rhs_value)(e,t,n),r._sqlite3_vtab_distinct=e=>(r._sqlite3_vtab_distinct=h.sqlite3_vtab_distinct)(e),r._sqlite3_keyword_name=(e,t,n)=>(r._sqlite3_keyword_name=h.sqlite3_keyword_name)(e,t,n),r._sqlite3_keyword_count=()=>(r._sqlite3_keyword_count=h.sqlite3_keyword_count)(),r._sqlite3_keyword_check=(e,t)=>(r._sqlite3_keyword_check=h.sqlite3_keyword_check)(e,t),r._sqlite3_complete=e=>(r._sqlite3_complete=h.sqlite3_complete)(e),r._sqlite3_libversion=()=>(r._sqlite3_libversion=h.sqlite3_libversion)(),r._sqlite3_libversion_number=()=>(r._sqlite3_libversion_number=h.sqlite3_libversion_number)(),r._sqlite3_shutdown=()=>(r._sqlite3_shutdown=h.sqlite3_shutdown)(),r._sqlite3_last_insert_rowid=e=>(r._sqlite3_last_insert_rowid=h.sqlite3_last_insert_rowid)(e),r._sqlite3_set_last_insert_rowid=(e,t)=>(r._sqlite3_set_last_insert_rowid=h.sqlite3_set_last_insert_rowid)(e,t),r._sqlite3_changes64=e=>(r._sqlite3_changes64=h.sqlite3_changes64)(e),r._sqlite3_changes=e=>(r._sqlite3_changes=h.sqlite3_changes)(e),r._sqlite3_total_changes64=e=>(r._sqlite3_total_changes64=h.sqlite3_total_changes64)(e),r._sqlite3_total_changes=e=>(r._sqlite3_total_changes=h.sqlite3_total_changes)(e),r._sqlite3_txn_state=(e,t)=>(r._sqlite3_txn_state=h.sqlite3_txn_state)(e,t),r._sqlite3_close_v2=e=>(r._sqlite3_close_v2=h.sqlite3_close_v2)(e),r._sqlite3_busy_handler=(e,t,n)=>(r._sqlite3_busy_handler=h.sqlite3_busy_handler)(e,t,n),r._sqlite3_progress_handler=(e,t,n,s)=>(r._sqlite3_progress_handler=h.sqlite3_progress_handler)(e,t,n,s),r._sqlite3_busy_timeout=(e,t)=>(r._sqlite3_busy_timeout=h.sqlite3_busy_timeout)(e,t),r._sqlite3_interrupt=e=>(r._sqlite3_interrupt=h.sqlite3_interrupt)(e),r._sqlite3_is_interrupted=e=>(r._sqlite3_is_interrupted=h.sqlite3_is_interrupted)(e),r._sqlite3_create_function=(e,t,n,s,o,a,p,q)=>(r._sqlite3_create_function=h.sqlite3_create_function)(e,t,n,s,o,a,p,q),r._sqlite3_create_function_v2=(e,t,n,s,o,a,p,q,N)=>(r._sqlite3_create_function_v2=h.sqlite3_create_function_v2)(e,t,n,s,o,a,p,q,N),r._sqlite3_create_window_function=(e,t,n,s,o,a,p,q,N,M)=>(r._sqlite3_create_window_function=h.sqlite3_create_window_function)(e,t,n,s,o,a,p,q,N,M),r._sqlite3_overload_function=(e,t,n)=>(r._sqlite3_overload_function=h.sqlite3_overload_function)(e,t,n),r._sqlite3_trace_v2=(e,t,n,s)=>(r._sqlite3_trace_v2=h.sqlite3_trace_v2)(e,t,n,s),r._sqlite3_commit_hook=(e,t,n)=>(r._sqlite3_commit_hook=h.sqlite3_commit_hook)(e,t,n),r._sqlite3_update_hook=(e,t,n)=>(r._sqlite3_update_hook=h.sqlite3_update_hook)(e,t,n),r._sqlite3_rollback_hook=(e,t,n)=>(r._sqlite3_rollback_hook=h.sqlite3_rollback_hook)(e,t,n),r._sqlite3_preupdate_hook=(e,t,n)=>(r._sqlite3_preupdate_hook=h.sqlite3_preupdate_hook)(e,t,n),r._sqlite3_error_offset=e=>(r._sqlite3_error_offset=h.sqlite3_error_offset)(e),r._sqlite3_errcode=e=>(r._sqlite3_errcode=h.sqlite3_errcode)(e),r._sqlite3_extended_errcode=e=>(r._sqlite3_extended_errcode=h.sqlite3_extended_errcode)(e),r._sqlite3_errstr=e=>(r._sqlite3_errstr=h.sqlite3_errstr)(e),r._sqlite3_limit=(e,t,n)=>(r._sqlite3_limit=h.sqlite3_limit)(e,t,n),r._sqlite3_open=(e,t)=>(r._sqlite3_open=h.sqlite3_open)(e,t),r._sqlite3_open_v2=(e,t,n,s)=>(r._sqlite3_open_v2=h.sqlite3_open_v2)(e,t,n,s),r._sqlite3_create_collation=(e,t,n,s,o)=>(r._sqlite3_create_collation=h.sqlite3_create_collation)(e,t,n,s,o),r._sqlite3_create_collation_v2=(e,t,n,s,o,a)=>(r._sqlite3_create_collation_v2=h.sqlite3_create_collation_v2)(e,t,n,s,o,a),r._sqlite3_collation_needed=(e,t,n)=>(r._sqlite3_collation_needed=h.sqlite3_collation_needed)(e,t,n),r._sqlite3_get_autocommit=e=>(r._sqlite3_get_autocommit=h.sqlite3_get_autocommit)(e),r._sqlite3_table_column_metadata=(e,t,n,s,o,a,p,q,N)=>(r._sqlite3_table_column_metadata=h.sqlite3_table_column_metadata)(e,t,n,s,o,a,p,q,N),r._sqlite3_extended_result_codes=(e,t)=>(r._sqlite3_extended_result_codes=h.sqlite3_extended_result_codes)(e,t),r._sqlite3_uri_key=(e,t)=>(r._sqlite3_uri_key=h.sqlite3_uri_key)(e,t),r._sqlite3_uri_int64=(e,t,n)=>(r._sqlite3_uri_int64=h.sqlite3_uri_int64)(e,t,n),r._sqlite3_db_name=(e,t)=>(r._sqlite3_db_name=h.sqlite3_db_name)(e,t),r._sqlite3_db_filename=(e,t)=>(r._sqlite3_db_filename=h.sqlite3_db_filename)(e,t),r._sqlite3_db_readonly=(e,t)=>(r._sqlite3_db_readonly=h.sqlite3_db_readonly)(e,t),r._sqlite3_compileoption_used=e=>(r._sqlite3_compileoption_used=h.sqlite3_compileoption_used)(e),r._sqlite3_compileoption_get=e=>(r._sqlite3_compileoption_get=h.sqlite3_compileoption_get)(e),r._sqlite3session_diff=(e,t,n,s)=>(r._sqlite3session_diff=h.sqlite3session_diff)(e,t,n,s),r._sqlite3session_attach=(e,t)=>(r._sqlite3session_attach=h.sqlite3session_attach)(e,t),r._sqlite3session_create=(e,t,n)=>(r._sqlite3session_create=h.sqlite3session_create)(e,t,n),r._sqlite3session_delete=e=>(r._sqlite3session_delete=h.sqlite3session_delete)(e),r._sqlite3session_table_filter=(e,t,n)=>(r._sqlite3session_table_filter=h.sqlite3session_table_filter)(e,t,n),r._sqlite3session_changeset=(e,t,n)=>(r._sqlite3session_changeset=h.sqlite3session_changeset)(e,t,n),r._sqlite3session_changeset_strm=(e,t,n)=>(r._sqlite3session_changeset_strm=h.sqlite3session_changeset_strm)(e,t,n),r._sqlite3session_patchset_strm=(e,t,n)=>(r._sqlite3session_patchset_strm=h.sqlite3session_patchset_strm)(e,t,n),r._sqlite3session_patchset=(e,t,n)=>(r._sqlite3session_patchset=h.sqlite3session_patchset)(e,t,n),r._sqlite3session_enable=(e,t)=>(r._sqlite3session_enable=h.sqlite3session_enable)(e,t),r._sqlite3session_indirect=(e,t)=>(r._sqlite3session_indirect=h.sqlite3session_indirect)(e,t),r._sqlite3session_isempty=e=>(r._sqlite3session_isempty=h.sqlite3session_isempty)(e),r._sqlite3session_memory_used=e=>(r._sqlite3session_memory_used=h.sqlite3session_memory_used)(e),r._sqlite3session_object_config=(e,t,n)=>(r._sqlite3session_object_config=h.sqlite3session_object_config)(e,t,n),r._sqlite3session_changeset_size=e=>(r._sqlite3session_changeset_size=h.sqlite3session_changeset_size)(e),r._sqlite3changeset_start=(e,t,n)=>(r._sqlite3changeset_start=h.sqlite3changeset_start)(e,t,n),r._sqlite3changeset_start_v2=(e,t,n,s)=>(r._sqlite3changeset_start_v2=h.sqlite3changeset_start_v2)(e,t,n,s),r._sqlite3changeset_start_strm=(e,t,n)=>(r._sqlite3changeset_start_strm=h.sqlite3changeset_start_strm)(e,t,n),r._sqlite3changeset_start_v2_strm=(e,t,n,s)=>(r._sqlite3changeset_start_v2_strm=h.sqlite3changeset_start_v2_strm)(e,t,n,s),r._sqlite3changeset_next=e=>(r._sqlite3changeset_next=h.sqlite3changeset_next)(e),r._sqlite3changeset_op=(e,t,n,s,o)=>(r._sqlite3changeset_op=h.sqlite3changeset_op)(e,t,n,s,o),r._sqlite3changeset_pk=(e,t,n)=>(r._sqlite3changeset_pk=h.sqlite3changeset_pk)(e,t,n),r._sqlite3changeset_old=(e,t,n)=>(r._sqlite3changeset_old=h.sqlite3changeset_old)(e,t,n),r._sqlite3changeset_new=(e,t,n)=>(r._sqlite3changeset_new=h.sqlite3changeset_new)(e,t,n),r._sqlite3changeset_conflict=(e,t,n)=>(r._sqlite3changeset_conflict=h.sqlite3changeset_conflict)(e,t,n),r._sqlite3changeset_fk_conflicts=(e,t)=>(r._sqlite3changeset_fk_conflicts=h.sqlite3changeset_fk_conflicts)(e,t),r._sqlite3changeset_finalize=e=>(r._sqlite3changeset_finalize=h.sqlite3changeset_finalize)(e),r._sqlite3changeset_invert=(e,t,n,s)=>(r._sqlite3changeset_invert=h.sqlite3changeset_invert)(e,t,n,s),r._sqlite3changeset_invert_strm=(e,t,n,s)=>(r._sqlite3changeset_invert_strm=h.sqlite3changeset_invert_strm)(e,t,n,s),r._sqlite3changeset_apply_v2=(e,t,n,s,o,a,p,q,N)=>(r._sqlite3changeset_apply_v2=h.sqlite3changeset_apply_v2)(e,t,n,s,o,a,p,q,N),r._sqlite3changeset_apply=(e,t,n,s,o,a)=>(r._sqlite3changeset_apply=h.sqlite3changeset_apply)(e,t,n,s,o,a),r._sqlite3changeset_apply_v2_strm=(e,t,n,s,o,a,p,q,N)=>(r._sqlite3changeset_apply_v2_strm=h.sqlite3changeset_apply_v2_strm)(e,t,n,s,o,a,p,q,N),r._sqlite3changeset_apply_strm=(e,t,n,s,o,a)=>(r._sqlite3changeset_apply_strm=h.sqlite3changeset_apply_strm)(e,t,n,s,o,a),r._sqlite3changegroup_new=e=>(r._sqlite3changegroup_new=h.sqlite3changegroup_new)(e),r._sqlite3changegroup_add=(e,t,n)=>(r._sqlite3changegroup_add=h.sqlite3changegroup_add)(e,t,n),r._sqlite3changegroup_output=(e,t,n)=>(r._sqlite3changegroup_output=h.sqlite3changegroup_output)(e,t,n),r._sqlite3changegroup_add_strm=(e,t,n)=>(r._sqlite3changegroup_add_strm=h.sqlite3changegroup_add_strm)(e,t,n),r._sqlite3changegroup_output_strm=(e,t,n)=>(r._sqlite3changegroup_output_strm=h.sqlite3changegroup_output_strm)(e,t,n),r._sqlite3changegroup_delete=e=>(r._sqlite3changegroup_delete=h.sqlite3changegroup_delete)(e),r._sqlite3changeset_concat=(e,t,n,s,o,a)=>(r._sqlite3changeset_concat=h.sqlite3changeset_concat)(e,t,n,s,o,a),r._sqlite3changeset_concat_strm=(e,t,n,s,o,a)=>(r._sqlite3changeset_concat_strm=h.sqlite3changeset_concat_strm)(e,t,n,s,o,a),r._sqlite3session_config=(e,t)=>(r._sqlite3session_config=h.sqlite3session_config)(e,t),r._sqlite3_sourceid=()=>(r._sqlite3_sourceid=h.sqlite3_sourceid)(),r._sqlite3__wasm_pstack_ptr=()=>(r._sqlite3__wasm_pstack_ptr=h.sqlite3__wasm_pstack_ptr)(),r._sqlite3__wasm_pstack_restore=e=>(r._sqlite3__wasm_pstack_restore=h.sqlite3__wasm_pstack_restore)(e),r._sqlite3__wasm_pstack_alloc=e=>(r._sqlite3__wasm_pstack_alloc=h.sqlite3__wasm_pstack_alloc)(e),r._sqlite3__wasm_pstack_remaining=()=>(r._sqlite3__wasm_pstack_remaining=h.sqlite3__wasm_pstack_remaining)(),r._sqlite3__wasm_pstack_quota=()=>(r._sqlite3__wasm_pstack_quota=h.sqlite3__wasm_pstack_quota)(),r._sqlite3__wasm_db_error=(e,t,n)=>(r._sqlite3__wasm_db_error=h.sqlite3__wasm_db_error)(e,t,n),r._sqlite3__wasm_test_struct=e=>(r._sqlite3__wasm_test_struct=h.sqlite3__wasm_test_struct)(e),r._sqlite3__wasm_enum_json=()=>(r._sqlite3__wasm_enum_json=h.sqlite3__wasm_enum_json)(),r._sqlite3__wasm_vfs_unlink=(e,t)=>(r._sqlite3__wasm_vfs_unlink=h.sqlite3__wasm_vfs_unlink)(e,t),r._sqlite3__wasm_db_vfs=(e,t)=>(r._sqlite3__wasm_db_vfs=h.sqlite3__wasm_db_vfs)(e,t),r._sqlite3__wasm_db_reset=e=>(r._sqlite3__wasm_db_reset=h.sqlite3__wasm_db_reset)(e),r._sqlite3__wasm_db_export_chunked=(e,t)=>(r._sqlite3__wasm_db_export_chunked=h.sqlite3__wasm_db_export_chunked)(e,t),r._sqlite3__wasm_db_serialize=(e,t,n,s,o)=>(r._sqlite3__wasm_db_serialize=h.sqlite3__wasm_db_serialize)(e,t,n,s,o),r._sqlite3__wasm_vfs_create_file=(e,t,n,s)=>(r._sqlite3__wasm_vfs_create_file=h.sqlite3__wasm_vfs_create_file)(e,t,n,s),r._sqlite3__wasm_posix_create_file=(e,t,n)=>(r._sqlite3__wasm_posix_create_file=h.sqlite3__wasm_posix_create_file)(e,t,n),r._sqlite3__wasm_kvvfsMakeKeyOnPstack=(e,t)=>(r._sqlite3__wasm_kvvfsMakeKeyOnPstack=h.sqlite3__wasm_kvvfsMakeKeyOnPstack)(e,t),r._sqlite3__wasm_kvvfs_methods=()=>(r._sqlite3__wasm_kvvfs_methods=h.sqlite3__wasm_kvvfs_methods)(),r._sqlite3__wasm_vtab_config=(e,t,n)=>(r._sqlite3__wasm_vtab_config=h.sqlite3__wasm_vtab_config)(e,t,n),r._sqlite3__wasm_db_config_ip=(e,t,n,s)=>(r._sqlite3__wasm_db_config_ip=h.sqlite3__wasm_db_config_ip)(e,t,n,s),r._sqlite3__wasm_db_config_pii=(e,t,n,s,o)=>(r._sqlite3__wasm_db_config_pii=h.sqlite3__wasm_db_config_pii)(e,t,n,s,o),r._sqlite3__wasm_db_config_s=(e,t,n)=>(r._sqlite3__wasm_db_config_s=h.sqlite3__wasm_db_config_s)(e,t,n),r._sqlite3__wasm_config_i=(e,t)=>(r._sqlite3__wasm_config_i=h.sqlite3__wasm_config_i)(e,t),r._sqlite3__wasm_config_ii=(e,t,n)=>(r._sqlite3__wasm_config_ii=h.sqlite3__wasm_config_ii)(e,t,n),r._sqlite3__wasm_config_j=(e,t)=>(r._sqlite3__wasm_config_j=h.sqlite3__wasm_config_j)(e,t),r._sqlite3__wasm_qfmt_token=(e,t)=>(r._sqlite3__wasm_qfmt_token=h.sqlite3__wasm_qfmt_token)(e,t),r._sqlite3__wasm_init_wasmfs=e=>(r._sqlite3__wasm_init_wasmfs=h.sqlite3__wasm_init_wasmfs)(e),r._sqlite3__wasm_test_intptr=e=>(r._sqlite3__wasm_test_intptr=h.sqlite3__wasm_test_intptr)(e),r._sqlite3__wasm_test_voidptr=e=>(r._sqlite3__wasm_test_voidptr=h.sqlite3__wasm_test_voidptr)(e),r._sqlite3__wasm_test_int64_max=()=>(r._sqlite3__wasm_test_int64_max=h.sqlite3__wasm_test_int64_max)(),r._sqlite3__wasm_test_int64_min=()=>(r._sqlite3__wasm_test_int64_min=h.sqlite3__wasm_test_int64_min)(),r._sqlite3__wasm_test_int64_times2=e=>(r._sqlite3__wasm_test_int64_times2=h.sqlite3__wasm_test_int64_times2)(e),r._sqlite3__wasm_test_int64_minmax=(e,t)=>(r._sqlite3__wasm_test_int64_minmax=h.sqlite3__wasm_test_int64_minmax)(e,t),r._sqlite3__wasm_test_int64ptr=e=>(r._sqlite3__wasm_test_int64ptr=h.sqlite3__wasm_test_int64ptr)(e),r._sqlite3__wasm_test_stack_overflow=e=>(r._sqlite3__wasm_test_stack_overflow=h.sqlite3__wasm_test_stack_overflow)(e),r._sqlite3__wasm_test_str_hello=e=>(r._sqlite3__wasm_test_str_hello=h.sqlite3__wasm_test_str_hello)(e),r._sqlite3__wasm_SQLTester_strglob=(e,t)=>(r._sqlite3__wasm_SQLTester_strglob=h.sqlite3__wasm_SQLTester_strglob)(e,t),r._malloc=e=>(r._malloc=h.malloc)(e),r._free=e=>(r._free=h.free)(e),r._realloc=(e,t)=>(r._realloc=h.realloc)(e,t);var is=(e,t)=>(is=h.emscripten_builtin_memalign)(e,t);r.wasmMemory=We;var nr,os;Ue=function e(){nr||as(),nr||(Ue=e)};function as(){if(At>0||!os&&(os=1,yr(),At>0))return;function e(){var t;nr||(nr=1,r.calledRun=1,!De&&(qr(),W(r),(t=r.onRuntimeInitialized)==null||t.call(r),Un()))}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),e()},1)):e()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return as(),r.runSQLite3PostLoadInit=function(e){if(globalThis.sqlite3ApiBootstrap=function t(n=globalThis.sqlite3ApiConfig||t.defaultConfig){if(t.sqlite3)return(t.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),t.sqlite3;const s=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof r<"u"&&r.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},n||{});Object.assign(s,{allocExportName:s.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:s.useStdAlloc?"free":"sqlite3_free",reallocExportName:s.useStdAlloc?"realloc":"sqlite3_realloc"},s),["exports","memory","wasmfsOpfsDir"].forEach(l=>{typeof s[l]=="function"&&(s[l]=s[l]())}),delete globalThis.sqlite3ApiConfig,delete t.defaultConfig;const o=Object.create(null),a=Object.create(null),p=l=>o.sqlite3_js_rc_str&&o.sqlite3_js_rc_str(l)||"Unknown result code #"+l,q=l=>typeof l=="number"&&l===(l|0);class N extends Error{constructor(...u){let E;if(u.length)if(q(u[0]))if(E=u[0],u.length===1)super(p(u[0]));else{const w=p(E);typeof u[1]=="object"?super(w,u[1]):(u[0]=w+":",super(u.join(" ")))}else u.length===2&&typeof u[1]=="object"?super(...u):super(u.join(" "));this.resultCode=E||o.SQLITE_ERROR,this.name="SQLite3Error"}}N.toss=(...l)=>{throw new N(...l)};const M=N.toss;s.wasmfsOpfsDir&&!/^\/[^/]+$/.test(s.wasmfsOpfsDir)&&M("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const Y=l=>typeof l!="bigint"&&l===(l|0)&&l<=2147483647&&l>=-2147483648,J=function l(u){return l._max||(l._max=BigInt("0x7fffffffffffffff"),l._min=~l._max),u>=l._min&&u<=l._max},D=l=>l>=-0x7fffffffn-1n&&l<=0x7fffffffn,P=function l(u){return l._min||(l._min=Number.MIN_SAFE_INTEGER,l._max=Number.MAX_SAFE_INTEGER),u>=l._min&&u<=l._max},j=l=>l&&l.constructor&&Y(l.constructor.BYTES_PER_ELEMENT)?l:!1,A=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,T=l=>l.buffer instanceof A,F=(l,u,E)=>T(l)?l.slice(u,E):l.subarray(u,E),R=l=>l&&(l instanceof Uint8Array||l instanceof Int8Array||l instanceof ArrayBuffer),U=l=>l&&(l instanceof Uint8Array||l instanceof Int8Array||l instanceof ArrayBuffer),O=l=>R(l)||M("Value is not of a supported TypedArray type."),z=new TextDecoder("utf-8"),X=function(l,u,E){return z.decode(F(l,u,E))},_=function(l){return U(l)?X(l instanceof ArrayBuffer?new Uint8Array(l):l):Array.isArray(l)?l.join(""):(a.isPtr(l)&&(l=a.cstrToJs(l)),l)};class b extends Error{constructor(...u){u.length===2&&typeof u[1]=="object"?super(...u):u.length?super(u.join(" ")):super("Allocation failed."),this.resultCode=o.SQLITE_NOMEM,this.name="WasmAllocError"}}b.toss=(...l)=>{throw new b(...l)},Object.assign(o,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(l,u,E,w,V,se,ue,he,de)=>{},sqlite3_create_function:(l,u,E,w,V,se,ue,he)=>{},sqlite3_create_window_function:(l,u,E,w,V,se,ue,he,de,me)=>{},sqlite3_prepare_v3:(l,u,E,w,V,se)=>{},sqlite3_prepare_v2:(l,u,E,w,V)=>{},sqlite3_exec:(l,u,E,w,V)=>{},sqlite3_randomness:(l,u)=>{}});const x={affirmBindableTypedArray:O,flexibleString:_,bigIntFits32:D,bigIntFits64:J,bigIntFitsDouble:P,isBindableTypedArray:R,isInt32:Y,isSQLableTypedArray:U,isTypedArray:j,typedArrayToString:X,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:T,toss:function(...l){throw new Error(l.join(" "))},toss3:M,typedArrayPart:F,affirmDbHeader:function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l));const u="SQLite format 3";u.length>l.byteLength&&M("Input does not contain an SQLite3 database header.");for(let E=0;E<u.length;++E)u.charCodeAt(E)!==l[E]&&M("Input does not contain an SQLite3 database header.")},affirmIsDb:function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l));const u=l.byteLength;(u<512||u%512!==0)&&M("Byte array size",u,"is invalid for an SQLite3 db."),x.affirmDbHeader(l)}};Object.assign(a,{ptrSizeof:s.wasmPtrSizeof||4,ptrIR:s.wasmPtrIR||"i32",bigIntEnabled:!!s.bigIntEnabled,exports:s.exports||M("Missing API config.exports (WASM module exports)."),memory:s.memory||s.exports.memory||M("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),a.allocFromTypedArray=function(l){l instanceof ArrayBuffer&&(l=new Uint8Array(l)),O(l);const u=a.alloc(l.byteLength||1);return a.heapForSize(l.constructor).set(l.byteLength?l:[0],u),u};{const l=s.allocExportName,u=s.deallocExportName,E=s.reallocExportName;for(const w of[l,u,E])a.exports[w]instanceof Function||M("Missing required exports[",w,"] function.");a.alloc=function w(V){return w.impl(V)||b.toss("Failed to allocate",V," bytes.")},a.alloc.impl=a.exports[l],a.realloc=function w(V,se){const ue=w.impl(V,se);return se?ue||b.toss("Failed to reallocate",se," bytes."):0},a.realloc.impl=a.exports[E],a.dealloc=a.exports[u]}a.compileOptionUsed=function l(u){if(arguments.length){if(Array.isArray(u)){const E={};return u.forEach(w=>{E[w]=o.sqlite3_compileoption_used(w)}),E}else if(typeof u=="object")return Object.keys(u).forEach(E=>{u[E]=o.sqlite3_compileoption_used(E)}),u}else{if(l._result)return l._result;l._opt||(l._rx=/^([^=]+)=(.+)/,l._rxInt=/^-?\d+$/,l._opt=function(ue,he){const de=l._rx.exec(ue);he[0]=de?de[1]:ue,he[1]=de?l._rxInt.test(de[2])?+de[2]:de[2]:!0});const E={},w=[0,0];let V=0,se;for(;se=o.sqlite3_compileoption_get(V++);)l._opt(se,w),E[w[0]]=w[1];return l._result=E}return typeof u=="string"?!!o.sqlite3_compileoption_used(u):!1},a.pstack=Object.assign(Object.create(null),{restore:a.exports.sqlite3__wasm_pstack_restore,alloc:function(l){return typeof l=="string"&&!(l=a.sizeofIR(l))&&b.toss("Invalid value for pstack.alloc(",arguments[0],")"),a.exports.sqlite3__wasm_pstack_alloc(l)||b.toss("Could not allocate",l,"bytes from the pstack.")},allocChunks:function(l,u){typeof u=="string"&&!(u=a.sizeofIR(u))&&b.toss("Invalid size value for allocChunks(",arguments[1],")");const E=a.pstack.alloc(l*u),w=[];let V=0,se=0;for(;V<l;++V,se+=u)w.push(E+se);return w},allocPtr:(l=1,u=!0)=>l===1?a.pstack.alloc(u?8:a.ptrSizeof):a.pstack.allocChunks(l,u?8:a.ptrSizeof),call:function(l){const u=a.pstack.pointer;try{return l(g)}finally{a.pstack.restore(u)}}}),Object.defineProperties(a.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3__wasm_pstack_remaining}}),o.sqlite3_randomness=(...l)=>{if(l.length===1&&x.isTypedArray(l[0])&&l[0].BYTES_PER_ELEMENT===1){const u=l[0];if(u.byteLength===0)return a.exports.sqlite3_randomness(0,0),u;const E=a.pstack.pointer;try{let w=u.byteLength,V=0;const se=a.exports.sqlite3_randomness,ue=a.heap8u(),he=w<512?w:512,de=a.pstack.alloc(he);do{const me=w>he?he:w;se(me,de),u.set(F(ue,de,de+me),V),w-=me,V+=me}while(w>0)}catch(w){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",w)}finally{a.pstack.restore(E)}return u}a.exports.sqlite3_randomness(...l)};let G;if(o.sqlite3_wasmfs_opfs_dir=function(){if(G!==void 0)return G;const l=s.wasmfsOpfsDir;if(!l||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return G="";try{return l&&a.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],l)===0?G=l:G=""}catch{return G=""}},o.sqlite3_wasmfs_filename_is_persistent=function(l){const u=o.sqlite3_wasmfs_opfs_dir();return u&&l?l.startsWith(u+"/"):!1},o.sqlite3_js_db_uses_vfs=function(l,u,E=0){try{const w=o.sqlite3_vfs_find(u);return w?l?w===o.sqlite3_js_db_vfs(l,E)?w:!1:w===o.sqlite3_vfs_find(0)?w:!1:!1}catch{return!1}},o.sqlite3_js_vfs_list=function(){const l=[];let u=o.sqlite3_vfs_find(0);for(;u;){const E=new o.sqlite3_vfs(u);l.push(a.cstrToJs(E.$zName)),u=E.$pNext,E.dispose()}return l},o.sqlite3_js_db_export=function(l,u=0){l=a.xWrap.testConvertArg("sqlite3*",l),l||M("Invalid sqlite3* argument."),a.bigIntEnabled||M("BigInt64 support is not enabled.");const E=a.scopedAllocPush();let w;try{const V=a.scopedAlloc(8+a.ptrSizeof),se=V+8,ue=u?a.isPtr(u)?u:a.scopedAllocCString(""+u):0;let he=a.exports.sqlite3__wasm_db_serialize(l,ue,se,V,0);he&&M("Database serialization failed with code",g.capi.sqlite3_js_rc_str(he)),w=a.peekPtr(se);const de=a.peek(V,"i64");return he=de?a.heap8u().slice(w,w+Number(de)):new Uint8Array,he}finally{w&&a.exports.sqlite3_free(w),a.scopedAllocPop(E)}},o.sqlite3_js_db_vfs=(l,u=0)=>x.sqlite3__wasm_db_vfs(l,u),o.sqlite3_js_aggregate_context=(l,u)=>o.sqlite3_aggregate_context(l,u)||(u?b.toss("Cannot allocate",u,"bytes for sqlite3_aggregate_context()"):0),o.sqlite3_js_posix_create_file=function(l,u,E){let w;u&&a.isPtr(u)?w=u:u instanceof ArrayBuffer||u instanceof Uint8Array?(w=a.allocFromTypedArray(u),(arguments.length<3||!x.isInt32(E)||E<0)&&(E=u.byteLength)):N.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!x.isInt32(E)||E<0)&&N.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const V=x.sqlite3__wasm_posix_create_file(l,w,E);V&&N.toss("Creation of file failed with sqlite3 result code",o.sqlite3_js_rc_str(V))}finally{a.dealloc(w)}},o.sqlite3_js_vfs_create_file=function(l,u,E,w){s.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let V;E?(a.isPtr(E)?V=E:E instanceof ArrayBuffer&&(E=new Uint8Array(E)),E instanceof Uint8Array?(V=a.allocFromTypedArray(E),(arguments.length<4||!x.isInt32(w)||w<0)&&(w=E.byteLength)):N.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):V=0,(!x.isInt32(w)||w<0)&&(a.dealloc(V),N.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const se=x.sqlite3__wasm_vfs_create_file(l,u,V,w);se&&N.toss("Creation of file failed with sqlite3 result code",o.sqlite3_js_rc_str(se))}finally{a.dealloc(V)}},o.sqlite3_js_sql_to_string=l=>{if(typeof l=="string")return l;const u=_(v);return u===v?void 0:u},x.isUIThread()){const l=function(u){const E=Object.create(null);return E.prefix="kvvfs-"+u,E.stores=[],(u==="session"||u==="")&&E.stores.push(globalThis.sessionStorage),(u==="local"||u==="")&&E.stores.push(globalThis.localStorage),E};o.sqlite3_js_kvvfs_clear=function(u=""){let E=0;const w=l(u);return w.stores.forEach(V=>{const se=[];let ue;for(ue=0;ue<V.length;++ue){const he=V.key(ue);he.startsWith(w.prefix)&&se.push(he)}se.forEach(he=>V.removeItem(he)),E+=se.length}),E},o.sqlite3_js_kvvfs_size=function(u=""){let E=0;const w=l(u);return w.stores.forEach(V=>{let se;for(se=0;se<V.length;++se){const ue=V.key(se);ue.startsWith(w.prefix)&&(E+=ue.length,E+=V.getItem(ue).length)}}),E*2}}o.sqlite3_db_config=(function(l,u,...E){switch(u){case o.SQLITE_DBCONFIG_ENABLE_FKEY:case o.SQLITE_DBCONFIG_ENABLE_TRIGGER:case o.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case o.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case o.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case o.SQLITE_DBCONFIG_ENABLE_QPSG:case o.SQLITE_DBCONFIG_TRIGGER_EQP:case o.SQLITE_DBCONFIG_RESET_DATABASE:case o.SQLITE_DBCONFIG_DEFENSIVE:case o.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case o.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case o.SQLITE_DBCONFIG_DQS_DML:case o.SQLITE_DBCONFIG_DQS_DDL:case o.SQLITE_DBCONFIG_ENABLE_VIEW:case o.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case o.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case o.SQLITE_DBCONFIG_STMT_SCANSTATUS:case o.SQLITE_DBCONFIG_REVERSE_SCANORDER:case o.SQLITE_DBCONFIG_ENABLE_ATTACH_CREATE:case o.SQLITE_DBCONFIG_ENABLE_ATTACH_WRITE:case o.SQLITE_DBCONFIG_ENABLE_COMMENTS:return this.ip||(this.ip=a.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),this.ip(l,u,E[0],E[1]||0);case o.SQLITE_DBCONFIG_LOOKASIDE:return this.pii||(this.pii=a.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"])),this.pii(l,u,E[0],E[1],E[2]);case o.SQLITE_DBCONFIG_MAINDBNAME:return this.s||(this.s=a.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"])),this.s(l,u,E[0]);default:return o.SQLITE_MISUSE}}).bind(Object.create(null)),o.sqlite3_value_to_js=function(l,u=!0){let E;const w=o.sqlite3_value_type(l);switch(w){case o.SQLITE_INTEGER:a.bigIntEnabled?(E=o.sqlite3_value_int64(l),x.bigIntFitsDouble(E)&&(E=Number(E))):E=o.sqlite3_value_double(l);break;case o.SQLITE_FLOAT:E=o.sqlite3_value_double(l);break;case o.SQLITE_TEXT:E=o.sqlite3_value_text(l);break;case o.SQLITE_BLOB:{const V=o.sqlite3_value_bytes(l),se=o.sqlite3_value_blob(l);V&&!se&&g.WasmAllocError.toss("Cannot allocate memory for blob argument of",V,"byte(s)"),E=V?a.heap8u().slice(se,se+Number(V)):null;break}case o.SQLITE_NULL:E=null;break;default:u&&M(o.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",w),E=void 0}return E},o.sqlite3_values_to_js=function(l,u,E=!0){let w;const V=[];for(w=0;w<l;++w)V.push(o.sqlite3_value_to_js(a.peekPtr(u+a.ptrSizeof*w),E));return V},o.sqlite3_result_error_js=function(l,u){u instanceof b?o.sqlite3_result_error_nomem(l):o.sqlite3_result_error(l,""+u,-1)},o.sqlite3_result_js=function(l,u){if(u instanceof Error){o.sqlite3_result_error_js(l,u);return}try{switch(typeof u){case"undefined":break;case"boolean":o.sqlite3_result_int(l,u?1:0);break;case"bigint":x.bigIntFits32(u)?o.sqlite3_result_int(l,Number(u)):x.bigIntFitsDouble(u)?o.sqlite3_result_double(l,Number(u)):a.bigIntEnabled?x.bigIntFits64(u)?o.sqlite3_result_int64(l,u):M("BigInt value",u.toString(),"is too BigInt for int64."):M("BigInt value",u.toString(),"is too BigInt.");break;case"number":{let E;x.isInt32(u)?E=o.sqlite3_result_int:a.bigIntEnabled&&Number.isInteger(u)&&x.bigIntFits64(BigInt(u))?E=o.sqlite3_result_int64:E=o.sqlite3_result_double,E(l,u);break}case"string":{const[E,w]=a.allocCString(u,!0);o.sqlite3_result_text(l,E,w,o.SQLITE_WASM_DEALLOC);break}case"object":if(u===null){o.sqlite3_result_null(l);break}else if(x.isBindableTypedArray(u)){const E=a.allocFromTypedArray(u);o.sqlite3_result_blob(l,E,u.byteLength,o.SQLITE_WASM_DEALLOC);break}default:M("Don't not how to handle this UDF result value:",typeof u,u)}}catch(E){o.sqlite3_result_error_js(l,E)}},o.sqlite3_column_js=function(l,u,E=!0){const w=o.sqlite3_column_value(l,u);return w===0?void 0:o.sqlite3_value_to_js(w,E)};const f=(function(l,u,E){E=o[E],this.ptr?a.pokePtr(this.ptr,0):this.ptr=a.allocPtr();const w=E(l,u,this.ptr);if(w)return N.toss(w,arguments[2]+"() failed with code "+w);const V=a.peekPtr(this.ptr);return V?o.sqlite3_value_to_js(V,!0):void 0}).bind(Object.create(null));o.sqlite3_preupdate_new_js=(l,u)=>f(l,u,"sqlite3_preupdate_new"),o.sqlite3_preupdate_old_js=(l,u)=>f(l,u,"sqlite3_preupdate_old"),o.sqlite3changeset_new_js=(l,u)=>f(l,u,"sqlite3changeset_new"),o.sqlite3changeset_old_js=(l,u)=>f(l,u,"sqlite3changeset_old");const g={WasmAllocError:b,SQLite3Error:N,capi:o,util:x,wasm:a,config:s,version:Object.create(null),client:void 0,asyncPostInit:async function l(){if(l.isReady instanceof Promise)return l.isReady;let u=t.initializersAsync;delete t.initializersAsync;const E=async()=>(g.__isUnderTest||(delete g.util,delete g.StructBinder),g),w=se=>{throw s.error("an async sqlite3 initializer failed:",se),se};if(!u||!u.length)return l.isReady=E().catch(w);u=u.map(se=>se instanceof Function?async ue=>se(g):se),u.push(E);let V=Promise.resolve(g);for(;u.length;)V=V.then(u.shift());return l.isReady=V.catch(w)},scriptInfo:void 0};try{t.initializers.forEach(l=>{l(g)})}catch(l){throw console.error("sqlite3 bootstrap initializer threw:",l),l}return delete t.initializers,t.sqlite3=g,g},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(t){t.bigIntEnabled===void 0&&(t.bigIntEnabled=!!globalThis.BigInt64Array);const n=(..._)=>{throw new Error(_.join(" "))};t.exports||Object.defineProperty(t,"exports",{enumerable:!0,configurable:!0,get:()=>t.instance&&t.instance.exports});const s=t.pointerIR||"i32",o=t.ptrSizeof=s==="i32"?4:s==="i64"?8:n("Unhandled ptrSizeof:",s),a=Object.create(null);a.heapSize=0,a.memory=null,a.freeFuncIndexes=[],a.scopedAlloc=[],a.utf8Decoder=new TextDecoder,a.utf8Encoder=new TextEncoder("utf-8"),t.sizeofIR=_=>{switch(_){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return o;default:return(""+_).endsWith("*")?o:void 0}};const p=function(){if(!a.memory)a.memory=t.memory instanceof WebAssembly.Memory?t.memory:t.exports.memory;else if(a.heapSize===a.memory.buffer.byteLength)return a;const _=a.memory.buffer;return a.HEAP8=new Int8Array(_),a.HEAP8U=new Uint8Array(_),a.HEAP16=new Int16Array(_),a.HEAP16U=new Uint16Array(_),a.HEAP32=new Int32Array(_),a.HEAP32U=new Uint32Array(_),t.bigIntEnabled&&(a.HEAP64=new BigInt64Array(_),a.HEAP64U=new BigUint64Array(_)),a.HEAP32F=new Float32Array(_),a.HEAP64F=new Float64Array(_),a.heapSize=_.byteLength,a};t.heap8=()=>p().HEAP8,t.heap8u=()=>p().HEAP8U,t.heap16=()=>p().HEAP16,t.heap16u=()=>p().HEAP16U,t.heap32=()=>p().HEAP32,t.heap32u=()=>p().HEAP32U,t.heapForSize=function(_,b=!0){const x=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:p();switch(_){case Int8Array:return x.HEAP8;case Uint8Array:return x.HEAP8U;case Int16Array:return x.HEAP16;case Uint16Array:return x.HEAP16U;case Int32Array:return x.HEAP32;case Uint32Array:return x.HEAP32U;case 8:return b?x.HEAP8U:x.HEAP8;case 16:return b?x.HEAP16U:x.HEAP16;case 32:return b?x.HEAP32U:x.HEAP32;case 64:if(x.HEAP64)return b?x.HEAP64U:x.HEAP64;break;default:if(t.bigIntEnabled){if(_===globalThis.BigUint64Array)return x.HEAP64U;if(_===globalThis.BigInt64Array)return x.HEAP64;break}}n("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},t.functionTable=function(){return t.exports.__indirect_function_table},t.functionEntry=function(_){const b=t.functionTable();return _<b.length?b.get(_):void 0},t.jsFuncToWasm=function _(b,x){if(_._||(_._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(g,l,u){u<128?g[l](u):g[l](u%128|128,u>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(g){const l=_._.rxJSig.exec(g);return l?l[2]:g.substr(1)},letterType:g=>_._.sigTypes[g]||n("Invalid signature letter:",g),pushSigType:(g,l)=>g.push(_._.typeCodes[_._.letterType(l)])}),typeof b=="string"){const g=x;x=b,b=g}const G=_._.sigParams(x),f=[1,96];_._.uleb128Encode(f,"push",G.length);for(const g of G)_._.pushSigType(f,g);return x[0]==="v"?f.push(0):(f.push(1),_._.pushSigType(f,x[0])),_._.uleb128Encode(f,"unshift",f.length),f.unshift(0,97,115,109,1,0,0,0,1),f.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(f)),{e:{f:b}}).exports.f};const q=function(b,x,G){if(G&&!a.scopedAlloc.length&&n("No scopedAllocPush() scope is active."),typeof b=="string"){const u=x;x=b,b=u}(typeof x!="string"||!(b instanceof Function))&&n("Invalid arguments: expecting (function,signature) or (signature,function).");const f=t.functionTable(),g=f.length;let l;for(;a.freeFuncIndexes.length&&(l=a.freeFuncIndexes.pop(),f.get(l));){l=null;continue}l||(l=g,f.grow(1));try{return f.set(l,b),G&&a.scopedAlloc[a.scopedAlloc.length-1].push(l),l}catch(u){if(!(u instanceof TypeError))throw l===g&&a.freeFuncIndexes.push(g),u}try{const u=t.jsFuncToWasm(b,x);f.set(l,u),G&&a.scopedAlloc[a.scopedAlloc.length-1].push(l)}catch(u){throw l===g&&a.freeFuncIndexes.push(g),u}return l};t.installFunction=(_,b)=>q(_,b,!1),t.scopedInstallFunction=(_,b)=>q(_,b,!0),t.uninstallFunction=function(_){if(!_&&_!==0)return;const b=a.freeFuncIndexes,x=t.functionTable();b.push(_);const G=x.get(_);return x.set(_,null),G},t.peek=function(b,x="i8"){x.endsWith("*")&&(x=s);const G=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:p(),f=Array.isArray(b)?[]:void 0;let g;do{switch(f&&(b=arguments[0].shift()),x){case"i1":case"i8":g=G.HEAP8[b>>0];break;case"i16":g=G.HEAP16[b>>1];break;case"i32":g=G.HEAP32[b>>2];break;case"float":case"f32":g=G.HEAP32F[b>>2];break;case"double":case"f64":g=Number(G.HEAP64F[b>>3]);break;case"i64":if(t.bigIntEnabled){g=BigInt(G.HEAP64[b>>3]);break}default:n("Invalid type for peek():",x)}f&&f.push(g)}while(f&&arguments[0].length);return f||g},t.poke=function(_,b,x="i8"){x.endsWith("*")&&(x=s);const G=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:p();for(const f of Array.isArray(_)?_:[_])switch(x){case"i1":case"i8":G.HEAP8[f>>0]=b;continue;case"i16":G.HEAP16[f>>1]=b;continue;case"i32":G.HEAP32[f>>2]=b;continue;case"float":case"f32":G.HEAP32F[f>>2]=b;continue;case"double":case"f64":G.HEAP64F[f>>3]=b;continue;case"i64":if(G.HEAP64){G.HEAP64[f>>3]=BigInt(b);continue}default:n("Invalid type for poke(): "+x)}return this},t.peekPtr=(..._)=>t.peek(_.length===1?_[0]:_,s),t.pokePtr=(_,b=0)=>t.poke(_,b,s),t.peek8=(..._)=>t.peek(_.length===1?_[0]:_,"i8"),t.poke8=(_,b)=>t.poke(_,b,"i8"),t.peek16=(..._)=>t.peek(_.length===1?_[0]:_,"i16"),t.poke16=(_,b)=>t.poke(_,b,"i16"),t.peek32=(..._)=>t.peek(_.length===1?_[0]:_,"i32"),t.poke32=(_,b)=>t.poke(_,b,"i32"),t.peek64=(..._)=>t.peek(_.length===1?_[0]:_,"i64"),t.poke64=(_,b)=>t.poke(_,b,"i64"),t.peek32f=(..._)=>t.peek(_.length===1?_[0]:_,"f32"),t.poke32f=(_,b)=>t.poke(_,b,"f32"),t.peek64f=(..._)=>t.peek(_.length===1?_[0]:_,"f64"),t.poke64f=(_,b)=>t.poke(_,b,"f64"),t.getMemValue=t.peek,t.getPtrValue=t.peekPtr,t.setMemValue=t.poke,t.setPtrValue=t.pokePtr,t.isPtr32=_=>typeof _=="number"&&_===(_|0)&&_>=0,t.isPtr=t.isPtr32,t.cstrlen=function(_){if(!_||!t.isPtr(_))return null;const b=p().HEAP8U;let x=_;for(;b[x]!==0;++x);return x-_};const N=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,M=function(_,b,x){return a.utf8Decoder.decode(_.buffer instanceof N?_.slice(b,x):_.subarray(b,x))};t.cstrToJs=function(_){const b=t.cstrlen(_);return b?M(p().HEAP8U,_,_+b):b===null?b:""},t.jstrlen=function(_){if(typeof _!="string")return null;const b=_.length;let x=0;for(let G=0;G<b;++G){let f=_.charCodeAt(G);f>=55296&&f<=57343&&(f=65536+((f&1023)<<10)|_.charCodeAt(++G)&1023),f<=127?++x:f<=2047?x+=2:f<=65535?x+=3:x+=4}return x},t.jstrcpy=function(_,b,x=0,G=-1,f=!0){if((!b||!(b instanceof Int8Array)&&!(b instanceof Uint8Array))&&n("jstrcpy() target must be an Int8Array or Uint8Array."),G<0&&(G=b.length-x),!(G>0)||!(x>=0))return 0;let g=0,l=_.length;const u=x,E=x+G-(f?1:0);for(;g<l&&x<E;++g){let w=_.charCodeAt(g);if(w>=55296&&w<=57343&&(w=65536+((w&1023)<<10)|_.charCodeAt(++g)&1023),w<=127){if(x>=E)break;b[x++]=w}else if(w<=2047){if(x+1>=E)break;b[x++]=192|w>>6,b[x++]=128|w&63}else if(w<=65535){if(x+2>=E)break;b[x++]=224|w>>12,b[x++]=128|w>>6&63,b[x++]=128|w&63}else{if(x+3>=E)break;b[x++]=240|w>>18,b[x++]=128|w>>12&63,b[x++]=128|w>>6&63,b[x++]=128|w&63}}return f&&(b[x++]=0),x-u},t.cstrncpy=function(_,b,x){if((!_||!b)&&n("cstrncpy() does not accept NULL strings."),x<0)x=t.cstrlen(strPtr)+1;else if(!(x>0))return 0;const G=t.heap8u();let f=0,g;for(;f<x&&(g=G[b+f]);++f)G[_+f]=g;return f<x&&(G[_+f++]=0),f},t.jstrToUintArray=(_,b=!1)=>a.utf8Encoder.encode(b?_+"\0":_);const Y=(_,b)=>{(!(_.alloc instanceof Function)||!(_.dealloc instanceof Function))&&n("Object is missing alloc() and/or dealloc() function(s)","required by",b+"().")},J=function(_,b,x,G){if(Y(t,G),typeof _!="string")return null;{const f=a.utf8Encoder.encode(_),g=x(f.length+1),l=p().HEAP8U;return l.set(f,g),l[g+f.length]=0,b?[g,f.length]:g}};t.allocCString=(_,b=!1)=>J(_,b,t.alloc,"allocCString()"),t.scopedAllocPush=function(){Y(t,"scopedAllocPush");const _=[];return a.scopedAlloc.push(_),_},t.scopedAllocPop=function(_){Y(t,"scopedAllocPop");const b=arguments.length?a.scopedAlloc.indexOf(_):a.scopedAlloc.length-1;b<0&&n("Invalid state object for scopedAllocPop()."),arguments.length===0&&(_=a.scopedAlloc[b]),a.scopedAlloc.splice(b,1);for(let x;x=_.pop();)t.functionEntry(x)?t.uninstallFunction(x):t.dealloc(x)},t.scopedAlloc=function(_){a.scopedAlloc.length||n("No scopedAllocPush() scope is active.");const b=t.alloc(_);return a.scopedAlloc[a.scopedAlloc.length-1].push(b),b},Object.defineProperty(t.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>a.scopedAlloc.length,set:()=>n("The 'active' property is read-only.")}),t.scopedAllocCString=(_,b=!1)=>J(_,b,t.scopedAlloc,"scopedAllocCString()");const D=function(_,b){const x=t[_?"scopedAlloc":"alloc"]((b.length+1)*t.ptrSizeof);let G=0;return b.forEach(f=>{t.pokePtr(x+t.ptrSizeof*G++,t[_?"scopedAllocCString":"allocCString"](""+f))}),t.pokePtr(x+t.ptrSizeof*G,0),x};t.scopedAllocMainArgv=_=>D(!0,_),t.allocMainArgv=_=>D(!1,_),t.cArgvToJs=(_,b)=>{const x=[];for(let G=0;G<_;++G){const f=t.peekPtr(b+t.ptrSizeof*G);x.push(f?t.cstrToJs(f):null)}return x},t.scopedAllocCall=function(_){t.scopedAllocPush();try{return _()}finally{t.scopedAllocPop()}};const P=function(_,b,x){Y(t,x);const G=b?"i64":s;let f=t[x](_*(b?8:o));if(t.poke(f,0,G),_===1)return f;const g=[f];for(let l=1;l<_;++l)f+=b?8:o,g[l]=f,t.poke(f,0,G);return g};t.allocPtr=(_=1,b=!0)=>P(_,b,"alloc"),t.scopedAllocPtr=(_=1,b=!0)=>P(_,b,"scopedAlloc"),t.xGet=function(_){return t.exports[_]||n("Cannot find exported symbol:",_)};const j=(_,b)=>n(_+"() requires",b,"argument(s).");t.xCall=function(_,...b){const x=_ instanceof Function?_:t.xGet(_);return x instanceof Function||n("Exported symbol",_,"is not a function."),x.length!==b.length&&j(x===_?x.name:_,x.length),arguments.length===2&&Array.isArray(arguments[1])?x.apply(null,arguments[1]):x.apply(null,b)},a.xWrap=Object.create(null),a.xWrap.convert=Object.create(null),a.xWrap.convert.arg=new Map,a.xWrap.convert.result=new Map;const A=a.xWrap.convert.arg,T=a.xWrap.convert.result;t.bigIntEnabled&&A.set("i64",_=>BigInt(_));const F=s==="i32"?_=>_|0:_=>BigInt(_)|BigInt(0);A.set("i32",F).set("i16",_=>(_|0)&65535).set("i8",_=>(_|0)&255).set("f32",_=>Number(_).valueOf()).set("float",A.get("f32")).set("f64",A.get("f32")).set("double",A.get("f64")).set("int",A.get("i32")).set("null",_=>_).set(null,A.get("null")).set("**",F).set("*",F),T.set("*",F).set("pointer",F).set("number",_=>Number(_)).set("void",_=>{}).set("null",_=>_).set(null,T.get("null"));{const _=["i8","i16","i32","int","f32","float","f64","double"];t.bigIntEnabled&&_.push("i64");const b=A.get(s);for(const x of _)A.set(x+"*",b),T.set(x+"*",b),T.set(x,A.get(x)||n("Missing arg converter:",x))}const R=function(_){return typeof _=="string"?t.scopedAllocCString(_):_?F(_):null};A.set("string",R).set("utf8",R).set("pointer",R),T.set("string",_=>t.cstrToJs(_)).set("utf8",T.get("string")).set("string:dealloc",_=>{try{return _?t.cstrToJs(_):null}finally{t.dealloc(_)}}).set("utf8:dealloc",T.get("string:dealloc")).set("json",_=>JSON.parse(t.cstrToJs(_))).set("json:dealloc",_=>{try{return _?JSON.parse(t.cstrToJs(_)):null}finally{t.dealloc(_)}});const U=class{constructor(_){this.name=_.name||"unnamed adapter"}convertArg(_,b,x){n("AbstractArgAdapter must be subclassed.")}};A.FuncPtrAdapter=class Rt extends U{constructor(b){super(b),A.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",b),this.name=b.name||"unnamed",this.signature=b.signature,b.contextKey instanceof Function&&(this.contextKey=b.contextKey,b.bindScope||(b.bindScope="context")),this.bindScope=b.bindScope||n("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Rt.bindScopes.indexOf(b.bindScope)<0&&n("Invalid options.bindScope ("+b.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Rt.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=b.callProxy instanceof Function?b.callProxy:void 0}contextKey(b,x){return this}contextMap(b){const x=this.__cmap||(this.__cmap=new Map);let G=x.get(b);return G===void 0&&x.set(b,G=[]),G}convertArg(b,x,G){let f=this.singleton;if(!f&&this.isContext&&(f=this.contextMap(this.contextKey(x,G))),f&&f[0]===b)return f[1];if(b instanceof Function){this.callProxy&&(b=this.callProxy(b));const g=q(b,this.signature,this.isTransient);if(Rt.debugFuncInstall&&Rt.debugOut("FuncPtrAdapter installed",this,this.contextKey(x,G),"@"+g,b),f){if(f[1]){Rt.debugFuncInstall&&Rt.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(x,G),"@"+f[1],b);try{a.scopedAlloc[a.scopedAlloc.length-1].push(f[1])}catch{}}f[0]=b,f[1]=g}return g}else if(t.isPtr(b)||b===null||b===void 0){if(f&&f[1]&&f[1]!==b){Rt.debugFuncInstall&&Rt.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(x,G),"@"+f[1],b);try{a.scopedAlloc[a.scopedAlloc.length-1].push(f[1])}catch{}f[0]=f[1]=b|0}return b||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},A.FuncPtrAdapter.warnOnUse=!1,A.FuncPtrAdapter.debugFuncInstall=!1,A.FuncPtrAdapter.debugOut=console.debug.bind(console),A.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const O=_=>A.get(_)||n("Argument adapter not found:",_),z=_=>T.get(_)||n("Result adapter not found:",_);a.xWrap.convertArg=(_,...b)=>O(_)(...b),a.xWrap.convertArgNoCheck=(_,...b)=>A.get(_)(...b),a.xWrap.convertResult=(_,b)=>_===null?b:_?z(_)(b):void 0,a.xWrap.convertResultNoCheck=(_,b)=>_===null?b:_?T.get(_)(b):void 0,t.xWrap=function(_,b,...x){arguments.length===3&&Array.isArray(arguments[2])&&(x=arguments[2]),t.isPtr(_)&&(_=t.functionEntry(_)||n("Function pointer not found in WASM function table."));const G=_ instanceof Function,f=G?_:t.xGet(_);if(G&&(_=f.name||"unnamed function"),x.length!==f.length&&j(_,f.length),b===null&&f.length===0)return f;b!=null&&z(b);for(const l of x)l instanceof U?A.set(l,(...u)=>l.convertArg(...u)):O(l);const g=a.xWrap;return f.length===0?(...l)=>l.length?j(_,f.length):g.convertResult(b,f.call(null)):function(...l){l.length!==f.length&&j(_,f.length);const u=t.scopedAllocPush();try{let E=0;for(;E<l.length;++E)l[E]=g.convertArgNoCheck(x[E],l[E],l,E);return g.convertResultNoCheck(b,f.apply(null,l))}finally{t.scopedAllocPop(u)}}};const X=function(_,b,x,G,f,g){if(typeof x=="string"){if(b===1)return g.get(x);if(b===2){if(G)G instanceof Function||n(f,"requires a function argument.");else return g.delete(x),_;return g.set(x,G),_}}n("Invalid arguments to",f)};return t.xWrap.resultAdapter=function _(b,x){return X(_,arguments.length,b,x,"resultAdapter()",T)},t.xWrap.argAdapter=function _(b,x){return X(_,arguments.length,b,x,"argAdapter()",A)},t.xWrap.FuncPtrAdapter=A.FuncPtrAdapter,t.xCallWrapped=function(_,b,x,...G){return Array.isArray(arguments[3])&&(G=arguments[3]),t.xWrap(_,b,x||[]).apply(null,G||[])},t.xWrap.testConvertArg=a.xWrap.convertArg,t.xWrap.testConvertResult=a.xWrap.convertResult,t},globalThis.WhWasmUtilInstaller.yawl=(function(t){const n=()=>fetch(t.uri,{credentials:"same-origin"}),s=this,o=function(p){if(t.wasmUtilTarget){const q=(...M)=>{throw new Error(M.join(" "))},N=t.wasmUtilTarget;if(N.module=p.module,N.instance=p.instance,N.instance.exports.memory||(N.memory=t.imports&&t.imports.env&&t.imports.env.memory||q("Missing 'memory' object!")),!N.alloc&&p.instance.exports.malloc){const M=p.instance.exports;N.alloc=function(Y){return M.malloc(Y)||q("Allocation of",Y,"bytes failed.")},N.dealloc=function(Y){M.free(Y)}}s(N)}return t.onload&&t.onload(p,t),p};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(n(),t.imports||{}).then(o)}:function(){return n().then(q=>q.arrayBuffer()).then(q=>WebAssembly.instantiate(q,t.imports||{})).then(o)}}).bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function t(n){const s=(...d)=>{throw new Error(d.join(" "))};!(n.heap instanceof WebAssembly.Memory)&&!(n.heap instanceof Function)&&s("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(d){n[d]instanceof Function||s("Config option '"+d+"' must be a function.")});const o=t,a=n.heap instanceof Function?n.heap:()=>new Uint8Array(n.heap.buffer),p=n.alloc,q=n.dealloc,N=n.log||console.log.bind(console),M=n.memberPrefix||"",Y=n.memberSuffix||"",J=n.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!n.bigIntEnabled,D=globalThis.BigInt,P=globalThis.BigInt64Array,j=n.ptrSizeof||4,A=n.ptrIR||"i32";o.debugFlags||(o.__makeDebugFlags=function(d=null){d&&d.__flags&&(d=d.__flags);const I=function L(B){return arguments.length===0?L.__flags:(B<0?(delete L.__flags.getter,delete L.__flags.setter,delete L.__flags.alloc,delete L.__flags.dealloc):(L.__flags.getter=(1&B)!==0,L.__flags.setter=(2&B)!==0,L.__flags.alloc=(4&B)!==0,L.__flags.dealloc=(8&B)!==0),L._flags)};return Object.defineProperty(I,"__flags",{iterable:!1,writable:!1,value:Object.create(d)}),d||I(0),I},o.debugFlags=o.__makeDebugFlags());const T=function(){const d=new ArrayBuffer(2);return new DataView(d).setInt16(0,256,!0),new Int16Array(d)[0]===256}(),F=d=>d[1]==="(",R=d=>d==="P",U=d=>F(d)?"p":d[0],O=function(d){switch(U(d)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return A;case"j":return"i64";case"f":return"float";case"d":return"double"}s("Unhandled signature IR:",d)},z=P?()=>!0:()=>s("BigInt64Array is not available."),X=function(d){switch(U(d)){case"p":case"P":case"s":{switch(j){case 4:return"getInt32";case 8:return z()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return z()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}s("Unhandled DataView getter for signature:",d)},_=function(d){switch(U(d)){case"p":case"P":case"s":{switch(j){case 4:return"setInt32";case 8:return z()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return z()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}s("Unhandled DataView setter for signature:",d)},b=function(d){switch(U(d)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return z()&&D;case"p":case"P":case"s":switch(j){case 4:return Number;case 8:return z()&&D}break}s("Unhandled DataView set wrapper for signature:",d)},x=(d,I)=>d+"::"+I,G=function(d,I){return()=>s(x(d,I),"is read-only.")},f=new WeakMap,g="(pointer-is-external)",l=function(d,I,L){if(L||(L=f.get(I)),L){if(f.delete(I),Array.isArray(I.ondispose)){let B;for(;B=I.ondispose.shift();)try{B instanceof Function?B.call(I):B instanceof ee?B.dispose():typeof B=="number"&&q(B)}catch(ne){console.warn("ondispose() for",d.structName,"@",L,"threw. NOT propagating it.",ne)}}else if(I.ondispose instanceof Function)try{I.ondispose()}catch(B){console.warn("ondispose() for",d.structName,"@",L,"threw. NOT propagating it.",B)}delete I.ondispose,d.debugFlags.__flags.dealloc&&N("debug.dealloc:",I[g]?"EXTERNAL":"",d.structName,"instance:",d.structInfo.sizeof,"bytes @"+L),I[g]||q(L)}},u=d=>({configurable:!1,writable:!1,iterable:!1,value:d}),E=function(d,I,L){let B=!L;L?Object.defineProperty(I,g,u(L)):(L=p(d.structInfo.sizeof),L||s("Allocation of",d.structName,"structure failed."));try{d.debugFlags.__flags.alloc&&N("debug.alloc:",B?"":"EXTERNAL",d.structName,"instance:",d.structInfo.sizeof,"bytes @"+L),B&&a().fill(0,L,L+d.structInfo.sizeof),f.set(I,L)}catch(ne){throw l(d,I,L),ne}},w=function(){const d=this.pointer;return d?new Uint8Array(a().slice(d,d+this.structInfo.sizeof)):null},se=u(d=>M+d+Y),ue=function(d,I,L=!0){let B=d.members[I];if(!B&&(M||Y)){for(const ne of Object.values(d.members))if(ne.key===I){B=ne;break}!B&&L&&s(x(d.name,I),"is not a mapped struct member.")}return B},he=function d(I,L,B=!1){d._||(d._=ce=>ce.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const ne=ue(I.structInfo,L,!0);return B?d._(ne.signature):ne.signature},de={configurable:!1,enumerable:!1,get:function(){return f.get(this)},set:()=>s("Cannot assign the 'pointer' property of a struct.")},me=u(function(){const d=[];for(const I of Object.keys(this.structInfo.members))d.push(this.memberKey(I));return d}),ye=new TextDecoder("utf-8"),we=new TextEncoder,Oe=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Pe=function(d,I,L){return ye.decode(d.buffer instanceof Oe?d.slice(I,L):d.subarray(I,L))},Ze=function(d,I,L=!1){const B=ue(d.structInfo,I,L);return B&&B.signature.length===1&&B.signature[0]==="s"?B:!1},Me=function(d){d.signature!=="s"&&s("Invalid member type signature for C-string value:",JSON.stringify(d))},C=function(I,L){const B=ue(I.structInfo,L,!0);Me(B);const ne=I[B.key];if(!ne)return null;let ce=ne;const qe=a();for(;qe[ce]!==0;++ce);return ne===ce?"":Pe(qe,ne,ce)},H=function(d,...I){d.ondispose?Array.isArray(d.ondispose)||(d.ondispose=[d.ondispose]):d.ondispose=[],d.ondispose.push(...I)},$=function(d){const I=we.encode(d),L=p(I.length+1);L||s("Allocation error while duplicating string:",d);const B=a();return B.set(I,L),B[L+I.length]=0,L},re=function(d,I,L){const B=ue(d.structInfo,I,!0);Me(B);const ne=$(L);return d[B.key]=ne,H(d,ne),d},ee=function(I,L){arguments[2]!==u&&s("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:u(I),structInfo:u(L)})};ee.prototype=Object.create(null,{dispose:u(function(){l(this.constructor,this)}),lookupMember:u(function(d,I=!0){return ue(this.structInfo,d,I)}),memberToJsString:u(function(d){return C(this,d)}),memberIsString:u(function(d,I=!0){return Ze(this,d,I)}),memberKey:se,memberKeys:me,memberSignature:u(function(d,I=!1){return he(this,d,I)}),memoryDump:u(w),pointer:de,setMemberCString:u(function(d,I){return re(this,d,I)})}),Object.assign(ee.prototype,{addOnDispose:function(...d){return H(this,...d),this}}),Object.defineProperties(ee,{allocCString:u($),isA:u(d=>d instanceof ee),hasExternalPointer:u(d=>d instanceof ee&&!!d[g]),memberKey:se});const ie=d=>Number.isFinite(d)||d instanceof(D||Number),Q=function d(I,L,B){if(!d._){d._={getters:{},setters:{},sw:{}};const tt=["i","c","C","p","P","s","f","d","v()"];J&&tt.push("j"),tt.forEach(function(Ot){d._.getters[Ot]=X(Ot),d._.setters[Ot]=_(Ot),d._.sw[Ot]=b(Ot)});const oi=/^[ipPsjfdcC]$/,ai=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;d.sigCheck=function(Ot,li,ls,Ir){Object.prototype.hasOwnProperty.call(Ot,ls)&&s(Ot.structName,"already has a property named",ls+"."),oi.test(Ir)||ai.test(Ir)||s("Malformed signature for",x(Ot.structName,li)+":",Ir)}}const ne=I.memberKey(L);d.sigCheck(I.prototype,L,ne,B.signature),B.key=ne,B.name=L;const ce=U(B.signature),qe=x(I.prototype.structName,ne),Te=I.prototype.debugFlags.__flags,at=Object.create(null);at.configurable=!1,at.enumerable=!1,at.get=function(){Te.getter&&N("debug.getter:",d._.getters[ce],"for",O(ce),qe,"@",this.pointer,"+",B.offset,"sz",B.sizeof);let tt=new DataView(a().buffer,this.pointer+B.offset,B.sizeof)[d._.getters[ce]](0,T);return Te.getter&&N("debug.getter:",qe,"result =",tt),tt},B.readOnly?at.set=G(I.prototype.structName,ne):at.set=function(tt){if(Te.setter&&N("debug.setter:",d._.setters[ce],"for",O(ce),qe,"@",this.pointer,"+",B.offset,"sz",B.sizeof,tt),this.pointer||s("Cannot set struct property on disposed instance."),tt===null)tt=0;else for(;!ie(tt);){if(R(B.signature)&&tt instanceof ee){tt=tt.pointer||0,Te.setter&&N("debug.setter:",qe,"resolved to",tt);break}s("Invalid value for pointer-type",qe+".")}new DataView(a().buffer,this.pointer+B.offset,B.sizeof)[d._.setters[ce]](0,d._.sw[ce](tt),T)},Object.defineProperty(I.prototype,ne,at)},m=function d(I,L){arguments.length===1?(L=I,I=L.name):L.name||(L.name=I),I||s("Struct name is required.");let B=!1;Object.keys(L.members).forEach(qe=>{const Te=L.members[qe];Te.sizeof?Te.sizeof===1?Te.signature==="c"||Te.signature==="C"||s("Unexpected sizeof==1 member",x(L.name,qe),"with signature",Te.signature):(Te.sizeof%4!==0&&(console.warn("Invalid struct member description =",Te,"from",L),s(I,"member",qe,"sizeof is not aligned. sizeof="+Te.sizeof)),Te.offset%4!==0&&(console.warn("Invalid struct member description =",Te,"from",L),s(I,"member",qe,"offset is not aligned. offset="+Te.offset))):s(I,"member",qe,"is missing sizeof."),(!B||B.offset<Te.offset)&&(B=Te)}),B?L.sizeof<B.offset+B.sizeof&&s("Invalid struct config:",I,"max member offset ("+B.offset+") ","extends past end of struct (sizeof="+L.sizeof+")."):s("No member property descriptions found.");const ne=u(o.__makeDebugFlags(d.debugFlags)),ce=function qe(Te){this instanceof qe?arguments.length?((Te!==(Te|0)||Te<=0)&&s("Invalid pointer value for",I,"constructor."),E(qe,this,Te)):E(qe,this):s("The",I,"constructor may only be called via 'new'.")};return Object.defineProperties(ce,{debugFlags:ne,isA:u(qe=>qe instanceof ce),memberKey:se,memberKeys:me,methodInfoForKey:u(function(qe){}),structInfo:u(L),structName:u(I)}),ce.prototype=new ee(I,L,u),Object.defineProperties(ce.prototype,{debugFlags:ne,constructor:u(ce)}),Object.keys(L.members).forEach(qe=>Q(ce,qe,L.members[qe])),ce};return m.StructType=ee,m.config=n,m.allocCString=$,m.debugFlags||(m.debugFlags=o.__makeDebugFlags(o.debugFlags)),m},globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=(...A)=>{throw new Error(A.join(" "))};t.SQLite3Error.toss;const s=t.capi,o=t.wasm,a=t.util;if(globalThis.WhWasmUtilInstaller(o),delete globalThis.WhWasmUtilInstaller,o.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new o.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(A,T)=>A[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:A=>A[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new o.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:A=>{let T;return(F,R,U,O)=>{try{const z=o.cArgvToJs(R,U);return T||(T=o.cArgvToJs(R,O)),A(z,T)|0}catch(z){return z.resultCode||s.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:A=>A[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*","*"]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new o.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(A,T)=>A[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],o.exports.sqlite3_progress_handler&&o.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new o.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(A,T)=>A[0]}),"*"]]),o.exports.sqlite3_stmt_explain&&o.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),o.exports.sqlite3_set_authorizer&&o.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(A,T)=>A[0],callProxy:A=>(T,F,R,U,O,z)=>{try{return R=R&&o.cstrToJs(R),U=U&&o.cstrToJs(U),O=O&&o.cstrToJs(O),z=z&&o.cstrToJs(z),A(T,F,R,U,O,z)||0}catch(X){return X.resultCode||s.SQLITE_ERROR}}}),"*"]]),o.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:A=>A[0],callProxy:A=>(T,F,R,U,O)=>{A(T,F,o.cstrToJs(R),o.cstrToJs(U),O)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],o.bigIntEnabled&&o.exports.sqlite3_declare_vtab&&o.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),o.bigIntEnabled&&o.exports.sqlite3_preupdate_hook&&o.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:A=>A[0],callProxy:A=>(T,F,R,U,O,z,X)=>{A(T,F,R,o.cstrToJs(U),o.cstrToJs(O),z,X)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),o.bigIntEnabled&&o.exports.sqlite3changegroup_add&&o.exports.sqlite3session_create&&o.exports.sqlite3_preupdate_hook){const A={signature:"i(ps)",callProxy:T=>(F,R)=>{try{return T(F,o.cstrToJs(R))|0}catch(U){return U.resultCode||s.SQLITE_ERROR}}};o.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new o.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new o.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new o.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...A}),new o.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new o.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...A}),new o.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new o.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...A}),new o.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new o.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new o.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...A}),new o.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new o.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new o.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new o.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new o.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new o.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new o.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new o.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new o.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new o.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new o.xWrap.FuncPtrAdapter({name:"xFilter",...A,contextKey:(T,F)=>T[0]}),"*"]])}o.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],t.StructBinder=globalThis.Jaccwabyt({heap:o.heap8u,alloc:o.alloc,dealloc:o.dealloc,bigIntEnabled:o.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const A=o.xWrap.argAdapter("string");o.xWrap.argAdapter("string:flexible",O=>A(a.flexibleString(O))),o.xWrap.argAdapter("string:static",(function(O){return o.isPtr(O)?O:(O=""+O,this[O]||(this[O]=o.allocCString(O)))}).bind(Object.create(null)));const T=o.xWrap.argAdapter("*"),F=function(){};o.xWrap.argAdapter("sqlite3_filename",T)("sqlite3_context*",T)("sqlite3_value*",T)("void*",T)("sqlite3_changegroup*",T)("sqlite3_changeset_iter*",T)("sqlite3_session*",T)("sqlite3_stmt*",O=>{var z;return T(O instanceof(((z=t==null?void 0:t.oo1)==null?void 0:z.Stmt)||F)?O.pointer:O)})("sqlite3*",O=>{var z;return T(O instanceof(((z=t==null?void 0:t.oo1)==null?void 0:z.DB)||F)?O.pointer:O)})("sqlite3_vfs*",O=>typeof O=="string"?s.sqlite3_vfs_find(O)||t.SQLite3Error.toss(s.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",O):T(O instanceof(s.sqlite3_vfs||F)?O.pointer:O)),o.exports.sqlite3_declare_vtab&&o.xWrap.argAdapter("sqlite3_index_info*",O=>T(O instanceof(s.sqlite3_index_info||F)?O.pointer:O))("sqlite3_module*",O=>T(O instanceof(s.sqlite3_module||F)?O.pointer:O));const R=o.xWrap.resultAdapter("*");o.xWrap.resultAdapter("sqlite3*",R)("sqlite3_context*",R)("sqlite3_stmt*",R)("sqlite3_value*",R)("sqlite3_vfs*",R)("void*",R),o.exports.sqlite3_step.length===0&&(o.xWrap.doArgcCheck=!1,t.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const O of o.bindingSignatures)s[O[0]]=o.xWrap.apply(null,O);for(const O of o.bindingSignatures.wasmInternal)a[O[0]]=o.xWrap.apply(null,O);const U=function(O){return()=>n(O+"() is unavailable due to lack","of BigInt support in this build.")};for(const O of o.bindingSignatures.int64)s[O[0]]=o.bigIntEnabled?o.xWrap.apply(null,O):U(O[0]);if(delete o.bindingSignatures,o.exports.sqlite3__wasm_db_error){const O=o.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");a.sqlite3__wasm_db_error=function(z,X,_){return X instanceof t.WasmAllocError?(X=s.SQLITE_NOMEM,_=0):X instanceof Error&&(_=_||""+X,X=X.resultCode||s.SQLITE_ERROR),z?O(z,X,_):X}}else a.sqlite3__wasm_db_error=function(O,z,X){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),z}}{const A=o.xCall("sqlite3__wasm_enum_json");A||n("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),o.ctype=JSON.parse(o.cstrToJs(A));const T=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];o.bigIntEnabled&&T.push("serialize","session","vtab");for(const U of T)for(const O of Object.entries(o.ctype[U]))s[O[0]]=O[1];o.functionEntry(s.SQLITE_WASM_DEALLOC)||n("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+s.SQLITE_WASM_DEALLOC+").");const F=Object.create(null);for(const U of["resultCodes"])for(const O of Object.entries(o.ctype[U]))F[O[1]]=O[0];s.sqlite3_js_rc_str=U=>F[U];const R=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!a.isUIThread(),sqlite3_index_info:!o.bigIntEnabled,sqlite3_index_constraint:!o.bigIntEnabled,sqlite3_index_orderby:!o.bigIntEnabled,sqlite3_index_constraint_usage:!o.bigIntEnabled});for(const U of o.ctype.structs)R[U.name]||(s[U.name]=t.StructBinder(U));if(s.sqlite3_index_info){for(const U of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])s.sqlite3_index_info[U]=s[U],delete s[U];s.sqlite3_vtab_config=o.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const p=(A,T,F)=>a.sqlite3__wasm_db_error(A,s.SQLITE_MISUSE,T+"() requires "+F+" argument"+(F===1?"":"s")+"."),q=A=>a.sqlite3__wasm_db_error(A,s.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),N=A=>o.xWrap.argAdapter("sqlite3*")(A),M=A=>o.isPtr(A)?o.cstrToJs(A):A,Y=(function(A,T){A=N(A);let F=this.dbMap.get(A);if(T)!F&&T>0&&this.dbMap.set(A,F=Object.create(null));else return this.dbMap.delete(A),F;return F}).bind(Object.assign(Object.create(null),{dbMap:new Map}));Y.addCollation=function(A,T){const F=Y(A,1);F.collation||(F.collation=new Set),F.collation.add(M(T).toLowerCase())},Y._addUDF=function(A,T,F,R){T=M(T).toLowerCase();let U=R.get(T);U||R.set(T,U=new Set),U.add(F<0?-1:F)},Y.addFunction=function(A,T,F){const R=Y(A,1);R.udf||(R.udf=new Map),this._addUDF(A,T,F,R.udf)},o.exports.sqlite3_create_window_function&&(Y.addWindowFunc=function(A,T,F){const R=Y(A,1);R.wudf||(R.wudf=new Map),this._addUDF(A,T,F,R.wudf)}),Y.cleanup=function(A){A=N(A);const T=[A];for(const U of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const O=o.exports[U];if(O){T.length=O.length;try{s[U](...T)}catch(z){t.config.warn("close-time call of",U+"(",T,") threw:",z)}}}const F=Y(A,0);if(!F)return;if(F.collation){for(const U of F.collation)try{s.sqlite3_create_collation_v2(A,U,s.SQLITE_UTF8,0,0,0)}catch{}delete F.collation}let R;for(R=0;R<2;++R){const U=R?F.wudf:F.udf;if(!U)continue;const O=R?s.sqlite3_create_window_function:s.sqlite3_create_function_v2;for(const z of U){const X=z[0],_=z[1],b=[A,X,0,s.SQLITE_UTF8,0,0,0,0,0];R&&b.push(0);for(const x of _)try{b[2]=x,O.apply(null,b)}catch{}_.clear()}U.clear()}delete F.udf,delete F.wudf};{const A=o.xWrap("sqlite3_close_v2","int","sqlite3*");s.sqlite3_close_v2=function(T){if(arguments.length!==1)return p(T,"sqlite3_close_v2",1);if(T)try{Y.cleanup(T)}catch{}return A(T)}}if(s.sqlite3session_create){const A=o.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);s.sqlite3session_delete=function(T){if(arguments.length!==1)return p(pDb,"sqlite3session_delete",1);T&&s.sqlite3session_table_filter(T,0,0),A(T)}}{const A=(F,R)=>"argv["+R+"]:"+F[0]+":"+o.cstrToJs(F[1]).toLowerCase(),T=o.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new o.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:A}),new o.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:A})]);s.sqlite3_create_collation_v2=function(F,R,U,O,z,X){if(arguments.length!==6)return p(F,"sqlite3_create_collation_v2",6);if((U&15)===0)U|=s.SQLITE_UTF8;else if(s.SQLITE_UTF8!==(U&15))return q(F);try{const _=T(F,R,U,O,z,X);return _===0&&z instanceof Function&&Y.addCollation(F,R),_}catch(_){return a.sqlite3__wasm_db_error(F,_)}},s.sqlite3_create_collation=(F,R,U,O,z)=>arguments.length===5?s.sqlite3_create_collation_v2(F,R,U,O,z,0):p(F,"sqlite3_create_collation",5)}{const A=function(U,O){return U[0]+":"+(U[2]<0?-1:U[2])+":"+O+":"+o.cstrToJs(U[1]).toLowerCase()},T=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:A,callProxy:U=>(O,z,X)=>{try{U(O,...s.sqlite3_values_to_js(z,X))}catch(_){s.sqlite3_result_error_js(O,_)}}},xFinalAndValue:{signature:"v(p)",contextKey:A,callProxy:U=>O=>{try{s.sqlite3_result_js(O,U(O))}catch(z){s.sqlite3_result_error_js(O,z)}}},xFunc:{signature:"v(pip)",contextKey:A,callProxy:U=>(O,z,X)=>{try{s.sqlite3_result_js(O,U(O,...s.sqlite3_values_to_js(z,X)))}catch(_){s.sqlite3_result_error_js(O,_)}}},xDestroy:{signature:"v(p)",contextKey:A,callProxy:U=>O=>{try{U(O)}catch(z){console.error("UDF xDestroy method threw:",z)}}}}),F=o.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new o.xWrap.FuncPtrAdapter({name:"xFunc",...T.xFunc}),new o.xWrap.FuncPtrAdapter({name:"xStep",...T.xInverseAndStep}),new o.xWrap.FuncPtrAdapter({name:"xFinal",...T.xFinalAndValue}),new o.xWrap.FuncPtrAdapter({name:"xDestroy",...T.xDestroy})]),R=o.exports.sqlite3_create_window_function?o.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new o.xWrap.FuncPtrAdapter({name:"xStep",...T.xInverseAndStep}),new o.xWrap.FuncPtrAdapter({name:"xFinal",...T.xFinalAndValue}),new o.xWrap.FuncPtrAdapter({name:"xValue",...T.xFinalAndValue}),new o.xWrap.FuncPtrAdapter({name:"xInverse",...T.xInverseAndStep}),new o.xWrap.FuncPtrAdapter({name:"xDestroy",...T.xDestroy})]):void 0;s.sqlite3_create_function_v2=function U(O,z,X,_,b,x,G,f,g){if(U.length!==arguments.length)return p(O,"sqlite3_create_function_v2",U.length);if((_&15)===0)_|=s.SQLITE_UTF8;else if(s.SQLITE_UTF8!==(_&15))return q(O);try{const l=F(O,z,X,_,b,x,G,f,g);return l===0&&(x instanceof Function||G instanceof Function||f instanceof Function||g instanceof Function)&&Y.addFunction(O,z,X),l}catch(l){return console.error("sqlite3_create_function_v2() setup threw:",l),a.sqlite3__wasm_db_error(O,l,"Creation of UDF threw: "+l)}},s.sqlite3_create_function=function U(O,z,X,_,b,x,G,f){return U.length===arguments.length?s.sqlite3_create_function_v2(O,z,X,_,b,x,G,f,0):p(O,"sqlite3_create_function",U.length)},R?s.sqlite3_create_window_function=function U(O,z,X,_,b,x,G,f,g,l){if(U.length!==arguments.length)return p(O,"sqlite3_create_window_function",U.length);if((_&15)===0)_|=s.SQLITE_UTF8;else if(s.SQLITE_UTF8!==(_&15))return q(O);try{const u=R(O,z,X,_,b,x,G,f,g,l);return u===0&&(x instanceof Function||G instanceof Function||f instanceof Function||g instanceof Function||l instanceof Function)&&Y.addWindowFunc(O,z,X),u}catch(u){return console.error("sqlite3_create_window_function() setup threw:",u),a.sqlite3__wasm_db_error(O,u,"Creation of UDF threw: "+u)}}:delete s.sqlite3_create_window_function,s.sqlite3_create_function_v2.udfSetResult=s.sqlite3_create_function.udfSetResult=s.sqlite3_result_js,s.sqlite3_create_window_function&&(s.sqlite3_create_window_function.udfSetResult=s.sqlite3_result_js),s.sqlite3_create_function_v2.udfConvertArgs=s.sqlite3_create_function.udfConvertArgs=s.sqlite3_values_to_js,s.sqlite3_create_window_function&&(s.sqlite3_create_window_function.udfConvertArgs=s.sqlite3_values_to_js),s.sqlite3_create_function_v2.udfSetError=s.sqlite3_create_function.udfSetError=s.sqlite3_result_error_js,s.sqlite3_create_window_function&&(s.sqlite3_create_window_function.udfSetError=s.sqlite3_result_error_js)}{const A=(F,R)=>(typeof F=="string"?R=-1:a.isSQLableTypedArray(F)?(R=F.byteLength,F=a.typedArrayToString(F instanceof ArrayBuffer?new Uint8Array(F):F)):Array.isArray(F)&&(F=F.join(""),R=-1),[F,R]),T={basic:o.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:o.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};s.sqlite3_prepare_v3=function F(R,U,O,z,X,_){if(F.length!==arguments.length)return p(R,"sqlite3_prepare_v3",F.length);const[b,x]=A(U,O);switch(typeof b){case"string":return T.basic(R,b,x,z,X,null);case"number":return T.full(R,b,x,z,X,_);default:return a.sqlite3__wasm_db_error(R,s.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},s.sqlite3_prepare_v2=function F(R,U,O,z,X){return F.length===arguments.length?s.sqlite3_prepare_v3(R,U,O,0,z,X):p(R,"sqlite3_prepare_v2",F.length)}}{const A=o.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),T=o.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);s.sqlite3_bind_text=function F(R,U,O,z,X){if(F.length!==arguments.length)return p(s.sqlite3_db_handle(R),"sqlite3_bind_text",F.length);if(o.isPtr(O)||O===null)return A(R,U,O,z,X);O instanceof ArrayBuffer?O=new Uint8Array(O):Array.isArray(pMem)&&(O=pMem.join(""));let _,b;try{if(a.isSQLableTypedArray(O))_=o.allocFromTypedArray(O),b=O.byteLength;else if(typeof O=="string")[_,b]=o.allocCString(O);else return a.sqlite3__wasm_db_error(s.sqlite3_db_handle(R),s.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return A(R,U,_,b,s.SQLITE_WASM_DEALLOC)}catch(x){return o.dealloc(_),a.sqlite3__wasm_db_error(s.sqlite3_db_handle(R),x)}},s.sqlite3_bind_blob=function F(R,U,O,z,X){if(F.length!==arguments.length)return p(s.sqlite3_db_handle(R),"sqlite3_bind_blob",F.length);if(o.isPtr(O)||O===null)return T(R,U,O,z,X);O instanceof ArrayBuffer?O=new Uint8Array(O):Array.isArray(O)&&(O=O.join(""));let _,b;try{if(a.isBindableTypedArray(O))_=o.allocFromTypedArray(O),b=z>=0?z:O.byteLength;else if(typeof O=="string")[_,b]=o.allocCString(O);else return a.sqlite3__wasm_db_error(s.sqlite3_db_handle(R),s.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return T(R,U,_,b,s.SQLITE_WASM_DEALLOC)}catch(x){return o.dealloc(_),a.sqlite3__wasm_db_error(s.sqlite3_db_handle(R),x)}}}s.sqlite3_config=function(A,...T){if(arguments.length<2)return s.SQLITE_MISUSE;switch(A){case s.SQLITE_CONFIG_COVERING_INDEX_SCAN:case s.SQLITE_CONFIG_MEMSTATUS:case s.SQLITE_CONFIG_SMALL_MALLOC:case s.SQLITE_CONFIG_SORTERREF_SIZE:case s.SQLITE_CONFIG_STMTJRNL_SPILL:case s.SQLITE_CONFIG_URI:return o.exports.sqlite3__wasm_config_i(A,T[0]);case s.SQLITE_CONFIG_LOOKASIDE:return o.exports.sqlite3__wasm_config_ii(A,T[0],T[1]);case s.SQLITE_CONFIG_MEMDB_MAXSIZE:return o.exports.sqlite3__wasm_config_j(A,T[0]);case s.SQLITE_CONFIG_GETMALLOC:case s.SQLITE_CONFIG_GETMUTEX:case s.SQLITE_CONFIG_GETPCACHE2:case s.SQLITE_CONFIG_GETPCACHE:case s.SQLITE_CONFIG_HEAP:case s.SQLITE_CONFIG_LOG:case s.SQLITE_CONFIG_MALLOC:case s.SQLITE_CONFIG_MMAP_SIZE:case s.SQLITE_CONFIG_MULTITHREAD:case s.SQLITE_CONFIG_MUTEX:case s.SQLITE_CONFIG_PAGECACHE:case s.SQLITE_CONFIG_PCACHE2:case s.SQLITE_CONFIG_PCACHE:case s.SQLITE_CONFIG_PCACHE_HDRSZ:case s.SQLITE_CONFIG_PMASZ:case s.SQLITE_CONFIG_SERIALIZED:case s.SQLITE_CONFIG_SINGLETHREAD:case s.SQLITE_CONFIG_SQLLOG:case s.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return s.SQLITE_NOTFOUND}};{const A=new Set;s.sqlite3_auto_extension=function(T){if(T instanceof Function)T=o.installFunction("i(ppp)",T);else if(arguments.length!==1||!o.isPtr(T))return s.SQLITE_MISUSE;const F=o.exports.sqlite3_auto_extension(T);return T!==arguments[0]&&(F===0?A.add(T):o.uninstallFunction(T)),F},s.sqlite3_cancel_auto_extension=function(T){return!T||arguments.length!==1||!o.isPtr(T)?0:o.exports.sqlite3_cancel_auto_extension(T)},s.sqlite3_reset_auto_extension=function(){o.exports.sqlite3_reset_auto_extension();for(const T of A)o.uninstallFunction(T);A.clear()}}const J=s.sqlite3_vfs_find("kvvfs");if(J)if(a.isUIThread()){const A=new s.sqlite3_kvvfs_methods(o.exports.sqlite3__wasm_kvvfs_methods());delete s.sqlite3_kvvfs_methods;const T=o.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,F=o.pstack,R=O=>o.peek(O)===115?sessionStorage:localStorage,U={xRead:(O,z,X,_)=>{const b=F.pointer,x=o.scopedAllocPush();try{const G=T(O,z);if(!G)return-3;const f=o.cstrToJs(G),g=R(O).getItem(f);if(!g)return-1;const l=g.length;if(_<=0)return l;if(_===1)return o.poke(X,0),l;const u=o.scopedAllocCString(g);return _>l+1&&(_=l+1),o.heap8u().copyWithin(X,u,u+_-1),o.poke(X+_-1,0),_-1}catch(G){return console.error("kvstorageRead()",G),-2}finally{F.restore(b),o.scopedAllocPop(x)}},xWrite:(O,z,X)=>{const _=F.pointer;try{const b=T(O,z);if(!b)return 1;const x=o.cstrToJs(b);return R(O).setItem(x,o.cstrToJs(X)),0}catch(b){return console.error("kvstorageWrite()",b),s.SQLITE_IOERR}finally{F.restore(_)}},xDelete:(O,z)=>{const X=F.pointer;try{const _=T(O,z);return _?(R(O).removeItem(o.cstrToJs(_)),0):1}catch(_){return console.error("kvstorageDelete()",_),s.SQLITE_IOERR}finally{F.restore(X)}}};for(const O of Object.keys(U))A[A.memberKey(O)]=o.installFunction(A.memberSignature(O),U[O])}else s.sqlite3_vfs_unregister(J);o.xWrap.FuncPtrAdapter.warnOnUse=!0;const D=t.StructBinder,P=function A(T,F,R,U=A.installMethodArgcCheck){if(T instanceof D.StructType?!(R instanceof Function)&&!o.isPtr(R)&&n("Usage errror: expecting a Function or WASM pointer to one."):n("Usage error: target object is-not-a StructType."),arguments.length===1)return(_,b)=>A(T,_,b,U);A.argcProxy||(A.argcProxy=function(_,b,x,G){return function(...f){return x.length!==arguments.length&&n("Argument mismatch for",_.structInfo.name+"::"+b+": Native signature is:",G),x.apply(this,f)}},A.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((_,b)=>{if(typeof _=="number")try{o.uninstallFunction(_)}catch{}}),delete this.ondispose.__removeFuncList)});const O=T.memberSignature(F);O.length<2&&n("Member",F,"does not have a function pointer signature:",O);const z=T.memberKey(F),X=U&&!o.isPtr(R)?A.argcProxy(T,z,R,O):R;if(o.isPtr(X))X&&!o.functionEntry(X)&&n("Pointer",X,"is not a WASM function table entry."),T[z]=X;else{const _=o.installFunction(X,T.memberSignature(F,!0));T[z]=_,(!T.ondispose||!T.ondispose.__removeFuncList)&&(T.addOnDispose("ondispose.__removeFuncList handler",A.removeFuncList),T.ondispose.__removeFuncList=[]),T.ondispose.__removeFuncList.push(z,_)}return(_,b)=>A(T,_,b,U)};P.installMethodArgcCheck=!1;const j=function(A,T,F=P.installMethodArgcCheck){const R=new Map;for(const U of Object.keys(T)){const O=T[U],z=R.get(O);if(z){const X=A.memberKey(U);A[X]=A[A.memberKey(z)]}else P(A,U,O,F),R.set(O,U)}return A};D.StructType.prototype.installMethod=function(T,F,R=P.installMethodArgcCheck){return arguments.length<3&&T&&typeof T=="object"?j(this,...arguments):P(this,...arguments)},D.StructType.prototype.installMethods=function(A,T=P.installMethodArgcCheck){return j(this,A,T)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){t.version={libVersion:"3.49.2",libVersionNumber:3049002,sourceId:"2025-05-07 10:39:52 17144570b0d96ae63cd6f3edca39e27ebd74925252bbaf6723bcb2f6b4861fb1",downloadVersion:3490200}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=(...f)=>{throw new t.SQLite3Error(...f)},s=t.capi,o=t.wasm,a=t.util,p=new WeakMap,q=new WeakMap,N=(f,g,l)=>{const u=Object.getOwnPropertyDescriptor(f,g);return u?u.value:l},M=function(f,g){return g&&(f instanceof P&&(f=f.pointer),n(g,"sqlite3 result code",g+":",f?s.sqlite3_errmsg(f):s.sqlite3_errstr(g))),arguments[0]},Y=o.installFunction("i(ippp)",(function(f,g,l,u){s.SQLITE_TRACE_STMT===f&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+g+":",o.cstrToJs(u))}).bind({counter:0})),J=Object.create(null),D=function f(...g){if(!f._name2vfs){f._name2vfs=Object.create(null);const me=typeof importScripts=="function"?ye=>n("The VFS for",ye,"is only available in the main window thread."):!1;f._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:me||(()=>"local")},f._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:me||(()=>"session")}}const l=f.normalizeArgs(...g);let u=l.filename,E=l.vfs,w=l.flags;(typeof u!="string"&&typeof u!="number"||typeof w!="string"||E&&typeof E!="string"&&typeof E!="number")&&(t.config.error("Invalid DB ctor args",l,arguments),n("Invalid arguments for DB constructor."));let V=typeof u=="number"?o.cstrToJs(u):u;const se=f._name2vfs[V];se&&(E=se.vfs,u=V=se.filename(V));let ue,he=0;w.indexOf("c")>=0&&(he|=s.SQLITE_OPEN_CREATE|s.SQLITE_OPEN_READWRITE),w.indexOf("w")>=0&&(he|=s.SQLITE_OPEN_READWRITE),he===0&&(he|=s.SQLITE_OPEN_READONLY),he|=s.SQLITE_OPEN_EXRESCODE;const de=o.pstack.pointer;try{const me=o.pstack.allocPtr();let ye=s.sqlite3_open_v2(u,me,he,E||0);ue=o.peekPtr(me),M(ue,ye),s.sqlite3_extended_result_codes(ue,1),w.indexOf("t")>=0&&s.sqlite3_trace_v2(ue,s.SQLITE_TRACE_STMT,Y,ue)}catch(me){throw ue&&s.sqlite3_close_v2(ue),me}finally{o.pstack.restore(de)}this.filename=V,p.set(this,ue),q.set(this,Object.create(null));try{const me=s.sqlite3_js_db_vfs(ue)||n("Internal error: cannot get VFS for new db handle."),ye=J[me];ye&&(ye instanceof Function?ye(this,t):M(ue,s.sqlite3_exec(ue,ye,0,0,0)))}catch(me){throw this.close(),me}};D.setVfsPostOpenCallback=function(f,g){g instanceof Function||n("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),J[f]=g},D.normalizeArgs=function(f=":memory:",g="c",l=null){const u={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(u,arguments[0]),u.flags===void 0&&(u.flags="c"),u.vfs===void 0&&(u.vfs=null),u.filename===void 0&&(u.filename=":memory:")):(u.filename=f,u.flags=g,u.vfs=l),u};const P=function(...f){D.apply(this,f)};P.dbCtorHelper=D;const j={null:1,number:2,string:3,boolean:4,blob:5};j.undefined==j.null,o.bigIntEnabled&&(j.bigint=j.number);const A=function(){j!==arguments[2]&&n(s.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],p.set(this,arguments[1]),this.parameterCount=s.sqlite3_bind_parameter_count(this.pointer)},T=function(f){return f.pointer||n("DB has been closed."),f},F=function(f,g){return(g!==(g|0)||g<0||g>=f.columnCount)&&n("Column index",g,"is out of range."),f},R=function(f,g){const l=Object.create(null);switch(l.opt=Object.create(null),g.length){case 1:typeof g[0]=="string"||a.isSQLableTypedArray(g[0])||Array.isArray(g[0])?l.sql=g[0]:g[0]&&typeof g[0]=="object"&&(l.opt=g[0],l.sql=l.opt.sql);break;case 2:l.sql=g[0],l.opt=g[1];break;default:n("Invalid argument count for exec().")}l.sql=a.flexibleString(l.sql),typeof l.sql!="string"&&n("Missing SQL argument or unsupported SQL value type.");const u=l.opt;switch(u.returnValue){case"resultRows":u.resultRows||(u.resultRows=[]),l.returnVal=()=>u.resultRows;break;case"saveSql":u.saveSql||(u.saveSql=[]),l.returnVal=()=>u.saveSql;break;case void 0:case"this":l.returnVal=()=>f;break;default:n("Invalid returnValue value:",u.returnValue)}if(!u.callback&&!u.returnValue&&u.rowMode!==void 0&&(u.resultRows||(u.resultRows=[]),l.returnVal=()=>u.resultRows),u.callback||u.resultRows)switch(u.rowMode===void 0?"array":u.rowMode){case"object":l.cbArg=(E,w)=>{w.columnNames||(w.columnNames=E.getColumnNames([]));const V=E.get([]),se=Object.create(null);for(const ue in w.columnNames)se[w.columnNames[ue]]=V[ue];return se};break;case"array":l.cbArg=E=>E.get([]);break;case"stmt":Array.isArray(u.resultRows)&&n("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),l.cbArg=E=>E;break;default:if(a.isInt32(u.rowMode)){l.cbArg=E=>E.get(u.rowMode);break}else if(typeof u.rowMode=="string"&&u.rowMode.length>1&&u.rowMode[0]==="$"){const E=u.rowMode.substr(1);l.cbArg=w=>{const V=w.get(Object.create(null))[E];return V===void 0?n(s.SQLITE_NOTFOUND,"exec(): unknown result column:",E):V};break}n("Invalid rowMode:",u.rowMode)}return l},U=(f,g,l,...u)=>{const E=f.prepare(g);try{const w=E.bind(l).step()?E.get(...u):void 0;return E.reset(),w}finally{E.finalize()}},O=(f,g,l,u)=>f.exec({sql:g,bind:l,rowMode:u,returnValue:"resultRows"});P.checkRc=(f,g)=>M(f,g),P.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return T(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const f=this.pointer;if(Object.keys(q.get(this)).forEach((g,l)=>{if(l&&l.pointer)try{l.finalize()}catch{}}),p.delete(this),q.delete(this),s.sqlite3_close_v2(f),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(f=!1,g=!1){const l=T(this).pointer;return f?g?s.sqlite3_total_changes64(l):s.sqlite3_total_changes(l):g?s.sqlite3_changes64(l):s.sqlite3_changes(l)},dbFilename:function(f="main"){return s.sqlite3_db_filename(T(this).pointer,f)},dbName:function(f=0){return s.sqlite3_db_name(T(this).pointer,f)},dbVfsName:function(f=0){let g;const l=s.sqlite3_js_db_vfs(T(this).pointer,f);if(l){const u=new s.sqlite3_vfs(l);try{g=o.cstrToJs(u.$zName)}finally{u.dispose()}}return g},prepare:function(f){T(this);const g=o.pstack.pointer;let l,u;try{l=o.pstack.alloc(8),P.checkRc(this,s.sqlite3_prepare_v2(this.pointer,f,-1,l,null)),u=o.peekPtr(l)}finally{o.pstack.restore(g)}u||n("Cannot prepare empty SQL.");const E=new A(this,u,j);return q.get(this)[u]=E,E},exec:function(){T(this);const f=R(this,arguments);if(!f.sql)return n("exec() requires an SQL string.");const g=f.opt,l=g.callback,u=Array.isArray(g.resultRows)?g.resultRows:void 0;let E,w=g.bind,V=!!(f.cbArg||g.columnNames||u);const se=o.scopedAllocPush(),ue=Array.isArray(g.saveSql)?g.saveSql:void 0;try{const he=a.isSQLableTypedArray(f.sql);let de=he?f.sql.byteLength:o.jstrlen(f.sql);const me=o.scopedAlloc(2*o.ptrSizeof+(de+1)),ye=me+o.ptrSizeof;let we=ye+o.ptrSizeof;const Oe=we+de;for(he?o.heap8().set(f.sql,we):o.jstrcpy(f.sql,o.heap8(),we,de,!1),o.poke(we+de,0);we&&o.peek(we,"i8");){o.pokePtr([me,ye],0),P.checkRc(this,s.sqlite3_prepare_v3(this.pointer,we,de,0,me,ye));const Pe=o.peekPtr(me);if(we=o.peekPtr(ye),de=Oe-we,!!Pe){if(ue&&ue.push(s.sqlite3_sql(Pe).trim()),E=new A(this,Pe,j),w&&E.parameterCount&&(E.bind(w),w=null),V&&E.columnCount){let Ze=Array.isArray(g.columnNames)?0:1;if(V=!1,f.cbArg||u){const Me=Object.create(null);for(;E.step();E._lockedByExec=!1){Ze++===0&&E.getColumnNames(Me.columnNames=g.columnNames||[]),E._lockedByExec=!0;const C=f.cbArg(E,Me);if(u&&u.push(C),l&&l.call(g,C,E)===!1)break}E._lockedByExec=!1}Ze===0&&E.getColumnNames(g.columnNames)}else E.step();E.reset().finalize(),E=null}}}finally{o.scopedAllocPop(se),E&&(delete E._lockedByExec,E.finalize())}return f.returnVal()},createFunction:function(g,l,u){const E=Me=>Me instanceof Function;switch(arguments.length){case 1:u=g,g=u.name,l=u.xFunc||0;break;case 2:E(l)||(u=l,l=u.xFunc||0);break}u||(u={}),typeof g!="string"&&n("Invalid arguments: missing function name.");let w=u.xStep||0,V=u.xFinal||0;const se=u.xValue||0,ue=u.xInverse||0;let he;E(l)?(he=!1,(E(w)||E(V))&&n("Ambiguous arguments: scalar or aggregate?"),w=V=null):E(w)?(E(V)||n("Missing xFinal() callback for aggregate or window UDF."),l=null):E(V)?n("Missing xStep() callback for aggregate or window UDF."):n("Missing function-type properties."),he===!1?(E(se)||E(ue))&&n("xValue and xInverse are not permitted for non-window UDFs."):E(se)?(E(ue)||n("xInverse must be provided if xValue is."),he=!0):E(ue)&&n("xValue must be provided if xInverse is.");const de=u.pApp;de!=null&&(typeof de!="number"||!a.isInt32(de))&&n("Invalid value for pApp property. Must be a legal WASM pointer value.");const me=u.xDestroy||0;me&&!E(me)&&n("xDestroy property must be a function.");let ye=0;N(u,"deterministic")&&(ye|=s.SQLITE_DETERMINISTIC),N(u,"directOnly")&&(ye|=s.SQLITE_DIRECTONLY),N(u,"innocuous")&&(ye|=s.SQLITE_INNOCUOUS),g=g.toLowerCase();const we=l||w,Oe=N(u,"arity"),Pe=typeof Oe=="number"?Oe:we.length?we.length-1:0;let Ze;return he?Ze=s.sqlite3_create_window_function(this.pointer,g,Pe,s.SQLITE_UTF8|ye,de||0,w,V,se,ue,me):Ze=s.sqlite3_create_function_v2(this.pointer,g,Pe,s.SQLITE_UTF8|ye,de||0,l,w,V,me),P.checkRc(this,Ze),this},selectValue:function(f,g,l){return U(this,f,g,0,l)},selectValues:function(f,g,l){const u=this.prepare(f),E=[];try{for(u.bind(g);u.step();)E.push(u.get(0,l));u.reset()}finally{u.finalize()}return E},selectArray:function(f,g){return U(this,f,g,[])},selectObject:function(f,g){return U(this,f,g,{})},selectArrays:function(f,g){return O(this,f,g,"array")},selectObjects:function(f,g){return O(this,f,g,"object")},openStatementCount:function(){return this.pointer?Object.keys(q.get(this)).length:0},transaction:function(f){let g="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&n(s.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),g+=" "+arguments[0],f=arguments[1]),T(this).exec(g);try{const l=f(this);return this.exec("COMMIT"),l}catch(l){throw this.exec("ROLLBACK"),l}},savepoint:function(f){T(this).exec("SAVEPOINT oo1");try{const g=f(this);return this.exec("RELEASE oo1"),g}catch(g){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),g}},checkRc:function(f){return M(this,f)}};const z=function(f){return f.pointer||n("Stmt has been closed."),f},X=function(f){let g=j[f==null?"null":typeof f];switch(g){case j.boolean:case j.null:case j.number:case j.string:return g;case j.bigint:if(o.bigIntEnabled)return g;default:return a.isBindableTypedArray(f)?j.blob:void 0}},_=function(f){return X(f)||n("Unsupported bind() argument type:",typeof f)},b=function(f,g){const l=typeof g=="number"?g:s.sqlite3_bind_parameter_index(f.pointer,g);return l===0||!a.isInt32(l)?n("Invalid bind() parameter name: "+g):(l<1||l>f.parameterCount)&&n("Bind index",g,"is out of range."),l},x=function(f,g){return f._lockedByExec&&n("Operation is illegal when statement is locked:",g),f},G=function f(g,l,u,E){x(z(g),"bind()"),f._||(f._tooBigInt=V=>n("BigInt value is too big to store without precision loss:",V),f._={string:function(V,se,ue,he){const[de,me]=o.allocCString(ue,!0);return(he?s.sqlite3_bind_blob:s.sqlite3_bind_text)(V.pointer,se,de,me,s.SQLITE_WASM_DEALLOC)}}),_(E),l=b(g,l);let w=0;switch(E==null?j.null:u){case j.null:w=s.sqlite3_bind_null(g.pointer,l);break;case j.string:w=f._.string(g,l,E,!1);break;case j.number:{let V;a.isInt32(E)?V=s.sqlite3_bind_int:typeof E=="bigint"?a.bigIntFits64(E)?o.bigIntEnabled?V=s.sqlite3_bind_int64:a.bigIntFitsDouble(E)?(E=Number(E),V=s.sqlite3_bind_double):f._tooBigInt(E):f._tooBigInt(E):(E=Number(E),o.bigIntEnabled&&Number.isInteger(E)?V=s.sqlite3_bind_int64:V=s.sqlite3_bind_double),w=V(g.pointer,l,E);break}case j.boolean:w=s.sqlite3_bind_int(g.pointer,l,E?1:0);break;case j.blob:{if(typeof E=="string"){w=f._.string(g,l,E,!0);break}else E instanceof ArrayBuffer?E=new Uint8Array(E):a.isBindableTypedArray(E)||n("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const V=o.alloc(E.byteLength||1);o.heap8().set(E.byteLength?E:[0],V),w=s.sqlite3_bind_blob(g.pointer,l,V,E.byteLength,s.SQLITE_WASM_DEALLOC);break}default:t.config.warn("Unsupported bind() argument type:",E),n("Unsupported bind() argument type: "+typeof E)}return w&&P.checkRc(g.db.pointer,w),g._mayGet=!1,g};A.prototype={finalize:function(){if(this.pointer){x(this,"finalize()");const f=s.sqlite3_finalize(this.pointer);return delete q.get(this.db)[this.pointer],p.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,f}},clearBindings:function(){return x(z(this),"clearBindings()"),s.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(f){x(this,"reset()"),f&&this.clearBindings();const g=s.sqlite3_reset(z(this).pointer);return this._mayGet=!1,M(this.db,g),this},bind:function(){z(this);let f,g;switch(arguments.length){case 1:f=1,g=arguments[0];break;case 2:f=arguments[0],g=arguments[1];break;default:n("Invalid bind() arguments.")}return g===void 0?this:(this.parameterCount||n("This statement has no bindable parameters."),this._mayGet=!1,g===null?G(this,f,j.null,g):Array.isArray(g)?(arguments.length!==1&&n("When binding an array, an index argument is not permitted."),g.forEach((l,u)=>G(this,u+1,_(l),l)),this):(g instanceof ArrayBuffer&&(g=new Uint8Array(g)),typeof g=="object"&&!a.isBindableTypedArray(g)?(arguments.length!==1&&n("When binding an object, an index argument is not permitted."),Object.keys(g).forEach(l=>G(this,l,_(g[l]),g[l])),this):G(this,f,_(g),g)))},bindAsBlob:function(f,g){z(this),arguments.length===1&&(g=f,f=1);const l=_(g);return j.string!==l&&j.blob!==l&&j.null!==l&&n("Invalid value type for bindAsBlob()"),G(this,f,j.blob,g)},step:function(){x(this,"step()");const f=s.sqlite3_step(z(this).pointer);switch(f){case s.SQLITE_DONE:return this._mayGet=!1;case s.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,t.config.warn("sqlite3_step() rc=",f,s.sqlite3_js_rc_str(f),"SQL =",s.sqlite3_sql(this.pointer)),P.checkRc(this.db.pointer,f)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const f=this.step();return this.reset(),f}finally{try{this.finalize()}catch{}}},get:function(f,g){if(z(this)._mayGet||n("Stmt.step() has not (recently) returned true."),Array.isArray(f)){let l=0;const u=this.columnCount;for(;l<u;)f[l]=this.get(l++);return f}else if(f&&typeof f=="object"){let l=0;const u=this.columnCount;for(;l<u;)f[s.sqlite3_column_name(this.pointer,l)]=this.get(l++);return f}switch(F(this,f),g===void 0?s.sqlite3_column_type(this.pointer,f):g){case s.SQLITE_NULL:return null;case s.SQLITE_INTEGER:if(o.bigIntEnabled){const l=s.sqlite3_column_int64(this.pointer,f);return l>=Number.MIN_SAFE_INTEGER&&l<=Number.MAX_SAFE_INTEGER?Number(l).valueOf():l}else{const l=s.sqlite3_column_double(this.pointer,f);return(l>Number.MAX_SAFE_INTEGER||l<Number.MIN_SAFE_INTEGER)&&n("Integer is out of range for JS integer range: "+l),a.isInt32(l)?l|0:l}case s.SQLITE_FLOAT:return s.sqlite3_column_double(this.pointer,f);case s.SQLITE_TEXT:return s.sqlite3_column_text(this.pointer,f);case s.SQLITE_BLOB:{const l=s.sqlite3_column_bytes(this.pointer,f),u=s.sqlite3_column_blob(this.pointer,f),E=new Uint8Array(l);return l&&E.set(o.heap8u().slice(u,u+l),0),l&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(E.buffer),E}default:n("Don't know how to translate","type of result column #"+f+".")}n("Not reached.")},getInt:function(f){return this.get(f,s.SQLITE_INTEGER)},getFloat:function(f){return this.get(f,s.SQLITE_FLOAT)},getString:function(f){return this.get(f,s.SQLITE_TEXT)},getBlob:function(f){return this.get(f,s.SQLITE_BLOB)},getJSON:function(f){const g=this.get(f,s.SQLITE_STRING);return g===null?g:JSON.parse(g)},getColumnName:function(f){return s.sqlite3_column_name(F(z(this),f).pointer,f)},getColumnNames:function(f=[]){F(z(this),0);const g=this.columnCount;for(let l=0;l<g;++l)f.push(s.sqlite3_column_name(this.pointer,l));return f},getParamIndex:function(f){return z(this).parameterCount?s.sqlite3_bind_parameter_index(this.pointer,f):void 0},getParamName:function(f){return z(this).parameterCount?s.sqlite3_bind_parameter_name(this.pointer,f):void 0},isBusy:function(){return s.sqlite3_stmt_busy(z(this))!==0},isReadOnly:function(){return s.sqlite3_stmt_readonly(z(this))!==0}};{const f={enumerable:!0,get:function(){return p.get(this)},set:()=>n("The pointer property is read-only.")};Object.defineProperty(A.prototype,"pointer",f),Object.defineProperty(P.prototype,"pointer",f)}if(Object.defineProperty(A.prototype,"columnCount",{enumerable:!1,get:function(){return s.sqlite3_column_count(this.pointer)},set:()=>n("The columnCount property is read-only.")}),t.oo1={DB:P,Stmt:A},a.isUIThread()){t.oo1.JsStorageDb=function(g="session"){const l=D.normalizeArgs(...arguments);g=l.filename,g!=="session"&&g!=="local"&&n("JsStorageDb db name must be one of 'session' or 'local'."),l.vfs="kvvfs",D.call(this,l)};const f=t.oo1.JsStorageDb;f.prototype=Object.create(P.prototype),f.clearStorage=s.sqlite3_js_kvvfs_clear,f.prototype.clearStorage=function(){return f.clearStorage(T(this).filename)},f.storageSize=s.sqlite3_js_kvvfs_size,f.prototype.storageSize=function(){return f.storageSize(T(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=t.util;t.initWorker1API=(function(){const s=(...D)=>{throw new Error(D.join(" "))};globalThis.WorkerGlobalScope instanceof Function||s("initWorker1API() must be run from a Worker thread.");const o=this.sqlite3||s("Missing this.sqlite3 object."),a=o.oo1.DB,p=function(D){let P=q.idMap.get(D);return P||(P="db#"+ ++q.idSeq+"@"+D.pointer,q.idMap.set(D,P),P)},q={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(D){const P=new a(D);return this.dbs[p(P)]=P,this.dbList.indexOf(P)<0&&this.dbList.push(P),P},close:function(D,P){if(D){delete this.dbs[p(D)];const j=D.filename,A=n.sqlite3__wasm_db_vfs(D.pointer,0);D.close();const T=this.dbList.indexOf(D);T>=0&&this.dbList.splice(T,1),P&&j&&A&&n.sqlite3__wasm_vfs_unlink(A,j)}},post:function(D,P){P&&P.length?(globalThis.postMessage(D,Array.from(P)),P.length=0):globalThis.postMessage(D)},dbs:Object.create(null),getDb:function(D,P=!0){return this.dbs[D]||(P?s("Unknown (or closed) DB ID:",D):void 0)}},N=function(D=q.dbList[0]){return D&&D.pointer?D:s("DB is not opened.")},M=function(D,P=!0){const j=q.getDb(D.dbId,!1)||q.dbList[0];return P?N(j):j},Y=function(){return q.dbList[0]&&p(q.dbList[0])},J={open:function(D){const P=Object.create(null),j=D.args||Object.create(null);j.simulateError&&s("Throwing because of simulateError flag.");const A=Object.create(null);P.vfs=j.vfs,P.filename=j.filename||"";const T=q.open(P);return A.filename=T.filename,A.persistent=!!o.capi.sqlite3_js_db_uses_vfs(T.pointer,"opfs"),A.dbId=p(T),A.vfs=T.dbVfsName(),A},close:function(D){const P=M(D,!1),j={filename:P&&P.filename};if(P){const A=D.args&&typeof D.args=="object"?!!D.args.unlink:!1;q.close(P,A)}return j},exec:function(D){const P=typeof D.args=="string"?{sql:D.args}:D.args||Object.create(null);P.rowMode==="stmt"?s("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):P.sql||s("'exec' requires input SQL.");const j=M(D);(P.callback||Array.isArray(P.resultRows))&&(j._blobXfer=q.xfer);const A=P.callback;let T=0;const F=!!P.columnNames;typeof A=="string"&&(F||(P.columnNames=[]),P.callback=function(R,U){q.post({type:A,columnNames:P.columnNames,rowNumber:++T,row:R},q.xfer)});try{const R=P.countChanges?j.changes(!0,P.countChanges===64):void 0;j.exec(P),R!==void 0&&(P.changeCount=j.changes(!0,P.countChanges===64)-R),P.callback instanceof Function&&(P.callback=A,q.post({type:A,columnNames:P.columnNames,rowNumber:null,row:void 0}))}finally{delete j._blobXfer,P.callback&&(P.callback=A)}return P},"config-get":function(){const D=Object.create(null),P=o.config;return["bigIntEnabled"].forEach(function(j){Object.getOwnPropertyDescriptor(P,j)&&(D[j]=P[j])}),D.version=o.version,D.vfsList=o.capi.sqlite3_js_vfs_list(),D},export:function(D){const P=M(D),j={byteArray:o.capi.sqlite3_js_db_export(P.pointer),filename:P.filename,mimetype:"application/x-sqlite3"};return q.xfer.push(j.byteArray.buffer),j},toss:function(D){s("Testing worker exception")}};globalThis.onmessage=async function(D){D=D.data;let P,j=D.dbId,A=D.type;const T=performance.now();try{J.hasOwnProperty(A)&&J[A]instanceof Function?P=await J[A](D):s("Unknown db worker message type:",D.type)}catch(F){A="error",P={operation:D.type,message:F.message,errorClass:F.name,input:D},F.stack&&(P.stack=typeof F.stack=="string"?F.stack.split(/\n\s*/):F.stack)}j||(j=P.dbId||Y()),q.post({type:A,dbId:j,messageId:D.messageId,workerReceivedTime:T,workerRespondTime:performance.now(),departureTime:D.departureTime,result:P},q.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}).bind({sqlite3:t})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=t.wasm,s=t.capi,o=t.util.toss3,a=Object.create(null);t.vfs=a,s.sqlite3_vfs.prototype.registerVfs=function(p=!1){this instanceof t.capi.sqlite3_vfs||o("Expecting a sqlite3_vfs-type argument.");const q=s.sqlite3_vfs_register(this,p?1:0);return q&&o("sqlite3_vfs_register(",this,") failed with rc",q),this.pointer!==s.sqlite3_vfs_find(this.$zName)&&o("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},a.installVfs=function(p){let q=0;const N=["io","vfs"];for(const M of N){const Y=p[M];Y&&(++q,Y.struct.installMethods(Y.methods,!!Y.applyArgcCheck),M==="vfs"&&(!Y.struct.$zName&&typeof Y.name=="string"&&Y.struct.addOnDispose(Y.struct.$zName=n.allocCString(Y.name)),Y.struct.registerVfs(!!Y.asDefault)))}return q||o("Misuse: installVfs() options object requires at least","one of:",N),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){if(!t.wasm.exports.sqlite3_declare_vtab)return;const n=t.wasm,s=t.capi,o=t.util.toss3,a=Object.create(null);t.vtab=a;const p=s.sqlite3_index_info;p.prototype.nthConstraint=function(M,Y=!1){if(M<0||M>=this.$nConstraint)return!1;const J=this.$aConstraint+p.sqlite3_index_constraint.structInfo.sizeof*M;return Y?J:new p.sqlite3_index_constraint(J)},p.prototype.nthConstraintUsage=function(M,Y=!1){if(M<0||M>=this.$nConstraint)return!1;const J=this.$aConstraintUsage+p.sqlite3_index_constraint_usage.structInfo.sizeof*M;return Y?J:new p.sqlite3_index_constraint_usage(J)},p.prototype.nthOrderBy=function(M,Y=!1){if(M<0||M>=this.$nOrderBy)return!1;const J=this.$aOrderBy+p.sqlite3_index_orderby.structInfo.sizeof*M;return Y?J:new p.sqlite3_index_orderby(J)};const q=function(M,Y){return(function(J,D=!1){if(arguments.length===0&&(J=new Y),J instanceof Y)return this.set(J.pointer,J),J;n.isPtr(J)||t.SQLite3Error.toss("Invalid argument to",M+"()");let P=this.get(J);return D&&this.delete(J),P}).bind(new Map)},N=function(M,Y){const J=q(M,Y);return Object.assign(Object.create(null),{StructType:Y,create:D=>{const P=J();return n.pokePtr(D,P.pointer),P},get:D=>J(D),unget:D=>J(D,!0),dispose:D=>{const P=J(D,!0);P&&P.dispose()}})};a.xVtab=N("xVtab",s.sqlite3_vtab),a.xCursor=N("xCursor",s.sqlite3_vtab_cursor),a.xIndexInfo=M=>new s.sqlite3_index_info(M),a.xError=function M(Y,J,D){if(M.errorReporter instanceof Function)try{M.errorReporter("sqlite3_module::"+Y+"(): "+J.message)}catch{}let P;return J instanceof t.WasmAllocError?P=s.SQLITE_NOMEM:arguments.length>2?P=D:J instanceof t.SQLite3Error&&(P=J.resultCode),P||s.SQLITE_ERROR},a.xError.errorReporter=console.error.bind(console),a.xRowid=(M,Y)=>n.poke(M,Y,"i64"),a.setupModule=function(M){let Y=!1;const J=this instanceof s.sqlite3_module?this:M.struct||(Y=new s.sqlite3_module);try{const D=M.methods||o("Missing 'methods' object.");for(const P of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const j=P[0],A=P[1];D[j]===!0?D[j]=D[A]:D[A]===!0&&(D[A]=D[j])}if(M.catchExceptions){const P=function(T,F){return["xConnect","xCreate"].indexOf(T)>=0?function(R,U,O,z,X,_){try{return F(...arguments)||0}catch(b){return b instanceof t.WasmAllocError||(n.dealloc(n.peekPtr(_)),n.pokePtr(_,n.allocCString(b.message))),a.xError(T,b)}}:function(...R){try{return F(...R)||0}catch(U){return a.xError(T,U)}}},j=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],A=Object.create(null);for(const T of j){const F=D[T];if(F instanceof Function)T==="xConnect"&&D.xCreate===F?A[T]=D.xCreate:T==="xCreate"&&D.xConnect===F?A[T]=D.xConnect:A[T]=P(T,F);else continue}J.installMethods(A,!1)}else J.installMethods(D,!!M.applyArgcCheck);if(J.$iVersion===0){let P;typeof M.iVersion=="number"?P=M.iVersion:J.$xShadowName?P=3:J.$xSavePoint||J.$xRelease||J.$xRollbackTo?P=2:P=1,J.$iVersion=P}}catch(D){throw Y&&Y.dispose(),D}return J},s.sqlite3_module.prototype.setupModule=function(M){return a.setupModule.call(this,M)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=function s(o){var q;if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((q=navigator==null?void 0:navigator.storage)!=null&&q.getDirectory))return Promise.reject(new Error("Missing required OPFS APIs."));(!o||typeof o!="object")&&(o=Object.create(null));const a=new URL(globalThis.location.href).searchParams;return a.has("opfs-disable")?Promise.resolve(t):(o.verbose===void 0&&(o.verbose=a.has("opfs-verbose")?+a.get("opfs-verbose")||2:1),o.sanityChecks===void 0&&(o.sanityChecks=a.has("opfs-sanity-check")),o.proxyUri===void 0&&(o.proxyUri=s.defaultProxyUri),typeof o.proxyUri=="function"&&(o.proxyUri=o.proxyUri()),new Promise(function(N,M){const Y=[t.config.error,t.config.warn,t.config.log],J=(C,...H)=>{o.verbose>C&&Y[C]("OPFS syncer:",...H)},D=(...C)=>J(2,...C),P=(...C)=>J(1,...C),j=(...C)=>J(0,...C),A=t.util.toss,T=t.capi,F=t.util,R=t.wasm,U=T.sqlite3_vfs,O=T.sqlite3_file,z=T.sqlite3_io_methods,X=Object.create(null),_=()=>{var C;return globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&((C=navigator==null?void 0:navigator.storage)==null?void 0:C.getDirectory)};X.metrics={dump:function(){let C,H=0,$=0,re=0;for(C in w.opIds){const ee=V[C];H+=ee.count,$+=ee.time,re+=ee.wait,ee.avgTime=ee.count&&ee.time?ee.time/ee.count:0,ee.avgWait=ee.count&&ee.wait?ee.wait/ee.count:0}t.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",V,`
Total of`,H,"op(s) for",$,"ms (incl. "+re+" ms of waiting on the async side)"),t.config.log("Serialization metrics:",V.s11n),l.postMessage({type:"opfs-async-metrics"})},reset:function(){let C;const H=re=>re.count=re.time=re.wait=0;for(C in w.opIds)H(V[C]=Object.create(null));let $=V.s11n=Object.create(null);$=$.serialize=Object.create(null),$.count=$.time=0,$=V.s11n.deserialize=Object.create(null),$.count=$.time=0}};const b=new z,x=new U().addOnDispose(()=>b.dispose());let G;const f=C=>(G=!0,x.dispose(),M(C)),g=()=>(G=!1,N(t)),l=new Worker(new URL("/prompt-api-sqlite/assets/sqlite3-opfs-async-proxy-DZdsd1Kz.js",import.meta.url));setTimeout(()=>{G===void 0&&f(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),l._originalOnError=l.onerror,l.onerror=function(C){j("Error initializing OPFS asyncer:",C),f(new Error("Loading OPFS async Worker failed for unknown reasons."))};const u=T.sqlite3_vfs_find(null),E=u?new U(u):null;b.$iVersion=1,x.$iVersion=2,x.$szOsFile=T.sqlite3_file.structInfo.sizeof,x.$mxPathname=1024,x.$zName=R.allocCString("opfs"),x.$xDlOpen=x.$xDlError=x.$xDlSym=x.$xDlClose=null,x.addOnDispose("$zName",x.$zName,"cleanup default VFS wrapper",()=>E?E.dispose():null);const w=Object.create(null);w.verbose=o.verbose,w.littleEndian=(()=>{const C=new ArrayBuffer(2);return new DataView(C).setInt16(0,256,!0),new Int16Array(C)[0]===256})(),w.asyncIdleWaitTime=150,w.asyncS11nExceptions=1,w.fileBufferSize=1024*64,w.sabS11nOffset=w.fileBufferSize,w.sabS11nSize=x.$mxPathname*2,w.sabIO=new SharedArrayBuffer(w.fileBufferSize+w.sabS11nSize),w.opIds=Object.create(null);const V=Object.create(null);{let C=0;w.opIds.whichOp=C++,w.opIds.rc=C++,w.opIds.xAccess=C++,w.opIds.xClose=C++,w.opIds.xDelete=C++,w.opIds.xDeleteNoWait=C++,w.opIds.xFileSize=C++,w.opIds.xLock=C++,w.opIds.xOpen=C++,w.opIds.xRead=C++,w.opIds.xSleep=C++,w.opIds.xSync=C++,w.opIds.xTruncate=C++,w.opIds.xUnlock=C++,w.opIds.xWrite=C++,w.opIds.mkdir=C++,w.opIds["opfs-async-metrics"]=C++,w.opIds["opfs-async-shutdown"]=C++,w.opIds.retry=C++,w.sabOP=new SharedArrayBuffer(C*4),X.metrics.reset()}w.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(C=>{(w.sq3Codes[C]=T[C])===void 0&&A("Maintenance required: not found:",C)}),w.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const se=(C,...H)=>{const $=w.opIds[C]||A("Invalid op ID:",C);w.s11n.serialize(...H),Atomics.store(w.sabOPView,w.opIds.rc,-1),Atomics.store(w.sabOPView,w.opIds.whichOp,$),Atomics.notify(w.sabOPView,w.opIds.whichOp);const re=performance.now();for(;Atomics.wait(w.sabOPView,w.opIds.rc,-1)!=="not-equal";);const ee=Atomics.load(w.sabOPView,w.opIds.rc);if(V[C].wait+=performance.now()-re,ee&&w.asyncS11nExceptions){const ie=w.s11n.deserialize();ie&&j(C+"() async error:",...ie)}return ee};X.debug={asyncShutdown:()=>{P("Shutting down OPFS async listener. The OPFS VFS will no longer work."),se("opfs-async-shutdown")},asyncRestart:()=>{P("Attempting to restart OPFS VFS async listener. Might work, might not."),l.postMessage({type:"opfs-async-restart"})}};const ue=()=>{if(w.s11n)return w.s11n;const C=new TextDecoder,H=new TextEncoder("utf-8"),$=new Uint8Array(w.sabIO,w.sabS11nOffset,w.sabS11nSize),re=new DataView(w.sabIO,w.sabS11nOffset,w.sabS11nSize);w.s11n=Object.create(null);const ee=Object.create(null);ee.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},ee.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},ee.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},ee.string={id:4};const ie=m=>ee[typeof m]||A("Maintenance required: this value type cannot be serialized.",m),Q=m=>{switch(m){case ee.number.id:return ee.number;case ee.bigint.id:return ee.bigint;case ee.boolean.id:return ee.boolean;case ee.string.id:return ee.string;default:A("Invalid type ID:",m)}};return w.s11n.deserialize=function(m=!1){++V.s11n.deserialize.count;const d=performance.now(),I=$[0],L=I?[]:null;if(I){const B=[];let ne=1,ce,qe,Te;for(ce=0;ce<I;++ce,++ne)B.push(Q($[ne]));for(ce=0;ce<I;++ce){const at=B[ce];at.getter?(Te=re[at.getter](ne,w.littleEndian),ne+=at.size):(qe=re.getInt32(ne,w.littleEndian),ne+=4,Te=C.decode($.slice(ne,ne+qe)),ne+=qe),L.push(Te)}}return m&&($[0]=0),V.s11n.deserialize.time+=performance.now()-d,L},w.s11n.serialize=function(...m){const d=performance.now();if(++V.s11n.serialize.count,m.length){const I=[];let L=0,B=1;for($[0]=m.length&255;L<m.length;++L,++B)I.push(ie(m[L])),$[B]=I[L].id;for(L=0;L<m.length;++L){const ne=I[L];if(ne.setter)re[ne.setter](B,m[L],w.littleEndian),B+=ne.size;else{const ce=H.encode(m[L]);re.setInt32(B,ce.byteLength,w.littleEndian),B+=4,$.set(ce,B),B+=ce.byteLength}}}else $[0]=0;V.s11n.serialize.time+=performance.now()-d},w.s11n},he=function C(H=16){C._chars||(C._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",C._n=C._chars.length);const $=[];let re=0;for(;re<H;++re){const ee=Math.random()*(C._n*64)%C._n|0;$[re]=C._chars[ee]}return $.join("")},de=Object.create(null),me=Object.create(null);me.op=void 0,me.start=void 0;const ye=C=>{me.start=performance.now(),me.op=C,++V[C].count},we=()=>V[me.op].time+=performance.now()-me.start,Oe={xCheckReservedLock:function(C,H){return R.poke(H,0,"i32"),0},xClose:function(C){ye("xClose");let H=0;const $=de[C];return $&&(delete de[C],H=se("xClose",C),$.sq3File&&$.sq3File.dispose()),we(),H},xDeviceCharacteristics:function(C){return T.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(C,H,$){return T.SQLITE_NOTFOUND},xFileSize:function(C,H){ye("xFileSize");let $=se("xFileSize",C);if($==0)try{const re=w.s11n.deserialize()[0];R.poke(H,re,"i64")}catch(re){j("Unexpected error reading xFileSize() result:",re),$=w.sq3Codes.SQLITE_IOERR}return we(),$},xLock:function(C,H){ye("xLock");const $=de[C];let re=0;return $.lockType?$.lockType=H:(re=se("xLock",C,H),re===0&&($.lockType=H)),we(),re},xRead:function(C,H,$,re){ye("xRead");const ee=de[C];let ie;try{ie=se("xRead",C,$,Number(re)),(ie===0||T.SQLITE_IOERR_SHORT_READ===ie)&&R.heap8u().set(ee.sabView.subarray(0,$),H)}catch(Q){j("xRead(",arguments,") failed:",Q,ee),ie=T.SQLITE_IOERR_READ}return we(),ie},xSync:function(C,H){ye("xSync"),++V.xSync.count;const $=se("xSync",C,H);return we(),$},xTruncate:function(C,H){ye("xTruncate");const $=se("xTruncate",C,Number(H));return we(),$},xUnlock:function(C,H){ye("xUnlock");const $=de[C];let re=0;return T.SQLITE_LOCK_NONE===H&&$.lockType&&(re=se("xUnlock",C,H)),re===0&&($.lockType=H),we(),re},xWrite:function(C,H,$,re){ye("xWrite");const ee=de[C];let ie;try{ee.sabView.set(R.heap8u().subarray(H,H+$)),ie=se("xWrite",C,$,Number(re))}catch(Q){j("xWrite(",arguments,") failed:",Q,ee),ie=T.SQLITE_IOERR_WRITE}return we(),ie}},Pe={xAccess:function(C,H,$,re){ye("xAccess");const ee=se("xAccess",R.cstrToJs(H));return R.poke(re,ee?0:1,"i32"),we(),0},xCurrentTime:function(C,H){return R.poke(H,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(C,H){return R.poke(H,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(C,H,$){ye("xDelete");const re=se("xDelete",R.cstrToJs(H),$,!1);return we(),re},xFullPathname:function(C,H,$,re){return R.cstrncpy(re,H,$)<$?0:T.SQLITE_CANTOPEN},xGetLastError:function(C,H,$){return P("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(H,$,re,ee,ie){ye("xOpen");let Q=0;$===0?$=he():R.isPtr($)&&(T.sqlite3_uri_boolean($,"opfs-unlock-asap",0)&&(Q|=w.opfsFlags.OPFS_UNLOCK_ASAP),T.sqlite3_uri_boolean($,"delete-before-open",0)&&(Q|=w.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),$=R.cstrToJs($));const m=Object.create(null);m.fid=re,m.filename=$,m.sab=new SharedArrayBuffer(w.fileBufferSize),m.flags=ee,m.readOnly=!(t.SQLITE_OPEN_CREATE&ee)&&!!(ee&T.SQLITE_OPEN_READONLY);const d=se("xOpen",re,$,ee,Q);return d||(m.readOnly&&R.poke(ie,T.SQLITE_OPEN_READONLY,"i32"),de[re]=m,m.sabView=w.sabFileBufView,m.sq3File=new O(re),m.sq3File.$pMethods=b.pointer,m.lockType=T.SQLITE_LOCK_NONE),we(),d}};E&&(x.$xRandomness=E.$xRandomness,x.$xSleep=E.$xSleep),x.$xRandomness||(Pe.xRandomness=function(C,H,$){const re=R.heap8u();let ee=0;for(;ee<H;++ee)re[$+ee]=Math.random()*255e3&255;return ee}),x.$xSleep||(Pe.xSleep=function(C,H){return Atomics.wait(w.sabOPView,w.opIds.xSleep,0,H),0}),X.getResolvedPath=function(C,H){const $=new URL(C,"file://irrelevant").pathname;return H?$.split("/").filter(re=>!!re):$},X.getDirForFilename=async function(H,$=!1){const re=X.getResolvedPath(H,!0),ee=re.pop();let ie=X.rootDirectory;for(const Q of re)Q&&(ie=await ie.getDirectoryHandle(Q,{create:!!$}));return[ie,ee]},X.mkdir=async function(C){try{return await X.getDirForFilename(C+"/filepart",!0),!0}catch{return!1}},X.entryExists=async function(C){try{const[H,$]=await X.getDirForFilename(C);return await H.getFileHandle($),!0}catch{return!1}},X.randomFilename=he,X.treeList=async function(){const C=async function $(re,ee){ee.name=re.name,ee.dirs=[],ee.files=[];for await(const ie of re.values())if(ie.kind==="directory"){const Q=Object.create(null);ee.dirs.push(Q),await $(ie,Q)}else ee.files.push(ie.name)},H=Object.create(null);return await C(X.rootDirectory,H),H},X.rmfr=async function(){const C=X.rootDirectory,H={recurse:!0};for await(const $ of C.values())C.removeEntry($.name,H)},X.unlink=async function(C,H=!1,$=!1){try{const[re,ee]=await X.getDirForFilename(C,!1);return await re.removeEntry(ee,{recursive:H}),!0}catch(re){if($)throw new Error("unlink(",arguments[0],") failed: "+re.message,{cause:re});return!1}},X.traverse=async function(C){const H={recursive:!0,directory:X.rootDirectory};typeof C=="function"&&(C={callback:C}),C=Object.assign(H,C||{}),async function re(ee,ie){for await(const Q of ee.values()){if(C.callback(Q,ee,ie)===!1)return!1;if(C.recursive&&Q.kind==="directory"&&await re(Q,ie+1)===!1)break}}(C.directory,0)};const Ze=async function(C,H){const[$,re]=await X.getDirForFilename(C,!0);let ie=await(await $.getFileHandle(re,{create:!0})).createSyncAccessHandle(),Q=0,m,d=!1;try{for(ie.truncate(0);(m=await H())!==void 0;)m instanceof ArrayBuffer&&(m=new Uint8Array(m)),Q===0&&m.byteLength>=15&&(F.affirmDbHeader(m),d=!0),ie.write(m,{at:Q}),Q+=m.byteLength;if((Q<512||Q%512!==0)&&A("Input size",Q,"is not correct for an SQLite database."),!d){const I=new Uint8Array(20);ie.read(I,{at:0}),F.affirmDbHeader(I)}return ie.write(new Uint8Array([1,1]),{at:18}),Q}catch(I){throw await ie.close(),ie=void 0,await $.removeEntry(re).catch(()=>{}),I}finally{ie&&await ie.close()}};if(X.importDb=async function(C,H){if(H instanceof Function)return Ze(C,H);H instanceof ArrayBuffer&&(H=new Uint8Array(H)),F.affirmIsDb(H);const $=H.byteLength,[re,ee]=await X.getDirForFilename(C,!0);let ie,Q=0;try{return ie=await(await re.getFileHandle(ee,{create:!0})).createSyncAccessHandle(),ie.truncate(0),Q=ie.write(H,{at:0}),Q!=$&&A("Expected to write "+$+" bytes but wrote "+Q+"."),ie.write(new Uint8Array([1,1]),{at:18}),Q}catch(m){throw ie&&(await ie.close(),ie=void 0),await re.removeEntry(ee).catch(()=>{}),m}finally{ie&&await ie.close()}},t.oo1){const C=function(...H){const $=t.oo1.DB.dbCtorHelper.normalizeArgs(...H);$.vfs=x.$zName,t.oo1.DB.dbCtorHelper.call(this,$)};C.prototype=Object.create(t.oo1.DB.prototype),t.oo1.OpfsDb=C,C.importDb=X.importDb,t.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(x.pointer,function(H,$){$.capi.sqlite3_busy_timeout(H,1e4)})}const Me=function(){const C=R.scopedAllocPush(),H=new O;try{const $=H.pointer,re=T.SQLITE_OPEN_CREATE|T.SQLITE_OPEN_READWRITE|T.SQLITE_OPEN_MAIN_DB,ee=R.scopedAlloc(8),ie="/sanity/check/file"+he(8),Q=R.scopedAllocCString(ie);let m;if(w.s11n.serialize("This is  string."),m=w.s11n.deserialize(),D("deserialize() says:",m),m[0]!=="This is  string."&&A("String d13n error."),Pe.xAccess(x.pointer,Q,0,ee),m=R.peek(ee,"i32"),D("xAccess(",ie,") exists ?=",m),m=Pe.xOpen(x.pointer,Q,$,re,ee),D("open rc =",m,"state.sabOPView[xOpen] =",w.sabOPView[w.opIds.xOpen]),m!==0){j("open failed with code",m);return}Pe.xAccess(x.pointer,Q,0,ee),m=R.peek(ee,"i32"),m||A("xAccess() failed to detect file."),m=Oe.xSync(H.pointer,0),m&&A("sync failed w/ rc",m),m=Oe.xTruncate(H.pointer,1024),m&&A("truncate failed w/ rc",m),R.poke(ee,0,"i64"),m=Oe.xFileSize(H.pointer,ee),m&&A("xFileSize failed w/ rc",m),D("xFileSize says:",R.peek(ee,"i64")),m=Oe.xWrite(H.pointer,Q,10,1),m&&A("xWrite() failed!");const d=R.scopedAlloc(16);m=Oe.xRead(H.pointer,d,6,2),R.poke(d+6,0);let I=R.cstrToJs(d);D("xRead() got:",I),I!=="sanity"&&A("Unexpected xRead() value."),Pe.xSleep&&(D("xSleep()ing before close()ing..."),Pe.xSleep(x.pointer,2e3),D("waking up from xSleep()")),m=Oe.xClose($),D("xClose rc =",m,"sabOPView =",w.sabOPView),D("Deleting file:",ie),Pe.xDelete(x.pointer,Q,4660),Pe.xAccess(x.pointer,Q,0,ee),m=R.peek(ee,"i32"),m&&A("Expecting 0 from xAccess(",ie,") after xDelete()."),P("End of OPFS sanity checks.")}finally{H.dispose(),R.scopedAllocPop(C)}};l.onmessage=function({data:C}){switch(C.type){case"opfs-unavailable":f(new Error(C.payload.join(" ")));break;case"opfs-async-loaded":l.postMessage({type:"opfs-async-init",args:w});break;case"opfs-async-inited":{if(G===!0)break;try{t.vfs.installVfs({io:{struct:b,methods:Oe},vfs:{struct:x,methods:Pe}}),w.sabOPView=new Int32Array(w.sabOP),w.sabFileBufView=new Uint8Array(w.sabIO,0,w.fileBufferSize),w.sabS11nView=new Uint8Array(w.sabIO,w.sabS11nOffset,w.sabS11nSize),ue(),o.sanityChecks&&(P("Running sanity checks because of opfs-sanity-check URL arg..."),Me()),_()?navigator.storage.getDirectory().then(H=>{l.onerror=l._originalOnError,delete l._originalOnError,t.opfs=X,X.rootDirectory=H,D("End of OPFS sqlite3_vfs setup.",x),g()}).catch(f):g()}catch(H){j(H),f(H)}break}default:{const H="Unexpected message from the OPFS async worker: "+JSON.stringify(C);j(H),f(new Error(H));break}}}}))};n.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async s=>{try{let o=n.defaultProxyUri;return s.scriptInfo.sqlite3Dir&&(n.defaultProxyUri=s.scriptInfo.sqlite3Dir+o),n().catch(a=>{s.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",a.message)})}catch(o){return s.config.error("installOpfsVfs() exception:",o),Promise.reject(o)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){var de,me,ye,we,Oe,Pe,Ze,Me,C,H,$,re,lr,ie;const n=t.util.toss,s=t.util.toss3,o=Object.create(null),a=t.capi,p=t.util,q=t.wasm,N=4096,M=512,Y=4,J=8,D=M+Y,P=M,j=D,A=N,T=a.SQLITE_OPEN_MAIN_DB|a.SQLITE_OPEN_MAIN_JOURNAL|a.SQLITE_OPEN_SUPER_JOURNAL|a.SQLITE_OPEN_WAL,F=".opaque",R=()=>Math.random().toString(36).slice(2),U=new TextDecoder,O=new TextEncoder,z=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),X=[t.config.error,t.config.warn,t.config.log];t.config.log;const _=t.config.warn;t.config.error;const b=new Map,x=Q=>b.get(Q),G=(Q,m)=>{m?b.set(Q,m):b.delete(Q)},f=new Map,g=Q=>f.get(Q),l=(Q,m)=>{m?f.set(Q,m):f.delete(Q)},u={xCheckReservedLock:function(Q,m){const d=g(Q);return d.log("xCheckReservedLock"),d.storeErr(),q.poke32(m,1),0},xClose:function(Q){const m=g(Q);m.storeErr();const d=m.getOFileForS3File(Q);if(d)try{m.log(`xClose ${d.path}`),m.mapS3FileToOFile(Q,!1),d.sah.flush(),d.flags&a.SQLITE_OPEN_DELETEONCLOSE&&m.deletePath(d.path)}catch(I){return m.storeErr(I,a.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(Q){return a.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(Q,m,d){return a.SQLITE_NOTFOUND},xFileSize:function(Q,m){const d=g(Q);d.log("xFileSize");const L=d.getOFileForS3File(Q).sah.getSize()-A;return q.poke64(m,BigInt(L)),0},xLock:function(Q,m){const d=g(Q);d.log(`xLock ${m}`),d.storeErr();const I=d.getOFileForS3File(Q);return I.lockType=m,0},xRead:function(Q,m,d,I){const L=g(Q);L.storeErr();const B=L.getOFileForS3File(Q);L.log(`xRead ${B.path} ${d} @ ${I}`);try{const ne=B.sah.read(q.heap8u().subarray(m,m+d),{at:A+Number(I)});return ne<d?(q.heap8u().fill(0,m+ne,m+d),a.SQLITE_IOERR_SHORT_READ):0}catch(ne){return L.storeErr(ne,a.SQLITE_IOERR)}},xSectorSize:function(Q){return N},xSync:function(Q,m){const d=g(Q);d.log(`xSync ${m}`),d.storeErr();const I=d.getOFileForS3File(Q);try{return I.sah.flush(),0}catch(L){return d.storeErr(L,a.SQLITE_IOERR)}},xTruncate:function(Q,m){const d=g(Q);d.log(`xTruncate ${m}`),d.storeErr();const I=d.getOFileForS3File(Q);try{return I.sah.truncate(A+Number(m)),0}catch(L){return d.storeErr(L,a.SQLITE_IOERR)}},xUnlock:function(Q,m){const d=g(Q);d.log("xUnlock");const I=d.getOFileForS3File(Q);return I.lockType=m,0},xWrite:function(Q,m,d,I){const L=g(Q);L.storeErr();const B=L.getOFileForS3File(Q);L.log(`xWrite ${B.path} ${d} ${I}`);try{const ne=B.sah.write(q.heap8u().subarray(m,m+d),{at:A+Number(I)});return d===ne?0:n("Unknown write() failure.")}catch(ne){return L.storeErr(ne,a.SQLITE_IOERR)}}},E=new a.sqlite3_io_methods;E.$iVersion=1,t.vfs.installVfs({io:{struct:E,methods:u}});const w={xAccess:function(Q,m,d,I){const L=x(Q);L.storeErr();try{const B=L.getPath(m);q.poke32(I,L.hasFilename(B)?1:0)}catch{q.poke32(I,0)}return 0},xCurrentTime:function(Q,m){return q.poke(m,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(Q,m){return q.poke(m,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(Q,m,d){const I=x(Q);I.log(`xDelete ${q.cstrToJs(m)}`),I.storeErr();try{return I.deletePath(I.getPath(m)),0}catch(L){return I.storeErr(L),a.SQLITE_IOERR_DELETE}},xFullPathname:function(Q,m,d,I){return q.cstrncpy(I,m,d)<d?0:a.SQLITE_CANTOPEN},xGetLastError:function(Q,m,d){const I=x(Q),L=I.popErr();if(I.log(`xGetLastError ${m} e =`,L),L){const B=q.scopedAllocPush();try{const[ne,ce]=q.scopedAllocCString(L.message,!0);q.cstrncpy(d,ne,m),ce>m&&q.poke8(d+m-1,0)}catch{return a.SQLITE_NOMEM}finally{q.scopedAllocPop(B)}}return L?L.sqlite3Rc||a.SQLITE_IOERR:0},xOpen:function(m,d,I,L,B){const ne=x(m);try{ne.log(`xOpen ${q.cstrToJs(d)} ${L}`);const ce=d&&q.peek8(d)?ne.getPath(d):R();let qe=ne.getSAHForPath(ce);!qe&&L&a.SQLITE_OPEN_CREATE&&(ne.getFileCount()<ne.getCapacity()?(qe=ne.nextAvailableSAH(),ne.setAssociatedPath(qe,ce,L)):n("SAH pool is full. Cannot create file",ce)),qe||n("file not found:",ce);const Te={path:ce,flags:L,sah:qe};ne.mapS3FileToOFile(I,Te),Te.lockType=a.SQLITE_LOCK_NONE;const at=new a.sqlite3_file(I);return at.$pMethods=E.pointer,at.dispose(),q.poke32(B,L),0}catch(ce){return ne.storeErr(ce),a.SQLITE_CANTOPEN}}},V=function(Q){t.capi.sqlite3_vfs_find(Q)&&s("VFS name is already registered:",Q);const m=new a.sqlite3_vfs,d=a.sqlite3_vfs_find(null),I=d?new a.sqlite3_vfs(d):null;return m.$iVersion=2,m.$szOsFile=a.sqlite3_file.structInfo.sizeof,m.$mxPathname=M,m.addOnDispose(m.$zName=q.allocCString(Q),()=>G(m.pointer,0)),I&&(m.$xRandomness=I.$xRandomness,m.$xSleep=I.$xSleep,I.dispose()),!m.$xRandomness&&!w.xRandomness&&(w.xRandomness=function(L,B,ne){const ce=q.heap8u();let qe=0;for(;qe<B;++qe)ce[ne+qe]=Math.random()*255e3&255;return qe}),!m.$xSleep&&!w.xSleep&&(w.xSleep=(L,B)=>0),t.vfs.installVfs({vfs:{struct:m,methods:w}}),m};class se{constructor(m=Object.create(null)){ot(this,re);_s(this,"vfsDir");ot(this,de);ot(this,me);ot(this,ye);ot(this,we,new Map);ot(this,Oe,new Map);ot(this,Pe,new Set);ot(this,Ze,new Map);ot(this,Me,new Uint8Array(D));ot(this,C);ot(this,H);ot(this,$);qt(this,$,m.verbosity??z.verbosity),this.vfsName=m.name||z.name,qt(this,H,V(this.vfsName)),G(oe(this,H).pointer,this),this.vfsDir=m.directory||"."+this.vfsName,qt(this,C,new DataView(oe(this,Me).buffer,oe(this,Me).byteOffset)),this.isReady=this.reset(!!(m.clearOnInit??z.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(m.initialCapacity||z.initialCapacity)})}log(...m){rr(this,re,lr).call(this,2,...m)}warn(...m){rr(this,re,lr).call(this,1,...m)}error(...m){rr(this,re,lr).call(this,0,...m)}getVfs(){return oe(this,H)}getCapacity(){return oe(this,we).size}getFileCount(){return oe(this,Oe).size}getFileNames(){const m=[],d=oe(this,Oe).keys();for(const I of d)m.push(I);return m}async addCapacity(m){for(let d=0;d<m;++d){const I=R(),B=await(await oe(this,me).getFileHandle(I,{create:!0})).createSyncAccessHandle();oe(this,we).set(B,I),this.setAssociatedPath(B,"",0)}return this.getCapacity()}async reduceCapacity(m){let d=0;for(const I of Array.from(oe(this,Pe))){if(d===m||this.getFileCount()===this.getCapacity())break;const L=oe(this,we).get(I);I.close(),await oe(this,me).removeEntry(L),oe(this,we).delete(I),oe(this,Pe).delete(I),++d}return d}releaseAccessHandles(){for(const m of oe(this,we).keys())m.close();oe(this,we).clear(),oe(this,Oe).clear(),oe(this,Pe).clear()}async acquireAccessHandles(m){const d=[];for await(const[I,L]of oe(this,me))L.kind==="file"&&d.push([I,L]);return Promise.all(d.map(async([I,L])=>{try{const B=await L.createSyncAccessHandle();if(oe(this,we).set(B,I),m)B.truncate(A),this.setAssociatedPath(B,"",0);else{const ne=this.getAssociatedPath(B);ne?oe(this,Oe).set(ne,B):oe(this,Pe).add(B)}}catch(B){throw this.storeErr(B),this.releaseAccessHandles(),B}}))}getAssociatedPath(m){m.read(oe(this,Me),{at:0});const d=oe(this,C).getUint32(P);if(oe(this,Me)[0]&&(d&a.SQLITE_OPEN_DELETEONCLOSE||(d&T)===0))return _(`Removing file with unexpected flags ${d.toString(16)}`,oe(this,Me)),this.setAssociatedPath(m,"",0),"";const I=new Uint32Array(J/4);m.read(I,{at:j});const L=this.computeDigest(oe(this,Me));if(I.every((B,ne)=>B===L[ne])){const B=oe(this,Me).findIndex(ne=>ne===0);return B===0&&m.truncate(A),B?U.decode(oe(this,Me).subarray(0,B)):""}else return _("Disassociating file with bad digest."),this.setAssociatedPath(m,"",0),""}setAssociatedPath(m,d,I){const L=O.encodeInto(d,oe(this,Me));M<=L.written+1&&n("Path too long:",d),oe(this,Me).fill(0,L.written,M),oe(this,C).setUint32(P,I);const B=this.computeDigest(oe(this,Me));m.write(oe(this,Me),{at:0}),m.write(B,{at:j}),m.flush(),d?(oe(this,Oe).set(d,m),oe(this,Pe).delete(m)):(m.truncate(A),oe(this,Pe).add(m))}computeDigest(m){let d=3735928559,I=1103547991;for(const L of m)d=31*d+L*307,I=31*I+L*307;return new Uint32Array([d>>>0,I>>>0])}async reset(m){await this.isReady;let d=await navigator.storage.getDirectory(),I;for(const L of this.vfsDir.split("/"))L&&(I=d,d=await d.getDirectoryHandle(L,{create:!0}));return qt(this,de,d),qt(this,ye,I),qt(this,me,await oe(this,de).getDirectoryHandle(F,{create:!0})),this.releaseAccessHandles(),this.acquireAccessHandles(m)}getPath(m){return q.isPtr(m)&&(m=q.cstrToJs(m)),(m instanceof URL?m:new URL(m,"file://localhost/")).pathname}deletePath(m){const d=oe(this,Oe).get(m);return d&&(oe(this,Oe).delete(m),this.setAssociatedPath(d,"",0)),!!d}storeErr(m,d){return m&&(m.sqlite3Rc=d||a.SQLITE_IOERR,this.error(m)),this.$error=m,d}popErr(){const m=this.$error;return this.$error=void 0,m}nextAvailableSAH(){const[m]=oe(this,Pe).keys();return m}getOFileForS3File(m){return oe(this,Ze).get(m)}mapS3FileToOFile(m,d){d?(oe(this,Ze).set(m,d),l(m,this)):(oe(this,Ze).delete(m),l(m,!1))}hasFilename(m){return oe(this,Oe).has(m)}getSAHForPath(m){return oe(this,Oe).get(m)}async removeVfs(){if(!oe(this,H).pointer||!oe(this,me))return!1;a.sqlite3_vfs_unregister(oe(this,H).pointer),oe(this,H).dispose(),delete o[this.vfsName];try{this.releaseAccessHandles(),await oe(this,de).removeEntry(F,{recursive:!0}),qt(this,me,void 0),await oe(this,ye).removeEntry(oe(this,de).name,{recursive:!0}),qt(this,de,qt(this,ye,void 0))}catch(m){t.config.error(this.vfsName,"removeVfs() failed:",m)}return!0}exportFile(m){const d=oe(this,Oe).get(m)||n("File not found:",m),I=d.getSize()-A,L=new Uint8Array(I>0?I:0);if(I>0){const B=d.read(L,{at:A});B!=I&&n("Expected to read "+I+" bytes but read "+B+".")}return L}async importDbChunked(m,d){const I=oe(this,Oe).get(m)||this.nextAvailableSAH()||n("No available handles to import to.");I.truncate(0);let L=0,B,ne=!1;try{for(;(B=await d())!==void 0;)B instanceof ArrayBuffer&&(B=new Uint8Array(B)),L===0&&B.byteLength>=15&&(p.affirmDbHeader(B),ne=!0),I.write(B,{at:A+L}),L+=B.byteLength;if((L<512||L%512!==0)&&n("Input size",L,"is not correct for an SQLite database."),!ne){const ce=new Uint8Array(20);I.read(ce,{at:0}),p.affirmDbHeader(ce)}I.write(new Uint8Array([1,1]),{at:A+18})}catch(ce){throw this.setAssociatedPath(I,"",0),ce}return this.setAssociatedPath(I,m,a.SQLITE_OPEN_MAIN_DB),L}importDb(m,d){if(d instanceof ArrayBuffer)d=new Uint8Array(d);else if(d instanceof Function)return this.importDbChunked(m,d);const I=oe(this,Oe).get(m)||this.nextAvailableSAH()||n("No available handles to import to."),L=d.byteLength;(L<512||L%512!=0)&&n("Byte array size is invalid for an SQLite db.");const B="SQLite format 3";for(let ce=0;ce<B.length;++ce)B.charCodeAt(ce)!==d[ce]&&n("Input does not contain an SQLite database header.");const ne=I.write(d,{at:A});return ne!=L?(this.setAssociatedPath(I,"",0),n("Expected to write "+L+" bytes but wrote "+ne+".")):(I.write(new Uint8Array([1,1]),{at:A+18}),this.setAssociatedPath(I,m,a.SQLITE_OPEN_MAIN_DB)),ne}}de=new WeakMap,me=new WeakMap,ye=new WeakMap,we=new WeakMap,Oe=new WeakMap,Pe=new WeakMap,Ze=new WeakMap,Me=new WeakMap,C=new WeakMap,H=new WeakMap,$=new WeakMap,re=new WeakSet,lr=function(m,...d){oe(this,$)>m&&X[m](this.vfsName+":",...d)};class ue{constructor(m){ot(this,ie);qt(this,ie,m),this.vfsName=m.vfsName}async addCapacity(m){return oe(this,ie).addCapacity(m)}async reduceCapacity(m){return oe(this,ie).reduceCapacity(m)}getCapacity(){return oe(this,ie).getCapacity(oe(this,ie))}getFileCount(){return oe(this,ie).getFileCount()}getFileNames(){return oe(this,ie).getFileNames()}async reserveMinimumCapacity(m){const d=oe(this,ie).getCapacity();return d<m?oe(this,ie).addCapacity(m-d):d}exportFile(m){return oe(this,ie).exportFile(m)}importDb(m,d){return oe(this,ie).importDb(m,d)}async wipeFiles(){return oe(this,ie).reset(!0)}unlink(m){return oe(this,ie).deletePath(m)}async removeVfs(){return oe(this,ie).removeVfs()}}ie=new WeakMap;const he=async()=>{const Q=await navigator.storage.getDirectory(),m=".opfs-sahpool-sync-check-"+R(),L=(await(await Q.getFileHandle(m,{create:!0})).createSyncAccessHandle()).close();return await L,await Q.removeEntry(m),L!=null&&L.then&&n("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};t.installOpfsSAHPoolVfs=async function(Q=Object.create(null)){var d;Q=Object.assign(Object.create(null),z,Q||{});const m=Q.name;if(Q.$testThrowPhase1)throw Q.$testThrowPhase1;if(o[m])try{return await o[m]}catch(I){if(Q.forceReinitIfPreviouslyFailed)delete o[m];else throw I}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((d=navigator==null?void 0:navigator.storage)!=null&&d.getDirectory)?o[m]=Promise.reject(new Error("Missing required OPFS APIs.")):o[m]=he().then(async function(){if(Q.$testThrowPhase2)throw Q.$testThrowPhase2;const I=new se(Q);return I.isReady.then(async()=>{const L=new ue(I);if(t.oo1){const B=t.oo1,ne=I.getVfs(),ce=function(...qe){const Te=B.DB.dbCtorHelper.normalizeArgs(...qe);Te.vfs=ne.$zName,B.DB.dbCtorHelper.call(this,Te)};ce.prototype=Object.create(B.DB.prototype),L.OpfsSAHPoolDb=ce}return I.log("VFS initialized."),L}).catch(async L=>{throw await I.removeVfs().catch(()=>{}),L})}).catch(I=>o[m]=Promise.reject(I))}}),typeof r<"u"){const t=Object.assign(Object.create(null),{exports:typeof h>"u"?r.asm:h,memory:r.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=t;let n;try{n=globalThis.sqlite3ApiBootstrap()}catch(s){throw console.error("sqlite3ApiBootstrap() error:",s),s}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}r.sqlite3=n}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")},y=le,y}})();const ui=function(){var y,r;const i=vs;if(!i)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const S=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:(y=globalThis==null?void 0:globalThis.document)==null?void 0:y.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:(r=globalThis==null?void 0:globalThis.location)!=null&&r.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(S.debugModule=S.urlParams.has("sqlite3.debugModule")?(...W)=>console.warn("sqlite3.debugModule:",...W):()=>{},S.urlParams.has("sqlite3.dir"))S.sqlite3Dir=S.urlParams.get("sqlite3.dir")+"/";else if(S.moduleScript){const W=S.moduleScript.src.split("/");W.pop(),S.sqlite3Dir=W.join("/")+"/"}if(globalThis.sqlite3InitModule=function W(...K){return i(...K).then(le=>{le.runSQLite3PostLoadInit(le);const Se=le.sqlite3;Se.scriptInfo=S,W.__isUnderTest&&(Se.__isUnderTest=!0);const Ee=Se.asyncPostInit;return delete Se.asyncPostInit,Ee()}).catch(le=>{throw console.error("Exception loading sqlite3 module:",le),le})},globalThis.sqlite3InitModule.ready=i.ready,globalThis.sqlite3InitModuleState.moduleScript){const W=globalThis.sqlite3InitModuleState;let K=W.moduleScript.src.split("/");K.pop(),W.scriptDir=K.join("/")+"/"}return S.debugModule("sqlite3InitModuleState =",S),globalThis.sqlite3InitModule}();vs=ui;globalThis.sqlite3Worker1Promiser=function i(S=i.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const te=S;S=Object.assign(Object.create(null),i.defaultConfig),S.onready=te}else S=Object.assign(Object.create(null),i.defaultConfig,S);const y=Object.create(null),r=function(){},W=S.onerror||r,K=S.debug||r,le=S.generateMessageId?void 0:Object.create(null),Se=S.generateMessageId||function(te){return te.type+"#"+(le[te.type]=(le[te.type]||0)+1)},Ee=(...te)=>{throw new Error(te.join(" "))};S.worker||(S.worker=i.defaultConfig.worker),typeof S.worker=="function"&&(S.worker=S.worker());let pe,Ie;return S.worker.onmessage=function(te){te=te.data,K("worker1.onmessage",te);let ge=y[te.messageId];if(!ge){if(te&&te.type==="sqlite3-api"&&te.result==="worker1-ready"){S.onready&&S.onready(Ie);return}if(ge=y[te.type],ge&&ge.onrow){ge.onrow(te);return}S.onunhandled?S.onunhandled(arguments[0]):W("sqlite3Worker1Promiser() unhandled worker message:",te);return}switch(delete y[te.messageId],te.type){case"error":ge.reject(te);return;case"open":pe||(pe=te.dbId);break;case"close":te.dbId===pe&&(pe=void 0);break}try{ge.resolve(te)}catch(ke){ge.reject(ke)}},Ie=function(){let te;arguments.length===1?te=arguments[0]:arguments.length===2?(te=Object.create(null),te.type=arguments[0],te.args=arguments[1],te.dbId=te.args.dbId):Ee("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!te.dbId&&te.type!=="open"&&(te.dbId=pe),te.messageId=Se(te),te.departureTime=performance.now();const ge=Object.create(null);ge.message=te;let ke;te.type==="exec"&&te.args&&(typeof te.args.callback=="function"?(ke=te.messageId+":row",ge.onrow=te.args.callback,te.args.callback=ke,y[ke]=ge):typeof te.args.callback=="string"&&Ee("exec callback may not be a string when using the Promise interface."));let Re=new Promise(function(ze,dt){ge.resolve=ze,ge.reject=dt,y[te.messageId]=ge,K("Posting",te.type,"message to Worker dbId="+(pe||"default")+":",te),S.worker.postMessage(te)});return ke&&(Re=Re.finally(()=>delete y[ke])),Re}};globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("/prompt-api-sqlite/assets/sqlite3-worker1-bundler-friendly-D1I8Os66.js",import.meta.url),{type:"module"})},onerror:(...i)=>console.error("worker1 promiser error",...i)};sqlite3Worker1Promiser.v2=(function(i){let S;typeof i=="function"?(S=i,i={}):typeof(i==null?void 0:i.onready)=="function"&&(S=i.onready,delete i.onready);const y=Object.create(null);i=Object.assign(i||Object.create(null),{onready:async function(W){try{S&&await S(W),y.resolve(W)}catch(K){y.reject(K)}}});const r=new Promise(function(W,K){y.resolve=W,y.reject=K});try{this.original(i)}catch(W){y.reject(W)}return r}).bind({original:sqlite3Worker1Promiser});sqlite3Worker1Promiser.v2;const fi=globalThis.sqlite3Worker1Promiser,vt=console.log,di=console.error;let ct,$t;const pi=async()=>{try{ct=await new Promise(y=>{const r=fi({onready:()=>{y(r)}})});let i;i=await ct("config-get",{}),vt("Running SQLite3 version",i.result.version.libVersion),i=await ct("open",{filename:"file:worker-promiser.sqlite3?vfs=opfs"});const{dbId:S}=i;vt("OPFS is available, created persisted database at",i.result.filename.replace(/^file:(.*?)\?vfs=opfs/,"$1")),await ct("exec",{dbId:S,sql:`
      CREATE TABLE IF NOT EXISTS sessions (
        uuid TEXT PRIMARY KEY,
        conversation_summary TEXT
      );
    `}),vt("CREATE TABLE IF NOT EXISTS sessions (uuid TEXT PRIMARY KEY, conversation_summary TEXT);"),await ct("exec",{dbId:S,sql:`
      CREATE TABLE IF NOT EXISTS prompts (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        session_uuid TEXT,
        role TEXT CHECK(role IN ('user', 'assistant', 'system')),
        content TEXT,
        image BLOB,
        FOREIGN KEY (session_uuid) REFERENCES sessions(uuid)
      );`}),vt(`
      CREATE TABLE IF NOT EXISTS prompts (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        session_uuid TEXT,
        role TEXT CHECK(role IN ('user', 'assistant', 'system')),
        content TEXT,
        image BLOB,
        FOREIGN KEY (session_uuid) REFERENCES sessions(uuid)
      );
    `)}catch(i){i instanceof Error||(i=new Error(i.result.message)),di(i.name,i.message)}},mi=async()=>{const i=[];return await ct("exec",{dbId:$t,sql:"SELECT uuid FROM sessions;",callback:S=>{S.row&&i.push(S.row[0])}}),vt("SELECT uuid FROM sessions;"),i},hi=async i=>{let S;await ct("exec",{dbId:$t,sql:`SELECT conversation_summary FROM sessions WHERE uuid = '${i}';`,callback:r=>{r.row&&(S=r.row[0])}}),vt(`SELECT conversation_summary FROM sessions WHERE uuid = '${i}';`);const y=[];return await ct("exec",{dbId:$t,sql:`SELECT role, content, image FROM prompts WHERE session_uuid = '${i}' ORDER BY id;`,callback:r=>{if(r.row){if(r.row[2]){y.push({role:r.row[0],content:[{type:"image",value:new Blob([new Uint8Array(r.row[2])],{type:"image/*"})}]});return}y.push({role:r.row[0],content:[{type:"text",value:r.row[1]}]})}}}),vt(`SELECT role, content, image FROM prompts WHERE session_uuid = '${i}' ORDER BY id;`),{conversationSummary:S,initialPrompts:y}},Ss=async(i,S)=>{await ct("exec",{dbId:$t,sql:`REPLACE INTO sessions (uuid, conversation_summary) VALUES ('${i}', '${S.conversationSummary.replace(/'/g,"''")}');`}),vt(`REPLACE INTO sessions (uuid, conversation_summary) VALUES ('${i}', '${S.conversationSummary.replace(/'/g,"''")}');`),await ct("exec",{dbId:$t,sql:`DELETE FROM prompts WHERE session_uuid = '${i}';`}),vt(`DELETE FROM prompts WHERE session_uuid = '${i}';`);for(const y of S.initialPrompts)for(const r of y.content)if(r.type==="image"){const W=await bi(r.value);await ct("exec",{dbId:$t,sql:`INSERT INTO prompts (session_uuid, role, content, image)
                VALUES ($uuid, $role, $content, $image);`,bind:{$uuid:i,$role:y.role,$content:null,$image:W}}),vt("INSERT INTO prompts (session_uuid, role, content, image) VALUES ($uuid, $role, $content, $image);")}else await ct("exec",{dbId:$t,sql:`INSERT INTO prompts (session_uuid, role, content, image)
                    VALUES ('${i}', '${y.role}', '${r.value.replace(/'/g,"''")}', NULL);`}),vt(`INSERT INTO prompts (session_uuid, role, content, image) VALUES ('${i}', '${y.role}', '${r.value.replace(/'/g,"''")}', NULL);`)},gi=async i=>{await ct("exec",{dbId:$t,sql:`DELETE FROM prompts WHERE session_uuid = '${i}';
DELETE FROM sessions WHERE uuid = '${i}';`}),console.log(`DELETE FROM prompts WHERE session_uuid = '${i}';
DELETE FROM sessions WHERE uuid = '${i}';`)},bi=async i=>{const S=await i.arrayBuffer();return new Uint8Array(S)},pr=1,Br=2,$r=3,Kr=4,Yr=5,Xr=6,Jr=7,Zr=8,mr=9,hr=10,jr=11,cr=12,In=13,On=14,Pn=15,Ln=16,un=17,zr=18,lt=19,Cn=20,Gt=21,As=22,Dn=23,gr=24,dn=25,xs=26,Wr=27,_r=28,ur=29,Ct=30,Pt=31,sr=101,us=102,Ts=103,fs=104,Pr=105,Hr=1,ks=2,Is=4,Os=8,Ps=16;function yi(i){switch(i){case Hr:return"href";case ks:return"src";case Is:return"class";case Os:return"checked";case Ps:return"start"}}const qi=i=>{switch(i){case 1:return $r;case 2:return Kr;case 3:return Yr;case 4:return Xr;case 5:return Jr;default:return Zr}},Ei=qi,ds=24;function Ls(i){const S=new Uint32Array(ds);return S[0]=pr,{renderer:i,text:"",pending:"",tokens:S,len:0,token:pr,fence_end:0,blockquote_idx:0,hr_char:"",hr_chars:0,fence_start:0,spaces:new Uint8Array(ds),indent:"",indent_len:0,table_state:0}}function Fs(i){i.pending.length>0&&Xe(i,`
`)}function Le(i){i.text.length!==0&&(console.assert(i.len>0,"Never adding text to root"),i.renderer.add_text(i.renderer.data,i.text),i.text="")}function Be(i){console.assert(i.len>0,"No nodes to end"),i.len-=1,i.token=i.tokens[i.len],i.renderer.end_token(i.renderer.data)}function Fe(i,S){(i.tokens[i.len]===gr||i.tokens[i.len]===Dn)&&S!==dn&&Be(i),i.len+=1,i.tokens[i.len]=S,i.token=S,i.renderer.add_token(i.renderer.data,S)}function wi(i,S,y){for(;y<=i.len;){if(i.tokens[y]===S)return y;y+=1}return-1}function en(i,S){for(i.fence_start=0;i.len>S;)Be(i)}function ir(i,S){let y=0;for(let r=0;r<=i.len&&(S-=i.spaces[r],!(S<0));r+=1)switch(i.tokens[r]){case mr:case hr:case Cn:case dn:y=r;break}for(;i.len>y;)Be(i);return S}function Lr(i,S){let y=-1,r=-1;for(let W=i.blockquote_idx+1;W<=i.len;W+=1)if(i.tokens[W]===dn){if(i.indent_len<i.spaces[W]){r=-1;break}r=W}else i.tokens[W]===S&&(y=W);return r===-1?y===-1?(en(i,i.blockquote_idx),Fe(i,S),!0):(en(i,y),!1):(en(i,r),Fe(i,S),!0)}function Fr(i,S){Fe(i,dn),i.spaces[i.len]=i.indent_len+S,Dt(i),i.token=Ts}function Dt(i){i.indent="",i.indent_len=0,i.pending=""}function Qr(i){switch(i){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return!0;default:return!1}}function vi(i){switch(i){case 32:case 58:case 59:case 41:case 44:case 33:case 46:case 63:case 93:case 10:return!0;default:return!1}}function Si(i){return Qr(i)||vi(i)}function Xe(i,S){for(const y of S){if(i.token===sr){switch(y){case" ":i.indent_len+=1;continue;case"	":i.indent_len+=4;continue}let W=ir(i,i.indent_len);i.indent_len=0,i.token=i.tokens[i.len],W>0&&Xe(i," ".repeat(W))}const r=i.pending+y;switch(i.token){case Gt:case pr:case Cn:case gr:case Dn:switch(console.assert(i.text.length===0,"Root should not have any text"),i.pending[0]){case void 0:i.pending=y;continue;case" ":console.assert(i.pending.length===1),i.pending=y,i.indent+=" ",i.indent_len+=1;continue;case"	":console.assert(i.pending.length===1),i.pending=y,i.indent+="	",i.indent_len+=4;continue;case`
`:if(console.assert(i.pending.length===1),i.tokens[i.len]===dn&&i.token===Gt){Be(i),Dt(i),i.pending=y;continue}en(i,i.blockquote_idx),Dt(i),i.blockquote_idx=0,i.fence_start=0,i.pending=y;continue;case"#":switch(y){case"#":if(i.pending.length<6){i.pending=r;continue}break;case" ":ir(i,i.indent_len),Fe(i,Ei(i.pending.length)),Dt(i);continue}break;case">":{const K=wi(i,Cn,i.blockquote_idx+1);K===-1?(en(i,i.blockquote_idx),i.blockquote_idx+=1,i.fence_start=0,Fe(i,Cn)):i.blockquote_idx=K,Dt(i),i.pending=y;continue}case"-":case"*":case"_":if(i.hr_chars===0&&(console.assert(i.pending.length===1,"Pending should be one character"),i.hr_chars=1,i.hr_char=i.pending),i.hr_chars>0){switch(y){case i.hr_char:i.hr_chars+=1,i.pending=r;continue;case" ":i.pending=r;continue;case`
`:if(i.hr_chars<3)break;ir(i,i.indent_len),i.renderer.add_token(i.renderer.data,As),i.renderer.end_token(i.renderer.data),Dt(i),i.hr_chars=0;continue}i.hr_chars=0}if(i.pending[0]!=="_"&&i.pending[1]===" "){Lr(i,Dn),Fr(i,2),Xe(i,r.slice(2));continue}break;case"`":if(i.pending.length<3){if(y==="`"){i.pending=r,i.fence_start=r.length;continue}i.fence_start=0;break}switch(y){case"`":i.pending.length===i.fence_start?(i.pending=r,i.fence_start=r.length):(Fe(i,Br),Dt(i),i.fence_start=0,Xe(i,r));continue;case`
`:{ir(i,i.indent_len),Fe(i,hr),i.pending.length>i.fence_start&&i.renderer.set_attr(i.renderer.data,Is,i.pending.slice(i.fence_start)),Dt(i),i.token=sr;continue}default:i.pending=r;continue}case"+":if(y!==" ")break;Lr(i,Dn),Fr(i,2);continue;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(i.pending[i.pending.length-1]==="."){if(y!==" ")break;Lr(i,gr)&&i.pending!=="1."&&i.renderer.set_attr(i.renderer.data,Ps,i.pending.slice(0,-1)),Fr(i,i.pending.length+1);continue}else{const K=y.charCodeAt(0);if(K===46||Qr(K)){i.pending=r;continue}}break;case"|":en(i,i.blockquote_idx),Fe(i,Wr),Fe(i,_r),i.pending="",Xe(i,y);continue}let W=r;if(i.token===Gt)i.token=i.tokens[i.len],i.renderer.add_token(i.renderer.data,Gt),i.renderer.end_token(i.renderer.data);else if(i.indent_len>=4){let K=0;for(;K<4;K+=1)if(i.indent[K]==="	"){K=K+1;break}W=i.indent.slice(K)+r,Fe(i,mr)}else Fe(i,Br);Dt(i),Xe(i,W);continue;case Wr:if(i.table_state===1)switch(y){case"-":case" ":case"|":case":":i.pending=r;continue;case`
`:i.table_state=2,i.pending="";continue;default:Be(i),i.table_state=0;break}else switch(i.pending){case"|":Fe(i,_r),i.pending="",Xe(i,y);continue;case`
`:Be(i),i.pending="",i.table_state=0,Xe(i,y);continue}break;case _r:switch(i.pending){case"":break;case"|":Fe(i,ur),Be(i),i.pending="",Xe(i,y);continue;case`
`:Be(i),i.table_state=Math.min(i.table_state+1,2),i.pending="",Xe(i,y);continue;default:Fe(i,ur),Xe(i,y);continue}break;case ur:if(i.pending==="|"){Le(i),Be(i),i.pending="",Xe(i,y);continue}break;case mr:switch(r){case`
    `:case`
   	`:case`
  	`:case`
 	`:case`
	`:i.text+=`
`,i.pending="";continue;case`
`:case`
 `:case`
  `:case`
   `:i.pending=r;continue;default:i.pending.length!==0?(Le(i),Be(i),i.pending=y):i.text+=y;continue}case hr:switch(y){case"`":i.pending=r;continue;case`
`:if(r.length===i.fence_start+i.fence_end+1){Le(i),Be(i),i.pending="",i.fence_start=0,i.fence_end=0,i.token=sr;continue}i.token=sr;break;case" ":if(i.pending[0]===`
`){i.pending=r,i.fence_end+=1;continue}break}i.text+=i.pending,i.pending=y,i.fence_end=1;continue;case jr:switch(y){case"`":r.length===i.fence_start+ +(i.pending[0]===" ")?(Le(i),Be(i),i.pending="",i.fence_start=0):i.pending=r;continue;case`
`:i.text+=i.pending,i.pending="",i.token=Gt,i.blockquote_idx=0,Le(i);continue;case" ":i.text+=i.pending,i.pending=y;continue;default:i.text+=r,i.pending="";continue}case Ts:switch(i.pending.length){case 0:if(y!=="[")break;i.pending=r;continue;case 1:if(y!==" "&&y!=="x")break;i.pending=r;continue;case 2:if(y!=="]")break;i.pending=r;continue;case 3:if(y!==" ")break;i.renderer.add_token(i.renderer.data,xs),i.pending[1]==="x"&&i.renderer.set_attr(i.renderer.data,Os,""),i.renderer.end_token(i.renderer.data),i.pending=" ";continue}i.token=i.tokens[i.len],i.pending="",Xe(i,r);continue;case On:case Pn:{let K="*",le=cr;if(i.token===Pn&&(K="_",le=In),K===i.pending){if(Le(i),K===y){Be(i),i.pending="";continue}Fe(i,le),i.pending=y;continue}break}case cr:case In:{let K="*",le=On;switch(i.token===In&&(K="_",le=Pn),i.pending){case K:K===y?i.tokens[i.len-1]===le?i.pending=r:(Le(i),Fe(i,le),i.pending=""):(Le(i),Be(i),i.pending=y);continue;case K+K:const Se=i.token;Le(i),Be(i),Be(i),K!==y?(Fe(i,Se),i.pending=y):i.pending="";continue}break}case Ln:if(r==="~~"){Le(i),Be(i),i.pending="";continue}break;case Pr:y===`
`?(Le(i),Fe(i,Ct),i.pending=""):(i.token=i.tokens[i.len],i.pending[0]==="\\"?i.text+="[":i.text+="$$",i.pending="",Xe(i,y));continue;case Ct:if(r==="\\]"||r==="$$"){Le(i),Be(i),i.pending="";continue}break;case Pt:if(r==="\\)"||i.pending[0]==="$"){Le(i),Be(i),y===")"?i.pending="":i.pending=y;continue}break;case us:r==="http://"||r==="https://"?(Le(i),Fe(i,zr),i.pending=r,i.text=r):"http:/"[i.pending.length]===y||"https:/"[i.pending.length]===y?i.pending=r:(i.token=i.tokens[i.len],Xe(i,y));continue;case un:case lt:if(i.pending==="]"){Le(i),y==="("?i.pending=r:(Be(i),i.pending=y);continue}if(i.pending[0]==="]"&&i.pending[1]==="("){if(y===")"){const K=i.token===un?Hr:ks,le=i.pending.slice(2);i.renderer.set_attr(i.renderer.data,K,le),Be(i),i.pending=""}else i.pending+=y;continue}break;case zr:y===" "||y===`
`||y==="\\"?(i.renderer.set_attr(i.renderer.data,Hr,i.pending),Le(i),Be(i),i.pending=y):(i.text+=y,i.pending=r);continue;case fs:if(r.startsWith("<br")){if(r.length===3||y===" "||y==="/"&&(r.length===4||i.pending[i.pending.length-1]===" ")){i.pending=r;continue}if(y===">"){Le(i),i.token=i.tokens[i.len],i.renderer.add_token(i.renderer.data,Gt),i.renderer.end_token(i.renderer.data),i.pending="";continue}}i.token=i.tokens[i.len],i.text+="<",i.pending=i.pending.slice(1),Xe(i,y);continue}switch(i.pending[0]){case"\\":if(i.token===lt||i.token===Ct||i.token===Pt)break;switch(y){case"(":Le(i),Fe(i,Pt),i.pending="";continue;case"[":i.token=Pr,i.pending=r;continue;case`
`:i.pending=y;continue;default:let W=y.charCodeAt(0);i.pending="",i.text+=Qr(W)||W>=65&&W<=90||W>=97&&W<=122?r:y;continue}case`
`:switch(i.token){case lt:case Ct:case Pt:break;case $r:case Kr:case Yr:case Xr:case Jr:case Zr:Le(i),en(i,i.blockquote_idx),i.blockquote_idx=0,i.pending=y;continue;default:Le(i),i.pending=y,i.token=Gt,i.blockquote_idx=0;continue}break;case"<":if(i.token!==lt&&i.token!==Ct&&i.token!==Pt){Le(i),i.pending=r,i.token=fs;continue}break;case"`":if(i.token===lt)break;y==="`"?(i.fence_start+=1,i.pending=r):(i.fence_start+=1,Le(i),Fe(i,jr),i.text=y===" "||y===`
`?"":y,i.pending="");continue;case"_":case"*":{if(i.token===lt||i.token===Ct||i.token===Pt||i.token===On)break;let W=cr,K=On;const le=i.pending[0];if(le==="_"&&(W=In,K=Pn),i.pending.length===1){if(le===y){i.pending=r;continue}if(y!==" "&&y!==`
`){Le(i),Fe(i,W),i.pending=y;continue}}else{if(le===y){Le(i),Fe(i,K),Fe(i,W),i.pending="";continue}if(y!==" "&&y!==`
`){Le(i),Fe(i,K),i.pending=y;continue}}break}case"~":if(i.token!==lt&&i.token!==Ln){if(i.pending==="~"){if(y==="~"){i.pending=r;continue}}else if(y!==" "&&y!==`
`){Le(i),Fe(i,Ln),i.pending=y;continue}}break;case"$":if(i.token!==lt&&i.token!==Ln&&i.pending==="$")if(y==="$"){i.token=Pr,i.pending=r;continue}else{if(Si(y.charCodeAt(0)))break;Le(i),Fe(i,Pt),i.pending=y;continue}break;case"[":if(i.token!==lt&&i.token!==un&&i.token!==Ct&&i.token!==Pt&&y!=="]"){Le(i),Fe(i,un),i.pending=y;continue}break;case"!":if(i.token!==lt&&y==="["){Le(i),Fe(i,lt),i.pending="";continue}break;case" ":if(i.pending.length===1&&y===" ")continue;break}if(i.token!==lt&&i.token!==un&&i.token!==Ct&&i.token!==Pt&&y==="h"&&(i.pending===" "||i.pending==="")){i.text+=i.pending,i.pending=y,i.token=us;continue}i.text+=i.pending,i.pending=y}Le(i)}function Rs(i){return{add_token:Ai,end_token:xi,add_text:Ti,set_attr:ki,data:{nodes:[i,,,,,],index:0}}}function Ai(i,S){var W;let y=i.nodes[i.index],r;switch(S){case pr:return;case Cn:r=document.createElement("blockquote");break;case Br:r=document.createElement("p");break;case Gt:r=document.createElement("br");break;case As:r=document.createElement("hr");break;case $r:r=document.createElement("h1");break;case Kr:r=document.createElement("h2");break;case Yr:r=document.createElement("h3");break;case Xr:r=document.createElement("h4");break;case Jr:r=document.createElement("h5");break;case Zr:r=document.createElement("h6");break;case cr:case In:r=document.createElement("em");break;case On:case Pn:r=document.createElement("strong");break;case Ln:r=document.createElement("s");break;case jr:r=document.createElement("code");break;case zr:case un:r=document.createElement("a");break;case lt:r=document.createElement("img");break;case Dn:r=document.createElement("ul");break;case gr:r=document.createElement("ol");break;case dn:r=document.createElement("li");break;case xs:let K=r=document.createElement("input");K.type="checkbox",K.disabled=!0;break;case mr:case hr:y=y.appendChild(document.createElement("pre")),r=document.createElement("code");break;case Wr:r=document.createElement("table");break;case _r:switch(y.children.length){case 0:y=y.appendChild(document.createElement("thead"));break;case 1:y=y.appendChild(document.createElement("tbody"));break;default:y=y.children[1]}r=document.createElement("tr");break;case ur:r=document.createElement(((W=y.parentElement)==null?void 0:W.tagName)==="THEAD"?"th":"td");break;case Ct:r=document.createElement("equation-block");break;case Pt:r=document.createElement("equation-inline");break}i.nodes[++i.index]=y.appendChild(r)}function xi(i){i.index-=1}function Ti(i,S){i.nodes[i.index].appendChild(document.createTextNode(S))}function ki(i,S,y){i.nodes[i.index].setAttribute(yi(S),y)}/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:Cs,setPrototypeOf:ps,isFrozen:Ii,getPrototypeOf:Oi,getOwnPropertyDescriptor:Pi}=Object;let{freeze:rt,seal:ft,create:Ds}=Object,{apply:Vr,construct:Gr}=typeof Reflect<"u"&&Reflect;rt||(rt=function(S){return S});ft||(ft=function(S){return S});Vr||(Vr=function(S,y,r){return S.apply(y,r)});Gr||(Gr=function(S,y){return new S(...y)});const or=st(Array.prototype.forEach),Li=st(Array.prototype.lastIndexOf),ms=st(Array.prototype.pop),Sn=st(Array.prototype.push),Fi=st(Array.prototype.splice),fr=st(String.prototype.toLowerCase),Rr=st(String.prototype.toString),hs=st(String.prototype.match),An=st(String.prototype.replace),Ri=st(String.prototype.indexOf),Ci=st(String.prototype.trim),Et=st(Object.prototype.hasOwnProperty),nt=st(RegExp.prototype.test),xn=Di(TypeError);function st(i){return function(S){S instanceof RegExp&&(S.lastIndex=0);for(var y=arguments.length,r=new Array(y>1?y-1:0),W=1;W<y;W++)r[W-1]=arguments[W];return Vr(i,S,r)}}function Di(i){return function(){for(var S=arguments.length,y=new Array(S),r=0;r<S;r++)y[r]=arguments[r];return Gr(i,y)}}function ve(i,S){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fr;ps&&ps(i,null);let r=S.length;for(;r--;){let W=S[r];if(typeof W=="string"){const K=y(W);K!==W&&(Ii(S)||(S[r]=K),W=K)}i[W]=!0}return i}function Ni(i){for(let S=0;S<i.length;S++)Et(i,S)||(i[S]=null);return i}function Nt(i){const S=Ds(null);for(const[y,r]of Cs(i))Et(i,y)&&(Array.isArray(r)?S[y]=Ni(r):r&&typeof r=="object"&&r.constructor===Object?S[y]=Nt(r):S[y]=r);return S}function Tn(i,S){for(;i!==null;){const r=Pi(i,S);if(r){if(r.get)return st(r.get);if(typeof r.value=="function")return st(r.value)}i=Oi(i)}function y(){return null}return y}const gs=rt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Cr=rt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Dr=rt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Mi=rt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Nr=rt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Ui=rt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),bs=rt(["#text"]),ys=rt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Mr=rt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),qs=rt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ar=rt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Bi=ft(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ji=ft(/<%[\w\W]*|[\w\W]*%>/gm),zi=ft(/\$\{[\w\W]*/gm),Wi=ft(/^data-[\-\w.\u00B7-\uFFFF]+$/),Hi=ft(/^aria-[\-\w]+$/),Ns=ft(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Qi=ft(/^(?:\w+script|data):/i),Vi=ft(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ms=ft(/^html$/i),Gi=ft(/^[a-z][.\w]*(-[.\w]+)+$/i);var Es=Object.freeze({__proto__:null,ARIA_ATTR:Hi,ATTR_WHITESPACE:Vi,CUSTOM_ELEMENT:Gi,DATA_ATTR:Wi,DOCTYPE_NAME:Ms,ERB_EXPR:ji,IS_ALLOWED_URI:Ns,IS_SCRIPT_OR_DATA:Qi,MUSTACHE_EXPR:Bi,TMPLIT_EXPR:zi});const kn={element:1,text:3,progressingInstruction:7,comment:8,document:9},$i=function(){return typeof window>"u"?null:window},Ki=function(S,y){if(typeof S!="object"||typeof S.createPolicy!="function")return null;let r=null;const W="data-tt-policy-suffix";y&&y.hasAttribute(W)&&(r=y.getAttribute(W));const K="dompurify"+(r?"#"+r:"");try{return S.createPolicy(K,{createHTML(le){return le},createScriptURL(le){return le}})}catch{return console.warn("TrustedTypes policy "+K+" could not be created."),null}},ws=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Us(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$i();const S=_e=>Us(_e);if(S.version="3.2.6",S.removed=[],!i||!i.document||i.document.nodeType!==kn.document||!i.Element)return S.isSupported=!1,S;let{document:y}=i;const r=y,W=r.currentScript,{DocumentFragment:K,HTMLTemplateElement:le,Node:Se,Element:Ee,NodeFilter:pe,NamedNodeMap:Ie=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:te,DOMParser:ge,trustedTypes:ke}=i,Re=Ee.prototype,ze=Tn(Re,"cloneNode"),dt=Tn(Re,"remove"),Je=Tn(Re,"nextSibling"),it=Tn(Re,"childNodes"),We=Tn(Re,"parentNode");if(typeof le=="function"){const _e=y.createElement("template");_e.content&&_e.content.ownerDocument&&(y=_e.content.ownerDocument)}let De,He="";const{implementation:St,createNodeIterator:Kt,createDocumentFragment:Ae,getElementsByTagName:Ge}=y,{importNode:pt}=r;let $e=ws();S.isSupported=typeof Cs=="function"&&typeof We=="function"&&St&&St.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:pn,ERB_EXPR:tn,TMPLIT_EXPR:nn,DATA_ATTR:Mn,ARIA_ATTR:yr,IS_SCRIPT_OR_DATA:qr,ATTR_WHITESPACE:Un,CUSTOM_ELEMENT:Er}=Es;let{IS_ALLOWED_URI:Bn}=Es,Qe=null;const At=ve({},[...gs,...Cr,...Dr,...Nr,...bs]);let Ue=null;const wr=ve({},[...ys,...Mr,...qs,...ar]);let Ne=Object.seal(Ds(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),xt=null,Yt=null,jn=!0,rn=!0,zn=!1,sn=!0,Lt=!1,on=!0,Tt=!1,mn=!1,hn=!1,Bt=!1,jt=!1,xe=!1,Wn=!0,gn=!1;const mt="user-content-";let an=!0,_t=!1,kt={},ht=null;const ln=ve({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let bn=null;const Hn=ve({},["audio","video","img","source","image","track"]);let gt=null;const Qn=ve({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Xt="http://www.w3.org/1998/Math/MathML",Jt="http://www.w3.org/2000/svg",fe="http://www.w3.org/1999/xhtml";let zt=fe,yn=!1,qn=null;const vr=ve({},[Xt,Jt,fe],Rr);let cn=ve({},["mi","mo","mn","ms","mtext"]),_n=ve({},["annotation-xml"]);const En=ve({},["title","style","font","a","script"]);let c=null;const Sr=["application/xhtml+xml","text/html"],be="text/html";let Ve=null,Wt=null;const Ar=y.createElement("form"),Vn=function(k){return k instanceof RegExp||k instanceof Function},Ht=function(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Wt&&Wt===k)){if((!k||typeof k!="object")&&(k={}),k=Nt(k),c=Sr.indexOf(k.PARSER_MEDIA_TYPE)===-1?be:k.PARSER_MEDIA_TYPE,Ve=c==="application/xhtml+xml"?Rr:fr,Qe=Et(k,"ALLOWED_TAGS")?ve({},k.ALLOWED_TAGS,Ve):At,Ue=Et(k,"ALLOWED_ATTR")?ve({},k.ALLOWED_ATTR,Ve):wr,qn=Et(k,"ALLOWED_NAMESPACES")?ve({},k.ALLOWED_NAMESPACES,Rr):vr,gt=Et(k,"ADD_URI_SAFE_ATTR")?ve(Nt(Qn),k.ADD_URI_SAFE_ATTR,Ve):Qn,bn=Et(k,"ADD_DATA_URI_TAGS")?ve(Nt(Hn),k.ADD_DATA_URI_TAGS,Ve):Hn,ht=Et(k,"FORBID_CONTENTS")?ve({},k.FORBID_CONTENTS,Ve):ln,xt=Et(k,"FORBID_TAGS")?ve({},k.FORBID_TAGS,Ve):Nt({}),Yt=Et(k,"FORBID_ATTR")?ve({},k.FORBID_ATTR,Ve):Nt({}),kt=Et(k,"USE_PROFILES")?k.USE_PROFILES:!1,jn=k.ALLOW_ARIA_ATTR!==!1,rn=k.ALLOW_DATA_ATTR!==!1,zn=k.ALLOW_UNKNOWN_PROTOCOLS||!1,sn=k.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Lt=k.SAFE_FOR_TEMPLATES||!1,on=k.SAFE_FOR_XML!==!1,Tt=k.WHOLE_DOCUMENT||!1,Bt=k.RETURN_DOM||!1,jt=k.RETURN_DOM_FRAGMENT||!1,xe=k.RETURN_TRUSTED_TYPE||!1,hn=k.FORCE_BODY||!1,Wn=k.SANITIZE_DOM!==!1,gn=k.SANITIZE_NAMED_PROPS||!1,an=k.KEEP_CONTENT!==!1,_t=k.IN_PLACE||!1,Bn=k.ALLOWED_URI_REGEXP||Ns,zt=k.NAMESPACE||fe,cn=k.MATHML_TEXT_INTEGRATION_POINTS||cn,_n=k.HTML_INTEGRATION_POINTS||_n,Ne=k.CUSTOM_ELEMENT_HANDLING||{},k.CUSTOM_ELEMENT_HANDLING&&Vn(k.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ne.tagNameCheck=k.CUSTOM_ELEMENT_HANDLING.tagNameCheck),k.CUSTOM_ELEMENT_HANDLING&&Vn(k.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ne.attributeNameCheck=k.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),k.CUSTOM_ELEMENT_HANDLING&&typeof k.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ne.allowCustomizedBuiltInElements=k.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Lt&&(rn=!1),jt&&(Bt=!0),kt&&(Qe=ve({},bs),Ue=[],kt.html===!0&&(ve(Qe,gs),ve(Ue,ys)),kt.svg===!0&&(ve(Qe,Cr),ve(Ue,Mr),ve(Ue,ar)),kt.svgFilters===!0&&(ve(Qe,Dr),ve(Ue,Mr),ve(Ue,ar)),kt.mathMl===!0&&(ve(Qe,Nr),ve(Ue,qs),ve(Ue,ar))),k.ADD_TAGS&&(Qe===At&&(Qe=Nt(Qe)),ve(Qe,k.ADD_TAGS,Ve)),k.ADD_ATTR&&(Ue===wr&&(Ue=Nt(Ue)),ve(Ue,k.ADD_ATTR,Ve)),k.ADD_URI_SAFE_ATTR&&ve(gt,k.ADD_URI_SAFE_ATTR,Ve),k.FORBID_CONTENTS&&(ht===ln&&(ht=Nt(ht)),ve(ht,k.FORBID_CONTENTS,Ve)),an&&(Qe["#text"]=!0),Tt&&ve(Qe,["html","head","body"]),Qe.table&&(ve(Qe,["tbody"]),delete xt.tbody),k.TRUSTED_TYPES_POLICY){if(typeof k.TRUSTED_TYPES_POLICY.createHTML!="function")throw xn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof k.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw xn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');De=k.TRUSTED_TYPES_POLICY,He=De.createHTML("")}else De===void 0&&(De=Ki(ke,W)),De!==null&&typeof He=="string"&&(He=De.createHTML(""));rt&&rt(k),Wt=k}},Ft=ve({},[...Cr,...Dr,...Mi]),Gn=ve({},[...Nr,...Ui]),xr=function(k){let Z=We(k);(!Z||!Z.tagName)&&(Z={namespaceURI:zt,tagName:"template"});const ae=fr(k.tagName),Ce=fr(Z.tagName);return qn[k.namespaceURI]?k.namespaceURI===Jt?Z.namespaceURI===fe?ae==="svg":Z.namespaceURI===Xt?ae==="svg"&&(Ce==="annotation-xml"||cn[Ce]):!!Ft[ae]:k.namespaceURI===Xt?Z.namespaceURI===fe?ae==="math":Z.namespaceURI===Jt?ae==="math"&&_n[Ce]:!!Gn[ae]:k.namespaceURI===fe?Z.namespaceURI===Jt&&!_n[Ce]||Z.namespaceURI===Xt&&!cn[Ce]?!1:!Gn[ae]&&(En[ae]||!Ft[ae]):!!(c==="application/xhtml+xml"&&qn[k.namespaceURI]):!1},ut=function(k){Sn(S.removed,{element:k});try{We(k).removeChild(k)}catch{dt(k)}},Qt=function(k,Z){try{Sn(S.removed,{attribute:Z.getAttributeNode(k),from:Z})}catch{Sn(S.removed,{attribute:null,from:Z})}if(Z.removeAttribute(k),k==="is")if(Bt||jt)try{ut(Z)}catch{}else try{Z.setAttribute(k,"")}catch{}},Vt=function(k){let Z=null,ae=null;if(hn)k="<remove></remove>"+k;else{const je=hs(k,/^[\r\n\t ]+/);ae=je&&je[0]}c==="application/xhtml+xml"&&zt===fe&&(k='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+k+"</body></html>");const Ce=De?De.createHTML(k):k;if(zt===fe)try{Z=new ge().parseFromString(Ce,c)}catch{}if(!Z||!Z.documentElement){Z=St.createDocument(zt,"template",null);try{Z.documentElement.innerHTML=yn?He:Ce}catch{}}const Ke=Z.body||Z.documentElement;return k&&ae&&Ke.insertBefore(y.createTextNode(ae),Ke.childNodes[0]||null),zt===fe?Ge.call(Z,Tt?"html":"body")[0]:Tt?Z.documentElement:Ke},$n=function(k){return Kt.call(k.ownerDocument||k,k,pe.SHOW_ELEMENT|pe.SHOW_COMMENT|pe.SHOW_TEXT|pe.SHOW_PROCESSING_INSTRUCTION|pe.SHOW_CDATA_SECTION,null)},It=function(k){return k instanceof te&&(typeof k.nodeName!="string"||typeof k.textContent!="string"||typeof k.removeChild!="function"||!(k.attributes instanceof Ie)||typeof k.removeAttribute!="function"||typeof k.setAttribute!="function"||typeof k.namespaceURI!="string"||typeof k.insertBefore!="function"||typeof k.hasChildNodes!="function")},Kn=function(k){return typeof Se=="function"&&k instanceof Se};function bt(_e,k,Z){or(_e,ae=>{ae.call(S,k,Z,Wt)})}const Yn=function(k){let Z=null;if(bt($e.beforeSanitizeElements,k,null),It(k))return ut(k),!0;const ae=Ve(k.nodeName);if(bt($e.uponSanitizeElement,k,{tagName:ae,allowedTags:Qe}),on&&k.hasChildNodes()&&!Kn(k.firstElementChild)&&nt(/<[/\w!]/g,k.innerHTML)&&nt(/<[/\w!]/g,k.textContent)||k.nodeType===kn.progressingInstruction||on&&k.nodeType===kn.comment&&nt(/<[/\w]/g,k.data))return ut(k),!0;if(!Qe[ae]||xt[ae]){if(!xt[ae]&&Jn(ae)&&(Ne.tagNameCheck instanceof RegExp&&nt(Ne.tagNameCheck,ae)||Ne.tagNameCheck instanceof Function&&Ne.tagNameCheck(ae)))return!1;if(an&&!ht[ae]){const Ce=We(k)||k.parentNode,Ke=it(k)||k.childNodes;if(Ke&&Ce){const je=Ke.length;for(let et=je-1;et>=0;--et){const yt=ze(Ke[et],!0);yt.__removalCount=(k.__removalCount||0)+1,Ce.insertBefore(yt,Je(k))}}}return ut(k),!0}return k instanceof Ee&&!xr(k)||(ae==="noscript"||ae==="noembed"||ae==="noframes")&&nt(/<\/no(script|embed|frames)/i,k.innerHTML)?(ut(k),!0):(Lt&&k.nodeType===kn.text&&(Z=k.textContent,or([pn,tn,nn],Ce=>{Z=An(Z,Ce," ")}),k.textContent!==Z&&(Sn(S.removed,{element:k.cloneNode()}),k.textContent=Z)),bt($e.afterSanitizeElements,k,null),!1)},Xn=function(k,Z,ae){if(Wn&&(Z==="id"||Z==="name")&&(ae in y||ae in Ar))return!1;if(!(rn&&!Yt[Z]&&nt(Mn,Z))){if(!(jn&&nt(yr,Z))){if(!Ue[Z]||Yt[Z]){if(!(Jn(k)&&(Ne.tagNameCheck instanceof RegExp&&nt(Ne.tagNameCheck,k)||Ne.tagNameCheck instanceof Function&&Ne.tagNameCheck(k))&&(Ne.attributeNameCheck instanceof RegExp&&nt(Ne.attributeNameCheck,Z)||Ne.attributeNameCheck instanceof Function&&Ne.attributeNameCheck(Z))||Z==="is"&&Ne.allowCustomizedBuiltInElements&&(Ne.tagNameCheck instanceof RegExp&&nt(Ne.tagNameCheck,ae)||Ne.tagNameCheck instanceof Function&&Ne.tagNameCheck(ae))))return!1}else if(!gt[Z]){if(!nt(Bn,An(ae,Un,""))){if(!((Z==="src"||Z==="xlink:href"||Z==="href")&&k!=="script"&&Ri(ae,"data:")===0&&bn[k])){if(!(zn&&!nt(qr,An(ae,Un,"")))){if(ae)return!1}}}}}}return!0},Jn=function(k){return k!=="annotation-xml"&&hs(k,Er)},Zn=function(k){bt($e.beforeSanitizeAttributes,k,null);const{attributes:Z}=k;if(!Z||It(k))return;const ae={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ue,forceKeepAttr:void 0};let Ce=Z.length;for(;Ce--;){const Ke=Z[Ce],{name:je,namespaceURI:et,value:yt}=Ke,Zt=Ve(je),wn=yt;let Ye=je==="value"?wn:Ci(wn);if(ae.attrName=Zt,ae.attrValue=Ye,ae.keepAttr=!0,ae.forceKeepAttr=void 0,bt($e.uponSanitizeAttribute,k,ae),Ye=ae.attrValue,gn&&(Zt==="id"||Zt==="name")&&(Qt(je,k),Ye=mt+Ye),on&&nt(/((--!?|])>)|<\/(style|title)/i,Ye)){Qt(je,k);continue}if(ae.forceKeepAttr)continue;if(!ae.keepAttr){Qt(je,k);continue}if(!sn&&nt(/\/>/i,Ye)){Qt(je,k);continue}Lt&&or([pn,tn,nn],tr=>{Ye=An(Ye,tr," ")});const er=Ve(k.nodeName);if(!Xn(er,Zt,Ye)){Qt(je,k);continue}if(De&&typeof ke=="object"&&typeof ke.getAttributeType=="function"&&!et)switch(ke.getAttributeType(er,Zt)){case"TrustedHTML":{Ye=De.createHTML(Ye);break}case"TrustedScriptURL":{Ye=De.createScriptURL(Ye);break}}if(Ye!==wn)try{et?k.setAttributeNS(et,je,Ye):k.setAttribute(je,Ye),It(k)?ut(k):ms(S.removed)}catch{Qt(je,k)}}bt($e.afterSanitizeAttributes,k,null)},Tr=function _e(k){let Z=null;const ae=$n(k);for(bt($e.beforeSanitizeShadowDOM,k,null);Z=ae.nextNode();)bt($e.uponSanitizeShadowNode,Z,null),Yn(Z),Zn(Z),Z.content instanceof K&&_e(Z.content);bt($e.afterSanitizeShadowDOM,k,null)};return S.sanitize=function(_e){let k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=null,ae=null,Ce=null,Ke=null;if(yn=!_e,yn&&(_e="<!-->"),typeof _e!="string"&&!Kn(_e))if(typeof _e.toString=="function"){if(_e=_e.toString(),typeof _e!="string")throw xn("dirty is not a string, aborting")}else throw xn("toString is not a function");if(!S.isSupported)return _e;if(mn||Ht(k),S.removed=[],typeof _e=="string"&&(_t=!1),_t){if(_e.nodeName){const yt=Ve(_e.nodeName);if(!Qe[yt]||xt[yt])throw xn("root node is forbidden and cannot be sanitized in-place")}}else if(_e instanceof Se)Z=Vt("<!---->"),ae=Z.ownerDocument.importNode(_e,!0),ae.nodeType===kn.element&&ae.nodeName==="BODY"||ae.nodeName==="HTML"?Z=ae:Z.appendChild(ae);else{if(!Bt&&!Lt&&!Tt&&_e.indexOf("<")===-1)return De&&xe?De.createHTML(_e):_e;if(Z=Vt(_e),!Z)return Bt?null:xe?He:""}Z&&hn&&ut(Z.firstChild);const je=$n(_t?_e:Z);for(;Ce=je.nextNode();)Yn(Ce),Zn(Ce),Ce.content instanceof K&&Tr(Ce.content);if(_t)return _e;if(Bt){if(jt)for(Ke=Ae.call(Z.ownerDocument);Z.firstChild;)Ke.appendChild(Z.firstChild);else Ke=Z;return(Ue.shadowroot||Ue.shadowrootmode)&&(Ke=pt.call(r,Ke,!0)),Ke}let et=Tt?Z.outerHTML:Z.innerHTML;return Tt&&Qe["!doctype"]&&Z.ownerDocument&&Z.ownerDocument.doctype&&Z.ownerDocument.doctype.name&&nt(Ms,Z.ownerDocument.doctype.name)&&(et="<!DOCTYPE "+Z.ownerDocument.doctype.name+`>
`+et),Lt&&or([pn,tn,nn],yt=>{et=An(et,yt," ")}),De&&xe?De.createHTML(et):et},S.setConfig=function(){let _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ht(_e),mn=!0},S.clearConfig=function(){Wt=null,mn=!1},S.isValidAttribute=function(_e,k,Z){Wt||Ht({});const ae=Ve(_e),Ce=Ve(k);return Xn(ae,Ce,Z)},S.addHook=function(_e,k){typeof k=="function"&&Sn($e[_e],k)},S.removeHook=function(_e,k){if(k!==void 0){const Z=Li($e[_e],k);return Z===-1?void 0:Fi($e[_e],Z,1)[0]}return ms($e[_e])},S.removeHooks=function(_e){$e[_e]=[]},S.removeAllHooks=function(){$e=ws()},S}var Ur=Us();const es=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),Yi=es?Promise.resolve().then(function(){return eo}):Promise.resolve().then(function(){return oo});async function Xi(...i){return(await Yi).default(...i)}es?Promise.resolve().then(function(){return no}):Promise.resolve().then(function(){return lo});es?Promise.resolve().then(function(){return so}):Promise.resolve().then(function(){return _o});const Ji=async i=>{const S=await i.getFile();return S.handle=i,S};var Zi=async(i=[{}])=>{Array.isArray(i)||(i=[i]);const S=[];i.forEach((W,K)=>{S[K]={description:W.description||"Files",accept:{}},W.mimeTypes?W.mimeTypes.map(le=>{S[K].accept[le]=W.extensions||[]}):S[K].accept["*/*"]=W.extensions||[]});const y=await window.showOpenFilePicker({id:i[0].id,startIn:i[0].startIn,types:S,multiple:i[0].multiple||!1,excludeAcceptAllOption:i[0].excludeAcceptAllOption||!1}),r=await Promise.all(y.map(Ji));return i[0].multiple?r:r[0]},eo={__proto__:null,default:Zi};function dr(i){function S(y){if(Object(y)!==y)return Promise.reject(new TypeError(y+" is not an object."));var r=y.done;return Promise.resolve(y.value).then(function(W){return{value:W,done:r}})}return dr=function(y){this.s=y,this.n=y.next},dr.prototype={s:null,n:null,next:function(){return S(this.n.apply(this.s,arguments))},return:function(y){var r=this.s.return;return r===void 0?Promise.resolve({value:y,done:!0}):S(r.apply(this.s,arguments))},throw:function(y){var r=this.s.return;return r===void 0?Promise.reject(y):S(r.apply(this.s,arguments))}},new dr(i)}const Bs=async(i,S,y=i.name,r)=>{const W=[],K=[];var le,Se=!1,Ee=!1;try{for(var pe,Ie=function(te){var ge,ke,Re,ze=2;for(typeof Symbol<"u"&&(ke=Symbol.asyncIterator,Re=Symbol.iterator);ze--;){if(ke&&(ge=te[ke])!=null)return ge.call(te);if(Re&&(ge=te[Re])!=null)return new dr(ge.call(te));ke="@@asyncIterator",Re="@@iterator"}throw new TypeError("Object is not async iterable")}(i.values());Se=!(pe=await Ie.next()).done;Se=!1){const te=pe.value,ge=`${y}/${te.name}`;te.kind==="file"?K.push(te.getFile().then(ke=>(ke.directoryHandle=i,ke.handle=te,Object.defineProperty(ke,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>ge})))):te.kind!=="directory"||!S||r&&r(te)||W.push(Bs(te,S,ge,r))}}catch(te){Ee=!0,le=te}finally{try{Se&&Ie.return!=null&&await Ie.return()}finally{if(Ee)throw le}}return[...(await Promise.all(W)).flat(),...await Promise.all(K)]};var to=async(i={})=>{i.recursive=i.recursive||!1,i.mode=i.mode||"read";const S=await window.showDirectoryPicker({id:i.id,startIn:i.startIn,mode:i.mode});return(await(await S.values()).next()).done?[S]:Bs(S,i.recursive,void 0,i.skipDirectory)},no={__proto__:null,default:to},ro=async(i,S=[{}],y=null,r=!1,W=null)=>{Array.isArray(S)||(S=[S]),S[0].fileName=S[0].fileName||"Untitled";const K=[];let le=null;if(i instanceof Blob&&i.type?le=i.type:i.headers&&i.headers.get("content-type")&&(le=i.headers.get("content-type")),S.forEach((pe,Ie)=>{K[Ie]={description:pe.description||"Files",accept:{}},pe.mimeTypes?(Ie===0&&le&&pe.mimeTypes.push(le),pe.mimeTypes.map(te=>{K[Ie].accept[te]=pe.extensions||[]})):le?K[Ie].accept[le]=pe.extensions||[]:K[Ie].accept["*/*"]=pe.extensions||[]}),y)try{await y.getFile()}catch(pe){if(y=null,r)throw pe}const Se=y||await window.showSaveFilePicker({suggestedName:S[0].fileName,id:S[0].id,startIn:S[0].startIn,types:K,excludeAcceptAllOption:S[0].excludeAcceptAllOption||!1});!y&&W&&W(Se);const Ee=await Se.createWritable();return"stream"in i?(await i.stream().pipeTo(Ee),Se):"body"in i?(await i.body.pipeTo(Ee),Se):(await Ee.write(await i),await Ee.close(),Se)},so={__proto__:null,default:ro},io=async(i=[{}])=>(Array.isArray(i)||(i=[i]),new Promise((S,y)=>{const r=document.createElement("input");r.type="file";const W=[...i.map(K=>K.mimeTypes||[]),...i.map(K=>K.extensions||[])].join();r.multiple=i[0].multiple||!1,r.accept=W||"",r.style.display="none",document.body.append(r),r.addEventListener("cancel",()=>{r.remove(),y(new DOMException("The user aborted a request.","AbortError"))}),r.addEventListener("change",()=>{r.remove(),S(r.multiple?Array.from(r.files):r.files[0])}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),oo={__proto__:null,default:io},ao=async(i=[{}])=>(Array.isArray(i)||(i=[i]),i[0].recursive=i[0].recursive||!1,new Promise((S,y)=>{const r=document.createElement("input");r.type="file",r.webkitdirectory=!0,r.style.display="none",document.body.append(r),r.addEventListener("cancel",()=>{r.remove(),y(new DOMException("The user aborted a request.","AbortError"))}),r.addEventListener("change",()=>{r.remove();let W=Array.from(r.files);i[0].recursive?i[0].recursive&&i[0].skipDirectory&&(W=W.filter(K=>K.webkitRelativePath.split("/").every(le=>!i[0].skipDirectory({name:le,kind:"directory"})))):W=W.filter(K=>K.webkitRelativePath.split("/").length===2),S(W)}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),lo={__proto__:null,default:ao},co=async(i,S={})=>{Array.isArray(S)&&(S=S[0]);const y=document.createElement("a");let r=i;"body"in i&&(r=await async function(le,Se){const Ee=le.getReader(),pe=new ReadableStream({start:ge=>async function ke(){return Ee.read().then(({done:Re,value:ze})=>{if(!Re)return ge.enqueue(ze),ke();ge.close()})}()}),Ie=new Response(pe),te=await Ie.blob();return Ee.releaseLock(),new Blob([te],{type:Se})}(i.body,i.headers.get("content-type"))),y.download=S.fileName||"Untitled",y.href=URL.createObjectURL(await r);const W=()=>{typeof K=="function"&&K()},K=S.legacySetup&&S.legacySetup(W,()=>K(),y);return y.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(y.href),3e4),W()}),y.click(),null},_o={__proto__:null,default:co};"serviceWorker"in navigator&&!location.href.includes("localhost")&&window.addEventListener("load",()=>{navigator.serviceWorker.register(location.href.replace(/\/$/,"")+"/service-worker.js").then(i=>{console.log("Service Worker registered with scope:",i.scope),i.addEventListener("updatefound",()=>location.reload()),i.active&&!navigator.serviceWorker.controller&&location.reload()}).catch(i=>{console.error("Service Worker registration failed:",i)})});const js=document.querySelector("#assistant"),Fn=document.querySelector("#conversation"),uo=document.querySelector(".new-assistant"),fo=document.querySelector(".stop-button"),po=document.querySelector(".file-open-button"),Mt=document.querySelector(".image-preview"),br=document.querySelector(".remove-image-button"),Rn=document.querySelector(".assistant-container"),ts=document.querySelector(".prompt-form"),Ut=document.querySelector(".active-assistant-form"),Nn=document.querySelector(".prompt-input"),ns={};let fn=null,wt=null;fo.addEventListener("click",()=>{fn==null||fn.abort()});const rs=i=>{const S=i.naturalWidth/i.naturalHeight;i.width=i.naturalWidth,i.height=i.naturalHeight,S>1?(i.style.width="100px",i.style.height="auto"):(i.style.width="auto",i.style.height="100px")};br.addEventListener("click",()=>{Mt.hidden=!0,Mt.src="",br.hidden=!0,wt=null});po.addEventListener("click",async()=>{wt=await Xi({multiple:!1,mimeTypes:["image/*"],description:"Image files",startIn:"pictures",excludeAcceptAllOption:!0}),wt&&(br.hidden=!1,Mt.addEventListener("load",()=>{URL.revokeObjectURL(Mt.src),rs(Mt),Mt.hidden=!1}),Mt.src=URL.createObjectURL(wt))});(async function(){if(!("LanguageModel"in self)){document.body.append(" This browser doesn't support the Prompt API.");return}await pi();const{defaultTopK:S,defaultTemperature:y}=await LanguageModel.params(),r=await mi();r.length&&(ts.hidden=!1,Ut.hidden=!1);let W=!0;for(const K of r){const le=await hi(K),Se={initialPrompts:le.initialPrompts,topK:S,temperature:y,conversationSummary:le.conversationSummary,expectedInputs:[{type:"text"},{type:"image"}]},Ee=await self.LanguageModel.create(Se),{inputQuota:pe,inputUsage:Ie}=Ee;ns[K]={assistant:Ee,options:Se};const te=js.content.cloneNode(!0);W&&(te.querySelector("details").open=!0,te.querySelector("input").checked=!0,W=!1),te.querySelector(".conversation-summary").textContent=Se.conversationSummary,te.querySelector("input").value=K;const ge=te.querySelector(".conversation-container");te.querySelector(".tokens-so-far").textContent=Ie,te.querySelector(".tokens-left").textContent=pe-Ee.inputUsage,Rn.append(te);for(const ke of Se.initialPrompts){if(ke.role==="system")continue;const Re=Fn.content.cloneNode(!0),ze=Re.querySelector(".item");ze.classList.add(ke.role);const dt=Rs(ze),Je=Ls(dt);for(const it of ke.content){if(it.type==="image"){const We=document.createElement("p");ze.append(We);const De=document.createElement("img");We.append(De),De.addEventListener("load",()=>{URL.revokeObjectURL(De.src),rs(De)}),De.src=URL.createObjectURL(it.value),ze.append(De)}else it.type==="text"&&Xe(Je,it.value);ge.append(Re)}Fs(Je)}}})();Ut.addEventListener("click",async i=>{const S=i.target.nodeName.toLowerCase();if(!(S!=="summary"&&S!=="button")){if(S==="summary")setTimeout(()=>{const y=Ut.querySelector("details[open] input");y&&(y.checked=!0)},0);else if(i.target.classList.contains("delete-conversation")){const y=i.target.closest("details"),r=y.querySelector('[name="active-assistant"]').value;y.remove(),Ut.querySelectorAll("details").length===0&&(Ut.hidden=!0),await gi(r)}}});const mo=async(i={})=>{const S=crypto.randomUUID();i.initialPrompts||(i.initialPrompts=[{role:"system",content:[{type:"text",value:"You are a helpful assistant."}]}]),i.conversationSummary||(i.conversationSummary="New conversation"),i.expectedInputs||(i.expectedInputs=[{type:"text"},{type:"image"}]);const y=await self.LanguageModel.create(i);return ns[S]={assistant:y,options:i},await Ss(S,i),S};uo.addEventListener("click",async()=>{const i=await mo();Ut.hidden=!1;const S=js.content.cloneNode(!0);S.querySelector(".conversation-summary").textContent="New conversation",S.querySelector("input").value=i,Rn.append(S),Rn.querySelectorAll("details").forEach(y=>y.open=!1),Rn.querySelector(`details:has([value="${i}"])`).open=!0,Rn.querySelector(`[value="${i}"]`).checked=!0,ts.hidden=!1,Nn.value="",Nn.focus()});ts.addEventListener("submit",async i=>{i.preventDefault();const S=Nn.value.trim();if(!S)return;if(!Ut.querySelector("details[open]")){alert("Select an active conversation first.");return}const r=new FormData(Ut).get("active-assistant"),{assistant:W,options:K}=ns[r],le=Ut.querySelector(`input[value="${r}"] + .conversation-container`);let Se="",Ee;if(wt){Ee=Fn.content.cloneNode(!0),Ee.querySelector(".item").classList.add("user");let pe=document.createElement("p");pe.textContent=S,Ee.querySelector(".item").append(pe),le.append(Ee),Ee=Fn.content.cloneNode(!0),Ee.querySelector(".item").classList.add("user"),pe=document.createElement("p");const Ie=document.createElement("img");pe.append(Ie),Ie.addEventListener("load",()=>{URL.revokeObjectURL(Ie.src),rs(Ie)}),Ie.src=URL.createObjectURL(wt),Ee.querySelector(".item").append(pe),le.append(Ee)}else{Ee=Fn.content.cloneNode(!0),Ee.querySelector(".item").classList.add("user");const pe=document.createElement("p");pe.textContent=S,Ee.querySelector(".item").append(pe),le.append(Ee)}try{fn=new AbortController;let pe;wt?pe=W.promptStreaming([{role:"user",content:[{type:"text",value:S},{type:"image",value:wt}]}],{signal:fn.signal}):pe=W.promptStreaming(S,{signal:fn.signal});const Ie=Fn.content.cloneNode(!0),te=Ie.querySelector(".item");te.classList.add("assistant"),le.append(Ie);const ge=Rs(te),ke=Ls(ge);for await(let We of pe)Se+=We,Ur.sanitize(Se),Ur.removed.length&&console.warn(Ur.removed),Xe(ke,We);Fs(ke);const Re=le.closest("details");Re.querySelector(".tokens-so-far").textContent=W.inputUsage,Re.querySelector(".tokens-left").textContent=W.inputQuota-W.inputUsage,wt?K.initialPrompts.push({role:"user",content:[{type:"text",value:S}]},{role:"user",content:[{type:"image",value:wt}]},{role:"assistant",content:[{type:"text",value:Se}]}):K.initialPrompts.push({role:"user",content:[{type:"text",value:S}]},{role:"assistant",content:[{type:"text",value:Se}]}),Nn.value="",wt=null,Mt.hidden=!0,Mt.src="",br.hidden=!0,Nn.focus();const ze=await self.LanguageModel.create(K),dt=ze.promptStreaming("Summarize the conversation as briefly as possible in one short sentence."),Je=Re.querySelector("summary");let it=!0;for await(const We of dt)it&&(Je.textContent=""),Je.append(We),it=!1;ze.destroy(),K.conversationSummary=Je.textContent,await Ss(r,K)}catch(pe){pe.name!=="AbortError"&&console.error(pe.name,pe.message)}});
